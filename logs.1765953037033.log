2025-12-17T04:56:00.000000000Z [inf]  Starting Container
2025-12-17T04:56:01.255592905Z [inf]  üîç Python path: /app/backend
2025-12-17T04:56:01.255600832Z [inf]  üåê Starting Gunicorn on 0.0.0.0:8080...
2025-12-17T04:56:01.255607568Z [inf]  =========================================
2025-12-17T04:56:01.255716192Z [inf]  =========================================
2025-12-17T04:56:01.255723199Z [inf]  üöÄ START.SH SCRIPT IS EXECUTING
2025-12-17T04:56:01.255731018Z [inf]  =========================================
2025-12-17T04:56:01.255738922Z [inf]  üìç Working directory: /app/backend
2025-12-17T04:56:02.417937419Z [err]  [2025-12-17 04:56:01 +0000] [1] [INFO] Starting gunicorn 22.0.0
2025-12-17T04:56:02.417944010Z [err]  [2025-12-17 04:56:01 +0000] [1] [INFO] Listening at: http://0.0.0.0:8080 (1)
2025-12-17T04:56:02.417950008Z [err]  [2025-12-17 04:56:01 +0000] [1] [INFO] Using worker: uvicorn.workers.UvicornWorker
2025-12-17T04:56:02.417956405Z [err]  [2025-12-17 04:56:01 +0000] [3] [INFO] Booting worker with pid: 3
2025-12-17T04:56:02.417962586Z [err]  [2025-12-17 04:56:01 +0000] [4] [INFO] Booting worker with pid: 4
2025-12-17T04:56:02.417970094Z [err]  [2025-12-17 04:56:01 +0000] [5] [INFO] Booting worker with pid: 5
2025-12-17T04:56:02.417977294Z [err]  [2025-12-17 04:56:01 +0000] [6] [INFO] Booting worker with pid: 6
2025-12-17T04:56:21.703837707Z [err]  2025-12-17 04:56:19,228 - server - INFO - ‚úÖ CRM router loaded
2025-12-17T04:56:21.703849882Z [err]  2025-12-17 04:56:19,233 - server - INFO - ‚úÖ CRM router loaded
2025-12-17T04:56:21.703861063Z [err]  2025-12-17 04:56:19,253 - server - INFO - ‚úÖ QC test router loaded
2025-12-17T04:56:21.703875529Z [err]  2025-12-17 04:56:18,804 - server - INFO - ‚úÖ Connection libraries pre-warmed (websockets, httpx, ElevenLabs, Soniox)
2025-12-17T04:56:21.703879010Z [err]  2025-12-17 04:56:18,938 - server - INFO - ‚úÖ QC enhanced router loaded
2025-12-17T04:56:21.703887960Z [err]  2025-12-17 04:56:18,939 - server - INFO - ‚úÖ QC enhanced router loaded
2025-12-17T04:56:21.703892706Z [err]  2025-12-17 04:56:19,010 - server - INFO - ‚úÖ QC agent router loaded
2025-12-17T04:56:21.703903634Z [err]  2025-12-17 04:56:18,942 - server - INFO - ‚úÖ QC enhanced router loaded
2025-12-17T04:56:21.703906225Z [err]  2025-12-17 04:56:19,010 - server - INFO - ‚úÖ QC agent router loaded
2025-12-17T04:56:21.703911803Z [err]  2025-12-17 04:56:19,001 - server - INFO - ‚úÖ CORS configured for origins: ['https://app.li-ai.org', 'https://li-ai.org']
2025-12-17T04:56:21.703918065Z [err]  2025-12-17 04:56:19,050 - server - INFO - ‚úÖ QC learning router loaded
2025-12-17T04:56:21.703920663Z [err]  2025-12-17 04:56:19,009 - server - INFO - ‚úÖ QC agent router loaded
2025-12-17T04:56:21.703928569Z [err]  2025-12-17 04:56:19,053 - server - INFO - ‚úÖ QC learning router loaded
2025-12-17T04:56:21.703936692Z [err]  2025-12-17 04:56:19,057 - server - INFO - ‚úÖ QC learning router loaded
2025-12-17T04:56:21.703943856Z [err]  2025-12-17 04:56:19,090 - server - INFO - ‚úÖ QC enhanced router loaded
2025-12-17T04:56:21.703950454Z [err]  2025-12-17 04:56:19,156 - server - INFO - ‚úÖ QC agent router loaded
2025-12-17T04:56:21.703957407Z [err]  2025-12-17 04:56:19,190 - server - INFO - ‚úÖ QC learning router loaded
2025-12-17T04:56:21.703963979Z [err]  2025-12-17 04:56:19,227 - server - INFO - ‚úÖ CRM router loaded
2025-12-17T04:56:21.704231029Z [err]  2025-12-17 04:56:18,554 - server - INFO - ‚ÑπÔ∏è  RAG service disabled (set ENABLE_RAG=true to enable semantic search)
2025-12-17T04:56:21.704238095Z [err]  2025-12-17 04:56:18,555 - server - INFO - üî• Pre-warming connection libraries...
2025-12-17T04:56:21.704244668Z [err]  2025-12-17 04:56:18,559 - server - INFO - ‚ÑπÔ∏è  RAG service disabled (set ENABLE_RAG=true to enable semantic search)
2025-12-17T04:56:21.704251757Z [err]  2025-12-17 04:56:18,559 - server - INFO - üî• Pre-warming connection libraries...
2025-12-17T04:56:21.704259094Z [err]  2025-12-17 04:56:18,569 - server - INFO - ‚ÑπÔ∏è  RAG service disabled (set ENABLE_RAG=true to enable semantic search)
2025-12-17T04:56:21.704265337Z [err]  2025-12-17 04:56:18,569 - server - INFO - üî• Pre-warming connection libraries...
2025-12-17T04:56:21.704272417Z [err]  2025-12-17 04:56:18,592 - server - INFO - ‚úÖ Connection libraries pre-warmed (websockets, httpx, ElevenLabs, Soniox)
2025-12-17T04:56:21.704279213Z [err]  2025-12-17 04:56:18,599 - server - INFO - ‚úÖ Connection libraries pre-warmed (websockets, httpx, ElevenLabs, Soniox)
2025-12-17T04:56:21.704285017Z [err]  2025-12-17 04:56:18,604 - server - INFO - ‚úÖ Connection libraries pre-warmed (websockets, httpx, ElevenLabs, Soniox)
2025-12-17T04:56:21.704291083Z [err]  2025-12-17 04:56:18,757 - server - INFO - ‚ÑπÔ∏è  RAG service disabled (set ENABLE_RAG=true to enable semantic search)
2025-12-17T04:56:21.704297320Z [err]  2025-12-17 04:56:18,757 - server - INFO - üî• Pre-warming connection libraries...
2025-12-17T04:56:21.704307704Z [err]  2025-12-17 04:56:18,766 - server - INFO - ‚úÖ CORS configured for origins: ['https://app.li-ai.org', 'https://li-ai.org']
2025-12-17T04:56:21.704318617Z [err]  2025-12-17 04:56:18,769 - server - INFO - ‚úÖ CORS configured for origins: ['https://app.li-ai.org', 'https://li-ai.org']
2025-12-17T04:56:21.704325012Z [err]  2025-12-17 04:56:18,776 - server - INFO - ‚úÖ CORS configured for origins: ['https://app.li-ai.org', 'https://li-ai.org']
2025-12-17T04:56:21.711900027Z [err]  2025-12-17 04:56:19,405 - server - INFO - ‚úÖ Agent test router loaded
2025-12-17T04:56:21.711912541Z [err]  2025-12-17 04:56:19,415 - server - INFO - ‚úÖ Director Studio router loaded
2025-12-17T04:56:21.711920885Z [err]  2025-12-17 04:56:19,416 - server - INFO - ‚úÖ QC agents orchestrator loaded
2025-12-17T04:56:21.711928491Z [err]  [2025-12-17 04:56:19 +0000] [5] [INFO] Started server process [5]
2025-12-17T04:56:21.711935686Z [err]  [2025-12-17 04:56:19 +0000] [5] [INFO] Waiting for application startup.
2025-12-17T04:56:21.711947668Z [err]  2025-12-17 04:56:19,447 - server - INFO - üéµ Pre-generating comfort noise file on startup (5 minutes for seamless loops)...
2025-12-17T04:56:21.712054051Z [err]  2025-12-17 04:56:19,254 - server - INFO - ‚úÖ QC test router loaded
2025-12-17T04:56:21.712060314Z [err]  2025-12-17 04:56:19,255 - server - INFO - ‚úÖ QC test router loaded
2025-12-17T04:56:21.712067299Z [err]  2025-12-17 04:56:19,285 - server - INFO - ‚úÖ Agent test router loaded
2025-12-17T04:56:21.712075514Z [err]  2025-12-17 04:56:19,286 - server - INFO - ‚úÖ Agent test router loaded
2025-12-17T04:56:21.712082153Z [err]  2025-12-17 04:56:19,289 - server - INFO - ‚úÖ Agent test router loaded
2025-12-17T04:56:21.712104287Z [err]  2025-12-17 04:56:19,301 - server - INFO - ‚úÖ Director Studio router loaded
2025-12-17T04:56:21.712114159Z [err]  2025-12-17 04:56:19,301 - server - INFO - ‚úÖ QC agents orchestrator loaded
2025-12-17T04:56:21.712120395Z [err]  2025-12-17 04:56:19,304 - server - INFO - ‚úÖ Director Studio router loaded
2025-12-17T04:56:21.712127316Z [err]  2025-12-17 04:56:19,304 - server - INFO - ‚úÖ QC agents orchestrator loaded
2025-12-17T04:56:21.712133646Z [err]  2025-12-17 04:56:19,309 - server - INFO - ‚úÖ Director Studio router loaded
2025-12-17T04:56:21.712140426Z [err]  2025-12-17 04:56:19,309 - server - INFO - ‚úÖ QC agents orchestrator loaded
2025-12-17T04:56:21.712147844Z [err]  [2025-12-17 04:56:19 +0000] [6] [INFO] Started server process [6]
2025-12-17T04:56:21.712154941Z [err]  [2025-12-17 04:56:19 +0000] [6] [INFO] Waiting for application startup.
2025-12-17T04:56:21.712166545Z [err]  [2025-12-17 04:56:19 +0000] [4] [INFO] Started server process [4]
2025-12-17T04:56:21.712173119Z [err]  [2025-12-17 04:56:19 +0000] [4] [INFO] Waiting for application startup.
2025-12-17T04:56:21.712179224Z [err]  [2025-12-17 04:56:19 +0000] [3] [INFO] Started server process [3]
2025-12-17T04:56:21.712186316Z [err]  [2025-12-17 04:56:19 +0000] [3] [INFO] Waiting for application startup.
2025-12-17T04:56:21.712198846Z [err]  2025-12-17 04:56:19,340 - server - INFO - üéµ Pre-generating comfort noise file on startup (5 minutes for seamless loops)...
2025-12-17T04:56:21.712237701Z [err]  2025-12-17 04:56:19,340 - server - INFO - üéµ Pre-generating comfort noise file on startup (5 minutes for seamless loops)...
2025-12-17T04:56:21.712248390Z [err]  2025-12-17 04:56:19,342 - server - INFO - üéµ Pre-generating comfort noise file on startup (5 minutes for seamless loops)...
2025-12-17T04:56:21.712258963Z [err]  2025-12-17 04:56:19,375 - server - INFO - ‚úÖ CRM router loaded
2025-12-17T04:56:21.712264158Z [err]  2025-12-17 04:56:19,383 - server - INFO - ‚úÖ QC test router loaded
2025-12-17T04:56:30.581350641Z [err]  2025-12-17 04:56:29,570 - comfort_noise - INFO - Generated continuous comfort noise: /tmp/comfort_noise_continuous.mp3 (300s, white=-83dB, hum=-93dB)
2025-12-17T04:56:30.581356355Z [err]  2025-12-17 04:56:29,580 - server - INFO - ‚úÖ Comfort noise file ready for immediate use
2025-12-17T04:56:30.581362660Z [err]  [2025-12-17 04:56:29 +0000] [3] [INFO] Application startup complete.
2025-12-17T04:56:30.581368198Z [err]  2025-12-17 04:56:29,968 - comfort_noise - INFO - Generated continuous comfort noise: /tmp/comfort_noise_continuous.mp3 (300s, white=-83dB, hum=-93dB)
2025-12-17T04:56:30.581373509Z [err]  2025-12-17 04:56:29,979 - server - INFO - ‚úÖ Comfort noise file ready for immediate use
2025-12-17T04:56:30.581379225Z [err]  [2025-12-17 04:56:29 +0000] [6] [INFO] Application startup complete.
2025-12-17T04:56:30.581386559Z [err]  2025-12-17 04:56:30,029 - comfort_noise - INFO - Generated continuous comfort noise: /tmp/comfort_noise_continuous.mp3 (300s, white=-83dB, hum=-93dB)
2025-12-17T04:56:30.581392389Z [err]  2025-12-17 04:56:30,040 - server - INFO - ‚úÖ Comfort noise file ready for immediate use
2025-12-17T04:56:30.581397833Z [err]  [2025-12-17 04:56:30 +0000] [4] [INFO] Application startup complete.
2025-12-17T04:56:30.581404356Z [err]  2025-12-17 04:56:30,044 - comfort_noise - INFO - Generated continuous comfort noise: /tmp/comfort_noise_continuous.mp3 (300s, white=-83dB, hum=-93dB)
2025-12-17T04:56:30.581410963Z [err]  2025-12-17 04:56:30,044 - server - INFO - ‚úÖ Comfort noise file ready for immediate use
2025-12-17T04:56:30.581418549Z [err]  [2025-12-17 04:56:30 +0000] [5] [INFO] Application startup complete.
2025-12-17T05:20:29.107091962Z [inf]  100.64.0.2:42824 - "GET /api/auth/me HTTP/1.1" 401
2025-12-17T05:27:33.948756895Z [inf]  100.64.0.3:14336 - "GET /api/auth/me HTTP/1.1" 401
2025-12-17T05:30:37.417718043Z [inf]  100.64.0.4:25086 - "GET /api/auth/me HTTP/1.1" 401
2025-12-17T05:32:09.135077071Z [inf]  100.64.0.4:50536 - "GET /api/auth/me HTTP/1.1" 401
2025-12-17T05:48:42.546431616Z [inf]  100.64.0.3:44672 - "GET /api/auth/me HTTP/1.1" 401
2025-12-17T05:56:59.856260655Z [inf]  100.64.0.5:27116 - "GET /api/auth/me HTTP/1.1" 401
2025-12-17T06:18:02.186662072Z [inf]  100.64.0.6:10882 - "GET /api/auth/me HTTP/1.1" 401
2025-12-17T06:18:03.208436047Z [inf]  100.64.0.5:11456 - "OPTIONS /api/auth/login HTTP/1.1" 200
2025-12-17T06:18:53.515865368Z [err]  2025-12-17 06:18:50,625 - telnyx_service - INFO - ‚úÖ Call initiated: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:18:53.515873927Z [err]  2025-12-17 06:18:50,719 - server - INFO - üìù Created call log: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:18:53.515879464Z [err]  2025-12-17 06:18:50,728 - redis_service - INFO - üì¶ Stored call data in Redis: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ (TTL: 3600s)
2025-12-17T06:18:53.515913402Z [inf]  100.64.0.6:10882 - "POST /api/auth/login HTTP/1.1" 200
2025-12-17T06:18:53.515919938Z [inf]  100.64.0.6:10882 - "GET /api/agents HTTP/1.1" 200
2025-12-17T06:18:53.515926843Z [inf]  100.64.0.5:11456 - "OPTIONS /api/telnyx/call/outbound HTTP/1.1" 200
2025-12-17T06:18:53.515934120Z [err]  2025-12-17 06:18:49,537 - server - INFO - üåê Created WebSocket stream URL: wss://api.li-ai.org/api/telnyx/audio-stream
2025-12-17T06:18:53.515952411Z [err]  2025-12-17 06:18:49,758 - telnyx_service - INFO - ü§ñ Enabling AMD (premium mode)
2025-12-17T06:18:53.515953655Z [err]  2025-12-17 06:18:49,637 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2025-12-17T06:18:53.515959912Z [err]  2025-12-17 06:18:49,758 - telnyx_service - INFO - üåê Adding streaming parameters: wss://api.li-ai.org/api/telnyx/audio-stream
2025-12-17T06:18:53.515966021Z [err]  2025-12-17 06:18:50,622 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls "HTTP/1.1 200 OK"
2025-12-17T06:18:53.515983086Z [err]  2025-12-17 06:18:49,724 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2025-12-17T06:18:53.515993090Z [err]  2025-12-17 06:18:49,757 - telnyx_service - INFO - Telnyx service initialized with connection: 2777245537294877821
2025-12-17T06:18:53.515999979Z [err]  2025-12-17 06:18:49,758 - telnyx_service - INFO - üìû Initiating outbound call from +14048000152 to +17708336397
2025-12-17T06:18:53.518861596Z [err]  2025-12-17 06:18:50,728 - server - INFO - üì¶ Call data stored in Redis and memory
2025-12-17T06:18:53.518867945Z [err]  2025-12-17 06:18:50,729 - server - INFO - üìû Outbound call initiated: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:18:53.518875143Z [inf]  100.64.0.6:10882 - "POST /api/telnyx/call/outbound HTTP/1.1" 200
2025-12-17T06:18:53.518882609Z [err]  2025-12-17 06:18:50,999 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2025-12-17T06:18:53.518891374Z [err]  2025-12-17 06:18:50,999 - server - INFO - üì® Full payload: {'data': {'event_type': 'call.initiated', 'id': '406db888-c188-44b7-9a98-c0192c831d88', 'occurred_at': '2025-12-17T06:18:50.420558Z', 'payload': {'call_control_id': 'v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ', 'call_leg_id': '40dc04a6-db10-11f0-8548-02420aef981f', 'call_session_id': '40d90d0a-db10-11f0-9ba9-02420aef981f', 'client_state': None, 'connection_id': '2777245537294877821', 'direction': 'outgoing', 'from': '+14048000152', 'state': 'bridging', 'to': '+17708336397'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2025-12-17T06:18:53.518898493Z [err]  2025-12-17 06:18:50,999 - server - INFO - üéØ Event type: call.initiated, Call ID: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:18:53.518904968Z [err]  2025-12-17 06:18:50,999 - server - INFO - üì® ================================================
2025-12-17T06:18:53.518911548Z [inf]  100.64.0.2:45270 - "POST /api/telnyx/webhook HTTP/1.1" 200
2025-12-17T06:18:53.518917675Z [err]  2025-12-17 06:18:50,999 - server - INFO - üìû Call initiated - Direction: outgoing, From: +14048000152, To: +17708336397
2025-12-17T06:18:53.518925129Z [err]  2025-12-17 06:18:51,011 - server - INFO - üîåüîåüîå WEBSOCKET CONNECTION ATTEMPT
2025-12-17T06:18:53.518931769Z [err]  2025-12-17 06:18:51,011 - server - INFO -    Client: Address(host='100.64.0.4', port=23508)
2025-12-17T06:18:53.522744935Z [err]  2025-12-17 06:18:51,011 - server - INFO -    Headers: {'host': 'api.li-ai.org', 'user-agent': 'telnyx-websocket', 'connection': 'Upgrade', 'sec-websocket-key': 'Psnaem/IW/04LwQvVlAEmg==', 'sec-websocket-version': '13', 'upgrade': 'websocket', 'x-forwarded-for': '192.76.120.151', 'x-forwarded-host': 'api.li-ai.org', 'x-forwarded-proto': 'https', 'x-railway-edge': 'railway/us-east4-eqdc4a', 'x-railway-request-id': '9bMjWitXRvGDMaa4PvyhXg', 'x-real-ip': '192.76.120.151', 'x-request-start': '1765952330881', 'accept-encoding': 'gzip'}
2025-12-17T06:18:53.522750691Z [err]  2025-12-17 06:18:51,011 - server - INFO -    Path: /api/telnyx/audio-stream
2025-12-17T06:18:53.522759257Z [err]  2025-12-17 06:18:51,012 - server - INFO - üîå Incoming Telnyx WebSocket connection
2025-12-17T06:18:53.522766227Z [err]  [2025-12-17 06:18:51 +0000] [5] [INFO] ('100.64.0.4', 23508) - "WebSocket /api/telnyx/audio-stream" [accepted]
2025-12-17T06:18:53.522772914Z [err]  2025-12-17 06:18:51,012 - server - INFO - ‚úÖ WebSocket accepted, waiting for Telnyx events
2025-12-17T06:18:53.522778774Z [err]  [2025-12-17 06:18:51 +0000] [5] [INFO] connection open
2025-12-17T06:18:53.522785101Z [err]  2025-12-17 06:18:51,154 - server - INFO - üì¨ Received Telnyx event: connected
2025-12-17T06:18:53.522792200Z [err]  2025-12-17 06:18:51,154 - server - INFO - üìû Telnyx connected event received, waiting for 'start'...
2025-12-17T06:18:54.447630303Z [err]  2025-12-17 06:18:54,076 - server - INFO - üé¨ Stream started for call: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:18:54.447641326Z [err]  2025-12-17 06:18:54,085 - redis_service - INFO - üì• Retrieved call data from Redis: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:18:54.447656866Z [err]  2025-12-17 06:18:54,076 - server - INFO - üì¨ Received Telnyx event: start
2025-12-17T06:18:54.447679570Z [err]  2025-12-17 06:18:54,087 - server - INFO - ‚úÖ Call data found after 0s wait
2025-12-17T06:18:54.447687612Z [err]  2025-12-17 06:18:54,087 - server - INFO - ‚è≥ Session not found locally, waiting briefly for webhook...
2025-12-17T06:18:54.491971937Z [err]  2025-12-17 06:18:54,486 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2025-12-17T06:18:54.491980734Z [err]  2025-12-17 06:18:54,486 - server - INFO - üì® Full payload: {'data': {'event_type': 'call.answered', 'id': 'ef99e087-f91b-494d-a120-c82c06ece96b', 'occurred_at': '2025-12-17T06:18:53.860566Z', 'payload': {'call_control_id': 'v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ', 'call_leg_id': '40dc04a6-db10-11f0-8548-02420aef981f', 'call_session_id': '40d90d0a-db10-11f0-9ba9-02420aef981f', 'client_state': None, 'codec': 'PCMU', 'connection_id': '2777245537294877821', 'from': '+14048000152', 'sampling_rate': 8000, 'start_time': '2025-12-17T06:18:50.420558Z', 'to': '+17708336397'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2025-12-17T06:18:54.491987176Z [err]  2025-12-17 06:18:54,486 - server - INFO - üéØ Event type: call.answered, Call ID: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:18:54.491993838Z [err]  2025-12-17 06:18:54,486 - server - INFO - üì® ================================================
2025-12-17T06:18:54.491999749Z [err]  2025-12-17 06:18:54,486 - server - INFO - ‚úÖ Call answered: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:18:54.501738686Z [err]  2025-12-17 06:18:54,497 - redis_service - INFO - üì• Retrieved call data from Redis: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:18:54.507186386Z [err]  2025-12-17 06:18:54,499 - server - INFO - ‚úÖ Found call in Redis (multi-worker state sharing working)
2025-12-17T06:18:54.507193911Z [err]  2025-12-17 06:18:54,499 - server - INFO - üìû Phone numbers added to session: from=+14048000152, to=+17708336397
2025-12-17T06:18:55.385958190Z [err]  2025-12-17 06:18:54,814 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2025-12-17T06:18:55.385968017Z [err]  2025-12-17 06:18:54,832 - calling_service - INFO - ‚úÖ LLM client pre-warmed in 105ms
2025-12-17T06:18:55.385974428Z [err]  2025-12-17 06:18:54,803 - server - INFO - üéØ Event type: streaming.started, Call ID: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:18:55.385981995Z [err]  2025-12-17 06:18:54,836 - server - INFO - ‚úÖ Stored Telnyx WebSocket in call_data for audio streaming
2025-12-17T06:18:55.385987064Z [err]  2025-12-17 06:18:54,832 - server - INFO - ‚úÖ Session created in WebSocket worker
2025-12-17T06:18:55.385990182Z [err]  2025-12-17 06:18:54,803 - server - INFO - üì® ================================================
2025-12-17T06:18:55.385995961Z [err]  2025-12-17 06:18:54,836 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found to update for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:18:55.386001163Z [inf]  100.64.0.7:43418 - "POST /api/telnyx/webhook HTTP/1.1" 200
2025-12-17T06:18:55.386015211Z [err]  2025-12-17 06:18:54,832 - server - INFO - üìû Call data loaded, starting SONIOX connection...
2025-12-17T06:18:55.386020089Z [err]  2025-12-17 06:18:54,836 - server - INFO - ‚úÖ Initialized call_states for v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ with session reference
2025-12-17T06:18:55.386057653Z [err]  2025-12-17 06:18:54,588 - server - INFO - ‚ö†Ô∏è Session still not found after wait, will create in worker
2025-12-17T06:18:55.386065266Z [err]  2025-12-17 06:18:54,588 - server - WARNING - ‚ö†Ô∏è Session not found after waiting, creating in WebSocket worker...
2025-12-17T06:18:55.386071719Z [err]  2025-12-17 06:18:54,595 - redis_service - INFO - üì• Retrieved call data from Redis: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:18:55.386082416Z [err]  2025-12-17 06:18:54,596 - server - INFO - üìù Creating session with agent_id=bbeda238-e8d9-4d8c-b93b-1b7694581adb, user_id=dcafa642-6136-4096-b77d-a4cb99a62651
2025-12-17T06:18:55.386091836Z [err]  2025-12-17 06:18:54,596 - calling_service - INFO - üîç Checking KB for agent bbeda238-e8d9-4d8c-b93b-1b7694581adb...
2025-12-17T06:18:55.386099860Z [err]  2025-12-17 06:18:54,702 - calling_service - INFO - üîç KB count query completed: 4 items
2025-12-17T06:18:55.386108986Z [err]  2025-12-17 06:18:54,702 - calling_service - INFO - üìö Agent bbeda238-e8d9-4d8c-b93b-1b7694581adb has 4 KB items - Smart routing enabled (RAG on demand)
2025-12-17T06:18:55.386119497Z [err]  2025-12-17 06:18:54,724 - calling_service - INFO - üìã Built cached system prompt: 4424 chars (global) + 1402 chars (technical)
2025-12-17T06:18:55.386127682Z [err]  2025-12-17 06:18:54,724 - calling_service - INFO - üìö KB available - will use smart routing (simple chat: NO KB, factual: WITH KB)
2025-12-17T06:18:55.386139241Z [err]  2025-12-17 06:18:54,726 - calling_service - INFO - üî• Pre-warming LLM client (grok)...
2025-12-17T06:18:55.386146335Z [err]  2025-12-17 06:18:54,803 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2025-12-17T06:18:55.386155425Z [err]  2025-12-17 06:18:54,803 - server - INFO - üì® Full payload: {'data': {'event_type': 'streaming.started', 'id': '0612ea56-53c8-49fd-8359-95a876904c17', 'occurred_at': '2025-12-17T06:18:54.320567Z', 'payload': {'call_control_id': 'v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ', 'call_leg_id': '40dc04a6-db10-11f0-8548-02420aef981f', 'call_session_id': '40d90d0a-db10-11f0-9ba9-02420aef981f', 'client_state': None, 'connection_id': '2777245537294877821', 'stream_id': '239da044-9a08-41a2-985a-8280beae7ac9', 'stream_params': {'stream_track': 'inbound', 'stream_url': 'wss://api.li-ai.org/api/telnyx/audio-stream'}, 'stream_type': 'websocket'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2025-12-17T06:18:55.386187592Z [err]  2025-12-17 06:18:54,938 - server - INFO - üîë Using user's Soniox API key (first 10 chars): b999f22d7b...
2025-12-17T06:18:55.428562309Z [err]  2025-12-17 06:18:55,424 - server - INFO - ‚úÖ Call log updated
2025-12-17T06:18:55.428576627Z [err]  2025-12-17 06:18:55,424 - server - INFO - üîß Getting Telnyx API keys for user: dcafa642-6136-4096-b77d-a4cb99a62651
2025-12-17T06:18:55.465807431Z [err]  2025-12-17 06:18:55,460 - soniox_service - INFO - ‚úÖ Connected to Soniox Real-Time STT
2025-12-17T06:18:55.465819319Z [err]  2025-12-17 06:18:55,461 - soniox_service - INFO - ‚öôÔ∏è  Config: model=stt-rt-v3, format=mulaw, rate=8000Hz, channels=1
2025-12-17T06:18:55.465826892Z [err]  2025-12-17 06:18:55,461 - soniox_service - INFO - ‚öôÔ∏è  Endpoint detection: True, Speaker diarization: False
2025-12-17T06:18:55.497485514Z [err]  2025-12-17 06:18:55,491 - telnyx_service - INFO - Telnyx service initialized with connection: 2777245537294877821
2025-12-17T06:18:55.497496836Z [err]  2025-12-17 06:18:55,491 - dead_air_monitor - INFO - üîá Dead air monitoring started for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:18:55.497505185Z [err]  2025-12-17 06:18:55,493 - server - INFO - ‚úÖ Started forwarding audio (8kHz mulaw ‚Üí Soniox, NO BUFFERING)
2025-12-17T06:18:55.524036361Z [err]  2025-12-17 06:18:55,519 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2025-12-17T06:18:56.227271992Z [err]  2025-12-17 06:18:55,612 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2025-12-17T06:18:56.227280641Z [err]  2025-12-17 06:18:55,613 - server - INFO - üîß Creating Telnyx service with user's keys...
2025-12-17T06:18:56.227289760Z [err]  2025-12-17 06:18:55,648 - telnyx_service - INFO - Telnyx service initialized with connection: 2777245537294877821
2025-12-17T06:18:56.227298253Z [err]  2025-12-17 06:18:55,937 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ/actions/playback_start "HTTP/1.1 200 OK"
2025-12-17T06:18:56.227307049Z [err]  2025-12-17 06:18:55,940 - telnyx_service - INFO - ‚úÖ Playing audio from URL, playback_id: i-nuZWF9nw (loop=True, overlay=True)
2025-12-17T06:18:56.227314760Z [err]  2025-12-17 06:18:55,940 - server - WARNING - ‚ö†Ô∏è Failed to start comfort noise: 'v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ'
2025-12-17T06:18:56.227321857Z [err]  2025-12-17 06:18:55,940 - telnyx_service - INFO - üéôÔ∏è Starting recording: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:18:56.444465084Z [err]  2025-12-17 06:18:56,402 - server - INFO - üî§ RAW TOKENS: ["Hell"?]
2025-12-17T06:18:56.444471135Z [err]  2025-12-17 06:18:56,406 - calling_service - INFO - üîä Silence timer reset for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ (user started speaking)
2025-12-17T06:18:56.444477733Z [err]  2025-12-17 06:18:56,406 - calling_service - INFO - üë§ User started speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:18:56.444488099Z [err]  2025-12-17 06:18:56,406 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Hell' | Generating: False
2025-12-17T06:18:57.267751003Z [err]  2025-12-17 06:18:56,670 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:sz6RRi_Qx4zS1QlC4... (active sessions: [])
2025-12-17T06:18:57.267760855Z [err]  2025-12-17 06:18:56,670 - server - INFO - ‚úÖ Agent SILENT - User said 2 word(s): 'Hell o.' - Processing...
2025-12-17T06:18:57.267850950Z [err]  2025-12-17 06:18:56,681 - server - INFO - üé§ Endpoint detected by Soniox - processing transcript: Hell o.
2025-12-17T06:18:57.267858954Z [err]  2025-12-17 06:18:56,681 - calling_service - INFO - üë§ User stopped speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:18:57.268095884Z [err]  2025-12-17 06:18:56,668 - server - INFO - üî§ RAW TOKENS: ["Hell"‚úì, "o."‚úì, "<end>"‚úì]
2025-12-17T06:18:57.268101744Z [err]  2025-12-17 06:18:56,668 - server - INFO - üéØ Endpoint detected: <end> token received
2025-12-17T06:18:57.268107727Z [err]  2025-12-17 06:18:56,668 - server - INFO - üì• FINAL TOKENS: 'Hell o.' (2 tokens)
2025-12-17T06:18:57.268114648Z [err]  2025-12-17 06:18:56,668 - server - INFO - üé§ Soniox final transcript: 'Hell o.'
2025-12-17T06:18:57.268120180Z [err]  2025-12-17 06:18:56,669 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:sz6RRi_Qx4zS1QlC4... (active sessions: [])
2025-12-17T06:18:57.268126047Z [err]  2025-12-17 06:18:56,669 - server - INFO - üîç FILTER CHECK: words=2, is_filler=False, is_garbled=False, tts_speaking=False, time_until_done=0.0s, generating=False, playbacks=0, is_active=False
2025-12-17T06:18:57.268131854Z [err]  2025-12-17 06:18:56,669 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:sz6RRi_Qx4zS1QlC4... (active sessions: [])
2025-12-17T06:18:57.268138481Z [err]  2025-12-17 06:18:56,669 - server - INFO - üöÄ Spawned tracked background task for endpoint processing
2025-12-17T06:18:57.268146647Z [err]  2025-12-17 06:18:56,669 - server - INFO - ‚è±Ô∏è [06:18:56.669] üìù FINAL TRANSCRIPT RECEIVED: 'Hell o.'
2025-12-17T06:18:57.268153135Z [err]  2025-12-17 06:18:56,669 - server - INFO - ‚è±Ô∏è [06:18:56.669] STT endpoint detection latency: 18ms
2025-12-17T06:18:57.268160046Z [err]  2025-12-17 06:18:56,669 - server - INFO - ‚è±Ô∏è [06:18:56.669] üé§ USER STOPPED SPEAKING - Beginning processing pipeline
2025-12-17T06:18:57.268167354Z [err]  2025-12-17 06:18:56,670 - redis_service - INFO - üì¶ Stored call data in Redis: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ (TTL: 3600s)
2025-12-17T06:18:57.268173386Z [err]  2025-12-17 06:18:56,670 - server - INFO - üë§ User has spoken - aiSpeaksAfterSilence timer cancelled if pending
2025-12-17T06:18:57.268232786Z [err]  2025-12-17 06:18:56,681 - server - INFO - ‚è±Ô∏è [TIMING] STT_START: User last audio packet received
2025-12-17T06:18:57.268247658Z [err]  2025-12-17 06:18:56,681 - server - INFO - ‚è±Ô∏è [TIMING] STT_END: Endpoint detected at T+10ms
2025-12-17T06:18:57.268256692Z [err]  2025-12-17 06:18:56,681 - server - INFO - ‚è±Ô∏è [TIMING] STT_LATENCY: 10ms (Soniox model: stt-rt-v3)
2025-12-17T06:18:57.268267331Z [err]  2025-12-17 06:18:56,681 - server - INFO - ‚è±Ô∏è  USER STOPPED SPEAKING at T=0ms
2025-12-17T06:18:57.268273939Z [err]  2025-12-17 06:18:56,681 - server - INFO - üéôÔ∏è Agent generating response - interruption detection active
2025-12-17T06:18:57.268280929Z [err]  2025-12-17 06:18:56,681 - calling_service - INFO - ü§ñ Agent started speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:18:57.268288056Z [err]  2025-12-17 06:18:56,772 - server - INFO - üìù Saved user transcript to database
2025-12-17T06:18:57.268296087Z [err]  2025-12-17 06:18:56,772 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:sz6RRi_Qx4zS1QlC4... (active sessions: [])
2025-12-17T06:18:57.268304474Z [err]  2025-12-17 06:18:56,772 - calling_service - INFO - ‚è±Ô∏è [06:18:56.772] üì• process_user_input() ENTRY - text: 'Hell o....'
2025-12-17T06:18:57.274656750Z [err]  2025-12-17 06:18:56,772 - calling_service - INFO - ‚è±Ô∏è [06:18:56.772] ‚è© About to call _process_call_flow_streaming()
2025-12-17T06:18:57.275398242Z [err]  2025-12-17 06:18:56,772 - calling_service - INFO - ‚è±Ô∏è [06:18:56.772] üîÄ Agent type: call_flow, calling flow processor...
2025-12-17T06:18:57.275433904Z [err]  2025-12-17 06:18:56,772 - calling_service - INFO - ‚è±Ô∏è [06:18:56.772] üîÄ _process_call_flow_streaming() ENTRY
2025-12-17T06:18:57.275444520Z [err]  2025-12-17 06:18:56,772 - calling_service - INFO - Flow processing - History length: 1, Is first: True
2025-12-17T06:18:57.275452479Z [err]  2025-12-17 06:18:56,772 - calling_service - INFO - ‚è±Ô∏è [06:18:56.772] ‚úÖ Node selected, about to process content...
2025-12-17T06:18:57.275459284Z [err]  2025-12-17 06:18:56,772 - calling_service - INFO - üîß Replaced {{now}} with Wednesday, December 17, 2025 at 1:18 AM EST in content
2025-12-17T06:18:57.275470108Z [err]  2025-12-17 06:18:56,772 - calling_service - INFO - üîß Replaced {{customer_name}} with Kendrick in content
2025-12-17T06:18:57.275477114Z [err]  2025-12-17 06:18:56,772 - calling_service - INFO - üîß Replaced {{callerName}} with  in content
2025-12-17T06:18:57.275484686Z [err]  2025-12-17 06:18:56,772 - calling_service - INFO - üîß Replaced {{lead_id}} with None in content
2025-12-17T06:18:57.275491644Z [err]  2025-12-17 06:18:56,772 - calling_service - INFO - üîß Replaced {{qc_tracking_enabled}} with False in content
2025-12-17T06:18:57.275498613Z [err]  2025-12-17 06:18:56,772 - calling_service - INFO - üîß Replaced {{track_keywords}} with  in content
2025-12-17T06:18:57.275505852Z [err]  2025-12-17 06:18:56,772 - calling_service - INFO - üîß Replaced {{expected_commitment}} with not_specified in content
2025-12-17T06:18:57.275512862Z [err]  2025-12-17 06:18:56,772 - calling_service - INFO - üîß Replaced {{to_number}} with +17708336397 in content
2025-12-17T06:18:57.275520396Z [err]  2025-12-17 06:18:56,772 - calling_service - INFO - üîß Replaced {{phone_number}} with +17708336397 in content
2025-12-17T06:18:57.281421275Z [err]  2025-12-17 06:18:56,772 - calling_service - INFO - üîß Replaced {{email}} with None in content
2025-12-17T06:18:57.281436814Z [err]  2025-12-17 06:18:56,772 - calling_service - INFO - ‚úÖ Using explicit SCRIPT mode (length: 9 chars) - will return text instantly
2025-12-17T06:18:57.281444699Z [err]  2025-12-17 06:18:56,772 - calling_service - INFO - Using flow node: Greeting (type: conversation, mode: script)
2025-12-17T06:18:57.281454355Z [err]  2025-12-17 06:18:56,773 - calling_service - INFO - üìö skip_mandatory_precheck=true - skipping pre-response mandatory check, will check on transition
2025-12-17T06:18:57.281462047Z [err]  2025-12-17 06:18:56,773 - calling_service - INFO - ‚è±Ô∏è [06:18:56.773] üìÑ About to process content (mode=script, length=9)
2025-12-17T06:18:57.281469113Z [err]  2025-12-17 06:18:56,773 - calling_service - INFO - üì§ Streaming script as 1 sentence(s)
2025-12-17T06:18:57.281476795Z [err]  2025-12-17 06:18:56,773 - server - INFO - üì§ Sentence arrived from LLM: Kendrick?...
2025-12-17T06:18:57.281484055Z [err]  2025-12-17 06:18:56,773 - server - INFO - ‚è±Ô∏è [TIMING] TTFS (Time To First Sentence): 91ms
2025-12-17T06:18:57.281492482Z [err]  2025-12-17 06:18:56,773 - server - INFO - ‚ö° Starting REAL-TIME TTS for first sentence
2025-12-17T06:18:57.281499858Z [err]  2025-12-17 06:18:56,773 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:sz6RRi_Qx4zS1QlC4... (active sessions: [])
2025-12-17T06:18:57.281506183Z [err]  2025-12-17 06:18:56,773 - server - INFO - ‚ö° ON-DEMAND: Creating persistent TTS session (multi-worker mode)
2025-12-17T06:18:57.281515487Z [err]  2025-12-17 06:18:56,861 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2025-12-17T06:18:57.281522461Z [err]  2025-12-17 06:18:56,948 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2025-12-17T06:18:57.281529556Z [err]  2025-12-17 06:18:57,036 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2025-12-17T06:18:57.285735270Z [err]  2025-12-17 06:18:57,063 - telnyx_service - INFO - Telnyx service initialized with connection: 2777245537294877821
2025-12-17T06:18:57.285753315Z [err]  2025-12-17 06:18:57,063 - server - INFO - ‚úÖ ON-DEMAND: Using Telnyx WebSocket from closure for streaming audio
2025-12-17T06:18:57.285773274Z [err]  2025-12-17 06:18:57,063 - persistent_tts_service - INFO - üéôÔ∏è Extracted voice_settings from agent config: {'stability': 0.6, 'similarity_boost': 0.65, 'style': 0.2, 'use_speaker_boost': True}
2025-12-17T06:18:57.285779961Z [err]  2025-12-17 06:18:57,064 - persistent_tts_service - INFO - üîå [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Establishing persistent TTS WebSocket...
2025-12-17T06:18:57.285786346Z [err]  2025-12-17 06:18:57,064 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Voice settings: {'stability': 0.6, 'similarity_boost': 0.65, 'style': 0.2, 'use_speaker_boost': True}
2025-12-17T06:18:57.285799729Z [err]  2025-12-17 06:18:57,064 - elevenlabs_ws_service - INFO - üîå Connecting to ElevenLabs WebSocket: voice=J5iaaqzR5zn6HFG4jV3b, model=eleven_turbo_v2_5
2025-12-17T06:18:57.285806798Z [err]  2025-12-17 06:18:57,064 - elevenlabs_ws_service - INFO - üéôÔ∏è Voice settings: stability=0.6, similarity=0.65, style=0.2
2025-12-17T06:18:57.285818304Z [err]  2025-12-17 06:18:57,210 - elevenlabs_ws_service - INFO - ‚úÖ Connected to ElevenLabs WebSocket
2025-12-17T06:18:57.285824763Z [err]  2025-12-17 06:18:57,210 - elevenlabs_ws_service - INFO - üì§ Sent BOS message with voice settings
2025-12-17T06:18:57.285838430Z [err]  2025-12-17 06:18:57,210 - persistent_tts_service - INFO - ‚úÖ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Persistent TTS WebSocket established
2025-12-17T06:18:57.285845198Z [err]  2025-12-17 06:18:57,210 - persistent_tts_service - INFO - üîä [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Comfort noise loop started
2025-12-17T06:18:57.292512707Z [err]  2025-12-17 06:18:57,210 - persistent_tts_service - INFO - ‚úÖ Created persistent TTS session for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:18:57.292522101Z [err]  2025-12-17 06:18:57,210 - server - INFO - ‚úÖ ON-DEMAND: Persistent TTS session created successfully!
2025-12-17T06:18:57.292528308Z [err]  2025-12-17 06:18:57,210 - server - INFO - üîç Persistent TTS lookup: call_id=v3:sz6RRi_Qx4zS1QlC4..., session=FOUND
2025-12-17T06:18:57.292535340Z [err]  2025-12-17 06:18:57,210 - server - INFO - üöÄ Streaming sentence #1 via persistent WebSocket
2025-12-17T06:18:57.292543887Z [err]  2025-12-17 06:18:57,210 - server - INFO - üéµ TTS task #1 started at +437ms
2025-12-17T06:18:57.292550292Z [err]  2025-12-17 06:18:57,210 - server - INFO - ‚è±Ô∏è [TIMING] TTFT_TTS (First TTS Task Started): 529ms
2025-12-17T06:18:57.292556596Z [err]  2025-12-17 06:18:57,210 - calling_service - INFO - üì§ Streamed script sentence 1/1: Kendrick?...
2025-12-17T06:18:57.292563326Z [err]  2025-12-17 06:18:57,210 - calling_service - INFO - üîä Silence tracking reset for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ (user responded)
2025-12-17T06:18:57.292569149Z [err]  2025-12-17 06:18:57,210 - calling_service - INFO - ‚úÖ User responded to regular message, resetting counter
2025-12-17T06:18:57.292574865Z [err]  2025-12-17 06:18:57,210 - calling_service - INFO - üíæ Storing node ID 2 in conversation history
2025-12-17T06:18:57.292583145Z [err]  2025-12-17 06:18:57,211 - calling_service - INFO - LLM response (0.44s): Kendrick?
2025-12-17T06:18:57.292589614Z [err]  2025-12-17 06:18:57,211 - calling_service - INFO - Total latency: 0.44s
2025-12-17T06:18:57.292597074Z [err]  2025-12-17 06:18:57,211 - server - INFO - ‚úÖ LLM finished in 529ms, TTS tasks already running in background
2025-12-17T06:18:57.292605217Z [err]  2025-12-17 06:18:57,211 - server - INFO - üéµ Streaming 1 TTS chunks as they complete...
2025-12-17T06:18:57.296021378Z [err]  2025-12-17 06:18:57,211 - server - INFO - üöÄ Persistent TTS: Audio already streaming in background!
2025-12-17T06:18:57.296032117Z [err]  2025-12-17 06:18:57,211 - server - INFO -    1 sentences queued and playing seamlessly
2025-12-17T06:18:57.296039114Z [err]  2025-12-17 06:18:57,211 - persistent_tts_service - INFO - üéµ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Playback consumer started
2025-12-17T06:18:57.296045900Z [err]  2025-12-17 06:18:57,211 - persistent_tts_service - INFO - üíì [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Starting TTS keep-alive loop (every 15s)
2025-12-17T06:18:57.296052419Z [err]  2025-12-17 06:18:57,211 - persistent_tts_service - INFO - üîä [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Starting comfort noise loop
2025-12-17T06:18:57.296059703Z [err]  2025-12-17 06:18:57,211 - comfort_noise - INFO - üéµ Loading mulaw comfort noise for WebSocket mixing...
2025-12-17T06:18:57.311729395Z [inf]  100.64.0.8:13994 - "GET /api/tts-audio/comfort_noise_continuous.mp3 HTTP/1.1" 200
2025-12-17T06:18:57.515020321Z [err]  2025-12-17 06:18:57,507 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ/actions/record_start "HTTP/1.1 200 OK"
2025-12-17T06:18:57.515026896Z [err]  2025-12-17 06:18:57,509 - server - INFO - üéôÔ∏è Call recording started for v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:18:57.515032890Z [err]  2025-12-17 06:18:57,509 - server - INFO - üîß Creating call session for v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ...
2025-12-17T06:18:57.515038867Z [err]  2025-12-17 06:18:57,509 - server - INFO - üîç Agent ID: bbeda238-e8d9-4d8c-b93b-1b7694581adb, User ID: dcafa642-6136-4096-b77d-a4cb99a62651
2025-12-17T06:18:57.515044617Z [err]  2025-12-17 06:18:57,509 - server - INFO - üîß Calling create_call_session() - START
2025-12-17T06:18:57.515050878Z [err]  2025-12-17 06:18:57,509 - calling_service - INFO - üîç Checking KB for agent bbeda238-e8d9-4d8c-b93b-1b7694581adb...
2025-12-17T06:18:58.621346807Z [err]  2025-12-17 06:18:57,605 - calling_service - INFO - üîç KB count query completed: 4 items
2025-12-17T06:18:58.621355177Z [err]  2025-12-17 06:18:57,605 - calling_service - INFO - üìö Agent bbeda238-e8d9-4d8c-b93b-1b7694581adb has 4 KB items - Smart routing enabled (RAG on demand)
2025-12-17T06:18:58.621362859Z [err]  2025-12-17 06:18:57,620 - calling_service - INFO - üìã Built cached system prompt: 4424 chars (global) + 1402 chars (technical)
2025-12-17T06:18:58.621371570Z [err]  2025-12-17 06:18:57,620 - calling_service - INFO - üìö KB available - will use smart routing (simple chat: NO KB, factual: WITH KB)
2025-12-17T06:18:58.621382934Z [err]  2025-12-17 06:18:57,621 - calling_service - INFO - üî• Pre-warming LLM client (grok)...
2025-12-17T06:18:58.621391867Z [err]  2025-12-17 06:18:57,718 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2025-12-17T06:18:58.621400682Z [err]  2025-12-17 06:18:57,744 - calling_service - INFO - ‚úÖ LLM client pre-warmed in 122ms
2025-12-17T06:18:58.621410434Z [err]  2025-12-17 06:18:57,744 - server - INFO - üîß Calling create_call_session() - COMPLETE
2025-12-17T06:18:58.621418233Z [err]  2025-12-17 06:18:57,744 - server - INFO - ‚úÖ Session object created: CallSession
2025-12-17T06:18:58.621426483Z [err]  2025-12-17 06:18:57,753 - redis_service - INFO - üì¶ Stored call data in Redis: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ (TTL: 3600s)
2025-12-17T06:18:58.621434011Z [err]  2025-12-17 06:18:57,753 - server - INFO - ‚úÖ Serializable call_data synced to Redis (agent_id, user_id)
2025-12-17T06:18:58.621443784Z [err]  2025-12-17 06:18:57,753 - server - INFO - ‚úÖ Session stored in worker memory (not Redis)
2025-12-17T06:18:58.621451526Z [err]  2025-12-17 06:18:57,756 - redis_service - INFO - ‚úÖ Marked session ready in Redis: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:18:58.621459702Z [err]  2025-12-17 06:18:57,756 - server - INFO - ü§ñ AI session created for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:18:59.894833995Z [err]  2025-12-17 06:18:57,756 - server - INFO - üì¶ Custom variables injected: {'lead_id': None, 'qc_tracking_enabled': False, 'track_keywords': '', 'expected_commitment': 'not_specified', 'customer_name': 'Kendrick', 'to_number': '+17708336397', 'phone_number': '+17708336397', 'email': None, 'from_number': '+14048000152'}
2025-12-17T06:18:59.894841336Z [err]  2025-12-17 06:18:57,756 - server - INFO - ‚è≠Ô∏è Skipping persistent TTS creation in webhook - will create on-demand with telnyx_ws
2025-12-17T06:18:59.894848436Z [err]  2025-12-17 06:18:57,756 - server - INFO - üë§ Who speaks first: user, aiSpeaksAfterSilence: True, timeout: 2000ms
2025-12-17T06:18:59.894856097Z [err]  2025-12-17 06:18:57,756 - server - INFO - üëÇ User speaks first - waiting for user input...
2025-12-17T06:18:59.894862001Z [err]  2025-12-17 06:18:57,757 - server - ERROR - Error processing webhook: cannot access local variable 'asyncio' where it is not associated with a value
2025-12-17T06:18:59.894868264Z [inf]  100.64.0.7:43416 - "POST /api/telnyx/webhook HTTP/1.1" 200
2025-12-17T06:18:59.894874452Z [err]  2025-12-17 06:18:58,164 - comfort_noise - INFO - ‚úÖ Generated comfort noise sample: 30s (white=-83dB, hum=-93dB)
2025-12-17T06:18:59.894880671Z [err]  2025-12-17 06:18:58,445 - comfort_noise - INFO - ‚úÖ Generated mulaw comfort noise: 240000 bytes
2025-12-17T06:18:59.894889610Z [err]  2025-12-17 06:18:58,445 - persistent_tts_service - INFO - üé§ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Streaming sentence #1: Kendrick?...
2025-12-17T06:18:59.894896560Z [err]  2025-12-17 06:18:58,447 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2025-12-17T06:18:59.894904317Z [err]  2025-12-17 06:18:58,447 - server - INFO - üì® Full payload: {'data': {'event_type': 'call.machine.premium.detection.ended', 'id': 'e67bebc3-2439-4e94-b2db-2a3e8a0dfca1', 'occurred_at': '2025-12-17T06:18:57.220558Z', 'payload': {'call_control_id': 'v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ', 'call_leg_id': '40dc04a6-db10-11f0-8548-02420aef981f', 'call_session_id': '40d90d0a-db10-11f0-9ba9-02420aef981f', 'client_state': None, 'connection_id': '2777245537294877821', 'from': '+14048000152', 'result': 'human_residence', 'to': '+17708336397'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2025-12-17T06:19:01.323039929Z [err]  2025-12-17 06:18:58,447 - server - INFO - üéØ Event type: call.machine.premium.detection.ended, Call ID: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:01.323045066Z [err]  2025-12-17 06:18:58,447 - server - INFO - üì® ================================================
2025-12-17T06:19:01.323051283Z [inf]  100.64.0.7:43418 - "POST /api/telnyx/webhook HTTP/1.1" 200
2025-12-17T06:19:01.323056662Z [err]  2025-12-17 06:18:58,646 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2025-12-17T06:19:01.323062222Z [err]  2025-12-17 06:18:58,647 - server - INFO - üì® Full payload: {'data': {'event_type': 'call.playback.started', 'id': '26ce73e4-d0d2-4c3e-8b85-ee02d6e31efc', 'occurred_at': '2025-12-17T06:18:58.440563Z', 'payload': {'call_control_id': 'v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ', 'call_leg_id': '40dc04a6-db10-11f0-8548-02420aef981f', 'call_session_id': '40d90d0a-db10-11f0-9ba9-02420aef981f', 'client_state': None, 'connection_id': '2777245537294877821', 'media_name': None, 'media_url': 'api.li-ai.org/api/tts-audio/comfort_noise_continuous.mp3', 'overlay': True, 'playback_id': 'i-nuZWF9nw', 'start_time': '2025-12-17T06:18:58.440563Z'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2025-12-17T06:19:01.323068767Z [err]  2025-12-17 06:18:58,647 - server - INFO - üéØ Event type: call.playback.started, Call ID: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:01.323073770Z [err]  2025-12-17 06:18:58,647 - server - INFO - üì® ================================================
2025-12-17T06:19:01.323163799Z [inf]  100.64.0.7:43418 - "POST /api/telnyx/webhook HTTP/1.1" 200
2025-12-17T06:19:01.323171311Z [err]  2025-12-17 06:18:58,682 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_START: Sent to ElevenLabs at T+0ms
2025-12-17T06:19:01.323177206Z [err]  2025-12-17 06:18:58,682 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_TTFB: First audio chunk at T+236ms
2025-12-17T06:19:02.419108803Z [err]  2025-12-17 06:18:59,215 - server - INFO - üî§ RAW TOKENS: [" Th"?, "ank"?, " y"?]
2025-12-17T06:19:02.419116513Z [err]  2025-12-17 06:18:59,216 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Thank y' | Generating: True
2025-12-17T06:19:02.419117953Z [err]  2025-12-17 06:18:59,176 - server - INFO - üî§ RAW TOKENS: [" Th"?, "ank"?]
2025-12-17T06:19:02.419124234Z [err]  2025-12-17 06:18:59,216 - server - INFO - üö¶ BARGE-IN CHECK during response generation: 2 words - 'Thank y'
2025-12-17T06:19:02.419134427Z [err]  2025-12-17 06:18:59,177 - calling_service - INFO - üîä Silence timer reset for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ (user started speaking)
2025-12-17T06:19:02.419144716Z [err]  2025-12-17 06:18:59,177 - calling_service - INFO - üë§ User started speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:02.419159859Z [err]  2025-12-17 06:18:59,177 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Thank' | Generating: True
2025-12-17T06:19:02.419167426Z [err]  2025-12-17 06:18:59,177 - server - INFO - üö¶ BARGE-IN CHECK during response generation: 1 words - 'Thank'
2025-12-17T06:19:02.419999310Z [err]  2025-12-17 06:18:58,682 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTFA (Time To First Audio Playback): 236ms
2025-12-17T06:19:02.420006174Z [err]  2025-12-17 06:18:58,682 - persistent_tts_service - INFO - üì§ Sending 6671 bytes of audio (42 chunks, 0.8s duration) via WebSocket
2025-12-17T06:19:02.420013784Z [err]  2025-12-17 06:18:58,682 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:19:02.420021854Z [err]  2025-12-17 06:18:58,682 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +0.8s (total: 0.8s from now)
2025-12-17T06:19:02.420030062Z [err]  2025-12-17 06:18:58,683 - persistent_tts_service - INFO - ‚úÖ Sent 42 audio chunks via WebSocket
2025-12-17T06:19:03.148446345Z [err]  2025-12-17 06:18:59,264 - server - INFO - üî§ RAW TOKENS: [" Th"?, "ank"?, " y"?, "ou"?]
2025-12-17T06:19:03.148452664Z [err]  2025-12-17 06:18:59,265 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Thank you' | Generating: True
2025-12-17T06:19:03.148458509Z [err]  2025-12-17 06:18:59,265 - server - INFO - üö¶ BARGE-IN CHECK during response generation: 2 words - 'Thank you'
2025-12-17T06:19:03.148465054Z [err]  2025-12-17 06:18:59,316 - server - INFO - üî§ RAW TOKENS: [" Th"?, "ank"?, " y"?, "ou"?, " for"?]
2025-12-17T06:19:03.148471826Z [err]  2025-12-17 06:18:59,319 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Thank you for' | Generating: True
2025-12-17T06:19:03.148477936Z [err]  2025-12-17 06:18:59,320 - server - INFO - üö¶ BARGE-IN CHECK during response generation: 3 words - 'Thank you for'
2025-12-17T06:19:03.148489230Z [err]  2025-12-17 06:18:59,320 - server - INFO - üõë INTERRUPTION TRIGGERED - User said 3 words: 'Thank you for'
2025-12-17T06:19:03.148497264Z [err]  2025-12-17 06:18:59,320 - server - INFO - üõë Stopping agent IMMEDIATELY...
2025-12-17T06:19:03.148503277Z [err]  2025-12-17 06:18:59,320 - server - INFO - üõë Cancelling in-flight response generation task
2025-12-17T06:19:03.148509180Z [err]  2025-12-17 06:18:59,320 - server - INFO - üõë Cancelled 1 in-flight TTS tasks
2025-12-17T06:19:03.148514947Z [err]  2025-12-17 06:18:59,320 - persistent_tts_service - INFO - üõë [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] INTERRUPT - Floor Released (is_holding_floor=False)
2025-12-17T06:19:03.148521154Z [err]  2025-12-17 06:18:59,352 - persistent_tts_service - INFO - üõë [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Sent clear event to Telnyx WebSocket (3x)
2025-12-17T06:19:03.148527979Z [err]  2025-12-17 06:18:59,352 - persistent_tts_service - INFO - ‚è±Ô∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Reset playback_expected_end_time to NOW
2025-12-17T06:19:03.149633260Z [err]  2025-12-17 06:18:59,352 - server - INFO - ‚úã Cleared WebSocket TTS audio buffer
2025-12-17T06:19:03.149638771Z [err]  2025-12-17 06:18:59,353 - redis_service - INFO - üßπ Cleared all playbacks for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:03.149644422Z [err]  2025-12-17 06:18:59,353 - server - INFO - ‚úÖ Agent stopped, user can continue speaking
2025-12-17T06:19:03.149649154Z [err]  2025-12-17 06:18:59,364 - server - INFO - üî§ RAW TOKENS: [" Th"?, "ank"?, " y"?, "ou"?, " for"?, " hang"?]
2025-12-17T06:19:03.149654269Z [err]  2025-12-17 06:18:59,364 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Thank you for hang' | Generating: False
2025-12-17T06:19:03.149659523Z [err]  2025-12-17 06:18:59,455 - dead_air_monitor - INFO - ‚è±Ô∏è Playback expected end time passed (0.1s ago), marking agent as done speaking
2025-12-17T06:19:03.149869273Z [err]  2025-12-17 06:18:59,455 - calling_service - INFO - ü§ñ Agent stopped speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:03.149877473Z [err]  2025-12-17 06:18:59,501 - server - INFO - üî§ RAW TOKENS: [" Th"‚úì, "ank"‚úì, " y"‚úì, "ou"‚úì, " for"‚úì, " hang"‚úì, "ing."‚úì, "<end>"‚úì]
2025-12-17T06:19:03.149882320Z [err]  2025-12-17 06:18:59,501 - server - INFO - üéØ Endpoint detected: <end> token received
2025-12-17T06:19:03.149887318Z [err]  2025-12-17 06:18:59,502 - server - INFO - üßπ Cleaned transcript: ' Th ank  y ou  for  hang ing.' -> 'Thank you for hang ing.'
2025-12-17T06:19:03.149891664Z [err]  2025-12-17 06:18:59,502 - server - INFO - üì• FINAL TOKENS: 'Thank you for hang ing.' (7 tokens)
2025-12-17T06:19:03.149896254Z [err]  2025-12-17 06:18:59,502 - server - INFO - üé§ Soniox final transcript: 'Thank you for hang ing.'
2025-12-17T06:19:03.149900199Z [err]  2025-12-17 06:18:59,502 - server - INFO - üîç FILTER CHECK: words=5, is_filler=False, is_garbled=False, tts_speaking=False, time_until_done=0.0s, generating=False, playbacks=0, is_active=False
2025-12-17T06:19:03.156648709Z [err]  2025-12-17 06:18:59,502 - server - INFO - üöÄ Spawned tracked background task for endpoint processing
2025-12-17T06:19:03.156654784Z [err]  2025-12-17 06:18:59,502 - server - INFO - ‚è±Ô∏è [06:18:59.502] üìù FINAL TRANSCRIPT RECEIVED: 'Thank you for hang ing.'
2025-12-17T06:19:03.156661905Z [err]  2025-12-17 06:18:59,502 - server - INFO - ‚è±Ô∏è [06:18:59.502] STT endpoint detection latency: 9ms
2025-12-17T06:19:03.156667993Z [err]  2025-12-17 06:18:59,502 - server - INFO - ‚è±Ô∏è [06:18:59.502] üé§ USER STOPPED SPEAKING - Beginning processing pipeline
2025-12-17T06:19:03.156674299Z [err]  2025-12-17 06:18:59,504 - redis_service - INFO - üì¶ Stored call data in Redis: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ (TTL: 3600s)
2025-12-17T06:19:03.156680208Z [err]  2025-12-17 06:18:59,504 - server - INFO - üë§ User has spoken - aiSpeaksAfterSilence timer cancelled if pending
2025-12-17T06:19:03.156687949Z [err]  2025-12-17 06:18:59,505 - server - INFO - ‚úÖ Agent SILENT - User said 6 word(s): 'Hell o.Thank you for hang ing.' - Processing...
2025-12-17T06:19:03.156694259Z [err]  2025-12-17 06:18:59,515 - server - INFO - üé§ Endpoint detected by Soniox - processing transcript: Hell o.Thank you for hang ing.
2025-12-17T06:19:03.156699770Z [err]  2025-12-17 06:18:59,515 - calling_service - INFO - üë§ User stopped speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:03.156706695Z [err]  2025-12-17 06:18:59,520 - server - INFO - ‚è±Ô∏è [TIMING] STT_START: User last audio packet received
2025-12-17T06:19:03.156714140Z [err]  2025-12-17 06:18:59,520 - server - INFO - ‚è±Ô∏è [TIMING] STT_END: Endpoint detected at T+26ms
2025-12-17T06:19:03.156719951Z [err]  2025-12-17 06:18:59,520 - server - INFO - ‚è±Ô∏è [TIMING] STT_LATENCY: 26ms (Soniox model: stt-rt-v3)
2025-12-17T06:19:03.156726003Z [err]  2025-12-17 06:18:59,520 - server - INFO - ‚è±Ô∏è  USER STOPPED SPEAKING at T=0ms
2025-12-17T06:19:03.158912698Z [err]  2025-12-17 06:18:59,520 - server - INFO - üéôÔ∏è Agent generating response - interruption detection active
2025-12-17T06:19:03.158919001Z [err]  2025-12-17 06:18:59,520 - calling_service - INFO - ü§ñ Agent started speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:03.158924802Z [err]  2025-12-17 06:18:59,613 - server - INFO - üìù Saved user transcript to database
2025-12-17T06:19:03.158931463Z [err]  2025-12-17 06:18:59,613 - persistent_tts_service - INFO - üîÑ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Interrupt flag reset - ready for new audio
2025-12-17T06:19:03.158937072Z [err]  2025-12-17 06:18:59,613 - server - INFO - üîÑ Reset TTS interrupt flag before new response
2025-12-17T06:19:03.158942814Z [err]  2025-12-17 06:18:59,613 - calling_service - INFO - ‚è±Ô∏è [06:18:59.613] üì• process_user_input() ENTRY - text: 'Hell o.Thank you for hang ing....'
2025-12-17T06:19:03.158948545Z [err]  2025-12-17 06:18:59,613 - calling_service - INFO - ‚è±Ô∏è [06:18:59.613] ‚è© About to call _process_call_flow_streaming()
2025-12-17T06:19:03.158954163Z [err]  2025-12-17 06:18:59,613 - calling_service - INFO - ‚è±Ô∏è [06:18:59.613] üîÄ Agent type: call_flow, calling flow processor...
2025-12-17T06:19:03.158960827Z [err]  2025-12-17 06:18:59,613 - calling_service - INFO - ‚è±Ô∏è [06:18:59.613] üîÄ _process_call_flow_streaming() ENTRY
2025-12-17T06:19:03.158966765Z [err]  2025-12-17 06:18:59,613 - calling_service - INFO - Flow processing - History length: 3, Is first: False
2025-12-17T06:19:03.158972205Z [err]  2025-12-17 06:18:59,613 - calling_service - INFO - üîç Using explicitly set current_node_id: 2
2025-12-17T06:19:03.158978996Z [err]  2025-12-17 06:18:59,613 - calling_service - INFO - ‚è±Ô∏è [06:18:59.613] üîÄ About to call _follow_transition() for: Hell o.Thank you for hang ing....
2025-12-17T06:19:03.158985018Z [err]  2025-12-17 06:18:59,613 - calling_service - INFO - Evaluating transitions from Greeting for message: Hell o.Thank you for hang ing.
2025-12-17T06:19:03.162544653Z [err]  2025-12-17 06:18:59,625 - calling_service - INFO - ‚è±Ô∏è [06:18:59.625] üîÄ TRANSITION EVALUATION START - Calling LLM for 4 options
2025-12-17T06:19:03.162550959Z [err]  2025-12-17 06:19:00,118 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=True, user_speaking=False, silence=0.0s, checkin_count=0/2
2025-12-17T06:19:03.162557452Z [err]  2025-12-17 06:19:00,514 - server - INFO - üì§ Audio flowing: 298 packets sent to Soniox (5s update)
2025-12-17T06:19:03.162563947Z [err]  2025-12-17 06:19:00,602 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-17T06:19:03.162571042Z [err]  2025-12-17 06:19:00,615 - calling_service - INFO - ‚è±Ô∏è [06:19:00.615] üîÄ TRANSITION EVALUATION COMPLETE - took 990ms
2025-12-17T06:19:03.162577326Z [err]  2025-12-17 06:19:00,615 - calling_service - INFO - ü§ñ AI transition decision: '-1'
2025-12-17T06:19:03.162583616Z [err]  2025-12-17 06:19:00,615 - calling_service - INFO - üìä Available transitions: ['Confirms name (Yes|Speaking|This is he/she|etc)...', 'Wrong number (No John here|Wrong number|etc)...', "The customer says let's set an appointment....", "Let's talk about my inances..."]
2025-12-17T06:19:03.162590291Z [err]  2025-12-17 06:19:00,615 - calling_service - INFO - Selected transition index: -1
2025-12-17T06:19:03.162596132Z [err]  2025-12-17 06:19:00,615 - calling_service - INFO - No specific condition matched, looking for default transition...
2025-12-17T06:19:03.162602138Z [err]  2025-12-17 06:19:00,615 - calling_service - INFO - ‚ö†Ô∏è No transition matched, but node has GOAL. Staying on current node to continue with goal-based guidance.
2025-12-17T06:19:03.162609756Z [err]  2025-12-17 06:19:00,615 - calling_service - INFO - üéØ Goal: Say the customer's name...
2025-12-17T06:19:03.162617965Z [err]  2025-12-17 06:19:00,615 - calling_service - INFO - ‚è±Ô∏è [TIMING] TRANSITION_EVAL: 1001ms
2025-12-17T06:19:03.162625131Z [err]  2025-12-17 06:19:00,615 - calling_service - INFO - ‚è±Ô∏è [06:19:00.615] ‚úÖ Node selected, about to process content...
2025-12-17T06:19:03.167288530Z [err]  2025-12-17 06:19:00,615 - calling_service - INFO - üîß Replaced {{now}} with Wednesday, December 17, 2025 at 1:18 AM EST in content
2025-12-17T06:19:03.167295523Z [err]  2025-12-17 06:19:00,615 - calling_service - INFO - üîß Replaced {{customer_name}} with Kendrick in content
2025-12-17T06:19:03.167304657Z [err]  2025-12-17 06:19:00,615 - calling_service - INFO - üîß Replaced {{callerName}} with  in content
2025-12-17T06:19:03.167311934Z [err]  2025-12-17 06:19:00,615 - calling_service - INFO - üîß Replaced {{lead_id}} with None in content
2025-12-17T06:19:03.167319024Z [err]  2025-12-17 06:19:00,615 - calling_service - INFO - üîß Replaced {{qc_tracking_enabled}} with False in content
2025-12-17T06:19:03.167330659Z [err]  2025-12-17 06:19:00,616 - calling_service - INFO - üîß Replaced {{track_keywords}} with  in content
2025-12-17T06:19:03.167337636Z [err]  2025-12-17 06:19:00,616 - calling_service - INFO - üîß Replaced {{expected_commitment}} with not_specified in content
2025-12-17T06:19:03.167344015Z [err]  2025-12-17 06:19:00,616 - calling_service - INFO - üîß Replaced {{to_number}} with +17708336397 in content
2025-12-17T06:19:03.167351074Z [err]  2025-12-17 06:19:00,616 - calling_service - INFO - üîß Replaced {{phone_number}} with +17708336397 in content
2025-12-17T06:19:03.167359397Z [err]  2025-12-17 06:19:00,616 - calling_service - INFO - üîß Replaced {{email}} with None in content
2025-12-17T06:19:03.167365950Z [err]  2025-12-17 06:19:00,616 - calling_service - INFO - ‚úÖ Using explicit SCRIPT mode (length: 9 chars) - will return text instantly
2025-12-17T06:19:03.167372959Z [err]  2025-12-17 06:19:00,616 - calling_service - INFO - Using flow node: Greeting (type: conversation, mode: script)
2025-12-17T06:19:03.167381407Z [err]  2025-12-17 06:19:00,616 - calling_service - INFO - üìö skip_mandatory_precheck=true - skipping pre-response mandatory check, will check on transition
2025-12-17T06:19:03.167388434Z [err]  2025-12-17 06:19:00,616 - calling_service - INFO - ‚è±Ô∏è [06:19:00.616] üìÑ About to process content (mode=script, length=9)
2025-12-17T06:19:03.175615047Z [err]  2025-12-17 06:19:00,616 - calling_service - INFO - üì§ Streaming script as 1 sentence(s)
2025-12-17T06:19:03.175634380Z [err]  2025-12-17 06:19:00,616 - server - INFO - üì§ Sentence arrived from LLM: Kendrick?...
2025-12-17T06:19:03.175646826Z [err]  2025-12-17 06:19:00,616 - server - INFO - ‚è±Ô∏è [TIMING] TTFS (Time To First Sentence): 1096ms
2025-12-17T06:19:03.175655292Z [err]  2025-12-17 06:19:00,616 - server - INFO - ‚ö° Starting REAL-TIME TTS for first sentence
2025-12-17T06:19:03.175663411Z [err]  2025-12-17 06:19:00,616 - server - INFO - üîç Persistent TTS lookup: call_id=v3:sz6RRi_Qx4zS1QlC4..., session=FOUND
2025-12-17T06:19:03.175671829Z [err]  2025-12-17 06:19:00,616 - server - INFO - üöÄ Streaming sentence #1 via persistent WebSocket
2025-12-17T06:19:03.175715598Z [err]  2025-12-17 06:19:00,616 - server - INFO - üéµ TTS task #1 started at +0ms
2025-12-17T06:19:03.175724209Z [err]  2025-12-17 06:19:00,616 - server - INFO - ‚è±Ô∏è [TIMING] TTFT_TTS (First TTS Task Started): 1096ms
2025-12-17T06:19:03.175733038Z [err]  2025-12-17 06:19:00,616 - calling_service - INFO - üì§ Streamed script sentence 1/1: Kendrick?...
2025-12-17T06:19:03.175742035Z [err]  2025-12-17 06:19:00,616 - calling_service - INFO - üîä Silence tracking reset for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ (user responded)
2025-12-17T06:19:03.175750420Z [err]  2025-12-17 06:19:00,616 - calling_service - INFO - ‚úÖ User responded to regular message, resetting counter
2025-12-17T06:19:03.175757997Z [err]  2025-12-17 06:19:00,616 - calling_service - INFO - üíæ Storing node ID 2 in conversation history
2025-12-17T06:19:03.175767545Z [err]  2025-12-17 06:19:00,616 - calling_service - INFO - LLM response (1.00s): Kendrick?
2025-12-17T06:19:03.175777929Z [err]  2025-12-17 06:19:00,616 - calling_service - INFO - Total latency: 1.00s
2025-12-17T06:19:03.175788521Z [err]  2025-12-17 06:19:00,616 - server - INFO - ‚úÖ LLM finished in 1096ms, TTS tasks already running in background
2025-12-17T06:19:03.181541145Z [err]  2025-12-17 06:19:00,616 - server - INFO - üéµ Streaming 1 TTS chunks as they complete...
2025-12-17T06:19:03.181556717Z [err]  2025-12-17 06:19:00,616 - server - INFO - üöÄ Persistent TTS: Audio already streaming in background!
2025-12-17T06:19:03.181562139Z [err]  2025-12-17 06:19:00,616 - server - INFO -    1 sentences queued and playing seamlessly
2025-12-17T06:19:03.181567750Z [err]  2025-12-17 06:19:00,616 - persistent_tts_service - INFO - üé§ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Streaming sentence #2: Kendrick?...
2025-12-17T06:19:03.181572890Z [err]  2025-12-17 06:19:00,623 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=True, user_speaking=False, silence=0.0s, checkin_count=0/2
2025-12-17T06:19:03.181581288Z [err]  2025-12-17 06:19:00,866 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_START: Sent to ElevenLabs at T+0ms
2025-12-17T06:19:03.181587002Z [err]  2025-12-17 06:19:00,866 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_TTFB: First audio chunk at T+250ms
2025-12-17T06:19:03.181595917Z [err]  2025-12-17 06:19:00,866 - persistent_tts_service - INFO - üì§ Sending 6316 bytes of audio (40 chunks, 0.8s duration) via WebSocket
2025-12-17T06:19:03.181602859Z [err]  2025-12-17 06:19:00,866 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:19:03.181608038Z [err]  2025-12-17 06:19:00,866 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +0.8s (total: 0.8s from now)
2025-12-17T06:19:03.181616271Z [err]  2025-12-17 06:19:00,867 - persistent_tts_service - INFO - ‚úÖ Sent 40 audio chunks via WebSocket
2025-12-17T06:19:03.181623150Z [err]  2025-12-17 06:19:01,468 - server - INFO - üî§ RAW TOKENS: [" Ye"?]
2025-12-17T06:19:03.181629617Z [err]  2025-12-17 06:19:01,468 - calling_service - INFO - üîä Silence timer reset for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ (user started speaking)
2025-12-17T06:19:03.184482102Z [err]  2025-12-17 06:19:01,621 - server - INFO - üéØ Endpoint detected: <end> token received
2025-12-17T06:19:03.184490902Z [err]  2025-12-17 06:19:01,468 - calling_service - INFO - üë§ User started speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:03.184494746Z [err]  2025-12-17 06:19:01,621 - server - INFO - üßπ Cleaned transcript: ' Ye ah.' -> 'Yeah.'
2025-12-17T06:19:03.184504207Z [err]  2025-12-17 06:19:01,468 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Ye' | Generating: True
2025-12-17T06:19:03.184513382Z [err]  2025-12-17 06:19:01,468 - server - INFO - üö¶ BARGE-IN CHECK during response generation: 1 words - 'Ye'
2025-12-17T06:19:03.184513921Z [err]  2025-12-17 06:19:01,621 - server - INFO - üì• FINAL TOKENS: 'Yeah.' (2 tokens)
2025-12-17T06:19:03.184522190Z [err]  2025-12-17 06:19:01,621 - server - INFO - üî§ RAW TOKENS: [" Ye"‚úì, "ah."‚úì, "<end>"‚úì]
2025-12-17T06:19:03.184525223Z [err]  2025-12-17 06:19:01,621 - server - INFO - üé§ Soniox final transcript: 'Yeah.'
2025-12-17T06:19:03.184533413Z [err]  2025-12-17 06:19:01,621 - server - INFO - üéØ User speaking while TTS is_speaking=True - INTERRUPTION POSSIBLE
2025-12-17T06:19:03.184542551Z [err]  2025-12-17 06:19:01,621 - server - INFO - üîç FILTER CHECK: words=1, is_filler=True, is_garbled=False, tts_speaking=True, time_until_done=0.0s, generating=True, playbacks=0, is_active=True
2025-12-17T06:19:03.184546422Z [err]  2025-12-17 06:19:01,622 - server - INFO - üîï SKIPPING endpoint for filtered utterance 'Yeah.' (tts_speaking=True, is_active=True)
2025-12-17T06:19:03.184552025Z [err]  2025-12-17 06:19:01,621 - server - INFO - üîï FILTERING 1-word/filler 'Yeah.' - NOT calling on_final_transcript
2025-12-17T06:19:03.184568819Z [err]  2025-12-17 06:19:01,622 - calling_service - INFO - üë§ User stopped speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:03.184584816Z [err]  2025-12-17 06:19:01,622 - server - INFO - üë§ Marked user stopped speaking (filtered utterance)
2025-12-17T06:19:03.189635157Z [err]  2025-12-17 06:19:02,136 - dead_air_monitor - INFO - ‚è±Ô∏è Playback expected end time passed (0.5s ago), marking agent as done speaking
2025-12-17T06:19:03.189643109Z [err]  2025-12-17 06:19:02,136 - calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1765952342.1365023 for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:03.189649674Z [err]  2025-12-17 06:19:02,136 - calling_service - INFO - ü§ñ Agent stopped speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:03.189656258Z [err]  2025-12-17 06:19:02,867 - elevenlabs_ws_service - INFO - ‚è±Ô∏è  [TIMING] ElevenLabs audio stream complete (0.5s timeout reached) - End of Sentence
2025-12-17T06:19:03.189663239Z [err]  2025-12-17 06:19:02,867 - persistent_tts_service - INFO - ‚úÖ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Finished streaming sentence #2: 1 chunks received
2025-12-17T06:19:03.189670339Z [err]  2025-12-17 06:19:02,867 - server - INFO - ‚úÖ All 1 persistent TTS streams completed
2025-12-17T06:19:03.189676732Z [err]  2025-12-17 06:19:02,867 - server - INFO - ‚úÖ Agent generation complete (persistent TTS) - response window closed
2025-12-17T06:19:03.189684718Z [err]  2025-12-17 06:19:02,867 - server - INFO - ‚è±Ô∏è  FIRST AUDIO STARTED: 3347ms from user stop üöÄ
2025-12-17T06:19:03.189692157Z [err]  2025-12-17 06:19:02,867 - calling_service - INFO - ü§ñ Agent started speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:03.189699777Z [err]  2025-12-17 06:19:02,867 - server - INFO - ‚úÖ Agent generation complete - response window closed
2025-12-17T06:19:03.189707205Z [err]  2025-12-17 06:19:02,867 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2025-12-17T06:19:03.189722809Z [err]  2025-12-17 06:19:02,867 - server - INFO - ‚è±Ô∏è  [TIMING] ==== E2E LATENCY SUMMARY ====
2025-12-17T06:19:03.192178961Z [err]  2025-12-17 06:19:02,867 - server - INFO - ‚è±Ô∏è  [TIMING] STT: 26ms (provider: soniox, model: stt-rt-v3)
2025-12-17T06:19:03.192298650Z [err]  2025-12-17 06:19:02,867 - server - INFO - ‚è±Ô∏è  [TIMING] LLM_TOTAL: 1096ms (provider: grok, model: grok-4-fast-non-reasoning)
2025-12-17T06:19:03.192307577Z [err]  2025-12-17 06:19:02,867 - server - INFO - ‚è±Ô∏è  [TIMING] TTS_TOTAL: 2251ms (provider: elevenlabs, websocket: False)
2025-12-17T06:19:03.192315186Z [err]  2025-12-17 06:19:02,867 - server - INFO - ‚è±Ô∏è  [TIMING] E2E_TOTAL: 3347ms (user stopped ‚Üí play_audio_url called)
2025-12-17T06:19:03.192336025Z [err]  2025-12-17 06:19:02,867 - server - INFO - ‚è±Ô∏è  [TIMING] ‚ö†Ô∏è NOTE: E2E_TOTAL does not include:
2025-12-17T06:19:03.192344063Z [err]  2025-12-17 06:19:02,867 - server - INFO - ‚è±Ô∏è  [TIMING]   - Telnyx processing time (~50-200ms)
2025-12-17T06:19:03.192350843Z [err]  2025-12-17 06:19:02,867 - server - INFO - ‚è±Ô∏è  [TIMING]   - Network latency to user's phone (~50-150ms)
2025-12-17T06:19:03.192359393Z [err]  2025-12-17 06:19:02,867 - server - INFO - ‚è±Ô∏è  [TIMING]   - Phone audio buffering (~50-200ms)
2025-12-17T06:19:03.192365892Z [err]  2025-12-17 06:19:02,867 - server - INFO - ‚è±Ô∏è  [TIMING]   - TOTAL MISSING: ~150-550ms typically
2025-12-17T06:19:03.192372110Z [err]  2025-12-17 06:19:02,867 - server - INFO - ‚è±Ô∏è  [TIMING]   - REAL USER LATENCY: 3647ms estimated
2025-12-17T06:19:03.192378440Z [err]  2025-12-17 06:19:02,867 - server - INFO - ‚è±Ô∏è  [TIMING] RESPONSE_TEXT: 9 chars, 1 sentences
2025-12-17T06:19:03.192384681Z [err]  2025-12-17 06:19:02,867 - server - INFO - ‚è±Ô∏è  [TIMING] USER_INPUT: 'Hell o.Thank you for hang ing....'
2025-12-17T06:19:03.192392645Z [err]  2025-12-17 06:19:02,867 - server - INFO - ‚è±Ô∏è  [TIMING] AI_RESPONSE: 'Kendrick?...'
2025-12-17T06:19:03.192400931Z [err]  2025-12-17 06:19:02,867 - server - INFO - ‚è±Ô∏è  [TIMING] ==========================
2025-12-17T06:19:03.196579332Z [err]  2025-12-17 06:19:02,867 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2025-12-17T06:19:03.196591323Z [err]  2025-12-17 06:19:02,875 - persistent_tts_service - INFO - üîá [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] FLOOR RELEASED (is_holding_floor=False)
2025-12-17T06:19:03.196603880Z [err]  2025-12-17 06:19:03,049 - server - INFO - üìù Saved assistant transcript and latency to database (Node: Greeting, Dead Air: 1622ms)
2025-12-17T06:19:03.196612215Z [err]  2025-12-17 06:19:03,049 - server - INFO - üîä Agent finished generating, 0 playbacks active - waiting for webhooks to close window and start silence tracking
2025-12-17T06:19:06.314440181Z [err]  2025-12-17 06:19:05,878 - server - INFO - üé§ Soniox receiver alive - 17 messages received in last 10s
2025-12-17T06:19:06.314506993Z [err]  2025-12-17 06:19:05,532 - server - INFO - üì§ Audio flowing: 549 packets sent to Soniox (5s update)
2025-12-17T06:19:08.481717582Z [err]  2025-12-17 06:19:07,885 - server - INFO - üî§ RAW TOKENS: [" Ye"?]
2025-12-17T06:19:08.481725861Z [err]  2025-12-17 06:19:07,886 - calling_service - INFO - üîä Silence timer reset for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ (user started speaking)
2025-12-17T06:19:08.481732030Z [err]  2025-12-17 06:19:07,886 - calling_service - INFO - üë§ User started speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:08.481739555Z [err]  2025-12-17 06:19:07,886 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Ye' | Generating: False
2025-12-17T06:19:08.481744240Z [err]  2025-12-17 06:19:07,992 - server - INFO - üî§ RAW TOKENS: [" Ye"‚úì, "ah."‚úì, "<end>"‚úì]
2025-12-17T06:19:08.481749442Z [err]  2025-12-17 06:19:07,992 - server - INFO - üéØ Endpoint detected: <end> token received
2025-12-17T06:19:08.481755378Z [err]  2025-12-17 06:19:07,992 - server - INFO - üßπ Cleaned transcript: ' Ye ah.' -> 'Yeah.'
2025-12-17T06:19:08.481763025Z [err]  2025-12-17 06:19:07,992 - server - INFO - üì• FINAL TOKENS: 'Yeah.' (2 tokens)
2025-12-17T06:19:08.481768376Z [err]  2025-12-17 06:19:07,992 - server - INFO - üé§ Soniox final transcript: 'Yeah.'
2025-12-17T06:19:08.481774129Z [err]  2025-12-17 06:19:07,992 - server - INFO - üîç FILTER CHECK: words=1, is_filler=True, is_garbled=False, tts_speaking=False, time_until_done=0.0s, generating=False, playbacks=0, is_active=False
2025-12-17T06:19:08.481780590Z [err]  2025-12-17 06:19:07,993 - server - INFO - üöÄ Spawned tracked background task for endpoint processing
2025-12-17T06:19:08.481787484Z [err]  2025-12-17 06:19:07,993 - server - INFO - ‚è±Ô∏è [06:19:07.993] üìù FINAL TRANSCRIPT RECEIVED: 'Yeah.'
2025-12-17T06:19:08.481795669Z [err]  2025-12-17 06:19:07,993 - server - INFO - ‚è±Ô∏è [06:19:07.993] STT endpoint detection latency: 21ms
2025-12-17T06:19:08.481801748Z [err]  2025-12-17 06:19:07,993 - server - INFO - ‚è±Ô∏è [06:19:07.993] üé§ USER STOPPED SPEAKING - Beginning processing pipeline
2025-12-17T06:19:08.485517960Z [err]  2025-12-17 06:19:08,105 - calling_service - INFO - ‚è±Ô∏è [06:19:08.105] üì• process_user_input() ENTRY - text: 'Yeah....'
2025-12-17T06:19:08.485530779Z [err]  2025-12-17 06:19:08,006 - calling_service - INFO - üë§ User stopped speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:08.485537879Z [err]  2025-12-17 06:19:08,006 - server - INFO - ‚úÖ User starting new turn - resetting agent speaking flag
2025-12-17T06:19:08.485542613Z [err]  2025-12-17 06:19:08,006 - server - INFO - ‚è±Ô∏è [TIMING] STT_START: User last audio packet received
2025-12-17T06:19:08.485551122Z [err]  2025-12-17 06:19:08,006 - server - INFO - ‚è±Ô∏è [TIMING] STT_END: Endpoint detected at T+11ms
2025-12-17T06:19:08.485555316Z [err]  2025-12-17 06:19:07,995 - server - INFO - üë§ User has spoken - aiSpeaksAfterSilence timer cancelled if pending
2025-12-17T06:19:08.485564267Z [err]  2025-12-17 06:19:08,006 - server - INFO - ‚è±Ô∏è [TIMING] STT_LATENCY: 11ms (Soniox model: stt-rt-v3)
2025-12-17T06:19:08.485566049Z [err]  2025-12-17 06:19:07,995 - server - INFO - ‚úÖ Agent SILENT - User said 1 word(s): 'Yeah.' - Processing...
2025-12-17T06:19:08.485568068Z [err]  2025-12-17 06:19:08,007 - calling_service - INFO - ü§ñ Agent started speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:08.485569558Z [err]  2025-12-17 06:19:07,995 - redis_service - INFO - üì¶ Stored call data in Redis: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ (TTL: 3600s)
2025-12-17T06:19:08.485574604Z [err]  2025-12-17 06:19:08,006 - server - INFO - ‚è±Ô∏è  USER STOPPED SPEAKING at T=0ms
2025-12-17T06:19:08.485576488Z [err]  2025-12-17 06:19:08,006 - server - INFO - üé§ Endpoint detected by Soniox - processing transcript: Yeah.
2025-12-17T06:19:08.485580078Z [err]  2025-12-17 06:19:08,105 - server - INFO - üìù Saved user transcript to database
2025-12-17T06:19:08.485584456Z [err]  2025-12-17 06:19:08,006 - server - INFO - üéôÔ∏è Agent generating response - interruption detection active
2025-12-17T06:19:08.489656189Z [err]  2025-12-17 06:19:08,116 - calling_service - INFO - ‚è±Ô∏è [06:19:08.116] üîÄ TRANSITION EVALUATION START - Calling LLM for 4 options
2025-12-17T06:19:08.489669681Z [err]  2025-12-17 06:19:08,421 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-17T06:19:08.489678087Z [err]  2025-12-17 06:19:08,422 - calling_service - INFO - ‚è±Ô∏è [06:19:08.422] üîÄ TRANSITION EVALUATION COMPLETE - took 305ms
2025-12-17T06:19:08.489685662Z [err]  2025-12-17 06:19:08,423 - calling_service - INFO - ü§ñ AI transition decision: '0'
2025-12-17T06:19:08.489692145Z [err]  2025-12-17 06:19:08,423 - calling_service - INFO - üìä Available transitions: ['Confirms name (Yes|Speaking|This is he/she|etc)...', 'Wrong number (No John here|Wrong number|etc)...', "The customer says let's set an appointment....", "Let's talk about my inances..."]
2025-12-17T06:19:08.489887860Z [err]  2025-12-17 06:19:08,105 - calling_service - INFO - ‚è±Ô∏è [06:19:08.105] ‚è© About to call _process_call_flow_streaming()
2025-12-17T06:19:08.489895578Z [err]  2025-12-17 06:19:08,105 - calling_service - INFO - ‚è±Ô∏è [06:19:08.105] üîÄ Agent type: call_flow, calling flow processor...
2025-12-17T06:19:08.489904013Z [err]  2025-12-17 06:19:08,105 - calling_service - INFO - ‚è±Ô∏è [06:19:08.105] üîÄ _process_call_flow_streaming() ENTRY
2025-12-17T06:19:08.489909600Z [err]  2025-12-17 06:19:08,105 - calling_service - INFO - Flow processing - History length: 5, Is first: False
2025-12-17T06:19:08.489914595Z [err]  2025-12-17 06:19:08,106 - calling_service - INFO - üîç Using explicitly set current_node_id: 2
2025-12-17T06:19:08.489919348Z [err]  2025-12-17 06:19:08,106 - calling_service - INFO - ‚è±Ô∏è [06:19:08.106] üîÄ About to call _follow_transition() for: Yeah....
2025-12-17T06:19:08.489923729Z [err]  2025-12-17 06:19:08,106 - calling_service - INFO - Evaluating transitions from Greeting for message: Yeah.
2025-12-17T06:19:08.493690870Z [err]  2025-12-17 06:19:08,423 - calling_service - INFO - Selected transition index: 0
2025-12-17T06:19:08.493698903Z [err]  2025-12-17 06:19:08,423 - calling_service - INFO - Transition: Greeting -> Node Prompt: N001B_IntroAndHelpRequest_Only (V3 - Follows Name Confirmation)
2025-12-17T06:19:08.493705061Z [err]  2025-12-17 06:19:08,423 - calling_service - INFO - ‚è±Ô∏è [TIMING] TRANSITION_EVAL: 317ms
2025-12-17T06:19:08.493711247Z [err]  2025-12-17 06:19:08,423 - calling_service - INFO - ‚è±Ô∏è [06:19:08.423] ‚úÖ Node selected, about to process content...
2025-12-17T06:19:08.493717968Z [err]  2025-12-17 06:19:08,423 - calling_service - INFO - üîß Replaced {{now}} with Wednesday, December 17, 2025 at 1:19 AM EST in content
2025-12-17T06:19:08.493725927Z [err]  2025-12-17 06:19:08,423 - calling_service - INFO - üîß Replaced {{customer_name}} with Kendrick in content
2025-12-17T06:19:08.493731307Z [err]  2025-12-17 06:19:08,423 - calling_service - INFO - üîß Replaced {{callerName}} with  in content
2025-12-17T06:19:08.493736424Z [err]  2025-12-17 06:19:08,423 - calling_service - INFO - üîß Replaced {{lead_id}} with None in content
2025-12-17T06:19:08.493746591Z [err]  2025-12-17 06:19:08,423 - calling_service - INFO - üîß Replaced {{qc_tracking_enabled}} with False in content
2025-12-17T06:19:08.493765026Z [err]  2025-12-17 06:19:08,423 - calling_service - INFO - üîß Replaced {{track_keywords}} with  in content
2025-12-17T06:19:08.493770835Z [err]  2025-12-17 06:19:08,423 - calling_service - INFO - üîß Replaced {{expected_commitment}} with not_specified in content
2025-12-17T06:19:08.493777693Z [err]  2025-12-17 06:19:08,423 - calling_service - INFO - üîß Replaced {{to_number}} with +17708336397 in content
2025-12-17T06:19:08.493786066Z [err]  2025-12-17 06:19:08,423 - calling_service - INFO - üîß Replaced {{phone_number}} with +17708336397 in content
2025-12-17T06:19:08.493792336Z [err]  2025-12-17 06:19:08,423 - calling_service - INFO - üîß Replaced {{email}} with None in content
2025-12-17T06:19:08.498318311Z [err]  2025-12-17 06:19:08,423 - calling_service - INFO - ‚úÖ Using explicit SCRIPT mode (length: 89 chars) - will return text instantly
2025-12-17T06:19:08.498345473Z [err]  2025-12-17 06:19:08,423 - calling_service - INFO - Using flow node: Node Prompt: N001B_IntroAndHelpRequest_Only (V3 - Follows Name Confirmation) (type: conversation, mode: script)
2025-12-17T06:19:08.498356888Z [err]  2025-12-17 06:19:08,423 - calling_service - INFO - ‚è±Ô∏è [06:19:08.423] üìÑ About to process content (mode=script, length=89)
2025-12-17T06:19:08.498366094Z [err]  2025-12-17 06:19:08,423 - calling_service - INFO - üì§ Streaming script as 2 sentence(s)
2025-12-17T06:19:08.498379849Z [err]  2025-12-17 06:19:08,423 - server - INFO - üì§ Sentence arrived from LLM: This is Jake......
2025-12-17T06:19:08.498398792Z [err]  2025-12-17 06:19:08,423 - server - INFO - ‚è±Ô∏è [TIMING] TTFS (Time To First Sentence): 416ms
2025-12-17T06:19:08.498408994Z [err]  2025-12-17 06:19:08,423 - server - INFO - ‚ö° Starting REAL-TIME TTS for first sentence
2025-12-17T06:19:08.498419602Z [err]  2025-12-17 06:19:08,423 - server - INFO - üîç Persistent TTS lookup: call_id=v3:sz6RRi_Qx4zS1QlC4..., session=FOUND
2025-12-17T06:19:08.498430882Z [err]  2025-12-17 06:19:08,423 - server - INFO - üöÄ Streaming sentence #1 via persistent WebSocket
2025-12-17T06:19:08.498441775Z [err]  2025-12-17 06:19:08,423 - server - INFO - üéµ TTS task #1 started at +0ms
2025-12-17T06:19:08.498451352Z [err]  2025-12-17 06:19:08,423 - server - INFO - ‚è±Ô∏è [TIMING] TTFT_TTS (First TTS Task Started): 416ms
2025-12-17T06:19:08.498460753Z [err]  2025-12-17 06:19:08,423 - calling_service - INFO - üì§ Streamed script sentence 1/2: This is Jake......
2025-12-17T06:19:08.498477423Z [err]  2025-12-17 06:19:08,423 - server - INFO - üì§ Sentence arrived from LLM: I was just, um, wondering if you could possibly he...
2025-12-17T06:19:08.498486641Z [err]  2025-12-17 06:19:08,423 - server - INFO - üîç Persistent TTS lookup: call_id=v3:sz6RRi_Qx4zS1QlC4..., session=FOUND
2025-12-17T06:19:08.507449210Z [err]  2025-12-17 06:19:08,423 - server - INFO - üöÄ Streaming sentence #2 via persistent WebSocket
2025-12-17T06:19:08.507456515Z [err]  2025-12-17 06:19:08,424 - server - INFO - üéµ TTS task #2 started at +0ms
2025-12-17T06:19:08.507461406Z [err]  2025-12-17 06:19:08,424 - calling_service - INFO - üì§ Streamed script sentence 2/2: I was just, um, wondering if you could possibly he...
2025-12-17T06:19:08.507466351Z [err]  2025-12-17 06:19:08,424 - calling_service - INFO - üîä Silence tracking reset for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ (user responded)
2025-12-17T06:19:08.507471903Z [err]  2025-12-17 06:19:08,424 - calling_service - INFO - ‚úÖ User responded to regular message, resetting counter
2025-12-17T06:19:08.507476610Z [err]  2025-12-17 06:19:08,424 - calling_service - INFO - üíæ Storing node ID 1763159750250 in conversation history
2025-12-17T06:19:08.507482383Z [err]  2025-12-17 06:19:08,424 - calling_service - INFO - LLM response (0.32s): This is Jake... I was just, um, wondering if you could possibly help me out for a moment?
2025-12-17T06:19:08.507487159Z [err]  2025-12-17 06:19:08,424 - calling_service - INFO - Total latency: 0.32s
2025-12-17T06:19:08.507492082Z [err]  2025-12-17 06:19:08,424 - server - INFO - ‚úÖ LLM finished in 417ms, TTS tasks already running in background
2025-12-17T06:19:08.507497500Z [err]  2025-12-17 06:19:08,424 - server - INFO - üéµ Streaming 2 TTS chunks as they complete...
2025-12-17T06:19:08.507502677Z [err]  2025-12-17 06:19:08,424 - server - INFO - üöÄ Persistent TTS: Audio already streaming in background!
2025-12-17T06:19:08.507507522Z [err]  2025-12-17 06:19:08,424 - server - INFO -    2 sentences queued and playing seamlessly
2025-12-17T06:19:08.507512098Z [err]  2025-12-17 06:19:08,424 - persistent_tts_service - INFO - üé§ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Streaming sentence #3: This is Jake......
2025-12-17T06:19:09.867563531Z [err]  2025-12-17 06:19:08,697 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_START: Sent to ElevenLabs at T+0ms
2025-12-17T06:19:09.867571584Z [err]  2025-12-17 06:19:08,697 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_TTFB: First audio chunk at T+273ms
2025-12-17T06:19:09.867578209Z [err]  2025-12-17 06:19:08,697 - persistent_tts_service - INFO - üì§ Sending 7802 bytes of audio (49 chunks, 1.0s duration) via WebSocket
2025-12-17T06:19:09.867602498Z [err]  2025-12-17 06:19:08,697 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:19:09.867611086Z [err]  2025-12-17 06:19:08,697 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.0s (total: 1.0s from now)
2025-12-17T06:19:09.867618866Z [err]  2025-12-17 06:19:08,698 - persistent_tts_service - INFO - ‚úÖ Sent 49 audio chunks via WebSocket
2025-12-17T06:19:09.867632056Z [err]  2025-12-17 06:19:09,689 - dead_air_monitor - INFO - ‚è±Ô∏è Playback expected end time passed (0.0s ago), marking agent as done speaking
2025-12-17T06:19:09.867640412Z [err]  2025-12-17 06:19:09,689 - calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1765952349.6896977 for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:09.867721972Z [err]  2025-12-17 06:19:09,689 - calling_service - INFO - ü§ñ Agent stopped speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:10.901785126Z [err]  2025-12-17 06:19:10,191 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=False, user_speaking=False, silence=0.5s, checkin_count=0/2
2025-12-17T06:19:10.901791597Z [err]  2025-12-17 06:19:10,555 - server - INFO - üì§ Audio flowing: 798 packets sent to Soniox (5s update)
2025-12-17T06:19:10.901798827Z [err]  2025-12-17 06:19:10,693 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=False, user_speaking=False, silence=1.0s, checkin_count=0/2
2025-12-17T06:19:10.901809960Z [err]  2025-12-17 06:19:10,697 - elevenlabs_ws_service - INFO - ‚è±Ô∏è  [TIMING] ElevenLabs audio stream complete (0.5s timeout reached) - End of Sentence
2025-12-17T06:19:10.901816159Z [err]  2025-12-17 06:19:10,697 - persistent_tts_service - INFO - ‚úÖ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Finished streaming sentence #3: 1 chunks received
2025-12-17T06:19:10.901822857Z [err]  2025-12-17 06:19:10,697 - persistent_tts_service - INFO - üé§ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Streaming sentence #4: I was just, um, wondering if you could possibly he...
2025-12-17T06:19:11.815547856Z [err]  2025-12-17 06:19:11,027 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_START: Sent to ElevenLabs at T+0ms
2025-12-17T06:19:11.815561349Z [err]  2025-12-17 06:19:11,027 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_TTFB: First audio chunk at T+330ms
2025-12-17T06:19:11.815574133Z [err]  2025-12-17 06:19:11,027 - persistent_tts_service - INFO - üì§ Sending 13746 bytes of audio (86 chunks, 1.7s duration) via WebSocket
2025-12-17T06:19:11.815587233Z [err]  2025-12-17 06:19:11,027 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:19:11.815597869Z [err]  2025-12-17 06:19:11,027 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.7s (total: 1.7s from now)
2025-12-17T06:19:11.815608497Z [err]  2025-12-17 06:19:11,029 - persistent_tts_service - INFO - ‚úÖ Sent 86 audio chunks via WebSocket
2025-12-17T06:19:11.815619950Z [err]  2025-12-17 06:19:11,213 - persistent_tts_service - INFO - üì§ Sending 17090 bytes of audio (107 chunks, 2.1s duration) via WebSocket
2025-12-17T06:19:11.815631074Z [err]  2025-12-17 06:19:11,214 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:19:11.815642351Z [err]  2025-12-17 06:19:11,214 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +2.1s (total: 3.7s from now)
2025-12-17T06:19:11.815653455Z [err]  2025-12-17 06:19:11,215 - persistent_tts_service - INFO - ‚úÖ Sent 107 audio chunks via WebSocket
2025-12-17T06:19:13.923323388Z [err]  2025-12-17 06:19:13,213 - elevenlabs_ws_service - INFO - ‚è±Ô∏è  [TIMING] ElevenLabs audio stream complete (0.5s timeout reached) - End of Sentence
2025-12-17T06:19:13.923331179Z [err]  2025-12-17 06:19:13,214 - persistent_tts_service - INFO - ‚úÖ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Finished streaming sentence #4: 2 chunks received
2025-12-17T06:19:13.923340731Z [err]  2025-12-17 06:19:13,214 - server - INFO - ‚úÖ All 2 persistent TTS streams completed
2025-12-17T06:19:13.923352638Z [err]  2025-12-17 06:19:13,214 - server - INFO - ‚úÖ Agent generation complete (persistent TTS) - response window closed
2025-12-17T06:19:13.923359860Z [err]  2025-12-17 06:19:13,214 - server - INFO - ‚è±Ô∏è  FIRST AUDIO STARTED: 5207ms from user stop üöÄ
2025-12-17T06:19:13.923388547Z [err]  2025-12-17 06:19:13,214 - server - INFO - ‚è±Ô∏è  [TIMING] TTS_TOTAL: 4790ms (provider: elevenlabs, websocket: False)
2025-12-17T06:19:13.923397303Z [err]  2025-12-17 06:19:13,214 - server - INFO - ‚è±Ô∏è  [TIMING] E2E_TOTAL: 5207ms (user stopped ‚Üí play_audio_url called)
2025-12-17T06:19:13.923423579Z [err]  2025-12-17 06:19:13,214 - calling_service - INFO - ü§ñ Agent started speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:13.923431704Z [err]  2025-12-17 06:19:13,214 - server - INFO - ‚úÖ Agent generation complete - response window closed
2025-12-17T06:19:13.923441579Z [err]  2025-12-17 06:19:13,214 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2025-12-17T06:19:13.923448022Z [err]  2025-12-17 06:19:13,214 - server - INFO - ‚è±Ô∏è  [TIMING] ==== E2E LATENCY SUMMARY ====
2025-12-17T06:19:13.923453984Z [err]  2025-12-17 06:19:13,214 - server - INFO - ‚è±Ô∏è  [TIMING] STT: 11ms (provider: soniox, model: stt-rt-v3)
2025-12-17T06:19:13.923459968Z [err]  2025-12-17 06:19:13,214 - server - INFO - ‚è±Ô∏è  [TIMING] LLM_TOTAL: 417ms (provider: grok, model: grok-4-fast-non-reasoning)
2025-12-17T06:19:15.039794532Z [err]  2025-12-17 06:19:13,214 - server - INFO - ‚è±Ô∏è  [TIMING] ‚ö†Ô∏è NOTE: E2E_TOTAL does not include:
2025-12-17T06:19:15.040438686Z [err]  2025-12-17 06:19:13,214 - server - INFO - ‚è±Ô∏è  [TIMING]   - Telnyx processing time (~50-200ms)
2025-12-17T06:19:15.040449239Z [err]  2025-12-17 06:19:13,214 - server - INFO - ‚è±Ô∏è  [TIMING]   - Network latency to user's phone (~50-150ms)
2025-12-17T06:19:15.040456019Z [err]  2025-12-17 06:19:13,214 - server - INFO - ‚è±Ô∏è  [TIMING]   - Phone audio buffering (~50-200ms)
2025-12-17T06:19:15.040462635Z [err]  2025-12-17 06:19:13,214 - server - INFO - ‚è±Ô∏è  [TIMING]   - TOTAL MISSING: ~150-550ms typically
2025-12-17T06:19:15.040470376Z [err]  2025-12-17 06:19:13,214 - server - INFO - ‚è±Ô∏è  [TIMING]   - REAL USER LATENCY: 5507ms estimated
2025-12-17T06:19:15.040477765Z [err]  2025-12-17 06:19:13,214 - server - INFO - ‚è±Ô∏è  [TIMING] RESPONSE_TEXT: 89 chars, 2 sentences
2025-12-17T06:19:15.040484167Z [err]  2025-12-17 06:19:13,214 - server - INFO - ‚è±Ô∏è  [TIMING] USER_INPUT: 'Yeah....'
2025-12-17T06:19:15.040490015Z [err]  2025-12-17 06:19:13,214 - server - INFO - ‚è±Ô∏è  [TIMING] AI_RESPONSE: 'This is Jake... I was just, um, wondering if you could possi...'
2025-12-17T06:19:15.040496854Z [err]  2025-12-17 06:19:13,215 - server - INFO - ‚è±Ô∏è  [TIMING] ==========================
2025-12-17T06:19:15.040503844Z [err]  2025-12-17 06:19:13,215 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2025-12-17T06:19:15.040510471Z [err]  2025-12-17 06:19:13,397 - server - INFO - üìù Saved assistant transcript and latency to database (Node: Node Prompt: N001B_IntroAndHelpRequest_Only (V3 - Follows Name Confirmation), Dead Air: 928ms)
2025-12-17T06:19:15.040516867Z [err]  2025-12-17 06:19:13,397 - server - INFO - üîä Agent finished generating, 0 playbacks active - waiting for webhooks to close window and start silence tracking
2025-12-17T06:19:16.006706013Z [err]  2025-12-17 06:19:15,106 - persistent_tts_service - INFO - üîá [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] FLOOR RELEASED (is_holding_floor=False)
2025-12-17T06:19:16.006714081Z [err]  2025-12-17 06:19:15,214 - dead_air_monitor - INFO - ‚è±Ô∏è Playback expected end time passed (0.3s ago), marking agent as done speaking
2025-12-17T06:19:16.006720487Z [err]  2025-12-17 06:19:15,214 - calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1765952355.2144196 for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:16.006726889Z [err]  2025-12-17 06:19:15,214 - calling_service - INFO - ü§ñ Agent stopped speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:16.006733856Z [err]  2025-12-17 06:19:15,571 - server - INFO - üì§ Audio flowing: 1049 packets sent to Soniox (5s update)
2025-12-17T06:19:17.117281113Z [err]  2025-12-17 06:19:16,636 - server - INFO - üé§ Soniox receiver alive - 11 messages received in last 10s
2025-12-17T06:19:17.117291163Z [err]  2025-12-17 06:19:17,082 - server - INFO - üî§ RAW TOKENS: [" S"?, "ure"?]
2025-12-17T06:19:17.117298551Z [err]  2025-12-17 06:19:17,082 - calling_service - INFO - ‚è±Ô∏è SILENCE TIMER RESET (user started speaking) for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:17.117321106Z [err]  2025-12-17 06:19:17,082 - calling_service - INFO - üîä Silence timer reset for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ (user started speaking)
2025-12-17T06:19:17.117330451Z [err]  2025-12-17 06:19:17,082 - calling_service - INFO - üë§ User started speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:17.117341599Z [err]  2025-12-17 06:19:17,082 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Sure' | Generating: False
2025-12-17T06:19:17.700045007Z [err]  2025-12-17 06:19:17,216 - server - INFO - üî§ RAW TOKENS: [" S"‚úì, "ure"‚úì, "."‚úì, "<end>"‚úì]
2025-12-17T06:19:17.700051960Z [err]  2025-12-17 06:19:17,217 - server - INFO - üéØ Endpoint detected: <end> token received
2025-12-17T06:19:17.700058907Z [err]  2025-12-17 06:19:17,217 - server - INFO - üßπ Cleaned transcript: ' S ure .' -> 'Sure.'
2025-12-17T06:19:17.700064937Z [err]  2025-12-17 06:19:17,217 - server - INFO - üì• FINAL TOKENS: 'Sure.' (3 tokens)
2025-12-17T06:19:17.700073033Z [err]  2025-12-17 06:19:17,217 - server - INFO - üé§ Soniox final transcript: 'Sure.'
2025-12-17T06:19:17.700083171Z [err]  2025-12-17 06:19:17,217 - server - INFO - üîç FILTER CHECK: words=1, is_filler=True, is_garbled=False, tts_speaking=False, time_until_done=0.0s, generating=False, playbacks=0, is_active=False
2025-12-17T06:19:17.700089166Z [err]  2025-12-17 06:19:17,217 - server - INFO - üöÄ Spawned tracked background task for endpoint processing
2025-12-17T06:19:17.700095783Z [err]  2025-12-17 06:19:17,217 - server - INFO - ‚è±Ô∏è [06:19:17.217] üìù FINAL TRANSCRIPT RECEIVED: 'Sure.'
2025-12-17T06:19:17.700102480Z [err]  2025-12-17 06:19:17,217 - server - INFO - ‚è±Ô∏è [06:19:17.217] STT endpoint detection latency: 6ms
2025-12-17T06:19:17.700108680Z [err]  2025-12-17 06:19:17,217 - server - INFO - ‚è±Ô∏è [06:19:17.217] üé§ USER STOPPED SPEAKING - Beginning processing pipeline
2025-12-17T06:19:17.700114761Z [err]  2025-12-17 06:19:17,218 - redis_service - INFO - üì¶ Stored call data in Redis: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ (TTL: 3600s)
2025-12-17T06:19:17.700122088Z [err]  2025-12-17 06:19:17,218 - server - INFO - üë§ User has spoken - aiSpeaksAfterSilence timer cancelled if pending
2025-12-17T06:19:17.700128738Z [err]  2025-12-17 06:19:17,219 - server - INFO - ‚úÖ Agent SILENT - User said 1 word(s): 'Sure.' - Processing...
2025-12-17T06:19:17.700136287Z [err]  2025-12-17 06:19:17,229 - server - INFO - üé§ Endpoint detected by Soniox - processing transcript: Sure.
2025-12-17T06:19:17.702172843Z [err]  2025-12-17 06:19:17,229 - calling_service - INFO - üë§ User stopped speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:17.702180885Z [err]  2025-12-17 06:19:17,229 - server - INFO - ‚úÖ User starting new turn - resetting agent speaking flag
2025-12-17T06:19:17.702187743Z [err]  2025-12-17 06:19:17,229 - server - INFO - ‚è±Ô∏è [TIMING] STT_START: User last audio packet received
2025-12-17T06:19:17.702192906Z [err]  2025-12-17 06:19:17,229 - server - INFO - ‚è±Ô∏è [TIMING] STT_END: Endpoint detected at T+18ms
2025-12-17T06:19:17.702198399Z [err]  2025-12-17 06:19:17,229 - server - INFO - ‚è±Ô∏è [TIMING] STT_LATENCY: 18ms (Soniox model: stt-rt-v3)
2025-12-17T06:19:17.702203399Z [err]  2025-12-17 06:19:17,229 - server - INFO - ‚è±Ô∏è  USER STOPPED SPEAKING at T=0ms
2025-12-17T06:19:17.702209910Z [err]  2025-12-17 06:19:17,229 - server - INFO - üéôÔ∏è Agent generating response - interruption detection active
2025-12-17T06:19:17.702216040Z [err]  2025-12-17 06:19:17,229 - calling_service - INFO - ü§ñ Agent started speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:17.702221077Z [err]  2025-12-17 06:19:17,320 - server - INFO - üìù Saved user transcript to database
2025-12-17T06:19:17.702226050Z [err]  2025-12-17 06:19:17,320 - calling_service - INFO - ‚è±Ô∏è [06:19:17.320] üì• process_user_input() ENTRY - text: 'Sure....'
2025-12-17T06:19:17.702232889Z [err]  2025-12-17 06:19:17,320 - calling_service - INFO - ‚è±Ô∏è [06:19:17.320] ‚è© About to call _process_call_flow_streaming()
2025-12-17T06:19:17.702237697Z [err]  2025-12-17 06:19:17,320 - calling_service - INFO - ‚è±Ô∏è [06:19:17.320] üîÄ Agent type: call_flow, calling flow processor...
2025-12-17T06:19:17.702242435Z [err]  2025-12-17 06:19:17,320 - calling_service - INFO - ‚è±Ô∏è [06:19:17.320] üîÄ _process_call_flow_streaming() ENTRY
2025-12-17T06:19:17.702247124Z [err]  2025-12-17 06:19:17,320 - calling_service - INFO - Flow processing - History length: 7, Is first: False
2025-12-17T06:19:17.706681866Z [err]  2025-12-17 06:19:17,320 - calling_service - INFO - üîç Using explicitly set current_node_id: 1763159750250
2025-12-17T06:19:17.706687400Z [err]  2025-12-17 06:19:17,320 - calling_service - INFO - ‚è±Ô∏è [06:19:17.320] üîÄ About to call _follow_transition() for: Sure....
2025-12-17T06:19:17.706694192Z [err]  2025-12-17 06:19:17,320 - calling_service - INFO - Evaluating transitions from Node Prompt: N001B_IntroAndHelpRequest_Only (V3 - Follows Name Confirmation) for message: Sure.
2025-12-17T06:19:17.706701917Z [err]  2025-12-17 06:19:17,320 - calling_service - INFO - üé§ AUTO-TRANSITION AFTER RESPONSE enabled - user spoke, transitioning to: 1763161849799
2025-12-17T06:19:17.706721520Z [err]  2025-12-17 06:19:17,320 - calling_service - INFO - ‚úÖ Auto-transitioned (after response) to: Node ID: N_Opener_StackingIncomeHook_V3_CreativeTactic
2025-12-17T06:19:17.706732940Z [err]  2025-12-17 06:19:17,321 - calling_service - INFO - üìù User's response captured: 'Sure....'
2025-12-17T06:19:17.706739416Z [err]  2025-12-17 06:19:17,321 - calling_service - INFO - ‚è±Ô∏è [TIMING] TRANSITION_EVAL: 0ms
2025-12-17T06:19:17.706745818Z [err]  2025-12-17 06:19:17,321 - calling_service - INFO - ‚è±Ô∏è [06:19:17.321] ‚úÖ Node selected, about to process content...
2025-12-17T06:19:17.706752258Z [err]  2025-12-17 06:19:17,321 - calling_service - INFO - üîß Replaced {{now}} with Wednesday, December 17, 2025 at 1:19 AM EST in content
2025-12-17T06:19:17.706759539Z [err]  2025-12-17 06:19:17,321 - calling_service - INFO - üîß Replaced {{customer_name}} with Kendrick in content
2025-12-17T06:19:17.706766202Z [err]  2025-12-17 06:19:17,321 - calling_service - INFO - üîß Replaced {{callerName}} with  in content
2025-12-17T06:19:17.706773860Z [err]  2025-12-17 06:19:17,321 - calling_service - INFO - üîß Replaced {{lead_id}} with None in content
2025-12-17T06:19:17.706779834Z [err]  2025-12-17 06:19:17,321 - calling_service - INFO - üîß Replaced {{qc_tracking_enabled}} with False in content
2025-12-17T06:19:17.710573253Z [err]  2025-12-17 06:19:17,321 - calling_service - INFO - üîß Replaced {{track_keywords}} with  in content
2025-12-17T06:19:17.710579597Z [err]  2025-12-17 06:19:17,321 - calling_service - INFO - üîß Replaced {{expected_commitment}} with not_specified in content
2025-12-17T06:19:17.710585444Z [err]  2025-12-17 06:19:17,321 - calling_service - INFO - üîß Replaced {{to_number}} with +17708336397 in content
2025-12-17T06:19:17.710591723Z [err]  2025-12-17 06:19:17,321 - calling_service - INFO - üîß Replaced {{phone_number}} with +17708336397 in content
2025-12-17T06:19:17.710598161Z [err]  2025-12-17 06:19:17,321 - calling_service - INFO - üîß Replaced {{email}} with None in content
2025-12-17T06:19:17.710608663Z [err]  2025-12-17 06:19:17,321 - calling_service - INFO - ‚úÖ Using explicit SCRIPT mode (length: 260 chars) - will return text instantly
2025-12-17T06:19:17.710614418Z [err]  2025-12-17 06:19:17,321 - calling_service - INFO - Using flow node: Node ID: N_Opener_StackingIncomeHook_V3_CreativeTactic (type: conversation, mode: script)
2025-12-17T06:19:17.710620344Z [err]  2025-12-17 06:19:17,321 - calling_service - INFO - ‚è±Ô∏è [06:19:17.321] üìÑ About to process content (mode=script, length=260)
2025-12-17T06:19:17.710627238Z [err]  2025-12-17 06:19:17,321 - calling_service - INFO - üì§ Streaming script as 2 sentence(s)
2025-12-17T06:19:17.710633328Z [err]  2025-12-17 06:19:17,321 - server - INFO - üì§ Sentence arrived from LLM: Well, uh, I don't know if you could yet, but, I'm ...
2025-12-17T06:19:17.710639567Z [err]  2025-12-17 06:19:17,321 - server - INFO - ‚è±Ô∏è [TIMING] TTFS (Time To First Sentence): 91ms
2025-12-17T06:19:17.710646045Z [err]  2025-12-17 06:19:17,321 - server - INFO - ‚ö° Starting REAL-TIME TTS for first sentence
2025-12-17T06:19:17.710654066Z [err]  2025-12-17 06:19:17,321 - server - INFO - üîç Persistent TTS lookup: call_id=v3:sz6RRi_Qx4zS1QlC4..., session=FOUND
2025-12-17T06:19:17.710660219Z [err]  2025-12-17 06:19:17,321 - server - INFO - üöÄ Streaming sentence #1 via persistent WebSocket
2025-12-17T06:19:17.711878047Z [err]  2025-12-17 06:19:17,321 - server - INFO - üéµ TTS task #1 started at +0ms
2025-12-17T06:19:17.713166049Z [err]  2025-12-17 06:19:17,321 - server - INFO - ‚è±Ô∏è [TIMING] TTFT_TTS (First TTS Task Started): 91ms
2025-12-17T06:19:17.713178639Z [err]  2025-12-17 06:19:17,321 - calling_service - INFO - üì§ Streamed script sentence 1/2: Well, uh, I don't know if you could yet, but, I'm ...
2025-12-17T06:19:17.713186553Z [err]  2025-12-17 06:19:17,321 - server - INFO - üì§ Sentence arrived from LLM: I know this call is out of the blue, but do you ha...
2025-12-17T06:19:17.713194572Z [err]  2025-12-17 06:19:17,321 - server - INFO - üîç Persistent TTS lookup: call_id=v3:sz6RRi_Qx4zS1QlC4..., session=FOUND
2025-12-17T06:19:17.713203097Z [err]  2025-12-17 06:19:17,321 - server - INFO - üöÄ Streaming sentence #2 via persistent WebSocket
2025-12-17T06:19:17.713211358Z [err]  2025-12-17 06:19:17,321 - server - INFO - üéµ TTS task #2 started at +0ms
2025-12-17T06:19:17.713219045Z [err]  2025-12-17 06:19:17,321 - calling_service - INFO - üì§ Streamed script sentence 2/2: I know this call is out of the blue, but do you ha...
2025-12-17T06:19:17.713227521Z [err]  2025-12-17 06:19:17,321 - calling_service - INFO - üîä Silence tracking reset for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ (user responded)
2025-12-17T06:19:17.713237821Z [err]  2025-12-17 06:19:17,321 - calling_service - INFO - ‚úÖ User responded to regular message, resetting counter
2025-12-17T06:19:17.713245401Z [err]  2025-12-17 06:19:17,321 - calling_service - INFO - üíæ Storing node ID 1763161849799 in conversation history
2025-12-17T06:19:17.713251963Z [err]  2025-12-17 06:19:17,321 - calling_service - INFO - LLM response (0.00s): Well, uh, I don't know if you could yet, but, I'm calling because you filled out an ad about stacking income without stacking hours. I know this call is out of the blue, but do you have just 25 seconds for me to explain why I'm reaching out today specifically?
2025-12-17T06:19:17.716371528Z [err]  2025-12-17 06:19:17,321 - calling_service - INFO - Total latency: 0.00s
2025-12-17T06:19:17.716378044Z [err]  2025-12-17 06:19:17,321 - server - INFO - ‚úÖ LLM finished in 92ms, TTS tasks already running in background
2025-12-17T06:19:17.716385106Z [err]  2025-12-17 06:19:17,321 - server - INFO - üéµ Streaming 2 TTS chunks as they complete...
2025-12-17T06:19:17.716394194Z [err]  2025-12-17 06:19:17,321 - server - INFO - üöÄ Persistent TTS: Audio already streaming in background!
2025-12-17T06:19:17.716401276Z [err]  2025-12-17 06:19:17,321 - persistent_tts_service - INFO - üé§ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Streaming sentence #5: Well, uh, I don't know if you could yet, but, I'm ...
2025-12-17T06:19:17.716403681Z [err]  2025-12-17 06:19:17,321 - server - INFO -    2 sentences queued and playing seamlessly
2025-12-17T06:19:17.716404843Z [err]  2025-12-17 06:19:17,700 - persistent_tts_service - INFO - üì§ Sending 325 bytes of audio (3 chunks, 0.0s duration) via WebSocket
2025-12-17T06:19:17.716411046Z [err]  2025-12-17 06:19:17,694 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_START: Sent to ElevenLabs at T+0ms
2025-12-17T06:19:17.716417940Z [err]  2025-12-17 06:19:17,694 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_TTFB: First audio chunk at T+372ms
2025-12-17T06:19:17.716424739Z [err]  2025-12-17 06:19:17,694 - persistent_tts_service - INFO - üì§ Sending 13793 bytes of audio (87 chunks, 1.7s duration) via WebSocket
2025-12-17T06:19:17.716431049Z [err]  2025-12-17 06:19:17,694 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:19:17.716437796Z [err]  2025-12-17 06:19:17,694 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.7s (total: 1.7s from now)
2025-12-17T06:19:17.716444184Z [err]  2025-12-17 06:19:17,696 - persistent_tts_service - INFO - ‚úÖ Sent 87 audio chunks via WebSocket
2025-12-17T06:19:17.717421483Z [err]  2025-12-17 06:19:17,701 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:19:17.717427895Z [err]  2025-12-17 06:19:17,701 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +0.0s (total: 1.8s from now)
2025-12-17T06:19:17.717433656Z [err]  2025-12-17 06:19:17,701 - persistent_tts_service - INFO - ‚úÖ Sent 3 audio chunks via WebSocket
2025-12-17T06:19:17.967949553Z [err]  2025-12-17 06:19:17,964 - persistent_tts_service - INFO - üì§ Sending 13793 bytes of audio (87 chunks, 1.7s duration) via WebSocket
2025-12-17T06:19:17.967958681Z [err]  2025-12-17 06:19:17,964 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:19:17.967965308Z [err]  2025-12-17 06:19:17,964 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.7s (total: 3.2s from now)
2025-12-17T06:19:17.967971176Z [err]  2025-12-17 06:19:17,966 - persistent_tts_service - INFO - ‚úÖ Sent 87 audio chunks via WebSocket
2025-12-17T06:19:17.970764481Z [err]  2025-12-17 06:19:17,966 - persistent_tts_service - INFO - üì§ Sending 1811 bytes of audio (12 chunks, 0.2s duration) via WebSocket
2025-12-17T06:19:17.970778385Z [err]  2025-12-17 06:19:17,966 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:19:17.970786575Z [err]  2025-12-17 06:19:17,966 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +0.2s (total: 3.4s from now)
2025-12-17T06:19:17.970792944Z [err]  2025-12-17 06:19:17,966 - persistent_tts_service - INFO - ‚úÖ Sent 12 audio chunks via WebSocket
2025-12-17T06:19:19.030004778Z [err]  2025-12-17 06:19:18,232 - persistent_tts_service - INFO - üì§ Sending 13792 bytes of audio (87 chunks, 1.7s duration) via WebSocket
2025-12-17T06:19:19.030012251Z [err]  2025-12-17 06:19:18,232 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:19:19.030019270Z [err]  2025-12-17 06:19:18,232 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.7s (total: 4.9s from now)
2025-12-17T06:19:19.030026526Z [err]  2025-12-17 06:19:18,234 - persistent_tts_service - INFO - ‚úÖ Sent 87 audio chunks via WebSocket
2025-12-17T06:19:19.030033164Z [err]  2025-12-17 06:19:18,241 - persistent_tts_service - INFO - üì§ Sending 2926 bytes of audio (19 chunks, 0.4s duration) via WebSocket
2025-12-17T06:19:19.030040188Z [err]  2025-12-17 06:19:18,241 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:19:19.030047091Z [err]  2025-12-17 06:19:18,241 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +0.4s (total: 5.3s from now)
2025-12-17T06:19:19.030055381Z [err]  2025-12-17 06:19:18,241 - persistent_tts_service - INFO - ‚úÖ Sent 19 audio chunks via WebSocket
2025-12-17T06:19:19.030062753Z [err]  2025-12-17 06:19:18,440 - persistent_tts_service - INFO - üì§ Sending 16347 bytes of audio (103 chunks, 2.0s duration) via WebSocket
2025-12-17T06:19:19.030069622Z [err]  2025-12-17 06:19:18,441 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:19:19.030077279Z [err]  2025-12-17 06:19:18,441 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +2.0s (total: 7.1s from now)
2025-12-17T06:19:19.030084798Z [err]  2025-12-17 06:19:18,442 - persistent_tts_service - INFO - ‚úÖ Sent 103 audio chunks via WebSocket
2025-12-17T06:19:21.089462784Z [err]  2025-12-17 06:19:20,245 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (5.3s left)
2025-12-17T06:19:21.089469201Z [err]  2025-12-17 06:19:20,441 - elevenlabs_ws_service - INFO - ‚è±Ô∏è  [TIMING] ElevenLabs audio stream complete (0.5s timeout reached) - End of Sentence
2025-12-17T06:19:21.089475090Z [err]  2025-12-17 06:19:20,441 - persistent_tts_service - INFO - ‚úÖ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Finished streaming sentence #5: 7 chunks received
2025-12-17T06:19:21.089480905Z [err]  2025-12-17 06:19:20,441 - persistent_tts_service - INFO - üé§ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Streaming sentence #6: I know this call is out of the blue, but do you ha...
2025-12-17T06:19:21.089487557Z [err]  2025-12-17 06:19:20,575 - server - INFO - üì§ Audio flowing: 1299 packets sent to Soniox (5s update)
2025-12-17T06:19:21.089494764Z [err]  2025-12-17 06:19:20,749 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (4.8s left)
2025-12-17T06:19:21.089501259Z [err]  2025-12-17 06:19:20,758 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_START: Sent to ElevenLabs at T+0ms
2025-12-17T06:19:21.089507927Z [err]  2025-12-17 06:19:20,758 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_TTFB: First audio chunk at T+316ms
2025-12-17T06:19:21.089514254Z [err]  2025-12-17 06:19:20,758 - persistent_tts_service - INFO - üì§ Sending 9288 bytes of audio (59 chunks, 1.2s duration) via WebSocket
2025-12-17T06:19:21.089521069Z [err]  2025-12-17 06:19:20,758 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:19:21.089527389Z [err]  2025-12-17 06:19:20,758 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.2s (total: 5.9s from now)
2025-12-17T06:19:21.089537003Z [err]  2025-12-17 06:19:20,759 - persistent_tts_service - INFO - ‚úÖ Sent 59 audio chunks via WebSocket
2025-12-17T06:19:21.089967013Z [err]  2025-12-17 06:19:20,953 - persistent_tts_service - INFO - üì§ Sending 13746 bytes of audio (86 chunks, 1.7s duration) via WebSocket
2025-12-17T06:19:21.089973673Z [err]  2025-12-17 06:19:20,953 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:19:21.089979904Z [err]  2025-12-17 06:19:20,953 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.7s (total: 7.5s from now)
2025-12-17T06:19:21.089988867Z [err]  2025-12-17 06:19:20,954 - persistent_tts_service - INFO - ‚úÖ Sent 86 audio chunks via WebSocket
2025-12-17T06:19:21.785957764Z [err]  2025-12-17 06:19:21,157 - persistent_tts_service - INFO - üì§ Sending 24892 bytes of audio (156 chunks, 3.1s duration) via WebSocket
2025-12-17T06:19:21.785964328Z [err]  2025-12-17 06:19:21,157 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:19:21.785971853Z [err]  2025-12-17 06:19:21,157 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +3.1s (total: 10.4s from now)
2025-12-17T06:19:21.785980452Z [err]  2025-12-17 06:19:21,161 - persistent_tts_service - INFO - ‚úÖ Sent 156 audio chunks via WebSocket
2025-12-17T06:19:23.932207333Z [err]  2025-12-17 06:19:23,157 - elevenlabs_ws_service - INFO - ‚è±Ô∏è  [TIMING] ElevenLabs audio stream complete (0.5s timeout reached) - End of Sentence
2025-12-17T06:19:23.932212969Z [err]  2025-12-17 06:19:23,157 - persistent_tts_service - INFO - ‚úÖ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Finished streaming sentence #6: 3 chunks received
2025-12-17T06:19:23.932217740Z [err]  2025-12-17 06:19:23,157 - server - INFO - ‚úÖ All 2 persistent TTS streams completed
2025-12-17T06:19:23.932222559Z [err]  2025-12-17 06:19:23,157 - server - INFO - ‚úÖ Agent generation complete (persistent TTS) - response window closed
2025-12-17T06:19:23.932230261Z [err]  2025-12-17 06:19:23,158 - server - INFO - ‚è±Ô∏è  FIRST AUDIO STARTED: 5928ms from user stop üöÄ
2025-12-17T06:19:23.932235449Z [err]  2025-12-17 06:19:23,158 - calling_service - INFO - ü§ñ Agent started speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:23.932241318Z [err]  2025-12-17 06:19:23,158 - server - INFO - ‚úÖ Agent generation complete - response window closed
2025-12-17T06:19:23.932249274Z [err]  2025-12-17 06:19:23,158 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2025-12-17T06:19:23.932254582Z [err]  2025-12-17 06:19:23,158 - server - INFO - ‚è±Ô∏è  [TIMING] ==== E2E LATENCY SUMMARY ====
2025-12-17T06:19:23.932260534Z [err]  2025-12-17 06:19:23,158 - server - INFO - ‚è±Ô∏è  [TIMING] STT: 18ms (provider: soniox, model: stt-rt-v3)
2025-12-17T06:19:23.932266676Z [err]  2025-12-17 06:19:23,158 - server - INFO - ‚è±Ô∏è  [TIMING] LLM_TOTAL: 92ms (provider: grok, model: grok-4-fast-non-reasoning)
2025-12-17T06:19:23.932271799Z [err]  2025-12-17 06:19:23,158 - server - INFO - ‚è±Ô∏è  [TIMING] TTS_TOTAL: 5836ms (provider: elevenlabs, websocket: False)
2025-12-17T06:19:23.932276838Z [err]  2025-12-17 06:19:23,158 - server - INFO - ‚è±Ô∏è  [TIMING] E2E_TOTAL: 5928ms (user stopped ‚Üí play_audio_url called)
2025-12-17T06:19:23.934620076Z [err]  2025-12-17 06:19:23,158 - server - INFO - ‚è±Ô∏è  [TIMING] ‚ö†Ô∏è NOTE: E2E_TOTAL does not include:
2025-12-17T06:19:23.934626952Z [err]  2025-12-17 06:19:23,158 - server - INFO - ‚è±Ô∏è  [TIMING]   - Telnyx processing time (~50-200ms)
2025-12-17T06:19:23.934633091Z [err]  2025-12-17 06:19:23,158 - server - INFO - ‚è±Ô∏è  [TIMING]   - Network latency to user's phone (~50-150ms)
2025-12-17T06:19:23.934639709Z [err]  2025-12-17 06:19:23,158 - server - INFO - ‚è±Ô∏è  [TIMING]   - Phone audio buffering (~50-200ms)
2025-12-17T06:19:23.935065961Z [err]  2025-12-17 06:19:23,158 - server - INFO - ‚è±Ô∏è  [TIMING]   - TOTAL MISSING: ~150-550ms typically
2025-12-17T06:19:23.935076694Z [err]  2025-12-17 06:19:23,158 - server - INFO - ‚è±Ô∏è  [TIMING]   - REAL USER LATENCY: 6228ms estimated
2025-12-17T06:19:23.935083474Z [err]  2025-12-17 06:19:23,158 - server - INFO - ‚è±Ô∏è  [TIMING] RESPONSE_TEXT: 260 chars, 2 sentences
2025-12-17T06:19:23.935089936Z [err]  2025-12-17 06:19:23,158 - server - INFO - ‚è±Ô∏è  [TIMING] USER_INPUT: 'Sure....'
2025-12-17T06:19:23.935095760Z [err]  2025-12-17 06:19:23,158 - server - INFO - ‚è±Ô∏è  [TIMING] AI_RESPONSE: 'Well, uh, I don't know if you could yet, but, I'm calling be...'
2025-12-17T06:19:23.935101170Z [err]  2025-12-17 06:19:23,158 - server - INFO - ‚è±Ô∏è  [TIMING] ==========================
2025-12-17T06:19:23.935106581Z [err]  2025-12-17 06:19:23,158 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2025-12-17T06:19:23.935112887Z [err]  2025-12-17 06:19:23,340 - server - INFO - üìù Saved assistant transcript and latency to database (Node: Node ID: N_Opener_StackingIncomeHook_V3_CreativeTactic, Dead Air: 610ms)
2025-12-17T06:19:23.935120113Z [err]  2025-12-17 06:19:23,340 - server - INFO - üîä Agent finished generating, 0 playbacks active - waiting for webhooks to close window and start silence tracking
2025-12-17T06:19:26.063535660Z [err]  2025-12-17 06:19:25,788 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (5.7s left)
2025-12-17T06:19:26.063597091Z [err]  2025-12-17 06:19:25,285 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (6.2s left)
2025-12-17T06:19:26.063612529Z [err]  2025-12-17 06:19:25,597 - server - INFO - üì§ Audio flowing: 1550 packets sent to Soniox (5s update)
2025-12-17T06:19:27.154475202Z [err]  2025-12-17 06:19:26,947 - server - INFO - üé§ Soniox receiver alive - 11 messages received in last 10s
2025-12-17T06:19:30.686745359Z [err]  2025-12-17 06:19:30,611 - server - INFO - üì§ Audio flowing: 1801 packets sent to Soniox (5s update)
2025-12-17T06:19:30.687356071Z [err]  2025-12-17 06:19:30,321 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (1.2s left)
2025-12-17T06:19:31.678559470Z [err]  2025-12-17 06:19:30,824 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (0.7s left)
2025-12-17T06:19:32.410900221Z [err]  2025-12-17 06:19:31,711 - persistent_tts_service - INFO - üîá [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] FLOOR RELEASED (is_holding_floor=False)
2025-12-17T06:19:32.410906396Z [err]  2025-12-17 06:19:31,828 - dead_air_monitor - INFO - ‚è±Ô∏è Playback expected end time passed (0.3s ago), marking agent as done speaking
2025-12-17T06:19:32.410912476Z [err]  2025-12-17 06:19:31,828 - calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1765952371.8285801 for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:32.410918160Z [err]  2025-12-17 06:19:31,828 - calling_service - INFO - ü§ñ Agent stopped speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:34.289298147Z [err]  2025-12-17 06:19:34,063 - server - INFO - üî§ RAW TOKENS: [" S"?]
2025-12-17T06:19:34.289309556Z [err]  2025-12-17 06:19:34,064 - calling_service - INFO - ‚è±Ô∏è SILENCE TIMER RESET (user started speaking) for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:34.289317684Z [err]  2025-12-17 06:19:34,064 - calling_service - INFO - üîä Silence timer reset for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ (user started speaking)
2025-12-17T06:19:34.289327913Z [err]  2025-12-17 06:19:34,064 - calling_service - INFO - üë§ User started speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:34.289335959Z [err]  2025-12-17 06:19:34,064 - server - INFO - üîç PARTIAL TRANSCRIPT: 'S' | Generating: False
2025-12-17T06:19:34.289346903Z [err]  2025-12-17 06:19:34,183 - server - INFO - üî§ RAW TOKENS: [" S"?, "ure"?]
2025-12-17T06:19:34.289354132Z [err]  2025-12-17 06:19:34,184 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Sure' | Generating: False
2025-12-17T06:19:34.311328517Z [err]  2025-12-17 06:19:34,308 - server - INFO - üî§ RAW TOKENS: [" S"?, "ure"?, "."?]
2025-12-17T06:19:34.311338245Z [err]  2025-12-17 06:19:34,308 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Sure.' | Generating: False
2025-12-17T06:19:34.378385812Z [err]  2025-12-17 06:19:34,373 - server - INFO - üî§ RAW TOKENS: [" S"?, "ure"?, "."?, " Go"?, " a"?]
2025-12-17T06:19:34.378399689Z [err]  2025-12-17 06:19:34,374 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Sure. Go a' | Generating: False
2025-12-17T06:19:34.489545968Z [err]  2025-12-17 06:19:34,483 - server - INFO - üî§ RAW TOKENS: [" S"?, "ure"?, "."?, " Go"?, " a"?, "he"?]
2025-12-17T06:19:34.489555864Z [err]  2025-12-17 06:19:34,483 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Sure. Go a he' | Generating: False
2025-12-17T06:19:34.641196935Z [err]  2025-12-17 06:19:34,636 - server - INFO - üî§ RAW TOKENS: [" S"‚úì, "ure"‚úì, "."‚úì, " Go"‚úì, " a"‚úì, "he"‚úì, "ad."‚úì, "<end>"‚úì]
2025-12-17T06:19:34.641209714Z [err]  2025-12-17 06:19:34,636 - server - INFO - üéØ Endpoint detected: <end> token received
2025-12-17T06:19:34.641215515Z [err]  2025-12-17 06:19:34,637 - server - INFO - üßπ Cleaned transcript: ' S ure .  Go  a he ad.' -> 'Sure. Go ahead.'
2025-12-17T06:19:34.641222967Z [err]  2025-12-17 06:19:34,637 - server - INFO - üì• FINAL TOKENS: 'Sure. Go ahead.' (7 tokens)
2025-12-17T06:19:34.641229016Z [err]  2025-12-17 06:19:34,637 - server - INFO - üé§ Soniox final transcript: 'Sure. Go ahead.'
2025-12-17T06:19:34.641235268Z [err]  2025-12-17 06:19:34,637 - server - INFO - üîç FILTER CHECK: words=3, is_filler=False, is_garbled=False, tts_speaking=False, time_until_done=0.0s, generating=False, playbacks=0, is_active=False
2025-12-17T06:19:34.641241602Z [err]  2025-12-17 06:19:34,637 - server - INFO - üöÄ Spawned tracked background task for endpoint processing
2025-12-17T06:19:34.641247838Z [err]  2025-12-17 06:19:34,637 - server - INFO - ‚è±Ô∏è [06:19:34.637] üìù FINAL TRANSCRIPT RECEIVED: 'Sure. Go ahead.'
2025-12-17T06:19:34.641253744Z [err]  2025-12-17 06:19:34,637 - server - INFO - ‚è±Ô∏è [06:19:34.637] STT endpoint detection latency: 3ms
2025-12-17T06:19:34.641259661Z [err]  2025-12-17 06:19:34,637 - server - INFO - ‚è±Ô∏è [06:19:34.637] üé§ USER STOPPED SPEAKING - Beginning processing pipeline
2025-12-17T06:19:34.641264821Z [err]  2025-12-17 06:19:34,638 - redis_service - INFO - üì¶ Stored call data in Redis: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ (TTL: 3600s)
2025-12-17T06:19:34.641270331Z [err]  2025-12-17 06:19:34,638 - server - INFO - üë§ User has spoken - aiSpeaksAfterSilence timer cancelled if pending
2025-12-17T06:19:34.641275344Z [err]  2025-12-17 06:19:34,638 - server - INFO - ‚úÖ Agent SILENT - User said 3 word(s): 'Sure. Go ahead.' - Processing...
2025-12-17T06:19:34.652455374Z [err]  2025-12-17 06:19:34,648 - server - INFO - üé§ Endpoint detected by Soniox - processing transcript: Sure. Go ahead.
2025-12-17T06:19:34.652466032Z [err]  2025-12-17 06:19:34,649 - calling_service - INFO - üë§ User stopped speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:34.652472142Z [err]  2025-12-17 06:19:34,649 - server - INFO - ‚úÖ User starting new turn - resetting agent speaking flag
2025-12-17T06:19:34.652476980Z [err]  2025-12-17 06:19:34,649 - server - INFO - ‚è±Ô∏è [TIMING] STT_START: User last audio packet received
2025-12-17T06:19:34.652482248Z [err]  2025-12-17 06:19:34,649 - server - INFO - ‚è±Ô∏è [TIMING] STT_END: Endpoint detected at T+14ms
2025-12-17T06:19:34.652489329Z [err]  2025-12-17 06:19:34,649 - server - INFO - ‚è±Ô∏è [TIMING] STT_LATENCY: 14ms (Soniox model: stt-rt-v3)
2025-12-17T06:19:34.652495254Z [err]  2025-12-17 06:19:34,649 - server - INFO - ‚è±Ô∏è  USER STOPPED SPEAKING at T=0ms
2025-12-17T06:19:34.652503775Z [err]  2025-12-17 06:19:34,649 - server - INFO - üéôÔ∏è Agent generating response - interruption detection active
2025-12-17T06:19:34.652509213Z [err]  2025-12-17 06:19:34,649 - calling_service - INFO - ü§ñ Agent started speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:35.338973201Z [err]  2025-12-17 06:19:35,211 - calling_service - INFO - üîß Replaced {{callerName}} with  in content
2025-12-17T06:19:35.338982719Z [err]  2025-12-17 06:19:35,211 - calling_service - INFO - üîß Replaced {{lead_id}} with None in content
2025-12-17T06:19:35.338985404Z [err]  2025-12-17 06:19:35,211 - calling_service - INFO - üìä Available transitions: ['Agrees|consents (yes|sure|okay|hear more|call cons...', 'Any objection or non compliance that isn\'t a "I do...', 'NO (flat out)|No recall (done quickly) AND no othe...', "I'm Busy, or requests to call back responses from ..."]
2025-12-17T06:19:35.338999353Z [err]  2025-12-17 06:19:35,211 - calling_service - INFO - Selected transition index: 0
2025-12-17T06:19:35.339011716Z [err]  2025-12-17 06:19:35,211 - calling_service - INFO - Transition: Node ID: N_Opener_StackingIncomeHook_V3_CreativeTactic -> N_IntroduceModel_And_AskQuestions_V3_Adaptive
2025-12-17T06:19:35.339021527Z [err]  2025-12-17 06:19:34,739 - server - INFO - üìù Saved user transcript to database
2025-12-17T06:19:35.339026470Z [err]  2025-12-17 06:19:34,739 - calling_service - INFO - ‚è±Ô∏è [06:19:34.739] üì• process_user_input() ENTRY - text: 'Sure. Go ahead....'
2025-12-17T06:19:35.339031492Z [err]  2025-12-17 06:19:34,739 - calling_service - INFO - ‚è±Ô∏è [06:19:34.739] ‚è© About to call _process_call_flow_streaming()
2025-12-17T06:19:35.339036470Z [err]  2025-12-17 06:19:35,211 - calling_service - INFO - ‚è±Ô∏è [TIMING] TRANSITION_EVAL: 471ms
2025-12-17T06:19:35.339038352Z [err]  2025-12-17 06:19:34,739 - calling_service - INFO - ‚è±Ô∏è [06:19:34.739] üîÄ Agent type: call_flow, calling flow processor...
2025-12-17T06:19:35.339043850Z [err]  2025-12-17 06:19:34,739 - calling_service - INFO - ‚è±Ô∏è [06:19:34.739] üîÄ _process_call_flow_streaming() ENTRY
2025-12-17T06:19:35.339046166Z [err]  2025-12-17 06:19:35,211 - calling_service - INFO - ‚è±Ô∏è [06:19:35.211] ‚úÖ Node selected, about to process content...
2025-12-17T06:19:35.339049989Z [err]  2025-12-17 06:19:34,739 - calling_service - INFO - Flow processing - History length: 9, Is first: False
2025-12-17T06:19:35.339054805Z [err]  2025-12-17 06:19:35,211 - calling_service - INFO - üîß Replaced {{now}} with Wednesday, December 17, 2025 at 1:19 AM EST in content
2025-12-17T06:19:35.339056213Z [err]  2025-12-17 06:19:34,739 - calling_service - INFO - üîç Using explicitly set current_node_id: 1763161849799
2025-12-17T06:19:35.339062917Z [err]  2025-12-17 06:19:34,739 - calling_service - INFO - ‚è±Ô∏è [06:19:34.739] üîÄ About to call _follow_transition() for: Sure. Go ahead....
2025-12-17T06:19:35.339064020Z [err]  2025-12-17 06:19:35,211 - calling_service - INFO - üîß Replaced {{customer_name}} with Kendrick in content
2025-12-17T06:19:35.339068254Z [err]  2025-12-17 06:19:34,739 - calling_service - INFO - Evaluating transitions from Node ID: N_Opener_StackingIncomeHook_V3_CreativeTactic for message: Sure. Go ahead.
2025-12-17T06:19:35.339072035Z [err]  2025-12-17 06:19:35,211 - calling_service - INFO - üîß Replaced {{qc_tracking_enabled}} with False in content
2025-12-17T06:19:35.339073294Z [err]  2025-12-17 06:19:34,749 - calling_service - INFO - ‚è±Ô∏è [06:19:34.749] üîÄ TRANSITION EVALUATION START - Calling LLM for 4 options
2025-12-17T06:19:35.339079934Z [err]  2025-12-17 06:19:35,209 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-17T06:19:35.339085358Z [err]  2025-12-17 06:19:35,211 - calling_service - INFO - üîß Replaced {{track_keywords}} with  in content
2025-12-17T06:19:35.339086303Z [err]  2025-12-17 06:19:35,211 - calling_service - INFO - ‚è±Ô∏è [06:19:35.210] üîÄ TRANSITION EVALUATION COMPLETE - took 461ms
2025-12-17T06:19:35.339092778Z [err]  2025-12-17 06:19:35,211 - calling_service - INFO - ü§ñ AI transition decision: '0'
2025-12-17T06:19:35.339095275Z [err]  2025-12-17 06:19:35,211 - calling_service - INFO - üîß Replaced {{expected_commitment}} with not_specified in content
2025-12-17T06:19:35.342276295Z [err]  2025-12-17 06:19:35,211 - calling_service - INFO - üîß Replaced {{to_number}} with +17708336397 in content
2025-12-17T06:19:35.342288867Z [err]  2025-12-17 06:19:35,211 - calling_service - INFO - üîß Replaced {{phone_number}} with +17708336397 in content
2025-12-17T06:19:35.342293151Z [err]  2025-12-17 06:19:35,211 - server - INFO - üì§ Sentence arrived from LLM: Okay, in a nutshell, we set up passive income webs...
2025-12-17T06:19:35.342299503Z [err]  2025-12-17 06:19:35,211 - calling_service - INFO - üîß Replaced {{email}} with None in content
2025-12-17T06:19:35.342308716Z [err]  2025-12-17 06:19:35,211 - server - INFO - ‚è±Ô∏è [TIMING] TTFS (Time To First Sentence): 562ms
2025-12-17T06:19:35.342310105Z [err]  2025-12-17 06:19:35,211 - calling_service - INFO - ‚úÖ Using explicit SCRIPT mode (length: 164 chars) - will return text instantly
2025-12-17T06:19:35.342320304Z [err]  2025-12-17 06:19:35,211 - calling_service - INFO - Using flow node: N_IntroduceModel_And_AskQuestions_V3_Adaptive (type: conversation, mode: script)
2025-12-17T06:19:35.342323343Z [err]  2025-12-17 06:19:35,211 - server - INFO - ‚ö° Starting REAL-TIME TTS for first sentence
2025-12-17T06:19:35.342358661Z [err]  2025-12-17 06:19:35,211 - calling_service - INFO - ‚è±Ô∏è [06:19:35.211] üìÑ About to process content (mode=script, length=164)
2025-12-17T06:19:35.342367148Z [err]  2025-12-17 06:19:35,211 - calling_service - INFO - üì§ Streaming script as 2 sentence(s)
2025-12-17T06:19:35.342389573Z [err]  2025-12-17 06:19:35,211 - server - INFO - üîç Persistent TTS lookup: call_id=v3:sz6RRi_Qx4zS1QlC4..., session=FOUND
2025-12-17T06:19:35.342399648Z [err]  2025-12-17 06:19:35,211 - server - INFO - üöÄ Streaming sentence #1 via persistent WebSocket
2025-12-17T06:19:35.342416436Z [err]  2025-12-17 06:19:35,211 - server - INFO - üéµ TTS task #1 started at +0ms
2025-12-17T06:19:35.342429082Z [err]  2025-12-17 06:19:35,211 - server - INFO - ‚è±Ô∏è [TIMING] TTFT_TTS (First TTS Task Started): 562ms
2025-12-17T06:19:35.344035611Z [err]  2025-12-17 06:19:35,211 - calling_service - INFO - üì§ Streamed script sentence 1/2: Okay, in a nutshell, we set up passive income webs...
2025-12-17T06:19:35.344042376Z [err]  2025-12-17 06:19:35,211 - server - INFO - üì§ Sentence arrived from LLM: What questions come to mind as soon as you hear so...
2025-12-17T06:19:35.344047827Z [err]  2025-12-17 06:19:35,211 - server - INFO - üîç Persistent TTS lookup: call_id=v3:sz6RRi_Qx4zS1QlC4..., session=FOUND
2025-12-17T06:19:35.344053303Z [err]  2025-12-17 06:19:35,212 - server - INFO - üöÄ Streaming sentence #2 via persistent WebSocket
2025-12-17T06:19:35.344059190Z [err]  2025-12-17 06:19:35,212 - server - INFO - üéµ TTS task #2 started at +0ms
2025-12-17T06:19:35.344064626Z [err]  2025-12-17 06:19:35,212 - calling_service - INFO - üì§ Streamed script sentence 2/2: What questions come to mind as soon as you hear so...
2025-12-17T06:19:35.344069610Z [err]  2025-12-17 06:19:35,212 - calling_service - INFO - üîä Silence tracking reset for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ (user responded)
2025-12-17T06:19:35.344074638Z [err]  2025-12-17 06:19:35,212 - calling_service - INFO - ‚úÖ User responded to regular message, resetting counter
2025-12-17T06:19:35.344078568Z [err]  2025-12-17 06:19:35,212 - calling_service - INFO - üíæ Storing node ID 1763163400676 in conversation history
2025-12-17T06:19:35.344082504Z [err]  2025-12-17 06:19:35,212 - calling_service - INFO - LLM response (0.47s): Okay, in a nutshell, we set up passive income websites, and we let them produce income for you. What questions come to mind as soon as you hear something like that?
2025-12-17T06:19:35.344086646Z [err]  2025-12-17 06:19:35,212 - calling_service - INFO - Total latency: 0.47s
2025-12-17T06:19:35.344091527Z [err]  2025-12-17 06:19:35,212 - server - INFO - ‚úÖ LLM finished in 562ms, TTS tasks already running in background
2025-12-17T06:19:35.344095961Z [err]  2025-12-17 06:19:35,212 - server - INFO - üéµ Streaming 2 TTS chunks as they complete...
2025-12-17T06:19:35.345829559Z [err]  2025-12-17 06:19:35,212 - server - INFO - üöÄ Persistent TTS: Audio already streaming in background!
2025-12-17T06:19:35.345839570Z [err]  2025-12-17 06:19:35,212 - server - INFO -    2 sentences queued and playing seamlessly
2025-12-17T06:19:35.345845821Z [err]  2025-12-17 06:19:35,212 - persistent_tts_service - INFO - üé§ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Streaming sentence #7: Okay, in a nutshell, we set up passive income webs...
2025-12-17T06:19:35.594383818Z [err]  2025-12-17 06:19:35,590 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_START: Sent to ElevenLabs at T+0ms
2025-12-17T06:19:35.594395816Z [err]  2025-12-17 06:19:35,590 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_TTFB: First audio chunk at T+378ms
2025-12-17T06:19:35.594404152Z [err]  2025-12-17 06:19:35,590 - persistent_tts_service - INFO - üì§ Sending 13793 bytes of audio (87 chunks, 1.7s duration) via WebSocket
2025-12-17T06:19:35.594411349Z [err]  2025-12-17 06:19:35,590 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:19:35.594417875Z [err]  2025-12-17 06:19:35,590 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.7s (total: 1.7s from now)
2025-12-17T06:19:35.594424550Z [err]  2025-12-17 06:19:35,592 - persistent_tts_service - INFO - ‚úÖ Sent 87 audio chunks via WebSocket
2025-12-17T06:19:35.602925841Z [err]  2025-12-17 06:19:35,600 - persistent_tts_service - INFO - üì§ Sending 13792 bytes of audio (87 chunks, 1.7s duration) via WebSocket
2025-12-17T06:19:35.602942227Z [err]  2025-12-17 06:19:35,600 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:19:35.602950144Z [err]  2025-12-17 06:19:35,600 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.7s (total: 3.4s from now)
2025-12-17T06:19:35.607099091Z [err]  2025-12-17 06:19:35,601 - persistent_tts_service - INFO - ‚úÖ Sent 87 audio chunks via WebSocket
2025-12-17T06:19:35.607111155Z [err]  2025-12-17 06:19:35,602 - persistent_tts_service - INFO - üì§ Sending 2879 bytes of audio (18 chunks, 0.4s duration) via WebSocket
2025-12-17T06:19:35.607120372Z [err]  2025-12-17 06:19:35,602 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:19:35.607127006Z [err]  2025-12-17 06:19:35,602 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +0.4s (total: 3.8s from now)
2025-12-17T06:19:35.607133928Z [err]  2025-12-17 06:19:35,602 - persistent_tts_service - INFO - ‚úÖ Sent 18 audio chunks via WebSocket
2025-12-17T06:19:35.614631723Z [err]  2025-12-17 06:19:35,611 - server - INFO - üì§ Audio flowing: 2051 packets sent to Soniox (5s update)
2025-12-17T06:19:36.401996559Z [err]  2025-12-17 06:19:35,849 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:19:36.402002528Z [err]  2025-12-17 06:19:35,849 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +0.1s (total: 5.4s from now)
2025-12-17T06:19:36.402009862Z [err]  2025-12-17 06:19:35,849 - persistent_tts_service - INFO - ‚úÖ Sent 7 audio chunks via WebSocket
2025-12-17T06:19:36.402015775Z [err]  2025-12-17 06:19:36,059 - persistent_tts_service - INFO - üì§ Sending 14861 bytes of audio (93 chunks, 1.9s duration) via WebSocket
2025-12-17T06:19:36.402020435Z [err]  2025-12-17 06:19:36,060 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:19:36.402030374Z [err]  2025-12-17 06:19:35,847 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:19:36.402036878Z [err]  2025-12-17 06:19:35,847 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.7s (total: 5.3s from now)
2025-12-17T06:19:36.402040339Z [err]  2025-12-17 06:19:35,845 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (3.6s left)
2025-12-17T06:19:36.402043529Z [err]  2025-12-17 06:19:35,848 - persistent_tts_service - INFO - ‚úÖ Sent 87 audio chunks via WebSocket
2025-12-17T06:19:36.402049563Z [err]  2025-12-17 06:19:35,846 - persistent_tts_service - INFO - üì§ Sending 13793 bytes of audio (87 chunks, 1.7s duration) via WebSocket
2025-12-17T06:19:36.402050244Z [err]  2025-12-17 06:19:35,848 - persistent_tts_service - INFO - üì§ Sending 1068 bytes of audio (7 chunks, 0.1s duration) via WebSocket
2025-12-17T06:19:36.402076322Z [err]  2025-12-17 06:19:36,060 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.9s (total: 7.1s from now)
2025-12-17T06:19:36.408863658Z [err]  2025-12-17 06:19:36,062 - persistent_tts_service - INFO - ‚úÖ Sent 93 audio chunks via WebSocket
2025-12-17T06:19:38.323660943Z [err]  2025-12-17 06:19:37,888 - server - INFO - üé§ Soniox receiver alive - 15 messages received in last 10s
2025-12-17T06:19:38.323667449Z [err]  2025-12-17 06:19:38,059 - elevenlabs_ws_service - INFO - ‚è±Ô∏è  [TIMING] ElevenLabs audio stream complete (0.5s timeout reached) - End of Sentence
2025-12-17T06:19:38.323677478Z [err]  2025-12-17 06:19:38,060 - persistent_tts_service - INFO - ‚úÖ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Finished streaming sentence #7: 6 chunks received
2025-12-17T06:19:38.323682992Z [err]  2025-12-17 06:19:38,060 - persistent_tts_service - INFO - üé§ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Streaming sentence #8: What questions come to mind as soon as you hear so...
2025-12-17T06:19:38.413077374Z [err]  2025-12-17 06:19:38,406 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_START: Sent to ElevenLabs at T+0ms
2025-12-17T06:19:38.413090519Z [err]  2025-12-17 06:19:38,406 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_TTFB: First audio chunk at T+347ms
2025-12-17T06:19:38.413097948Z [err]  2025-12-17 06:19:38,407 - persistent_tts_service - INFO - üì§ Sending 13003 bytes of audio (82 chunks, 1.6s duration) via WebSocket
2025-12-17T06:19:38.413106298Z [err]  2025-12-17 06:19:38,407 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:19:38.413113544Z [err]  2025-12-17 06:19:38,407 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.6s (total: 6.3s from now)
2025-12-17T06:19:38.413122629Z [err]  2025-12-17 06:19:38,408 - persistent_tts_service - INFO - ‚úÖ Sent 82 audio chunks via WebSocket
2025-12-17T06:19:38.584701885Z [err]  2025-12-17 06:19:38,577 - persistent_tts_service - INFO - üì§ Sending 14489 bytes of audio (91 chunks, 1.8s duration) via WebSocket
2025-12-17T06:19:38.584711602Z [err]  2025-12-17 06:19:38,578 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:19:38.584717812Z [err]  2025-12-17 06:19:38,578 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.8s (total: 8.0s from now)
2025-12-17T06:19:38.584723291Z [err]  2025-12-17 06:19:38,580 - persistent_tts_service - INFO - ‚úÖ Sent 91 audio chunks via WebSocket
2025-12-17T06:19:40.381616649Z [err]  2025-12-17 06:19:40,367 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (6.2s left)
2025-12-17T06:19:40.583477686Z [err]  2025-12-17 06:19:40,579 - server - INFO - ‚è±Ô∏è  [TIMING] LLM_TOTAL: 562ms (provider: grok, model: grok-4-fast-non-reasoning)
2025-12-17T06:19:40.583485016Z [err]  2025-12-17 06:19:40,578 - elevenlabs_ws_service - INFO - ‚è±Ô∏è  [TIMING] ElevenLabs audio stream complete (0.5s timeout reached) - End of Sentence
2025-12-17T06:19:40.583492910Z [err]  2025-12-17 06:19:40,579 - server - INFO - ‚è±Ô∏è  [TIMING] TTS_TOTAL: 5367ms (provider: elevenlabs, websocket: False)
2025-12-17T06:19:40.583499763Z [err]  2025-12-17 06:19:40,579 - persistent_tts_service - INFO - ‚úÖ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Finished streaming sentence #8: 2 chunks received
2025-12-17T06:19:40.583505275Z [err]  2025-12-17 06:19:40,579 - server - INFO - ‚è±Ô∏è  [TIMING] E2E_TOTAL: 5930ms (user stopped ‚Üí play_audio_url called)
2025-12-17T06:19:40.583508409Z [err]  2025-12-17 06:19:40,579 - server - INFO - ‚úÖ All 2 persistent TTS streams completed
2025-12-17T06:19:40.583515420Z [err]  2025-12-17 06:19:40,579 - server - INFO - ‚úÖ Agent generation complete (persistent TTS) - response window closed
2025-12-17T06:19:40.583523198Z [err]  2025-12-17 06:19:40,579 - server - INFO - ‚è±Ô∏è  FIRST AUDIO STARTED: 5929ms from user stop üöÄ
2025-12-17T06:19:40.583531356Z [err]  2025-12-17 06:19:40,579 - calling_service - INFO - ü§ñ Agent started speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:40.583536636Z [err]  2025-12-17 06:19:40,579 - server - INFO - ‚úÖ Agent generation complete - response window closed
2025-12-17T06:19:40.583541155Z [err]  2025-12-17 06:19:40,579 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2025-12-17T06:19:40.583546916Z [err]  2025-12-17 06:19:40,579 - server - INFO - ‚è±Ô∏è  [TIMING] ==== E2E LATENCY SUMMARY ====
2025-12-17T06:19:40.583551129Z [err]  2025-12-17 06:19:40,579 - server - INFO - ‚è±Ô∏è  [TIMING] STT: 14ms (provider: soniox, model: stt-rt-v3)
2025-12-17T06:19:40.589825899Z [err]  2025-12-17 06:19:40,579 - server - INFO - ‚è±Ô∏è  [TIMING] ‚ö†Ô∏è NOTE: E2E_TOTAL does not include:
2025-12-17T06:19:40.589844827Z [err]  2025-12-17 06:19:40,579 - server - INFO - ‚è±Ô∏è  [TIMING]   - Telnyx processing time (~50-200ms)
2025-12-17T06:19:40.589856842Z [err]  2025-12-17 06:19:40,579 - server - INFO - ‚è±Ô∏è  [TIMING]   - Network latency to user's phone (~50-150ms)
2025-12-17T06:19:40.589868431Z [err]  2025-12-17 06:19:40,579 - server - INFO - ‚è±Ô∏è  [TIMING]   - Phone audio buffering (~50-200ms)
2025-12-17T06:19:40.589877548Z [err]  2025-12-17 06:19:40,579 - server - INFO - ‚è±Ô∏è  [TIMING]   - TOTAL MISSING: ~150-550ms typically
2025-12-17T06:19:40.589907748Z [err]  2025-12-17 06:19:40,579 - server - INFO - ‚è±Ô∏è  [TIMING]   - REAL USER LATENCY: 6230ms estimated
2025-12-17T06:19:40.589918292Z [err]  2025-12-17 06:19:40,579 - server - INFO - ‚è±Ô∏è  [TIMING] RESPONSE_TEXT: 164 chars, 2 sentences
2025-12-17T06:19:40.589927378Z [err]  2025-12-17 06:19:40,579 - server - INFO - ‚è±Ô∏è  [TIMING] USER_INPUT: 'Sure. Go ahead....'
2025-12-17T06:19:40.589938713Z [err]  2025-12-17 06:19:40,579 - server - INFO - ‚è±Ô∏è  [TIMING] AI_RESPONSE: 'Okay, in a nutshell, we set up passive income websites, and ...'
2025-12-17T06:19:40.589951193Z [err]  2025-12-17 06:19:40,579 - server - INFO - ‚è±Ô∏è  [TIMING] ==========================
2025-12-17T06:19:40.589962022Z [err]  2025-12-17 06:19:40,579 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2025-12-17T06:19:40.613739377Z [err]  2025-12-17 06:19:40,611 - server - INFO - üì§ Audio flowing: 2301 packets sent to Soniox (5s update)
2025-12-17T06:19:41.410209293Z [err]  2025-12-17 06:19:40,760 - server - INFO - üìù Saved assistant transcript and latency to database (Node: N_IntroduceModel_And_AskQuestions_V3_Adaptive, Dead Air: 1076ms)
2025-12-17T06:19:41.410215945Z [err]  2025-12-17 06:19:40,761 - server - INFO - üîä Agent finished generating, 0 playbacks active - waiting for webhooks to close window and start silence tracking
2025-12-17T06:19:41.410222467Z [err]  2025-12-17 06:19:40,870 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (5.7s left)
2025-12-17T06:19:45.564495634Z [err]  2025-12-17 06:19:45,412 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (1.1s left)
2025-12-17T06:19:45.634985716Z [err]  2025-12-17 06:19:45,631 - server - INFO - üì§ Audio flowing: 2552 packets sent to Soniox (5s update)
2025-12-17T06:19:46.408705340Z [err]  2025-12-17 06:19:45,923 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (0.6s left)
2025-12-17T06:19:46.604603948Z [err]  2025-12-17 06:19:46,602 - persistent_tts_service - INFO - üîá [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] FLOOR RELEASED (is_holding_floor=False)
2025-12-17T06:19:47.420220003Z [err]  2025-12-17 06:19:46,929 - dead_air_monitor - INFO - ‚è±Ô∏è Playback expected end time passed (0.4s ago), marking agent as done speaking
2025-12-17T06:19:47.420227191Z [err]  2025-12-17 06:19:46,929 - calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1765952386.929918 for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:47.420233834Z [err]  2025-12-17 06:19:46,929 - calling_service - INFO - ü§ñ Agent stopped speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:48.569897198Z [err]  2025-12-17 06:19:48,563 - server - INFO - üé§ Soniox receiver alive - 10 messages received in last 10s
2025-12-17T06:19:48.569904266Z [err]  2025-12-17 06:19:48,563 - server - INFO - üî§ RAW TOKENS: [" W"?]
2025-12-17T06:19:48.569911352Z [err]  2025-12-17 06:19:48,564 - calling_service - INFO - ‚è±Ô∏è SILENCE TIMER RESET (user started speaking) for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:48.569918797Z [err]  2025-12-17 06:19:48,564 - calling_service - INFO - üîä Silence timer reset for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ (user started speaking)
2025-12-17T06:19:48.569927315Z [err]  2025-12-17 06:19:48,564 - calling_service - INFO - üë§ User started speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:48.569934130Z [err]  2025-12-17 06:19:48,564 - server - INFO - üîç PARTIAL TRANSCRIPT: 'W' | Generating: False
2025-12-17T06:19:49.576207101Z [err]  2025-12-17 06:19:48,712 - server - INFO - üî§ RAW TOKENS: [" W"?, "ell,"?]
2025-12-17T06:19:49.576213371Z [err]  2025-12-17 06:19:48,712 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Well,' | Generating: False
2025-12-17T06:19:49.576218385Z [err]  2025-12-17 06:19:48,772 - server - INFO - üî§ RAW TOKENS: [" W"?, "ell,"?, " is"?, " this"?]
2025-12-17T06:19:49.576224154Z [err]  2025-12-17 06:19:48,772 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Well, is this' | Generating: False
2025-12-17T06:19:49.576228862Z [err]  2025-12-17 06:19:48,889 - server - INFO - üî§ RAW TOKENS: [" W"?, "ell,"?, " is"?, " this"?, " l"?]
2025-12-17T06:19:49.576235693Z [err]  2025-12-17 06:19:48,889 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Well, is this l' | Generating: False
2025-12-17T06:19:49.576245978Z [err]  2025-12-17 06:19:49,035 - server - INFO - üî§ RAW TOKENS: [" W"?, "ell,"?, " is"?, " this"?, " l"?, "ike"?]
2025-12-17T06:19:49.576251024Z [err]  2025-12-17 06:19:49,036 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Well, is this like' | Generating: False
2025-12-17T06:19:49.576255958Z [err]  2025-12-17 06:19:49,152 - server - INFO - üî§ RAW TOKENS: [" W"?, "ell,"?, " is"?, " this"?, " l"?, "ike"?, " some"?]
2025-12-17T06:19:49.576263508Z [err]  2025-12-17 06:19:49,153 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Well, is this like some' | Generating: False
2025-12-17T06:19:49.576269932Z [err]  2025-12-17 06:19:49,279 - server - INFO - üî§ RAW TOKENS: [" W"?, "ell,"?, " is"?, " this"?, " l"?, "ike"?, " some"?, " k"?]
2025-12-17T06:19:49.576276346Z [err]  2025-12-17 06:19:49,279 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Well, is this like some k' | Generating: False
2025-12-17T06:19:49.576282363Z [err]  2025-12-17 06:19:49,408 - server - INFO - üî§ RAW TOKENS: [" W"?, "ell,"?, " is"?, " this"?, " l"?, "ike"?, " some"?, " k"?, "ind"?]
2025-12-17T06:19:49.576288637Z [err]  2025-12-17 06:19:49,408 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Well, is this like some kind' | Generating: False
2025-12-17T06:19:49.576352781Z [err]  2025-12-17 06:19:49,537 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Well, is this like some kind of' | Generating: False
2025-12-17T06:19:49.576370253Z [err]  2025-12-17 06:19:49,537 - server - INFO - üî§ RAW TOKENS: [" W"?, "ell,"?, " is"?, " this"?, " l"?, "ike"?, " some"?, " k"?, "ind"?, " of"?]
2025-12-17T06:19:50.386198122Z [err]  2025-12-17 06:19:50,114 - server - INFO - üî§ RAW TOKENS: [" W"?, "ell,"?, " is"?, " this"?, " l"?, "ike"?, " some"?, " k"?, "ind"?, " of"?, " mar"?, "ket"?]
2025-12-17T06:19:50.386209462Z [err]  2025-12-17 06:19:50,115 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Well, is this like some kind of mar ket' | Generating: False
2025-12-17T06:19:50.386211387Z [err]  2025-12-17 06:19:49,982 - server - INFO - üî§ RAW TOKENS: [" W"?, "ell,"?, " is"?, " this"?, " l"?, "ike"?, " some"?, " k"?, "ind"?, " of"?, " mar"?]
2025-12-17T06:19:50.386219330Z [err]  2025-12-17 06:19:49,983 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Well, is this like some kind of mar' | Generating: False
2025-12-17T06:19:50.445319890Z [err]  2025-12-17 06:19:50,440 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=False, user_speaking=True, silence=0.0s, checkin_count=0/2
2025-12-17T06:19:50.559372824Z [err]  2025-12-17 06:19:50,555 - server - INFO - üî§ RAW TOKENS: [" W"?, "ell,"?, " is"?, " this"?, " l"?, "ike"?, " some"?, " k"?, "ind"?, " of"?, " mar"?, "ket"?, "ing"?]
2025-12-17T06:19:50.559384155Z [err]  2025-12-17 06:19:50,556 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Well, is this like some kind of marketing' | Generating: False
2025-12-17T06:19:50.645115447Z [err]  2025-12-17 06:19:50,637 - server - INFO - üì§ Audio flowing: 2802 packets sent to Soniox (5s update)
2025-12-17T06:19:51.231821489Z [err]  2025-12-17 06:19:50,943 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=False, user_speaking=True, silence=0.0s, checkin_count=0/2
2025-12-17T06:19:51.595402573Z [err]  2025-12-17 06:19:51,584 - server - INFO - üî§ RAW TOKENS: [" W"?, "ell,"?, " is"?, " this"?, " l"?, "ike"?, " some"?, " k"?, "ind"?, " of"?, " mar"?, "ket"?, "ing"?, " system"?]
2025-12-17T06:19:51.595415001Z [err]  2025-12-17 06:19:51,584 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Well, is this like some kind of marketing system' | Generating: False
2025-12-17T06:19:52.790071282Z [err]  2025-12-17 06:19:52,607 - server - INFO - üî§ RAW TOKENS: [" W"?, "ell,"?, " is"?, " this"?, " l"?, "ike"?, " some"?, " k"?, "ind"?, " of"?, " mar"?, "ket"?, "ing"?, " system"?]
2025-12-17T06:19:52.790080774Z [err]  2025-12-17 06:19:52,608 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Well, is this like some kind of marketing system' | Generating: False
2025-12-17T06:19:53.826861176Z [err]  2025-12-17 06:19:52,989 - server - INFO - üî§ RAW TOKENS: [" W"‚úì, "ell,"‚úì, " is"‚úì, " this"‚úì, " l"‚úì, "ike"?, " some"?, " k"?, "ind"?, " of"?, " mar"?, "ket"?, "ing"?, " system"?]
2025-12-17T06:19:53.826868428Z [err]  2025-12-17 06:19:52,990 - server - INFO - üßπ Cleaned transcript: ' W ell,  is  this  l' -> 'Well, is this l'
2025-12-17T06:19:53.826875342Z [err]  2025-12-17 06:19:52,990 - server - INFO - üì• FINAL TOKENS: 'Well, is this l' (5 tokens)
2025-12-17T06:19:53.826885688Z [err]  2025-12-17 06:19:52,990 - server - INFO - üé§ Soniox final transcript: 'Well, is this l'
2025-12-17T06:19:53.826892106Z [err]  2025-12-17 06:19:52,990 - server - INFO - üîç FILTER CHECK: words=4, is_filler=False, is_garbled=False, tts_speaking=False, time_until_done=0.0s, generating=False, playbacks=0, is_active=False
2025-12-17T06:19:53.826898206Z [err]  2025-12-17 06:19:52,990 - server - INFO - üîç PARTIAL TRANSCRIPT: 'ike some kind of marketing system' | Generating: False
2025-12-17T06:19:53.826905981Z [err]  2025-12-17 06:19:52,990 - server - INFO - ‚è±Ô∏è [06:19:52.990] üìù FINAL TRANSCRIPT RECEIVED: 'Well, is this l'
2025-12-17T06:19:53.826915241Z [err]  2025-12-17 06:19:52,990 - server - INFO - ‚è±Ô∏è [06:19:52.990] STT endpoint detection latency: 19ms
2025-12-17T06:19:53.826923653Z [err]  2025-12-17 06:19:52,990 - server - INFO - ‚è±Ô∏è [06:19:52.990] üé§ USER STOPPED SPEAKING - Beginning processing pipeline
2025-12-17T06:19:53.826930399Z [err]  2025-12-17 06:19:52,991 - redis_service - INFO - üì¶ Stored call data in Redis: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ (TTL: 3600s)
2025-12-17T06:19:53.826937078Z [err]  2025-12-17 06:19:52,991 - server - INFO - üë§ User has spoken - aiSpeaksAfterSilence timer cancelled if pending
2025-12-17T06:19:53.826943634Z [err]  2025-12-17 06:19:52,992 - server - INFO - ‚úÖ Agent SILENT - User said 4 word(s): 'Well, is this l' - Processing...
2025-12-17T06:19:53.826950209Z [err]  2025-12-17 06:19:53,563 - server - INFO - üî§ RAW TOKENS: ["ike"‚úì, " some"‚úì, " k"‚úì, "ind"‚úì, " of"‚úì, " mar"‚úì, "ket"‚úì, "ing"‚úì, " system"‚úì]
2025-12-17T06:19:54.891197469Z [err]  2025-12-17 06:19:53,564 - server - INFO - üßπ Cleaned transcript: 'ike  some  k ind  of  mar ket ing  system' -> 'ike some kind of marketing system'
2025-12-17T06:19:54.891203701Z [err]  2025-12-17 06:19:53,564 - server - INFO - üì• FINAL TOKENS: 'ike some kind of marketing system' (9 tokens)
2025-12-17T06:19:54.891209557Z [err]  2025-12-17 06:19:53,564 - server - INFO - üé§ Soniox final transcript: 'ike some kind of marketing system'
2025-12-17T06:19:54.891215566Z [err]  2025-12-17 06:19:53,564 - server - INFO - üîç FILTER CHECK: words=6, is_filler=False, is_garbled=False, tts_speaking=False, time_until_done=0.0s, generating=False, playbacks=0, is_active=False
2025-12-17T06:19:54.891222306Z [err]  2025-12-17 06:19:53,564 - server - INFO - ‚è±Ô∏è [06:19:53.564] üìù FINAL TRANSCRIPT RECEIVED: 'ike some kind of marketing system'
2025-12-17T06:19:54.891227207Z [err]  2025-12-17 06:19:53,564 - server - INFO - ‚è±Ô∏è [06:19:53.564] STT endpoint detection latency: 13ms
2025-12-17T06:19:54.891233025Z [err]  2025-12-17 06:19:53,564 - server - INFO - ‚è±Ô∏è [06:19:53.564] üé§ USER STOPPED SPEAKING - Beginning processing pipeline
2025-12-17T06:19:54.891238287Z [err]  2025-12-17 06:19:53,566 - redis_service - INFO - üì¶ Stored call data in Redis: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ (TTL: 3600s)
2025-12-17T06:19:54.891246740Z [err]  2025-12-17 06:19:53,566 - server - INFO - üë§ User has spoken - aiSpeaksAfterSilence timer cancelled if pending
2025-12-17T06:19:54.891253261Z [err]  2025-12-17 06:19:53,566 - server - INFO - ‚úÖ Agent SILENT - User said 9 word(s): 'Well, is this like some kind of marketing system' - Processing...
2025-12-17T06:19:54.891257740Z [err]  2025-12-17 06:19:53,567 - server - INFO - üî§ RAW TOKENS: ["<end>"‚úì]
2025-12-17T06:19:54.891263155Z [err]  2025-12-17 06:19:53,567 - server - INFO - üéØ Endpoint detected: <end> token received
2025-12-17T06:19:54.891268209Z [err]  2025-12-17 06:19:53,567 - server - INFO - üöÄ Spawned tracked background task for endpoint processing
2025-12-17T06:19:55.823308718Z [err]  2025-12-17 06:19:53,578 - server - INFO - üé§ Endpoint detected by Soniox - processing transcript: Well, is this like some kind of marketing system
2025-12-17T06:19:55.823313925Z [err]  2025-12-17 06:19:53,578 - calling_service - INFO - üë§ User stopped speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:55.823319486Z [err]  2025-12-17 06:19:53,578 - server - INFO - ‚úÖ User starting new turn - resetting agent speaking flag
2025-12-17T06:19:55.823325890Z [err]  2025-12-17 06:19:53,578 - server - INFO - ‚è±Ô∏è [TIMING] STT_START: User last audio packet received
2025-12-17T06:19:55.823332930Z [err]  2025-12-17 06:19:53,578 - server - INFO - ‚è±Ô∏è [TIMING] STT_END: Endpoint detected at T+6ms
2025-12-17T06:19:55.823346942Z [err]  2025-12-17 06:19:53,578 - server - INFO - ‚è±Ô∏è [TIMING] STT_LATENCY: 6ms (Soniox model: stt-rt-v3)
2025-12-17T06:19:55.823354638Z [err]  2025-12-17 06:19:53,578 - server - INFO - ‚è±Ô∏è  USER STOPPED SPEAKING at T=0ms
2025-12-17T06:19:55.823361845Z [err]  2025-12-17 06:19:53,578 - server - INFO - üéôÔ∏è Agent generating response - interruption detection active
2025-12-17T06:19:55.823368872Z [err]  2025-12-17 06:19:53,578 - calling_service - INFO - ü§ñ Agent started speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:55.823379231Z [err]  2025-12-17 06:19:53,671 - server - INFO - üìù Saved user transcript to database
2025-12-17T06:19:55.823386058Z [err]  2025-12-17 06:19:53,672 - calling_service - INFO - ‚è±Ô∏è [06:19:53.672] üì• process_user_input() ENTRY - text: 'Well, is this like some kind of marketing system...'
2025-12-17T06:19:55.823394235Z [err]  2025-12-17 06:19:53,672 - calling_service - INFO - ‚è±Ô∏è [06:19:53.672] ‚è© About to call _process_call_flow_streaming()
2025-12-17T06:19:55.823400888Z [err]  2025-12-17 06:19:53,672 - calling_service - INFO - ‚è±Ô∏è [06:19:53.672] üîÄ Agent type: call_flow, calling flow processor...
2025-12-17T06:19:55.826753087Z [err]  2025-12-17 06:19:53,672 - calling_service - INFO - üìù User's response captured: 'Well, is this like some kind of marketing system...'
2025-12-17T06:19:55.826763154Z [err]  2025-12-17 06:19:53,672 - calling_service - INFO - ‚è±Ô∏è [TIMING] TRANSITION_EVAL: 0ms
2025-12-17T06:19:55.826769316Z [err]  2025-12-17 06:19:53,672 - calling_service - INFO - ‚è±Ô∏è [06:19:53.672] ‚úÖ Node selected, about to process content...
2025-12-17T06:19:55.826774431Z [err]  2025-12-17 06:19:53,672 - calling_service - INFO - üîß Replaced {{now}} with Wednesday, December 17, 2025 at 1:19 AM EST in content
2025-12-17T06:19:55.826783796Z [err]  2025-12-17 06:19:53,672 - calling_service - INFO - üîß Replaced {{customer_name}} with Kendrick in content
2025-12-17T06:19:55.827141575Z [err]  2025-12-17 06:19:53,672 - calling_service - INFO - ‚è±Ô∏è [06:19:53.672] üîÄ _process_call_flow_streaming() ENTRY
2025-12-17T06:19:55.827148320Z [err]  2025-12-17 06:19:53,672 - calling_service - INFO - Flow processing - History length: 11, Is first: False
2025-12-17T06:19:55.827155111Z [err]  2025-12-17 06:19:53,672 - calling_service - INFO - üîç Using explicitly set current_node_id: 1763163400676
2025-12-17T06:19:55.827317555Z [err]  2025-12-17 06:19:53,672 - calling_service - INFO - ‚è±Ô∏è [06:19:53.672] üîÄ About to call _follow_transition() for: Well, is this like some kind o...
2025-12-17T06:19:55.827329524Z [err]  2025-12-17 06:19:53,672 - calling_service - INFO - Evaluating transitions from N_IntroduceModel_And_AskQuestions_V3_Adaptive for message: Well, is this like some kind of marketing system
2025-12-17T06:19:55.827335942Z [err]  2025-12-17 06:19:53,672 - calling_service - INFO - üé§ AUTO-TRANSITION AFTER RESPONSE enabled - user spoke, transitioning to: 1763206946898
2025-12-17T06:19:55.827342434Z [err]  2025-12-17 06:19:53,672 - calling_service - INFO - ‚úÖ Auto-transitioned (after response) to: N_KB_Q&A_With_StrategicNarrative_V3_Adaptive
2025-12-17T06:19:55.831538684Z [err]  2025-12-17 06:19:53,672 - calling_service - INFO - üîß Replaced {{callerName}} with  in content
2025-12-17T06:19:55.831545546Z [err]  2025-12-17 06:19:53,672 - calling_service - INFO - üîß Replaced {{lead_id}} with None in content
2025-12-17T06:19:55.831551989Z [err]  2025-12-17 06:19:53,672 - calling_service - INFO - üîß Replaced {{qc_tracking_enabled}} with False in content
2025-12-17T06:19:55.831559222Z [err]  2025-12-17 06:19:53,672 - calling_service - INFO - üîß Replaced {{track_keywords}} with  in content
2025-12-17T06:19:55.831566010Z [err]  2025-12-17 06:19:53,672 - calling_service - INFO - üîß Replaced {{expected_commitment}} with not_specified in content
2025-12-17T06:19:55.831573044Z [err]  2025-12-17 06:19:53,672 - calling_service - INFO - üîß Replaced {{to_number}} with +17708336397 in content
2025-12-17T06:19:55.831579581Z [err]  2025-12-17 06:19:53,672 - calling_service - INFO - üîß Replaced {{phone_number}} with +17708336397 in content
2025-12-17T06:19:55.831587642Z [err]  2025-12-17 06:19:53,672 - calling_service - INFO - üîß Replaced {{email}} with None in content
2025-12-17T06:19:55.831593386Z [err]  2025-12-17 06:19:53,672 - calling_service - INFO - Using flow node: N_KB_Q&A_With_StrategicNarrative_V3_Adaptive (type: conversation, mode: prompt)
2025-12-17T06:19:55.831599957Z [err]  2025-12-17 06:19:53,673 - calling_service - INFO - üìö skip_mandatory_precheck=true - skipping pre-response mandatory check, will check on transition
2025-12-17T06:19:55.831606801Z [err]  2025-12-17 06:19:53,673 - calling_service - INFO - ‚è±Ô∏è [06:19:53.673] üìÑ About to process content (mode=prompt, length=4560)
2025-12-17T06:19:55.831612808Z [err]  2025-12-17 06:19:53,694 - calling_service - INFO - ‚ö° PARALLEL MODE: Running KB + analysis simultaneously
2025-12-17T06:19:55.831619966Z [err]  2025-12-17 06:19:53,705 - kb_router - INFO - üö¶ KB Router: SKIP (short message: 9 words)
2025-12-17T06:19:55.831626614Z [err]  2025-12-17 06:19:53,705 - calling_service - INFO - ‚ö° Skipping KB (reason: short_message)
2025-12-17T06:19:55.835015575Z [err]  
2025-12-17T06:19:55.835028713Z [err]  User email: {customer_email} (for them: {{customer_email}}).
2025-12-17T06:19:55.835108848Z [err]  
2025-12-17T06:19:55.835115738Z [err]  If user says a name, don't assume it's theirs‚Äîwait for explicit correction.
2025-12-17T06:19:55.835120492Z [err]  2025-12-17 06:19:53,705 - calling_service - INFO - ‚ö° Parallel operations completed in 5ms
2025-12-17T06:19:55.835123842Z [err]  
2025-12-17T06:19:55.835132034Z [err]  2025-12-17 06:19:53,705 - calling_service - INFO - üîç Node 'N_KB_Q&A_With_StrategicNarrative_V3_Adaptive': use_parallel_llm=True
2025-12-17T06:19:55.835132201Z [err]  If user asks to repeat info, rephrase naturally‚Äînever exact repeat.
2025-12-17T06:19:55.835140320Z [err]  
2025-12-17T06:19:55.835140783Z [err]  2025-12-17 06:19:53,714 - calling_service - INFO - ‚ö° Parallel mode: Using condensed history (10/11 messages)
2025-12-17T06:19:55.835152428Z [err]  If asked your state: "Atlanta, GA. Been in Midtown 10 years."
2025-12-17T06:19:55.835159187Z [err]  
2025-12-17T06:19:55.835168071Z [err]  If asked about call number: "Company number."
2025-12-17T06:19:55.835171079Z [err]  2025-12-17 06:19:53,715 - calling_service - INFO - ‚è±Ô∏è [06:19:53.715] üí¨ LLM REQUEST START: 11 conversation turns, 11415 system chars (KB cached)
2025-12-17T06:19:55.835184781Z [err]  2025-12-17 06:19:53,715 - calling_service - INFO - üìù ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê LLM PROMPT BREAKDOWN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2025-12-17T06:19:55.835192446Z [err]  2025-12-17 06:19:53,715 - calling_service - INFO - üìù [SYSTEM MSG 1 - GLOBAL PROMPT] (5826 chars):
2025-12-17T06:19:55.835201226Z [err]  2025-12-17 06:19:53,715 - calling_service - INFO - üìù   Preview: # Global Prompt: Direct Drive Engine (V4.2 - Acknowledging & Fluid)
2025-12-17T06:19:55.835208222Z [err]  
2025-12-17T06:19:55.835217717Z [err]  When user states income, convert/update as [yearly_income] variable for logic splits.
2025-12-17T06:19:55.839858767Z [err]  
2025-12-17T06:19:55.839865486Z [err]  If explaining ends in peri...
2025-12-17T06:19:55.839871871Z [err]  2025-12-17 06:19:53,715 - calling_service - INFO - üìù [SYSTEM MSG 2 - DYNAMIC CONTEXT] (5589 chars):
2025-12-17T06:19:55.839877890Z [err]  2025-12-17 06:19:53,715 - calling_service - INFO - üìù   Preview: 
2025-12-17T06:19:55.839884294Z [err]  
2025-12-17T06:19:55.839889034Z [err]  ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
2025-12-17T06:19:55.839894770Z [err]  PREPROCESSED CONTEXT (to help you prioritize and focus):
2025-12-17T06:19:55.839901258Z [err]  ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
2025-12-17T06:19:55.839907958Z [err]  
2025-12-17T06:19:55.839913992Z [err]  USER COMMUNICATION STYLE: S type - adjust your response accordingly
2025-12-17T06:19:55.839919598Z [err]  CONVERSATION STATUS: Turn 6, objection handling phase
2025-12-17T06:19:55.839924284Z [err]  
2025-12-17T06:19:55.839930685Z [err]  This context is provided to help you focus. You still need to:
2025-12-17T06:19:55.839936231Z [err]  1. Generate a natural, contextual response
2025-12-17T06:19:55.839942130Z [err]  2. Evaluate transitions per your node instructions
2025-12-17T06:19:55.839948136Z [err]  
2025-12-17T06:19:55.839952934Z [err]  ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
2025-12-17T06:19:55.839962428Z [err]  
2025-12-17T06:19:55.839966807Z [err]  # CURRENT CONTEXT
2025-12-17T06:19:55.839973320Z [err]  Customer: Kendrick
2025-12-17T06:19:55.844055759Z [err]  Variables: {"now": "Wednesday, December 17, 2025 at 1:19 AM EST", "customer_name": "Kendrick", "callerName": "", "lead_id": null, "qc_tracking_enabled": false, "track_keywords": "", "expected_commitment...
2025-12-17T06:19:55.844065589Z [err]  2025-12-17 06:19:53,715 - calling_service - INFO - üìù [CONVERSATION HISTORY] (10 messages)
2025-12-17T06:19:55.844072062Z [err]  2025-12-17 06:19:53,715 - calling_service - INFO - üìù   assistant: Okay, in a nutshell, we set up passive income websites, and we let them produce income for you. What...
2025-12-17T06:19:55.844078749Z [err]  2025-12-17 06:19:53,715 - calling_service - INFO - üìù   user: Well, is this like some kind of marketing system...
2025-12-17T06:19:55.844090665Z [err]  2025-12-17 06:19:53,715 - calling_service - INFO - üìù ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2025-12-17T06:19:55.844123292Z [err]  2025-12-17 06:19:54,203 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-17T06:19:55.844132703Z [err]  2025-12-17 06:19:54,466 - calling_service - INFO - ‚è±Ô∏è [06:19:54.466] üí¨ LLM FIRST TOKEN: 751ms (grok grok-4-fast-non-reasoning)
2025-12-17T06:19:55.844140713Z [err]  2025-12-17 06:19:54,481 - server - INFO - üì§ Sentence arrived from LLM: [N] Yeah,...
2025-12-17T06:19:55.844147541Z [err]  2025-12-17 06:19:54,481 - server - INFO - ‚è±Ô∏è [TIMING] TTFS (Time To First Sentence): 903ms
2025-12-17T06:19:55.844154743Z [err]  2025-12-17 06:19:54,481 - server - INFO - ‚ö° Starting REAL-TIME TTS for first sentence
2025-12-17T06:19:55.844161541Z [err]  2025-12-17 06:19:54,481 - server - INFO - üîç Persistent TTS lookup: call_id=v3:sz6RRi_Qx4zS1QlC4..., session=FOUND
2025-12-17T06:19:55.844168189Z [err]  2025-12-17 06:19:54,481 - server - INFO - üöÄ Streaming sentence #1 via persistent WebSocket
2025-12-17T06:19:55.844174942Z [err]  2025-12-17 06:19:54,481 - server - INFO - üéµ TTS task #1 started at +0ms
2025-12-17T06:19:55.852075859Z [err]  2025-12-17 06:19:54,481 - server - INFO - ‚è±Ô∏è [TIMING] TTFT_TTS (First TTS Task Started): 903ms
2025-12-17T06:19:55.852080635Z [err]  2025-12-17 06:19:54,481 - calling_service - INFO - üì§ Streamed sentence: [N] Yeah,...
2025-12-17T06:19:55.852085927Z [err]  2025-12-17 06:19:54,482 - persistent_tts_service - INFO - üé§ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Streaming sentence #9: [N] Yeah,...
2025-12-17T06:19:55.852090584Z [err]  2025-12-17 06:19:54,582 - server - INFO - üì§ Sentence arrived from LLM: it's a smart marketing system where you build webs...
2025-12-17T06:19:55.852095283Z [err]  2025-12-17 06:19:54,582 - server - INFO - üîç Persistent TTS lookup: call_id=v3:sz6RRi_Qx4zS1QlC4..., session=FOUND
2025-12-17T06:19:55.852100199Z [err]  2025-12-17 06:19:54,582 - server - INFO - üöÄ Streaming sentence #2 via persistent WebSocket
2025-12-17T06:19:55.852104409Z [err]  2025-12-17 06:19:54,582 - server - INFO - üéµ TTS task #2 started at +101ms
2025-12-17T06:19:55.852110786Z [err]  2025-12-17 06:19:54,582 - calling_service - INFO - üì§ Streamed sentence: it's a smart marketing system where you build webs...
2025-12-17T06:19:55.852115499Z [err]  2025-12-17 06:19:54,662 - server - INFO - üì§ Sentence arrived from LLM: and then you get paid ongoing for those results....
2025-12-17T06:19:55.852119839Z [err]  2025-12-17 06:19:54,662 - server - INFO - üîç Persistent TTS lookup: call_id=v3:sz6RRi_Qx4zS1QlC4..., session=FOUND
2025-12-17T06:19:55.852123956Z [err]  2025-12-17 06:19:54,662 - server - INFO - üöÄ Streaming sentence #3 via persistent WebSocket
2025-12-17T06:19:55.852128447Z [err]  2025-12-17 06:19:54,662 - server - INFO - üéµ TTS task #3 started at +181ms
2025-12-17T06:19:55.852133199Z [err]  2025-12-17 06:19:54,662 - calling_service - INFO - üì§ Streamed sentence: and then you get paid ongoing for those results....
2025-12-17T06:19:55.852138199Z [err]  2025-12-17 06:19:54,763 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_START: Sent to ElevenLabs at T+0ms
2025-12-17T06:19:55.861869654Z [err]  2025-12-17 06:19:54,763 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_TTFB: First audio chunk at T+281ms
2025-12-17T06:19:55.862393068Z [err]  2025-12-17 06:19:54,851 - server - INFO - üéµ TTS task #4 started at +369ms
2025-12-17T06:19:55.862405621Z [err]  2025-12-17 06:19:54,851 - calling_service - INFO - üì§ Streamed final fragment: Does that sound like something that could fit into...
2025-12-17T06:19:55.862412748Z [err]  2025-12-17 06:19:54,851 - calling_service - INFO - ‚è±Ô∏è [TIMING] LLM_TOTAL: 1135ms for 235 chars (grok grok-4-fast-non-reasoning)
2025-12-17T06:19:55.862420489Z [err]  2025-12-17 06:19:54,851 - calling_service - INFO - üîä Silence tracking reset for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ (user responded)
2025-12-17T06:19:55.862427285Z [err]  2025-12-17 06:19:54,851 - calling_service - INFO - ‚úÖ User responded to regular message, resetting counter
2025-12-17T06:19:55.862473329Z [err]  2025-12-17 06:19:54,763 - persistent_tts_service - INFO - üì§ Sending 5945 bytes of audio (38 chunks, 0.7s duration) via WebSocket
2025-12-17T06:19:55.862481783Z [err]  2025-12-17 06:19:54,763 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:19:55.862488219Z [err]  2025-12-17 06:19:54,763 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +0.7s (total: 0.7s from now)
2025-12-17T06:19:55.862496446Z [err]  2025-12-17 06:19:54,764 - persistent_tts_service - INFO - ‚úÖ Sent 38 audio chunks via WebSocket
2025-12-17T06:19:55.862502035Z [err]  2025-12-17 06:19:54,850 - server - INFO - üì§ Sentence arrived from LLM: Does that sound like something that could fit into...
2025-12-17T06:19:55.862508861Z [err]  2025-12-17 06:19:54,850 - server - INFO - üîç Persistent TTS lookup: call_id=v3:sz6RRi_Qx4zS1QlC4..., session=FOUND
2025-12-17T06:19:55.862514186Z [err]  2025-12-17 06:19:54,850 - server - INFO - üöÄ Streaming sentence #4 via persistent WebSocket
2025-12-17T06:19:55.864620221Z [err]  2025-12-17 06:19:54,851 - calling_service - INFO - üíæ Storing node ID 1763206946898 in conversation history
2025-12-17T06:19:55.864627100Z [err]  2025-12-17 06:19:54,851 - calling_service - INFO - LLM response (1.18s): [N] Yeah, it's a smart marketing system where you build websites that generate leads for local businesses, and then you get paid ongoing for those results. Does that sound like something that could fit into your goals for extra income?
2025-12-17T06:19:55.864632653Z [err]  2025-12-17 06:19:54,851 - calling_service - INFO - Total latency: 1.18s
2025-12-17T06:19:55.864638666Z [err]  2025-12-17 06:19:54,851 - server - INFO - ‚úÖ LLM finished in 1272ms, TTS tasks already running in background
2025-12-17T06:19:55.864644444Z [err]  2025-12-17 06:19:54,851 - server - INFO - üéµ Streaming 4 TTS chunks as they complete...
2025-12-17T06:19:55.864650288Z [err]  2025-12-17 06:19:54,851 - server - INFO - üöÄ Persistent TTS: Audio already streaming in background!
2025-12-17T06:19:55.864682266Z [err]  2025-12-17 06:19:54,851 - server - INFO -    4 sentences queued and playing seamlessly
2025-12-17T06:19:55.864689617Z [err]  2025-12-17 06:19:55,651 - server - INFO - üì§ Audio flowing: 3053 packets sent to Soniox (5s update)
2025-12-17T06:19:56.647306692Z [err]  2025-12-17 06:19:55,977 - dead_air_monitor - INFO - ‚è±Ô∏è Playback expected end time passed (0.5s ago), marking agent as done speaking
2025-12-17T06:19:56.647312957Z [err]  2025-12-17 06:19:55,977 - calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1765952395.9776611 for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:56.647319288Z [err]  2025-12-17 06:19:55,977 - calling_service - INFO - ü§ñ Agent stopped speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:19:56.771635537Z [err]  2025-12-17 06:19:56,764 - elevenlabs_ws_service - INFO - ‚è±Ô∏è  [TIMING] ElevenLabs audio stream complete (0.5s timeout reached) - End of Sentence
2025-12-17T06:19:56.771647591Z [err]  2025-12-17 06:19:56,764 - persistent_tts_service - INFO - ‚úÖ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Finished streaming sentence #9: 1 chunks received
2025-12-17T06:19:56.771656471Z [err]  2025-12-17 06:19:56,764 - persistent_tts_service - INFO - üé§ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Streaming sentence #10: it's a smart marketing system where you build webs...
2025-12-17T06:19:57.768949485Z [err]  2025-12-17 06:19:57,101 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_START: Sent to ElevenLabs at T+0ms
2025-12-17T06:19:57.768950222Z [err]  2025-12-17 06:19:57,318 - persistent_tts_service - INFO - üì§ Sending 11099 bytes of audio (70 chunks, 1.4s duration) via WebSocket
2025-12-17T06:19:57.768956269Z [err]  2025-12-17 06:19:57,101 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_TTFB: First audio chunk at T+337ms
2025-12-17T06:19:57.768963759Z [err]  2025-12-17 06:19:57,102 - persistent_tts_service - INFO - üì§ Sending 13792 bytes of audio (87 chunks, 1.7s duration) via WebSocket
2025-12-17T06:19:57.768966160Z [err]  2025-12-17 06:19:57,318 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:19:57.768967575Z [err]  2025-12-17 06:19:57,479 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.5s (total: 6.0s from now)
2025-12-17T06:19:57.768974460Z [err]  2025-12-17 06:19:57,102 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:19:57.768978239Z [err]  2025-12-17 06:19:57,318 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.4s (total: 4.7s from now)
2025-12-17T06:19:57.768979341Z [err]  2025-12-17 06:19:57,480 - persistent_tts_service - INFO - ‚úÖ Sent 75 audio chunks via WebSocket
2025-12-17T06:19:57.768985392Z [err]  2025-12-17 06:19:57,102 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.7s (total: 1.7s from now)
2025-12-17T06:19:57.768988529Z [err]  2025-12-17 06:19:57,320 - persistent_tts_service - INFO - ‚úÖ Sent 70 audio chunks via WebSocket
2025-12-17T06:19:57.768993553Z [err]  2025-12-17 06:19:57,103 - persistent_tts_service - INFO - ‚úÖ Sent 87 audio chunks via WebSocket
2025-12-17T06:19:57.768997653Z [err]  2025-12-17 06:19:57,478 - persistent_tts_service - INFO - üì§ Sending 11889 bytes of audio (75 chunks, 1.5s duration) via WebSocket
2025-12-17T06:19:57.769001284Z [err]  2025-12-17 06:19:57,104 - persistent_tts_service - INFO - üì§ Sending 326 bytes of audio (3 chunks, 0.0s duration) via WebSocket
2025-12-17T06:19:57.769008932Z [err]  2025-12-17 06:19:57,104 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:19:57.769009584Z [err]  2025-12-17 06:19:57,479 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:19:57.769011008Z [err]  2025-12-17 06:19:57,312 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.7s (total: 3.3s from now)
2025-12-17T06:19:57.769015059Z [err]  2025-12-17 06:19:57,104 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +0.0s (total: 1.8s from now)
2025-12-17T06:19:57.769020664Z [err]  2025-12-17 06:19:57,314 - persistent_tts_service - INFO - ‚úÖ Sent 87 audio chunks via WebSocket
2025-12-17T06:19:57.769023998Z [err]  2025-12-17 06:19:57,104 - persistent_tts_service - INFO - ‚úÖ Sent 3 audio chunks via WebSocket
2025-12-17T06:19:57.769028916Z [err]  2025-12-17 06:19:57,312 - persistent_tts_service - INFO - üì§ Sending 13792 bytes of audio (87 chunks, 1.7s duration) via WebSocket
2025-12-17T06:19:57.769033672Z [err]  2025-12-17 06:19:57,312 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:19:59.875278390Z [err]  2025-12-17 06:19:59,002 - server - INFO - üé§ Soniox receiver alive - 21 messages received in last 10s
2025-12-17T06:19:59.875290988Z [err]  2025-12-17 06:19:59,479 - elevenlabs_ws_service - INFO - ‚è±Ô∏è  [TIMING] ElevenLabs audio stream complete (0.5s timeout reached) - End of Sentence
2025-12-17T06:19:59.875301959Z [err]  2025-12-17 06:19:59,479 - persistent_tts_service - INFO - ‚úÖ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Finished streaming sentence #10: 5 chunks received
2025-12-17T06:19:59.875324911Z [err]  2025-12-17 06:19:59,479 - persistent_tts_service - INFO - üé§ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Streaming sentence #11: and then you get paid ongoing for those results....
2025-12-17T06:19:59.875342900Z [err]  2025-12-17 06:19:59,786 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_START: Sent to ElevenLabs at T+0ms
2025-12-17T06:19:59.875350277Z [err]  2025-12-17 06:19:59,786 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_TTFB: First audio chunk at T+307ms
2025-12-17T06:19:59.875357361Z [err]  2025-12-17 06:19:59,786 - persistent_tts_service - INFO - üì§ Sending 10031 bytes of audio (63 chunks, 1.3s duration) via WebSocket
2025-12-17T06:19:59.875364931Z [err]  2025-12-17 06:19:59,786 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:19:59.875374522Z [err]  2025-12-17 06:19:59,786 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.3s (total: 4.9s from now)
2025-12-17T06:19:59.875381644Z [err]  2025-12-17 06:19:59,788 - persistent_tts_service - INFO - ‚úÖ Sent 63 audio chunks via WebSocket
2025-12-17T06:20:01.387117446Z [err]  2025-12-17 06:19:59,950 - persistent_tts_service - INFO - üì§ Sending 11889 bytes of audio (75 chunks, 1.5s duration) via WebSocket
2025-12-17T06:20:01.387123412Z [err]  2025-12-17 06:19:59,950 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:20:01.387129457Z [err]  2025-12-17 06:19:59,950 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.5s (total: 6.3s from now)
2025-12-17T06:20:01.387134631Z [err]  2025-12-17 06:19:59,953 - persistent_tts_service - INFO - ‚úÖ Sent 75 audio chunks via WebSocket
2025-12-17T06:20:01.387140078Z [err]  2025-12-17 06:20:00,498 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (5.7s left)
2025-12-17T06:20:01.387147152Z [err]  2025-12-17 06:20:00,651 - server - INFO - üì§ Audio flowing: 3303 packets sent to Soniox (5s update)
2025-12-17T06:20:02.420804183Z [err]  2025-12-17 06:20:01,950 - persistent_tts_service - INFO - üé§ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Streaming sentence #12: Does that sound like something that could fit into...
2025-12-17T06:20:02.420816697Z [err]  2025-12-17 06:20:02,263 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_START: Sent to ElevenLabs at T+0ms
2025-12-17T06:20:02.420824695Z [err]  2025-12-17 06:20:02,263 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_TTFB: First audio chunk at T+312ms
2025-12-17T06:20:02.420831216Z [err]  2025-12-17 06:20:02,263 - persistent_tts_service - INFO - üì§ Sending 6315 bytes of audio (40 chunks, 0.8s duration) via WebSocket
2025-12-17T06:20:02.420837144Z [err]  2025-12-17 06:20:02,263 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:20:02.420843724Z [err]  2025-12-17 06:20:02,263 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +0.8s (total: 4.7s from now)
2025-12-17T06:20:02.420849651Z [err]  2025-12-17 06:20:02,267 - persistent_tts_service - INFO - ‚úÖ Sent 40 audio chunks via WebSocket
2025-12-17T06:20:02.422063106Z [err]  2025-12-17 06:20:01,950 - elevenlabs_ws_service - INFO - ‚è±Ô∏è  [TIMING] ElevenLabs audio stream complete (0.5s timeout reached) - End of Sentence
2025-12-17T06:20:02.422069137Z [err]  2025-12-17 06:20:01,950 - persistent_tts_service - INFO - ‚úÖ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Finished streaming sentence #11: 2 chunks received
2025-12-17T06:20:03.323277929Z [err]  2025-12-17 06:20:02,445 - persistent_tts_service - INFO - üì§ Sending 24149 bytes of audio (151 chunks, 3.0s duration) via WebSocket
2025-12-17T06:20:03.323284975Z [err]  2025-12-17 06:20:02,445 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:20:03.323291598Z [err]  2025-12-17 06:20:02,445 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +3.0s (total: 7.6s from now)
2025-12-17T06:20:03.323299025Z [err]  2025-12-17 06:20:02,448 - persistent_tts_service - INFO - ‚úÖ Sent 151 audio chunks via WebSocket
2025-12-17T06:20:05.245075673Z [err]  2025-12-17 06:20:04,447 - server - INFO - ‚è±Ô∏è  [TIMING] E2E_TOTAL: 10868ms (user stopped ‚Üí play_audio_url called)
2025-12-17T06:20:05.245091962Z [err]  2025-12-17 06:20:04,447 - server - INFO - ‚úÖ Agent generation complete - response window closed
2025-12-17T06:20:05.245099024Z [err]  2025-12-17 06:20:04,447 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2025-12-17T06:20:05.245102221Z [err]  2025-12-17 06:20:04,446 - server - INFO - ‚è±Ô∏è  FIRST AUDIO STARTED: 10868ms from user stop üöÄ
2025-12-17T06:20:05.245111288Z [err]  2025-12-17 06:20:04,447 - server - INFO - ‚è±Ô∏è  [TIMING] ==== E2E LATENCY SUMMARY ====
2025-12-17T06:20:05.245114840Z [err]  2025-12-17 06:20:04,446 - calling_service - INFO - ü§ñ Agent started speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:05.245118278Z [err]  2025-12-17 06:20:04,447 - server - INFO - ‚è±Ô∏è  [TIMING] STT: 6ms (provider: soniox, model: stt-rt-v3)
2025-12-17T06:20:05.245125868Z [err]  2025-12-17 06:20:04,447 - server - INFO - ‚è±Ô∏è  [TIMING] LLM_TOTAL: 1272ms (provider: grok, model: grok-4-fast-non-reasoning)
2025-12-17T06:20:05.245131631Z [err]  2025-12-17 06:20:04,447 - server - INFO - ‚è±Ô∏è  [TIMING] TTS_TOTAL: 9965ms (provider: elevenlabs, websocket: False)
2025-12-17T06:20:05.245151876Z [err]  2025-12-17 06:20:04,446 - server - INFO - ‚úÖ All 4 persistent TTS streams completed
2025-12-17T06:20:05.245158216Z [err]  2025-12-17 06:20:04,446 - server - INFO - ‚úÖ Agent generation complete (persistent TTS) - response window closed
2025-12-17T06:20:05.245186513Z [err]  2025-12-17 06:20:04,446 - elevenlabs_ws_service - INFO - ‚è±Ô∏è  [TIMING] ElevenLabs audio stream complete (0.5s timeout reached) - End of Sentence
2025-12-17T06:20:05.245195468Z [err]  2025-12-17 06:20:04,446 - persistent_tts_service - INFO - ‚úÖ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Finished streaming sentence #12: 2 chunks received
2025-12-17T06:20:05.250546302Z [err]  2025-12-17 06:20:04,447 - server - INFO - ‚è±Ô∏è  [TIMING] ‚ö†Ô∏è NOTE: E2E_TOTAL does not include:
2025-12-17T06:20:05.250552176Z [err]  2025-12-17 06:20:04,447 - server - INFO - ‚è±Ô∏è  [TIMING]   - Telnyx processing time (~50-200ms)
2025-12-17T06:20:05.250558285Z [err]  2025-12-17 06:20:04,447 - server - INFO - ‚è±Ô∏è  [TIMING]   - Network latency to user's phone (~50-150ms)
2025-12-17T06:20:05.250564708Z [err]  2025-12-17 06:20:04,447 - server - INFO - ‚è±Ô∏è  [TIMING]   - Phone audio buffering (~50-200ms)
2025-12-17T06:20:05.250571648Z [err]  2025-12-17 06:20:04,447 - server - INFO - ‚è±Ô∏è  [TIMING]   - TOTAL MISSING: ~150-550ms typically
2025-12-17T06:20:05.250578832Z [err]  2025-12-17 06:20:04,447 - server - INFO - ‚è±Ô∏è  [TIMING]   - REAL USER LATENCY: 11168ms estimated
2025-12-17T06:20:05.250584809Z [err]  2025-12-17 06:20:04,447 - server - INFO - ‚è±Ô∏è  [TIMING] RESPONSE_TEXT: 235 chars, 4 sentences
2025-12-17T06:20:05.250591891Z [err]  2025-12-17 06:20:04,447 - server - INFO - ‚è±Ô∏è  [TIMING] USER_INPUT: 'Well, is this like some kind of marketing system...'
2025-12-17T06:20:05.250597866Z [err]  2025-12-17 06:20:04,447 - server - INFO - ‚è±Ô∏è  [TIMING] AI_RESPONSE: '[N] Yeah, it's a smart marketing system where you build webs...'
2025-12-17T06:20:05.250604660Z [err]  2025-12-17 06:20:04,447 - server - INFO - ‚è±Ô∏è  [TIMING] ==========================
2025-12-17T06:20:05.250612301Z [err]  2025-12-17 06:20:04,447 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2025-12-17T06:20:05.250618387Z [err]  2025-12-17 06:20:04,628 - server - INFO - üìù Saved assistant transcript and latency to database (Node: N_KB_Q&A_With_StrategicNarrative_V3_Adaptive, Dead Air: 1778ms)
2025-12-17T06:20:05.250624296Z [err]  2025-12-17 06:20:04,628 - server - INFO - üîä Agent finished generating, 0 playbacks active - waiting for webhooks to close window and start silence tracking
2025-12-17T06:20:05.251990382Z [err]  2025-12-17 06:20:05,032 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (5.0s left)
2025-12-17T06:20:06.508959074Z [err]  2025-12-17 06:20:05,535 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (4.5s left)
2025-12-17T06:20:06.508965394Z [err]  2025-12-17 06:20:05,671 - server - INFO - üì§ Audio flowing: 3554 packets sent to Soniox (5s update)
2025-12-17T06:20:10.563243283Z [err]  2025-12-17 06:20:10,070 - calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1765952410.070445 for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:10.563249605Z [err]  2025-12-17 06:20:10,070 - calling_service - INFO - ü§ñ Agent stopped speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:10.563255160Z [err]  2025-12-17 06:20:10,070 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=False, user_speaking=False, silence=0.0s, checkin_count=0/2
2025-12-17T06:20:10.563261075Z [err]  2025-12-17 06:20:10,176 - persistent_tts_service - INFO - üîá [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] FLOOR RELEASED (is_holding_floor=False)
2025-12-17T06:20:10.563285323Z [err]  2025-12-17 06:20:09,820 - server - INFO - üé§ Soniox receiver alive - 10 messages received in last 10s
2025-12-17T06:20:10.563291007Z [err]  2025-12-17 06:20:10,070 - dead_air_monitor - INFO - ‚è±Ô∏è Playback expected end time passed (0.1s ago), marking agent as done speaking
2025-12-17T06:20:11.573048799Z [err]  2025-12-17 06:20:10,590 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=False, user_speaking=False, silence=0.5s, checkin_count=0/2
2025-12-17T06:20:11.573056650Z [err]  2025-12-17 06:20:10,692 - server - INFO - üì§ Audio flowing: 3805 packets sent to Soniox (5s update)
2025-12-17T06:20:12.377627219Z [err]  2025-12-17 06:20:11,610 - server - INFO - üî§ RAW TOKENS: ["?"‚úì, "<end>"‚úì]
2025-12-17T06:20:12.377634714Z [err]  2025-12-17 06:20:11,610 - server - INFO - üéØ Endpoint detected: <end> token received
2025-12-17T06:20:12.377641460Z [err]  2025-12-17 06:20:11,610 - server - INFO - üì• FINAL TOKENS: '?' (1 tokens)
2025-12-17T06:20:12.377648622Z [err]  2025-12-17 06:20:11,611 - server - INFO - üé§ Soniox final transcript: '?'
2025-12-17T06:20:12.377662469Z [err]  2025-12-17 06:20:11,611 - server - WARNING - üîá GARBLED/ECHO detected: '?' - filtering out
2025-12-17T06:20:12.377669590Z [err]  2025-12-17 06:20:11,611 - server - INFO - üîç FILTER CHECK: words=1, is_filler=False, is_garbled=True, tts_speaking=False, time_until_done=0.0s, generating=False, playbacks=0, is_active=False
2025-12-17T06:20:12.377677027Z [err]  2025-12-17 06:20:11,611 - server - INFO - üîï FILTERING garbled/echo '?' - NOT calling on_final_transcript
2025-12-17T06:20:12.377684287Z [err]  2025-12-17 06:20:11,611 - server - INFO - üîï SKIPPING endpoint for garbled/echo '?'
2025-12-17T06:20:12.377690750Z [err]  2025-12-17 06:20:11,738 - server - INFO - üî§ RAW TOKENS: [" Ye"?]
2025-12-17T06:20:12.377696829Z [err]  2025-12-17 06:20:11,738 - calling_service - INFO - ‚è±Ô∏è SILENCE TIMER RESET (user started speaking) for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:12.377717202Z [err]  2025-12-17 06:20:11,738 - calling_service - INFO - üîä Silence timer reset for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ (user started speaking)
2025-12-17T06:20:12.377724635Z [err]  2025-12-17 06:20:11,738 - calling_service - INFO - üë§ User started speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:12.377732130Z [err]  2025-12-17 06:20:11,739 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Ye' | Generating: False
2025-12-17T06:20:12.377738707Z [err]  2025-12-17 06:20:11,802 - server - INFO - üî§ RAW TOKENS: [" Ye"?, "ah."?]
2025-12-17T06:20:12.380285534Z [err]  2025-12-17 06:20:11,802 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Yeah.' | Generating: False
2025-12-17T06:20:12.380290744Z [err]  2025-12-17 06:20:12,187 - server - INFO - üî§ RAW TOKENS: [" Ye"?, "ah."?, " G"?]
2025-12-17T06:20:12.380296443Z [err]  2025-12-17 06:20:12,187 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Yeah. G' | Generating: False
2025-12-17T06:20:12.380302709Z [err]  2025-12-17 06:20:12,305 - server - INFO - üî§ RAW TOKENS: [" Ye"‚úì, "ah."‚úì, " G"‚úì, "o."‚úì, "<end>"‚úì]
2025-12-17T06:20:12.380308529Z [err]  2025-12-17 06:20:12,305 - server - INFO - üéØ Endpoint detected: <end> token received
2025-12-17T06:20:12.380317822Z [err]  2025-12-17 06:20:12,306 - server - INFO - üßπ Cleaned transcript: ' Ye ah.  G o.' -> 'Yeah. Go.'
2025-12-17T06:20:12.380324282Z [err]  2025-12-17 06:20:12,306 - server - INFO - üì• FINAL TOKENS: 'Yeah. Go.' (4 tokens)
2025-12-17T06:20:12.380330346Z [err]  2025-12-17 06:20:12,306 - server - INFO - üé§ Soniox final transcript: 'Yeah. Go.'
2025-12-17T06:20:12.380336899Z [err]  2025-12-17 06:20:12,306 - server - INFO - üîç FILTER CHECK: words=2, is_filler=False, is_garbled=False, tts_speaking=False, time_until_done=0.0s, generating=False, playbacks=0, is_active=False
2025-12-17T06:20:12.380342882Z [err]  2025-12-17 06:20:12,306 - server - INFO - üöÄ Spawned tracked background task for endpoint processing
2025-12-17T06:20:12.380349249Z [err]  2025-12-17 06:20:12,306 - server - INFO - ‚è±Ô∏è [06:20:12.306] üìù FINAL TRANSCRIPT RECEIVED: 'Yeah. Go.'
2025-12-17T06:20:12.380354963Z [err]  2025-12-17 06:20:12,306 - server - INFO - ‚è±Ô∏è [06:20:12.306] STT endpoint detection latency: 14ms
2025-12-17T06:20:12.380362874Z [err]  2025-12-17 06:20:12,306 - server - INFO - ‚è±Ô∏è [06:20:12.306] üé§ USER STOPPED SPEAKING - Beginning processing pipeline
2025-12-17T06:20:12.380369097Z [err]  2025-12-17 06:20:12,308 - redis_service - INFO - üì¶ Stored call data in Redis: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ (TTL: 3600s)
2025-12-17T06:20:12.383141415Z [err]  2025-12-17 06:20:12,308 - server - INFO - üë§ User has spoken - aiSpeaksAfterSilence timer cancelled if pending
2025-12-17T06:20:12.383146617Z [err]  2025-12-17 06:20:12,308 - server - INFO - ‚úÖ Agent SILENT - User said 2 word(s): 'Yeah. Go.' - Processing...
2025-12-17T06:20:12.383152134Z [err]  2025-12-17 06:20:12,319 - server - INFO - üé§ Endpoint detected by Soniox - processing transcript: Yeah. Go.
2025-12-17T06:20:12.383157743Z [err]  2025-12-17 06:20:12,319 - calling_service - INFO - üë§ User stopped speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:12.383163553Z [err]  2025-12-17 06:20:12,319 - server - INFO - ‚úÖ User starting new turn - resetting agent speaking flag
2025-12-17T06:20:12.383168907Z [err]  2025-12-17 06:20:12,319 - server - INFO - ‚è±Ô∏è [TIMING] STT_START: User last audio packet received
2025-12-17T06:20:12.383173982Z [err]  2025-12-17 06:20:12,319 - server - INFO - ‚è±Ô∏è [TIMING] STT_END: Endpoint detected at T+8ms
2025-12-17T06:20:12.383179061Z [err]  2025-12-17 06:20:12,319 - server - INFO - ‚è±Ô∏è [TIMING] STT_LATENCY: 8ms (Soniox model: stt-rt-v3)
2025-12-17T06:20:12.383184569Z [err]  2025-12-17 06:20:12,319 - server - INFO - ‚è±Ô∏è  USER STOPPED SPEAKING at T=0ms
2025-12-17T06:20:12.383189963Z [err]  2025-12-17 06:20:12,319 - server - INFO - üéôÔ∏è Agent generating response - interruption detection active
2025-12-17T06:20:12.383195687Z [err]  2025-12-17 06:20:12,319 - calling_service - INFO - ü§ñ Agent started speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:12.420719974Z [err]  2025-12-17 06:20:12,412 - server - INFO - üìù Saved user transcript to database
2025-12-17T06:20:12.420726789Z [err]  2025-12-17 06:20:12,413 - calling_service - INFO - ‚è±Ô∏è [06:20:12.412] üì• process_user_input() ENTRY - text: 'Yeah. Go....'
2025-12-17T06:20:12.420734411Z [err]  2025-12-17 06:20:12,413 - calling_service - INFO - ‚è±Ô∏è [06:20:12.413] ‚è© About to call _process_call_flow_streaming()
2025-12-17T06:20:12.420740144Z [err]  2025-12-17 06:20:12,413 - calling_service - INFO - ‚è±Ô∏è [06:20:12.413] üîÄ Agent type: call_flow, calling flow processor...
2025-12-17T06:20:12.420747174Z [err]  2025-12-17 06:20:12,413 - calling_service - INFO - ‚è±Ô∏è [06:20:12.413] üîÄ _process_call_flow_streaming() ENTRY
2025-12-17T06:20:12.420752930Z [err]  2025-12-17 06:20:12,413 - calling_service - INFO - Flow processing - History length: 13, Is first: False
2025-12-17T06:20:12.420758653Z [err]  2025-12-17 06:20:12,413 - calling_service - INFO - üîç Using explicitly set current_node_id: 1763206946898
2025-12-17T06:20:12.420764002Z [err]  2025-12-17 06:20:12,413 - calling_service - INFO - üîç PRE-TRANSITION: Extracting mandatory vars on CURRENT node N_KB_Q&A_With_StrategicNarrative_V3_Adaptive before transition
2025-12-17T06:20:12.420770275Z [err]  2025-12-17 06:20:12,413 - calling_service - INFO - üîç Real-time extraction: Processing 2 variables
2025-12-17T06:20:12.420865281Z [err]  2025-12-17 06:20:12,413 - calling_service - INFO - ü§ñ Using configured LLM provider: grok (grok-4-fast-non-reasoning) for extraction
2025-12-17T06:20:13.809553433Z [err]  2025-12-17 06:20:13,490 - calling_service - INFO - üìä Available transitions: ['...would you honestly be upset if you had an extra...']
2025-12-17T06:20:13.809566152Z [err]  2025-12-17 06:20:13,490 - calling_service - INFO - Selected transition index: -1
2025-12-17T06:20:13.810020130Z [err]  2025-12-17 06:20:12,952 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-17T06:20:13.810030713Z [err]  2025-12-17 06:20:12,954 - calling_service - INFO -   ‚úì has_discussed_income_potential: False (extracted in real-time)
2025-12-17T06:20:13.810041367Z [err]  2025-12-17 06:20:12,954 - calling_service - INFO -   ‚úì asked_upset: False (extracted in real-time)
2025-12-17T06:20:13.810052957Z [err]  2025-12-17 06:20:12,954 - calling_service - INFO - ‚úÖ Real-time extraction complete: 2 variables
2025-12-17T06:20:13.810060782Z [err]  2025-12-17 06:20:12,954 - calling_service - INFO - ‚úÖ PRE-TRANSITION: All mandatory vars satisfied on N_KB_Q&A_With_StrategicNarrative_V3_Adaptive - proceeding with transition
2025-12-17T06:20:13.810087949Z [err]  2025-12-17 06:20:12,954 - calling_service - INFO - ‚è±Ô∏è [06:20:12.954] üîÄ About to call _follow_transition() for: Yeah. Go....
2025-12-17T06:20:13.810099232Z [err]  2025-12-17 06:20:12,954 - calling_service - INFO - Evaluating transitions from N_KB_Q&A_With_StrategicNarrative_V3_Adaptive for message: Yeah. Go.
2025-12-17T06:20:13.810107752Z [err]  2025-12-17 06:20:12,965 - calling_service - INFO - ‚è±Ô∏è [06:20:12.964] üîÄ TRANSITION EVALUATION START - Calling LLM for 1 options
2025-12-17T06:20:13.810122970Z [err]  2025-12-17 06:20:13,488 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-17T06:20:13.810129735Z [err]  2025-12-17 06:20:13,490 - calling_service - INFO - ‚è±Ô∏è [06:20:13.490] üîÄ TRANSITION EVALUATION COMPLETE - took 525ms
2025-12-17T06:20:13.810135904Z [err]  2025-12-17 06:20:13,490 - calling_service - INFO - ü§ñ AI transition decision: '-1'
2025-12-17T06:20:14.941925814Z [err]  2025-12-17 06:20:13,490 - calling_service - INFO - No specific condition matched, looking for default transition...
2025-12-17T06:20:14.941931843Z [err]  2025-12-17 06:20:13,490 - calling_service - INFO - ‚ö†Ô∏è No transition matched, but node has GOAL. Staying on current node to continue with goal-based guidance.
2025-12-17T06:20:14.941938094Z [err]  2025-12-17 06:20:13,490 - calling_service - INFO - üéØ Goal: Determine what has already been done in this node by being aware of the conversation context and the...
2025-12-17T06:20:14.941949220Z [err]  2025-12-17 06:20:13,490 - calling_service - INFO - ‚è±Ô∏è [TIMING] TRANSITION_EVAL: 536ms
2025-12-17T06:20:14.941955952Z [err]  2025-12-17 06:20:13,491 - calling_service - INFO - ‚è±Ô∏è [06:20:13.491] ‚úÖ Node selected, about to process content...
2025-12-17T06:20:14.941962074Z [err]  2025-12-17 06:20:13,491 - calling_service - INFO - üîß Replaced {{now}} with Wednesday, December 17, 2025 at 1:20 AM EST in content
2025-12-17T06:20:14.941969677Z [err]  2025-12-17 06:20:13,491 - calling_service - INFO - üîß Replaced {{customer_name}} with Kendrick in content
2025-12-17T06:20:14.941976450Z [err]  2025-12-17 06:20:13,491 - calling_service - INFO - üîß Replaced {{callerName}} with  in content
2025-12-17T06:20:14.941987833Z [err]  2025-12-17 06:20:13,491 - calling_service - INFO - üîß Replaced {{lead_id}} with None in content
2025-12-17T06:20:14.941994153Z [err]  2025-12-17 06:20:13,491 - calling_service - INFO - üîß Replaced {{qc_tracking_enabled}} with False in content
2025-12-17T06:20:14.942001163Z [err]  2025-12-17 06:20:13,491 - calling_service - INFO - üîß Replaced {{track_keywords}} with  in content
2025-12-17T06:20:14.942010672Z [err]  2025-12-17 06:20:13,491 - calling_service - INFO - üîß Replaced {{expected_commitment}} with not_specified in content
2025-12-17T06:20:14.942017891Z [err]  2025-12-17 06:20:13,491 - calling_service - INFO - üîß Replaced {{to_number}} with +17708336397 in content
2025-12-17T06:20:15.993634713Z [err]  2025-12-17 06:20:13,491 - calling_service - INFO - üîß Replaced {{phone_number}} with +17708336397 in content
2025-12-17T06:20:15.993642333Z [err]  2025-12-17 06:20:13,491 - calling_service - INFO - üîß Replaced {{email}} with None in content
2025-12-17T06:20:15.993649369Z [err]  2025-12-17 06:20:13,491 - calling_service - INFO - üîß Replaced {{has_discussed_income_potential}} with False in content
2025-12-17T06:20:15.993657375Z [err]  2025-12-17 06:20:13,491 - calling_service - INFO - üîß Replaced {{asked_upset}} with False in content
2025-12-17T06:20:15.993664173Z [err]  2025-12-17 06:20:13,491 - calling_service - INFO - Using flow node: N_KB_Q&A_With_StrategicNarrative_V3_Adaptive (type: conversation, mode: prompt)
2025-12-17T06:20:15.993670087Z [err]  2025-12-17 06:20:13,491 - calling_service - INFO - üìö skip_mandatory_precheck=true - skipping pre-response mandatory check, will check on transition
2025-12-17T06:20:15.993686338Z [err]  2025-12-17 06:20:13,491 - calling_service - INFO - ‚è±Ô∏è [06:20:13.491] üìÑ About to process content (mode=prompt, length=4560)
2025-12-17T06:20:15.993693015Z [err]  2025-12-17 06:20:13,501 - calling_service - INFO - ‚ö° PARALLEL MODE: Running KB + analysis simultaneously
2025-12-17T06:20:15.993699533Z [err]  2025-12-17 06:20:13,501 - kb_router - INFO - üö¶ KB Router: SKIP (simple chat pattern matched)
2025-12-17T06:20:15.993705944Z [err]  2025-12-17 06:20:13,501 - calling_service - INFO - ‚ö° Skipping KB (reason: simple_chat)
2025-12-17T06:20:15.993713976Z [err]  2025-12-17 06:20:13,501 - calling_service - INFO - ‚ö° Parallel operations completed in 0ms
2025-12-17T06:20:15.993720293Z [err]  2025-12-17 06:20:13,501 - calling_service - INFO - üîç Node 'N_KB_Q&A_With_StrategicNarrative_V3_Adaptive': use_parallel_llm=True
2025-12-17T06:20:15.993727342Z [err]  2025-12-17 06:20:13,502 - calling_service - INFO - ‚ö° Parallel mode: Using condensed history (10/13 messages)
2025-12-17T06:20:16.916823159Z [err]  2025-12-17 06:20:13,502 - calling_service - INFO - ‚è±Ô∏è [06:20:13.502] üí¨ LLM REQUEST START: 13 conversation turns, 11478 system chars (KB cached)
2025-12-17T06:20:16.916830506Z [err]  2025-12-17 06:20:13,502 - calling_service - INFO - üìù ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê LLM PROMPT BREAKDOWN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2025-12-17T06:20:16.916838098Z [err]  2025-12-17 06:20:13,502 - calling_service - INFO - üìù [SYSTEM MSG 1 - GLOBAL PROMPT] (5826 chars):
2025-12-17T06:20:16.916846584Z [err]  2025-12-17 06:20:13,502 - calling_service - INFO - üìù   Preview: # Global Prompt: Direct Drive Engine (V4.2 - Acknowledging & Fluid)
2025-12-17T06:20:16.916855875Z [err]  
2025-12-17T06:20:16.916864635Z [err]  When user states income, convert/update as [yearly_income] variable for logic splits.
2025-12-17T06:20:16.916872571Z [err]  
2025-12-17T06:20:16.916881003Z [err]  If user says a name, don't assume it's theirs‚Äîwait for explicit correction.
2025-12-17T06:20:16.916889076Z [err]  
2025-12-17T06:20:16.916897122Z [err]  If user asks to repeat info, rephrase naturally‚Äînever exact repeat.
2025-12-17T06:20:16.916904918Z [err]  
2025-12-17T06:20:16.916913420Z [err]  If asked your state: "Atlanta, GA. Been in Midtown 10 years."
2025-12-17T06:20:16.916962699Z [err]  
2025-12-17T06:20:16.916971093Z [err]  If asked about call number: "Company number."
2025-12-17T06:20:16.916983732Z [err]  
2025-12-17T06:20:16.916989501Z [err]  User email: {customer_email} (for them: {{customer_email}}).
2025-12-17T06:20:16.916996319Z [err]  
2025-12-17T06:20:16.917002339Z [err]  If explaining ends in peri...
2025-12-17T06:20:16.917008189Z [err]  2025-12-17 06:20:13,502 - calling_service - INFO - üìù [SYSTEM MSG 2 - DYNAMIC CONTEXT] (5652 chars):
2025-12-17T06:20:16.917014604Z [err]  2025-12-17 06:20:13,502 - calling_service - INFO - üìù   Preview: 
2025-12-17T06:20:16.917019782Z [err]  
2025-12-17T06:20:16.919968574Z [err]  ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
2025-12-17T06:20:16.919981775Z [err]  
2025-12-17T06:20:16.919985119Z [err]  PREPROCESSED CONTEXT (to help you prioritize and focus):
2025-12-17T06:20:16.919993499Z [err]  # CURRENT CONTEXT
2025-12-17T06:20:16.919994988Z [err]  ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
2025-12-17T06:20:16.920004572Z [err]  
2025-12-17T06:20:16.920008474Z [err]  2. Evaluate transitions per your node instructions
2025-12-17T06:20:16.920017324Z [err]  
2025-12-17T06:20:16.920027259Z [err]  ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
2025-12-17T06:20:16.920027656Z [err]  Customer: Kendrick
2025-12-17T06:20:16.920040330Z [err]  Variables: {"now": "Wednesday, December 17, 2025 at 1:20 AM EST", "customer_name": "Kendrick", "callerName": "", "lead_id": null, "qc_tracking_enabled": false, "track_keywords": "", "expected_commitment...
2025-12-17T06:20:16.920052216Z [err]  2025-12-17 06:20:13,502 - calling_service - INFO - üìù [CONVERSATION HISTORY] (10 messages)
2025-12-17T06:20:16.920163627Z [err]  USER COMMUNICATION STYLE: S type - adjust your response accordingly
2025-12-17T06:20:16.920614402Z [err]  CONVERSATION STATUS: Turn 7, objection handling phase
2025-12-17T06:20:16.920637502Z [err]  
2025-12-17T06:20:16.920654024Z [err]  This context is provided to help you focus. You still need to:
2025-12-17T06:20:16.920662638Z [err]  1. Generate a natural, contextual response
2025-12-17T06:20:16.925665586Z [err]  2025-12-17 06:20:13,502 - calling_service - INFO - üìù   assistant: [N] Yeah, it's a smart marketing system where you build websites that generate leads for local busin...
2025-12-17T06:20:16.925677128Z [err]  2025-12-17 06:20:13,502 - calling_service - INFO - üìù   user: Yeah. Go....
2025-12-17T06:20:16.925684813Z [err]  2025-12-17 06:20:13,502 - calling_service - INFO - üìù ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2025-12-17T06:20:16.925694883Z [err]  2025-12-17 06:20:13,929 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-17T06:20:16.925702832Z [err]  2025-12-17 06:20:14,153 - calling_service - INFO - ‚è±Ô∏è [06:20:14.153] üí¨ LLM FIRST TOKEN: 650ms (grok grok-4-fast-non-reasoning)
2025-12-17T06:20:16.925710296Z [err]  2025-12-17 06:20:14,186 - server - INFO - üì§ Sentence arrived from LLM: [N] Great,...
2025-12-17T06:20:16.925719567Z [err]  2025-12-17 06:20:14,186 - server - INFO - ‚è±Ô∏è [TIMING] TTFS (Time To First Sentence): 1867ms
2025-12-17T06:20:16.925728007Z [err]  2025-12-17 06:20:14,186 - server - INFO - ‚ö° Starting REAL-TIME TTS for first sentence
2025-12-17T06:20:16.925735191Z [err]  2025-12-17 06:20:14,186 - server - INFO - üîç Persistent TTS lookup: call_id=v3:sz6RRi_Qx4zS1QlC4..., session=FOUND
2025-12-17T06:20:16.925742921Z [err]  2025-12-17 06:20:14,186 - server - INFO - üöÄ Streaming sentence #1 via persistent WebSocket
2025-12-17T06:20:16.925752198Z [err]  2025-12-17 06:20:14,187 - server - INFO - üéµ TTS task #1 started at +0ms
2025-12-17T06:20:16.925762594Z [err]  2025-12-17 06:20:14,187 - server - INFO - ‚è±Ô∏è [TIMING] TTFT_TTS (First TTS Task Started): 1867ms
2025-12-17T06:20:16.925768761Z [err]  2025-12-17 06:20:14,187 - calling_service - INFO - üì§ Streamed sentence: [N] Great,...
2025-12-17T06:20:16.925773918Z [err]  2025-12-17 06:20:14,187 - persistent_tts_service - INFO - üé§ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Streaming sentence #13: [N] Great,...
2025-12-17T06:20:16.928201935Z [err]  2025-12-17 06:20:14,276 - server - INFO - üöÄ Streaming sentence #4 via persistent WebSocket
2025-12-17T06:20:16.928207661Z [err]  2025-12-17 06:20:14,276 - server - INFO - üéµ TTS task #4 started at +89ms
2025-12-17T06:20:16.928374580Z [err]  2025-12-17 06:20:14,205 - server - INFO - üì§ Sentence arrived from LLM: so to put some numbers on it,...
2025-12-17T06:20:16.928382210Z [err]  2025-12-17 06:20:14,205 - server - INFO - üîç Persistent TTS lookup: call_id=v3:sz6RRi_Qx4zS1QlC4..., session=FOUND
2025-12-17T06:20:16.928389057Z [err]  2025-12-17 06:20:14,205 - server - INFO - üöÄ Streaming sentence #2 via persistent WebSocket
2025-12-17T06:20:16.928395125Z [err]  2025-12-17 06:20:14,206 - server - INFO - üéµ TTS task #2 started at +19ms
2025-12-17T06:20:16.928401362Z [err]  2025-12-17 06:20:14,206 - calling_service - INFO - üì§ Streamed sentence: so to put some numbers on it,...
2025-12-17T06:20:16.928407987Z [err]  2025-12-17 06:20:14,262 - server - INFO - üì§ Sentence arrived from LLM: each site can bring in five hundred to two thousan...
2025-12-17T06:20:16.928421097Z [err]  2025-12-17 06:20:14,262 - server - INFO - üîç Persistent TTS lookup: call_id=v3:sz6RRi_Qx4zS1QlC4..., session=FOUND
2025-12-17T06:20:16.928429629Z [err]  2025-12-17 06:20:14,262 - server - INFO - üöÄ Streaming sentence #3 via persistent WebSocket
2025-12-17T06:20:16.928436473Z [err]  2025-12-17 06:20:14,262 - server - INFO - üéµ TTS task #3 started at +75ms
2025-12-17T06:20:16.928447173Z [err]  2025-12-17 06:20:14,262 - calling_service - INFO - üì§ Streamed sentence: each site can bring in five hundred to two thousan...
2025-12-17T06:20:16.928451525Z [err]  2025-12-17 06:20:14,275 - server - INFO - üì§ Sentence arrived from LLM: Most students aim for ten sites to start....
2025-12-17T06:20:16.928457368Z [err]  2025-12-17 06:20:14,275 - server - INFO - üîç Persistent TTS lookup: call_id=v3:sz6RRi_Qx4zS1QlC4..., session=FOUND
2025-12-17T06:20:16.932445694Z [err]  2025-12-17 06:20:14,348 - calling_service - INFO - ‚è±Ô∏è [TIMING] LLM_TOTAL: 846ms for 245 chars (grok grok-4-fast-non-reasoning)
2025-12-17T06:20:16.932452571Z [err]  2025-12-17 06:20:14,348 - calling_service - INFO - üîä Silence tracking reset for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ (user responded)
2025-12-17T06:20:16.932460555Z [err]  2025-12-17 06:20:14,348 - calling_service - INFO - ‚úÖ User responded to regular message, resetting counter
2025-12-17T06:20:16.932470702Z [err]  2025-12-17 06:20:14,276 - calling_service - INFO - üì§ Streamed sentence: Most students aim for ten sites to start....
2025-12-17T06:20:16.932489408Z [err]  2025-12-17 06:20:14,292 - server - INFO - üì§ Sentence arrived from LLM: With that in mind,...
2025-12-17T06:20:16.932496604Z [err]  2025-12-17 06:20:14,292 - server - INFO - üîç Persistent TTS lookup: call_id=v3:sz6RRi_Qx4zS1QlC4..., session=FOUND
2025-12-17T06:20:16.932503458Z [err]  2025-12-17 06:20:14,292 - server - INFO - üöÄ Streaming sentence #5 via persistent WebSocket
2025-12-17T06:20:16.932508937Z [err]  2025-12-17 06:20:14,292 - server - INFO - üéµ TTS task #5 started at +106ms
2025-12-17T06:20:16.932515953Z [err]  2025-12-17 06:20:14,292 - calling_service - INFO - üì§ Streamed sentence: With that in mind,...
2025-12-17T06:20:16.932521279Z [err]  2025-12-17 06:20:14,348 - server - INFO - üì§ Sentence arrived from LLM: would you honestly be upset if you had an extra tw...
2025-12-17T06:20:16.932528184Z [err]  2025-12-17 06:20:14,348 - server - INFO - üîç Persistent TTS lookup: call_id=v3:sz6RRi_Qx4zS1QlC4..., session=FOUND
2025-12-17T06:20:16.932533985Z [err]  2025-12-17 06:20:14,348 - server - INFO - üöÄ Streaming sentence #6 via persistent WebSocket
2025-12-17T06:20:16.932539591Z [err]  2025-12-17 06:20:14,348 - server - INFO - üéµ TTS task #6 started at +161ms
2025-12-17T06:20:16.932546479Z [err]  2025-12-17 06:20:14,348 - calling_service - INFO - üì§ Streamed final fragment: would you honestly be upset if you had an extra tw...
2025-12-17T06:20:16.937236540Z [err]  2025-12-17 06:20:14,471 - persistent_tts_service - INFO - üì§ Sending 7802 bytes of audio (49 chunks, 1.0s duration) via WebSocket
2025-12-17T06:20:16.937237101Z [err]  2025-12-17 06:20:14,349 - calling_service - INFO - LLM response (1.94s): [N] Great, so to put some numbers on it, each site can bring in five hundred to two thousand a month. Most students aim for ten sites to start. With that in mind, would you honestly be upset if you had an extra twenty thousand a month coming in?
2025-12-17T06:20:16.937247510Z [err]  2025-12-17 06:20:14,471 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:20:16.937247849Z [err]  2025-12-17 06:20:14,349 - calling_service - INFO - Total latency: 1.94s
2025-12-17T06:20:16.937257542Z [err]  2025-12-17 06:20:14,349 - server - INFO - ‚úÖ LLM finished in 2029ms, TTS tasks already running in background
2025-12-17T06:20:16.937259714Z [err]  2025-12-17 06:20:14,471 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.0s (total: 1.0s from now)
2025-12-17T06:20:16.937274744Z [err]  2025-12-17 06:20:14,349 - server - INFO - üéµ Streaming 6 TTS chunks as they complete...
2025-12-17T06:20:16.937282578Z [err]  2025-12-17 06:20:14,349 - server - INFO - üöÄ Persistent TTS: Audio already streaming in background!
2025-12-17T06:20:16.937289836Z [err]  2025-12-17 06:20:14,348 - calling_service - INFO - üíæ Storing node ID 1763206946898 in conversation history
2025-12-17T06:20:16.937291569Z [err]  2025-12-17 06:20:14,349 - server - INFO -    6 sentences queued and playing seamlessly
2025-12-17T06:20:16.937308375Z [err]  2025-12-17 06:20:14,471 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_START: Sent to ElevenLabs at T+0ms
2025-12-17T06:20:16.937316380Z [err]  2025-12-17 06:20:14,471 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_TTFB: First audio chunk at T+283ms
2025-12-17T06:20:16.945461008Z [err]  2025-12-17 06:20:14,472 - persistent_tts_service - INFO - ‚úÖ Sent 49 audio chunks via WebSocket
2025-12-17T06:20:16.945468066Z [err]  2025-12-17 06:20:15,632 - dead_air_monitor - INFO - ‚è±Ô∏è Playback expected end time passed (0.2s ago), marking agent as done speaking
2025-12-17T06:20:16.945474079Z [err]  2025-12-17 06:20:15,633 - calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1765952415.6329787 for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:16.945479642Z [err]  2025-12-17 06:20:15,633 - calling_service - INFO - ü§ñ Agent stopped speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:16.945486192Z [err]  2025-12-17 06:20:15,711 - server - INFO - üì§ Audio flowing: 4052 packets sent to Soniox (5s update)
2025-12-17T06:20:16.945492301Z [err]  2025-12-17 06:20:16,472 - elevenlabs_ws_service - INFO - ‚è±Ô∏è  [TIMING] ElevenLabs audio stream complete (0.5s timeout reached) - End of Sentence
2025-12-17T06:20:16.945500621Z [err]  2025-12-17 06:20:16,473 - persistent_tts_service - INFO - ‚úÖ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Finished streaming sentence #13: 1 chunks received
2025-12-17T06:20:16.945507855Z [err]  2025-12-17 06:20:16,473 - persistent_tts_service - INFO - üé§ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Streaming sentence #14: so to put some numbers on it,...
2025-12-17T06:20:16.945513410Z [err]  2025-12-17 06:20:16,794 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_START: Sent to ElevenLabs at T+0ms
2025-12-17T06:20:16.945518645Z [err]  2025-12-17 06:20:16,794 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_TTFB: First audio chunk at T+321ms
2025-12-17T06:20:16.945524504Z [err]  2025-12-17 06:20:16,794 - persistent_tts_service - INFO - üì§ Sending 12632 bytes of audio (79 chunks, 1.6s duration) via WebSocket
2025-12-17T06:20:16.945530374Z [err]  2025-12-17 06:20:16,794 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:20:16.950423009Z [err]  2025-12-17 06:20:16,794 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.6s (total: 1.6s from now)
2025-12-17T06:20:16.950436633Z [err]  2025-12-17 06:20:16,795 - persistent_tts_service - INFO - ‚úÖ Sent 79 audio chunks via WebSocket
2025-12-17T06:20:18.933294145Z [err]  2025-12-17 06:20:18,795 - elevenlabs_ws_service - INFO - ‚è±Ô∏è  [TIMING] ElevenLabs audio stream complete (0.5s timeout reached) - End of Sentence
2025-12-17T06:20:18.933300971Z [err]  2025-12-17 06:20:18,795 - persistent_tts_service - INFO - ‚úÖ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Finished streaming sentence #14: 1 chunks received
2025-12-17T06:20:18.933307817Z [err]  2025-12-17 06:20:18,795 - persistent_tts_service - INFO - üé§ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Streaming sentence #15: each site can bring in five hundred to two thousan...
2025-12-17T06:20:19.839750238Z [err]  2025-12-17 06:20:19,127 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.3s (total: 1.3s from now)
2025-12-17T06:20:19.839758515Z [err]  2025-12-17 06:20:19,128 - persistent_tts_service - INFO - ‚úÖ Sent 66 audio chunks via WebSocket
2025-12-17T06:20:19.839767399Z [err]  2025-12-17 06:20:19,313 - persistent_tts_service - INFO - üì§ Sending 13746 bytes of audio (86 chunks, 1.7s duration) via WebSocket
2025-12-17T06:20:19.839773371Z [err]  2025-12-17 06:20:19,314 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:20:19.839780119Z [err]  2025-12-17 06:20:19,314 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.7s (total: 2.8s from now)
2025-12-17T06:20:19.839787533Z [err]  2025-12-17 06:20:19,316 - persistent_tts_service - INFO - ‚úÖ Sent 86 audio chunks via WebSocket
2025-12-17T06:20:19.839833841Z [err]  2025-12-17 06:20:19,127 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_START: Sent to ElevenLabs at T+0ms
2025-12-17T06:20:19.839842389Z [err]  2025-12-17 06:20:19,127 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_TTFB: First audio chunk at T+331ms
2025-12-17T06:20:19.839851789Z [err]  2025-12-17 06:20:19,127 - persistent_tts_service - INFO - üì§ Sending 10402 bytes of audio (66 chunks, 1.3s duration) via WebSocket
2025-12-17T06:20:19.839859886Z [err]  2025-12-17 06:20:19,127 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:20:20.830776651Z [err]  2025-12-17 06:20:20,148 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (2.0s left)
2025-12-17T06:20:20.830781357Z [err]  2025-12-17 06:20:20,650 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (1.5s left)
2025-12-17T06:20:20.830787915Z [err]  2025-12-17 06:20:20,734 - server - INFO - üì§ Audio flowing: 4296 packets sent to Soniox (5s update)
2025-12-17T06:20:20.830794597Z [err]  2025-12-17 06:20:20,739 - server - INFO - üé§ Soniox receiver alive - 14 messages received in last 10s
2025-12-17T06:20:21.734548616Z [err]  2025-12-17 06:20:21,314 - elevenlabs_ws_service - INFO - ‚è±Ô∏è  [TIMING] ElevenLabs audio stream complete (0.5s timeout reached) - End of Sentence
2025-12-17T06:20:21.734555809Z [err]  2025-12-17 06:20:21,314 - persistent_tts_service - INFO - ‚úÖ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Finished streaming sentence #15: 2 chunks received
2025-12-17T06:20:21.734561856Z [err]  2025-12-17 06:20:21,314 - persistent_tts_service - INFO - üé§ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Streaming sentence #16: Most students aim for ten sites to start....
2025-12-17T06:20:21.734570981Z [err]  2025-12-17 06:20:21,625 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_START: Sent to ElevenLabs at T+0ms
2025-12-17T06:20:21.734575927Z [err]  2025-12-17 06:20:21,626 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_TTFB: First audio chunk at T+311ms
2025-12-17T06:20:21.734582596Z [err]  2025-12-17 06:20:21,626 - persistent_tts_service - INFO - üì§ Sending 19319 bytes of audio (121 chunks, 2.4s duration) via WebSocket
2025-12-17T06:20:21.734587825Z [err]  2025-12-17 06:20:21,626 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:20:21.734603388Z [err]  2025-12-17 06:20:21,626 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +2.4s (total: 2.9s from now)
2025-12-17T06:20:21.734608612Z [err]  2025-12-17 06:20:21,628 - persistent_tts_service - INFO - ‚úÖ Sent 121 audio chunks via WebSocket
2025-12-17T06:20:23.704436143Z [err]  2025-12-17 06:20:23,625 - elevenlabs_ws_service - INFO - ‚è±Ô∏è  [TIMING] ElevenLabs audio stream complete (0.5s timeout reached) - End of Sentence
2025-12-17T06:20:23.704447077Z [err]  2025-12-17 06:20:23,626 - persistent_tts_service - INFO - ‚úÖ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Finished streaming sentence #16: 1 chunks received
2025-12-17T06:20:23.704454771Z [err]  2025-12-17 06:20:23,626 - persistent_tts_service - INFO - üé§ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Streaming sentence #17: With that in mind,...
2025-12-17T06:20:23.918689299Z [err]  2025-12-17 06:20:23,912 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_START: Sent to ElevenLabs at T+0ms
2025-12-17T06:20:23.918694015Z [err]  2025-12-17 06:20:23,912 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_TTFB: First audio chunk at T+286ms
2025-12-17T06:20:23.918699086Z [err]  2025-12-17 06:20:23,912 - persistent_tts_service - INFO - üì§ Sending 9288 bytes of audio (59 chunks, 1.2s duration) via WebSocket
2025-12-17T06:20:23.918703763Z [err]  2025-12-17 06:20:23,912 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:20:23.918708776Z [err]  2025-12-17 06:20:23,912 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.2s (total: 1.8s from now)
2025-12-17T06:20:23.918713295Z [err]  2025-12-17 06:20:23,913 - persistent_tts_service - INFO - ‚úÖ Sent 59 audio chunks via WebSocket
2025-12-17T06:20:24.881388401Z [err]  2025-12-17 06:20:24,817 - server - INFO - üî§ RAW TOKENS: [" Th"?, "an"?]
2025-12-17T06:20:24.881396800Z [err]  2025-12-17 06:20:24,817 - calling_service - INFO - ‚è±Ô∏è SILENCE TIMER RESET (user started speaking) for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:24.881404056Z [err]  2025-12-17 06:20:24,817 - calling_service - INFO - üîä Silence timer reset for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ (user started speaking)
2025-12-17T06:20:24.881412537Z [err]  2025-12-17 06:20:24,818 - calling_service - INFO - üë§ User started speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:24.881421884Z [err]  2025-12-17 06:20:24,818 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Than' | Generating: True
2025-12-17T06:20:24.881435536Z [err]  2025-12-17 06:20:24,818 - server - INFO - üö¶ BARGE-IN CHECK during response generation: 1 words - 'Than'
2025-12-17T06:20:24.881597913Z [err]  2025-12-17 06:20:24,867 - server - INFO - üéØ Endpoint detected: <end> token received
2025-12-17T06:20:24.881606715Z [err]  2025-12-17 06:20:24,868 - server - INFO - üßπ Cleaned transcript: ' Th an ks.' -> 'Than ks.'
2025-12-17T06:20:24.881614422Z [err]  2025-12-17 06:20:24,868 - server - INFO - üì• FINAL TOKENS: 'Than ks.' (3 tokens)
2025-12-17T06:20:24.881622224Z [err]  2025-12-17 06:20:24,868 - server - INFO - üéØ User speaking while TTS is_speaking=True - INTERRUPTION POSSIBLE
2025-12-17T06:20:24.881623637Z [err]  2025-12-17 06:20:24,868 - server - INFO - üé§ Soniox final transcript: 'Than ks.'
2025-12-17T06:20:24.881633231Z [err]  2025-12-17 06:20:24,868 - server - INFO - üîç FILTER CHECK: words=2, is_filler=False, is_garbled=False, tts_speaking=True, time_until_done=0.9s, generating=True, playbacks=0, is_active=True
2025-12-17T06:20:24.881679477Z [err]  2025-12-17 06:20:24,867 - server - INFO - üî§ RAW TOKENS: [" Th"‚úì, "an"‚úì, "ks."‚úì, "<end>"‚úì]
2025-12-17T06:20:24.881686389Z [err]  2025-12-17 06:20:24,868 - server - INFO - üõë Cancelling previous response task before starting new endpoint processing
2025-12-17T06:20:24.881692732Z [err]  2025-12-17 06:20:24,868 - server - INFO - üöÄ Spawned tracked background task for endpoint processing
2025-12-17T06:20:24.881699124Z [err]  2025-12-17 06:20:24,868 - server - INFO - ‚è±Ô∏è [06:20:24.868] üìù FINAL TRANSCRIPT RECEIVED: 'Than ks.'
2025-12-17T06:20:24.881705946Z [err]  2025-12-17 06:20:24,868 - server - INFO - ‚è±Ô∏è [06:20:24.868] STT endpoint detection latency: 15ms
2025-12-17T06:20:24.881712297Z [err]  2025-12-17 06:20:24,868 - server - INFO - ‚è±Ô∏è [06:20:24.868] üé§ USER STOPPED SPEAKING - Beginning processing pipeline
2025-12-17T06:20:24.884705281Z [err]  2025-12-17 06:20:24,869 - redis_service - INFO - üì¶ Stored call data in Redis: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ (TTL: 3600s)
2025-12-17T06:20:24.884712233Z [err]  2025-12-17 06:20:24,869 - server - INFO - üë§ User has spoken - aiSpeaksAfterSilence timer cancelled if pending
2025-12-17T06:20:24.884718824Z [err]  2025-12-17 06:20:24,869 - server - INFO - üö¶ Agent SPEAKING - User said 3 word(s), tts_speaking=True, time_until_done=0.9s
2025-12-17T06:20:24.884725227Z [err]  2025-12-17 06:20:24,869 - server - INFO - üõë INTERRUPTION DETECTED - User said 3 words: 'Yeah. Go.Than ks.'
2025-12-17T06:20:24.884730956Z [err]  2025-12-17 06:20:24,869 - server - INFO - üõë Stopping 0 active playbacks immediately...
2025-12-17T06:20:24.884737149Z [err]  2025-12-17 06:20:24,869 - server - INFO - ‚úÖ Agent interrupted, processing user's message: 'Yeah. Go.Than ks.'
2025-12-17T06:20:24.884843355Z [err]  2025-12-17 06:20:24,879 - server - INFO - üé§ Endpoint detected by Soniox - processing transcript: Yeah. Go.Than ks.
2025-12-17T06:20:24.884849066Z [err]  2025-12-17 06:20:24,879 - calling_service - INFO - üë§ User stopped speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:24.884854696Z [err]  2025-12-17 06:20:24,880 - server - INFO - ‚è±Ô∏è [TIMING] STT_START: User last audio packet received
2025-12-17T06:20:24.884863218Z [err]  2025-12-17 06:20:24,880 - server - INFO - ‚è±Ô∏è [TIMING] STT_END: Endpoint detected at T+9ms
2025-12-17T06:20:24.884869007Z [err]  2025-12-17 06:20:24,880 - server - INFO - ‚è±Ô∏è [TIMING] STT_LATENCY: 9ms (Soniox model: stt-rt-v3)
2025-12-17T06:20:24.884875524Z [err]  2025-12-17 06:20:24,880 - server - INFO - ‚è±Ô∏è  USER STOPPED SPEAKING at T=0ms
2025-12-17T06:20:24.884886739Z [err]  2025-12-17 06:20:24,880 - server - INFO - üéôÔ∏è Agent generating response - interruption detection active
2025-12-17T06:20:24.884893462Z [err]  2025-12-17 06:20:24,880 - calling_service - INFO - ü§ñ Agent started speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:24.979794754Z [err]  2025-12-17 06:20:24,974 - server - INFO - üìù Saved user transcript to database
2025-12-17T06:20:24.979803486Z [err]  2025-12-17 06:20:24,975 - calling_service - INFO - ‚è±Ô∏è [06:20:24.975] üì• process_user_input() ENTRY - text: 'Yeah. Go.Than ks....'
2025-12-17T06:20:24.979810287Z [err]  2025-12-17 06:20:24,975 - calling_service - INFO - ‚è±Ô∏è [06:20:24.975] ‚è© About to call _process_call_flow_streaming()
2025-12-17T06:20:24.979816190Z [err]  2025-12-17 06:20:24,975 - calling_service - INFO - ‚è±Ô∏è [06:20:24.975] üîÄ Agent type: call_flow, calling flow processor...
2025-12-17T06:20:24.979822895Z [err]  2025-12-17 06:20:24,975 - calling_service - INFO - ‚è±Ô∏è [06:20:24.975] üîÄ _process_call_flow_streaming() ENTRY
2025-12-17T06:20:24.979829044Z [err]  2025-12-17 06:20:24,975 - calling_service - INFO - Flow processing - History length: 15, Is first: False
2025-12-17T06:20:24.979835798Z [err]  2025-12-17 06:20:24,975 - calling_service - INFO - üîç Using explicitly set current_node_id: 1763206946898
2025-12-17T06:20:24.979843106Z [err]  2025-12-17 06:20:24,975 - calling_service - INFO - üîç PRE-TRANSITION: Extracting mandatory vars on CURRENT node N_KB_Q&A_With_StrategicNarrative_V3_Adaptive before transition
2025-12-17T06:20:24.979849466Z [err]  2025-12-17 06:20:24,975 - calling_service - INFO - üîç Real-time extraction: Processing 2 variables
2025-12-17T06:20:24.979855742Z [err]  2025-12-17 06:20:24,975 - calling_service - INFO -   ‚úì has_discussed_income_potential: False (already extracted)
2025-12-17T06:20:24.979861360Z [err]  2025-12-17 06:20:24,975 - calling_service - INFO -   ‚úì asked_upset: False (already extracted)
2025-12-17T06:20:24.979866845Z [err]  2025-12-17 06:20:24,975 - calling_service - INFO - ‚úÖ All variables already extracted
2025-12-17T06:20:24.979873373Z [err]  2025-12-17 06:20:24,975 - calling_service - INFO - ‚úÖ PRE-TRANSITION: All mandatory vars satisfied on N_KB_Q&A_With_StrategicNarrative_V3_Adaptive - proceeding with transition
2025-12-17T06:20:24.983088911Z [err]  2025-12-17 06:20:24,975 - calling_service - INFO - ‚è±Ô∏è [06:20:24.975] üîÄ About to call _follow_transition() for: Yeah. Go.Than ks....
2025-12-17T06:20:24.983096161Z [err]  2025-12-17 06:20:24,975 - calling_service - INFO - Evaluating transitions from N_KB_Q&A_With_StrategicNarrative_V3_Adaptive for message: Yeah. Go.Than ks.
2025-12-17T06:20:24.995839370Z [err]  2025-12-17 06:20:24,985 - calling_service - INFO - ‚è±Ô∏è [06:20:24.985] üîÄ TRANSITION EVALUATION START - Calling LLM for 1 options
2025-12-17T06:20:25.835448633Z [err]  2025-12-17 06:20:25,167 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (0.6s left)
2025-12-17T06:20:25.835456716Z [err]  2025-12-17 06:20:25,483 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-17T06:20:25.835469724Z [err]  2025-12-17 06:20:25,485 - calling_service - INFO - ‚è±Ô∏è [06:20:25.485] üîÄ TRANSITION EVALUATION COMPLETE - took 499ms
2025-12-17T06:20:25.835476704Z [err]  2025-12-17 06:20:25,485 - calling_service - INFO - ü§ñ AI transition decision: '0'
2025-12-17T06:20:25.835483649Z [err]  2025-12-17 06:20:25,485 - calling_service - INFO - üìä Available transitions: ['...would you honestly be upset if you had an extra...']
2025-12-17T06:20:25.835491620Z [err]  2025-12-17 06:20:25,486 - calling_service - INFO - Selected transition index: 0
2025-12-17T06:20:25.835498313Z [err]  2025-12-17 06:20:25,486 - calling_service - INFO - Transition: N_KB_Q&A_With_StrategicNarrative_V3_Adaptive -> N200_Super_WorkAndIncomeBackground_V3_Adaptive
2025-12-17T06:20:25.835505357Z [err]  2025-12-17 06:20:25,486 - calling_service - INFO - ‚è±Ô∏è [TIMING] TRANSITION_EVAL: 510ms
2025-12-17T06:20:25.835512327Z [err]  2025-12-17 06:20:25,486 - calling_service - INFO - ‚è±Ô∏è [06:20:25.486] ‚úÖ Node selected, about to process content...
2025-12-17T06:20:25.835519752Z [err]  2025-12-17 06:20:25,486 - calling_service - INFO - üîß Replaced {{now}} with Wednesday, December 17, 2025 at 1:20 AM EST in content
2025-12-17T06:20:25.835525725Z [err]  2025-12-17 06:20:25,486 - calling_service - INFO - üîß Replaced {{customer_name}} with Kendrick in content
2025-12-17T06:20:25.835533043Z [err]  2025-12-17 06:20:25,486 - calling_service - INFO - üîß Replaced {{callerName}} with  in content
2025-12-17T06:20:25.835538909Z [err]  2025-12-17 06:20:25,486 - calling_service - INFO - üîß Replaced {{lead_id}} with None in content
2025-12-17T06:20:25.835545084Z [err]  2025-12-17 06:20:25,486 - calling_service - INFO - üîß Replaced {{qc_tracking_enabled}} with False in content
2025-12-17T06:20:25.841499017Z [err]  2025-12-17 06:20:25,486 - calling_service - INFO - üîß Replaced {{track_keywords}} with  in content
2025-12-17T06:20:25.841506704Z [err]  2025-12-17 06:20:25,486 - calling_service - INFO - üîß Replaced {{expected_commitment}} with not_specified in content
2025-12-17T06:20:25.841513596Z [err]  2025-12-17 06:20:25,486 - calling_service - INFO - üîß Replaced {{to_number}} with +17708336397 in content
2025-12-17T06:20:25.841521357Z [err]  2025-12-17 06:20:25,486 - calling_service - INFO - üîß Replaced {{phone_number}} with +17708336397 in content
2025-12-17T06:20:25.841529519Z [err]  2025-12-17 06:20:25,487 - calling_service - INFO - üîß Replaced {{email}} with None in content
2025-12-17T06:20:25.841539292Z [err]  2025-12-17 06:20:25,487 - calling_service - INFO - üîß Replaced {{has_discussed_income_potential}} with False in content
2025-12-17T06:20:25.841547601Z [err]  2025-12-17 06:20:25,487 - calling_service - INFO - üîß Replaced {{asked_upset}} with False in content
2025-12-17T06:20:25.841554097Z [err]  2025-12-17 06:20:25,487 - calling_service - INFO - Using flow node: N200_Super_WorkAndIncomeBackground_V3_Adaptive (type: conversation, mode: prompt)
2025-12-17T06:20:25.841561978Z [err]  2025-12-17 06:20:25,487 - calling_service - INFO - üìö skip_mandatory_precheck=true - skipping pre-response mandatory check, will check on transition
2025-12-17T06:20:25.841569339Z [err]  2025-12-17 06:20:25,487 - calling_service - INFO - ‚è±Ô∏è [06:20:25.487] üìÑ About to process content (mode=prompt, length=4059)
2025-12-17T06:20:25.841578034Z [err]  2025-12-17 06:20:25,499 - calling_service - INFO - ‚ö° PARALLEL MODE: Running KB + analysis simultaneously
2025-12-17T06:20:25.841585887Z [err]  2025-12-17 06:20:25,500 - kb_router - INFO - üö¶ KB Router: SKIP (simple chat pattern matched)
2025-12-17T06:20:25.841593817Z [err]  2025-12-17 06:20:25,500 - calling_service - INFO - ‚ö° Skipping KB (reason: simple_chat)
2025-12-17T06:20:25.842010305Z [err]  2025-12-17 06:20:25,500 - calling_service - INFO - ‚ö° Parallel operations completed in 0ms
2025-12-17T06:20:25.842030030Z [err]  2025-12-17 06:20:25,500 - calling_service - INFO - üîç Node 'N200_Super_WorkAndIncomeBackground_V3_Adaptive': use_parallel_llm=True
2025-12-17T06:20:25.842044581Z [err]  2025-12-17 06:20:25,500 - calling_service - INFO - ‚ö° Parallel mode: Using condensed history (10/15 messages)
2025-12-17T06:20:25.842056283Z [err]  2025-12-17 06:20:25,500 - calling_service - INFO - ‚è±Ô∏è [06:20:25.500] üí¨ LLM REQUEST START: 15 conversation turns, 10977 system chars (KB cached)
2025-12-17T06:20:25.842069397Z [err]  2025-12-17 06:20:25,500 - calling_service - INFO - üìù ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê LLM PROMPT BREAKDOWN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2025-12-17T06:20:25.842079172Z [err]  2025-12-17 06:20:25,500 - calling_service - INFO - üìù [SYSTEM MSG 1 - GLOBAL PROMPT] (5826 chars):
2025-12-17T06:20:25.842090148Z [err]  2025-12-17 06:20:25,500 - calling_service - INFO - üìù   Preview: # Global Prompt: Direct Drive Engine (V4.2 - Acknowledging & Fluid)
2025-12-17T06:20:25.842102845Z [err]  
2025-12-17T06:20:25.842111601Z [err]  When user states income, convert/update as [yearly_income] variable for logic splits.
2025-12-17T06:20:25.842124931Z [err]  
2025-12-17T06:20:25.842135542Z [err]  If user says a name, don't assume it's theirs‚Äîwait for explicit correction.
2025-12-17T06:20:25.842145343Z [err]  
2025-12-17T06:20:25.842153101Z [err]  If user asks to repeat info, rephrase naturally‚Äînever exact repeat.
2025-12-17T06:20:25.842164894Z [err]  
2025-12-17T06:20:25.842172443Z [err]  If asked your state: "Atlanta, GA. Been in Midtown 10 years."
2025-12-17T06:20:25.842180119Z [err]  
2025-12-17T06:20:25.842188222Z [err]  If asked about call number: "Company number."
2025-12-17T06:20:25.842200478Z [err]  
2025-12-17T06:20:25.842209997Z [err]  User email: {customer_email} (for them: {{customer_email}}).
2025-12-17T06:20:25.845039293Z [err]  
2025-12-17T06:20:25.845106227Z [err]  If explaining ends in peri...
2025-12-17T06:20:25.845119351Z [err]  2025-12-17 06:20:25,500 - calling_service - INFO - üìù [SYSTEM MSG 2 - DYNAMIC CONTEXT] (5151 chars):
2025-12-17T06:20:25.845128413Z [err]  2025-12-17 06:20:25,500 - calling_service - INFO - üìù   Preview: 
2025-12-17T06:20:25.845141957Z [err]  
2025-12-17T06:20:25.845150871Z [err]  ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
2025-12-17T06:20:25.845159610Z [err]  PREPROCESSED CONTEXT (to help you prioritize and focus):
2025-12-17T06:20:25.845166622Z [err]  ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
2025-12-17T06:20:25.845174137Z [err]  
2025-12-17T06:20:25.845182964Z [err]  USER COMMUNICATION STYLE: S type - adjust your response accordingly
2025-12-17T06:20:25.845196445Z [err]  CONVERSATION STATUS: Turn 8, objection handling phase
2025-12-17T06:20:25.845204184Z [err]  
2025-12-17T06:20:25.845212194Z [err]  This context is provided to help you focus. You still need to:
2025-12-17T06:20:25.845219540Z [err]  1. Generate a natural, contextual response
2025-12-17T06:20:25.845227112Z [err]  2. Evaluate transitions per your node instructions
2025-12-17T06:20:25.845235759Z [err]  
2025-12-17T06:20:25.845244995Z [err]  ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
2025-12-17T06:20:25.845252922Z [err]  
2025-12-17T06:20:25.845260287Z [err]  # CURRENT CONTEXT
2025-12-17T06:20:25.845266891Z [err]  Customer: Kendrick
2025-12-17T06:20:25.848697111Z [err]  Variables: {"now": "Wednesday, December 17, 2025 at 1:20 AM EST", "customer_name": "Kendrick", "callerName": "", "lead_id": null, "qc_tracking_enabled": false, "track_keywords": "", "expected_commitment...
2025-12-17T06:20:25.848707319Z [err]  2025-12-17 06:20:25,500 - calling_service - INFO - üìù [CONVERSATION HISTORY] (10 messages)
2025-12-17T06:20:25.848714851Z [err]  2025-12-17 06:20:25,500 - calling_service - INFO - üìù   assistant: [N] Great, so to put some numbers on it, each site can bring in five hundred to two thousand a month...
2025-12-17T06:20:25.848721478Z [err]  2025-12-17 06:20:25,500 - calling_service - INFO - üìù   user: Yeah. Go.Than ks....
2025-12-17T06:20:25.848733920Z [err]  2025-12-17 06:20:25,500 - calling_service - INFO - üìù ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2025-12-17T06:20:25.848740832Z [err]  2025-12-17 06:20:25,756 - server - INFO - üì§ Audio flowing: 4537 packets sent to Soniox (5s update)
2025-12-17T06:20:25.934506609Z [err]  2025-12-17 06:20:25,926 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-17T06:20:26.784515638Z [err]  2025-12-17 06:20:26,175 - dead_air_monitor - INFO - ‚è±Ô∏è Playback expected end time passed (0.5s ago), marking agent as done speaking
2025-12-17T06:20:26.784518009Z [err]  2025-12-17 06:20:26,162 - calling_service - INFO - ‚è±Ô∏è [06:20:26.162] üí¨ LLM FIRST TOKEN: 661ms (grok grok-4-fast-non-reasoning)
2025-12-17T06:20:26.784524171Z [err]  2025-12-17 06:20:26,175 - calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1765952426.1756537 for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:26.784531255Z [err]  2025-12-17 06:20:26,175 - calling_service - INFO - ü§ñ Agent stopped speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:28.412101719Z [err]  2025-12-17 06:20:27,340 - server - INFO - üì§ Sentence arrived from LLM: [N] Awesome,...
2025-12-17T06:20:28.412110974Z [err]  2025-12-17 06:20:27,340 - server - INFO - ‚è±Ô∏è [TIMING] TTFS (Time To First Sentence): 2460ms
2025-12-17T06:20:28.412119573Z [err]  2025-12-17 06:20:27,340 - server - INFO - ‚ö° Starting REAL-TIME TTS for first sentence
2025-12-17T06:20:28.412129592Z [err]  2025-12-17 06:20:27,340 - server - INFO - üîç Persistent TTS lookup: call_id=v3:sz6RRi_Qx4zS1QlC4..., session=FOUND
2025-12-17T06:20:28.412138014Z [err]  2025-12-17 06:20:27,340 - server - INFO - üöÄ Streaming sentence #1 via persistent WebSocket
2025-12-17T06:20:28.412145749Z [err]  2025-12-17 06:20:27,340 - server - INFO - üéµ TTS task #1 started at +0ms
2025-12-17T06:20:28.412153123Z [err]  2025-12-17 06:20:27,340 - server - INFO - ‚è±Ô∏è [TIMING] TTFT_TTS (First TTS Task Started): 2460ms
2025-12-17T06:20:28.412160878Z [err]  2025-12-17 06:20:27,340 - calling_service - INFO - üì§ Streamed sentence: [N] Awesome,...
2025-12-17T06:20:28.412167827Z [err]  2025-12-17 06:20:27,340 - persistent_tts_service - INFO - üé§ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Streaming sentence #18: [N] Awesome,...
2025-12-17T06:20:28.412177132Z [err]  2025-12-17 06:20:27,492 - server - INFO - üì§ Sentence arrived from LLM: glad to hear that....
2025-12-17T06:20:28.412185114Z [err]  2025-12-17 06:20:27,492 - server - INFO - üîç Persistent TTS lookup: call_id=v3:sz6RRi_Qx4zS1QlC4..., session=FOUND
2025-12-17T06:20:28.412191784Z [err]  2025-12-17 06:20:27,492 - server - INFO - üöÄ Streaming sentence #2 via persistent WebSocket
2025-12-17T06:20:28.412200881Z [err]  2025-12-17 06:20:27,492 - server - INFO - üéµ TTS task #2 started at +152ms
2025-12-17T06:20:28.412210610Z [err]  2025-12-17 06:20:27,493 - calling_service - INFO - üì§ Streamed sentence: glad to hear that....
2025-12-17T06:20:28.412224478Z [err]  2025-12-17 06:20:27,494 - server - INFO - üì§ Sentence arrived from LLM: So,...
2025-12-17T06:20:29.976779781Z [err]  2025-12-17 06:20:27,494 - server - INFO - üîç Persistent TTS lookup: call_id=v3:sz6RRi_Qx4zS1QlC4..., session=FOUND
2025-12-17T06:20:29.976787217Z [err]  2025-12-17 06:20:27,494 - server - INFO - üöÄ Streaming sentence #3 via persistent WebSocket
2025-12-17T06:20:29.976795411Z [err]  2025-12-17 06:20:27,494 - server - INFO - üéµ TTS task #3 started at +153ms
2025-12-17T06:20:29.976802226Z [err]  2025-12-17 06:20:27,494 - calling_service - INFO - üì§ Streamed sentence: So,...
2025-12-17T06:20:29.976810141Z [err]  2025-12-17 06:20:27,574 - server - INFO - üì§ Sentence arrived from LLM: are you working for someone right now or do you ru...
2025-12-17T06:20:29.976816452Z [err]  2025-12-17 06:20:27,575 - server - INFO - üîç Persistent TTS lookup: call_id=v3:sz6RRi_Qx4zS1QlC4..., session=FOUND
2025-12-17T06:20:29.976823303Z [err]  2025-12-17 06:20:27,575 - server - INFO - üöÄ Streaming sentence #4 via persistent WebSocket
2025-12-17T06:20:29.976829867Z [err]  2025-12-17 06:20:27,575 - server - INFO - üéµ TTS task #4 started at +234ms
2025-12-17T06:20:29.976839867Z [err]  2025-12-17 06:20:27,575 - calling_service - INFO - üì§ Streamed final fragment: are you working for someone right now or do you ru...
2025-12-17T06:20:29.976847921Z [err]  2025-12-17 06:20:27,575 - calling_service - INFO - ‚è±Ô∏è [TIMING] LLM_TOTAL: 2074ms for 106 chars (grok grok-4-fast-non-reasoning)
2025-12-17T06:20:29.976856384Z [err]  2025-12-17 06:20:27,575 - calling_service - INFO - ‚è±Ô∏è SILENCE TIMER RESET (user gave meaningful response) for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:29.976864044Z [err]  2025-12-17 06:20:27,575 - calling_service - INFO - üîä Silence tracking reset for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ (user responded)
2025-12-17T06:20:29.976871843Z [err]  2025-12-17 06:20:27,575 - calling_service - INFO - ‚úÖ User responded to regular message, resetting counter
2025-12-17T06:20:31.383240124Z [err]  2025-12-17 06:20:27,575 - calling_service - INFO - üíæ Storing node ID 1763175810279 in conversation history
2025-12-17T06:20:31.383245646Z [err]  2025-12-17 06:20:27,575 - calling_service - INFO - LLM response (2.60s): [N] Awesome, glad to hear that. So, are you working for someone right now or do you run your own business?
2025-12-17T06:20:31.383252200Z [err]  2025-12-17 06:20:27,575 - calling_service - INFO - Total latency: 2.60s
2025-12-17T06:20:31.383258094Z [err]  2025-12-17 06:20:27,575 - server - INFO - ‚úÖ LLM finished in 2695ms, TTS tasks already running in background
2025-12-17T06:20:31.383263496Z [err]  2025-12-17 06:20:27,575 - server - INFO - üéµ Streaming 4 TTS chunks as they complete...
2025-12-17T06:20:31.383268576Z [err]  2025-12-17 06:20:27,575 - server - INFO - üöÄ Persistent TTS: Audio already streaming in background!
2025-12-17T06:20:31.383273611Z [err]  2025-12-17 06:20:27,575 - server - INFO -    4 sentences queued and playing seamlessly
2025-12-17T06:20:31.383280440Z [err]  2025-12-17 06:20:27,633 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_START: Sent to ElevenLabs at T+0ms
2025-12-17T06:20:31.383299904Z [err]  2025-12-17 06:20:27,633 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_TTFB: First audio chunk at T+292ms
2025-12-17T06:20:31.383310850Z [err]  2025-12-17 06:20:27,633 - persistent_tts_service - INFO - üì§ Sending 8174 bytes of audio (52 chunks, 1.0s duration) via WebSocket
2025-12-17T06:20:31.383315636Z [err]  2025-12-17 06:20:27,633 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:20:31.383319714Z [err]  2025-12-17 06:20:27,633 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.0s (total: 1.0s from now)
2025-12-17T06:20:31.383325845Z [err]  2025-12-17 06:20:27,634 - persistent_tts_service - INFO - ‚úÖ Sent 52 audio chunks via WebSocket
2025-12-17T06:20:32.336715438Z [err]  2025-12-17 06:20:29,634 - elevenlabs_ws_service - INFO - ‚è±Ô∏è  [TIMING] ElevenLabs audio stream complete (0.5s timeout reached) - End of Sentence
2025-12-17T06:20:32.336722841Z [err]  2025-12-17 06:20:29,634 - persistent_tts_service - INFO - ‚úÖ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Finished streaming sentence #18: 1 chunks received
2025-12-17T06:20:32.336729447Z [err]  2025-12-17 06:20:29,634 - persistent_tts_service - INFO - üé§ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Streaming sentence #19: glad to hear that....
2025-12-17T06:20:32.336736237Z [err]  2025-12-17 06:20:29,920 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_START: Sent to ElevenLabs at T+0ms
2025-12-17T06:20:32.336744256Z [err]  2025-12-17 06:20:29,920 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_TTFB: First audio chunk at T+285ms
2025-12-17T06:20:32.336750430Z [err]  2025-12-17 06:20:29,920 - persistent_tts_service - INFO - üì§ Sending 8545 bytes of audio (54 chunks, 1.1s duration) via WebSocket
2025-12-17T06:20:32.336756910Z [err]  2025-12-17 06:20:29,920 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:20:32.336763206Z [err]  2025-12-17 06:20:29,920 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.1s (total: 1.1s from now)
2025-12-17T06:20:32.336770909Z [err]  2025-12-17 06:20:29,922 - persistent_tts_service - INFO - ‚úÖ Sent 54 audio chunks via WebSocket
2025-12-17T06:20:32.336778061Z [err]  2025-12-17 06:20:30,198 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (0.8s left)
2025-12-17T06:20:32.336784670Z [err]  2025-12-17 06:20:30,702 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=False, user_speaking=False, silence=0.0s, checkin_count=0/2
2025-12-17T06:20:32.336792452Z [err]  2025-12-17 06:20:30,771 - server - INFO - üì§ Audio flowing: 4788 packets sent to Soniox (5s update)
2025-12-17T06:20:32.340828282Z [err]  2025-12-17 06:20:31,921 - persistent_tts_service - INFO - ‚úÖ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Finished streaming sentence #19: 1 chunks received
2025-12-17T06:20:32.340828623Z [err]  2025-12-17 06:20:31,383 - server - INFO - üé§ Soniox receiver alive - 11 messages received in last 10s
2025-12-17T06:20:32.340837238Z [err]  2025-12-17 06:20:31,922 - persistent_tts_service - INFO - üé§ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Streaming sentence #20: So,...
2025-12-17T06:20:32.340844932Z [err]  2025-12-17 06:20:31,921 - elevenlabs_ws_service - INFO - ‚è±Ô∏è  [TIMING] ElevenLabs audio stream complete (0.5s timeout reached) - End of Sentence
2025-12-17T06:20:32.340898042Z [err]  2025-12-17 06:20:32,196 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_TTFB: First audio chunk at T+274ms
2025-12-17T06:20:32.340900896Z [err]  2025-12-17 06:20:32,196 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +0.7s (total: 0.7s from now)
2025-12-17T06:20:32.340909316Z [err]  2025-12-17 06:20:32,196 - persistent_tts_service - INFO - üì§ Sending 5201 bytes of audio (33 chunks, 0.7s duration) via WebSocket
2025-12-17T06:20:32.340910711Z [err]  2025-12-17 06:20:32,196 - persistent_tts_service - INFO - ‚úÖ Sent 33 audio chunks via WebSocket
2025-12-17T06:20:32.340917780Z [err]  2025-12-17 06:20:32,196 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:20:32.341016143Z [err]  2025-12-17 06:20:32,195 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_START: Sent to ElevenLabs at T+0ms
2025-12-17T06:20:34.200663419Z [err]  2025-12-17 06:20:34,196 - elevenlabs_ws_service - INFO - ‚è±Ô∏è  [TIMING] ElevenLabs audio stream complete (0.5s timeout reached) - End of Sentence
2025-12-17T06:20:34.200670567Z [err]  2025-12-17 06:20:34,196 - persistent_tts_service - INFO - ‚úÖ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Finished streaming sentence #20: 1 chunks received
2025-12-17T06:20:34.200677330Z [err]  2025-12-17 06:20:34,196 - persistent_tts_service - INFO - üé§ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Streaming sentence #21: are you working for someone right now or do you ru...
2025-12-17T06:20:35.080383410Z [err]  2025-12-17 06:20:34,550 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_START: Sent to ElevenLabs at T+0ms
2025-12-17T06:20:35.080391377Z [err]  2025-12-17 06:20:34,550 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_TTFB: First audio chunk at T+353ms
2025-12-17T06:20:35.080398359Z [err]  2025-12-17 06:20:34,550 - persistent_tts_service - INFO - üì§ Sending 8173 bytes of audio (52 chunks, 1.0s duration) via WebSocket
2025-12-17T06:20:35.080471881Z [err]  2025-12-17 06:20:34,550 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:20:35.080479238Z [err]  2025-12-17 06:20:34,550 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.0s (total: 1.0s from now)
2025-12-17T06:20:35.080489557Z [err]  2025-12-17 06:20:34,551 - persistent_tts_service - INFO - ‚úÖ Sent 52 audio chunks via WebSocket
2025-12-17T06:20:35.080495357Z [err]  2025-12-17 06:20:34,730 - persistent_tts_service - INFO - üì§ Sending 17462 bytes of audio (110 chunks, 2.2s duration) via WebSocket
2025-12-17T06:20:35.080505937Z [err]  2025-12-17 06:20:34,730 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:20:35.080511796Z [err]  2025-12-17 06:20:34,730 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +2.2s (total: 3.0s from now)
2025-12-17T06:20:35.080517304Z [err]  2025-12-17 06:20:34,732 - persistent_tts_service - INFO - ‚úÖ Sent 110 audio chunks via WebSocket
2025-12-17T06:20:35.226955246Z [err]  2025-12-17 06:20:35,221 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (2.5s left)
2025-12-17T06:20:36.087782136Z [err]  2025-12-17 06:20:35,723 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (2.0s left)
2025-12-17T06:20:36.087787262Z [err]  2025-12-17 06:20:35,790 - server - INFO - üì§ Audio flowing: 5035 packets sent to Soniox (5s update)
2025-12-17T06:20:37.130849809Z [err]  2025-12-17 06:20:36,732 - server - INFO - ‚è±Ô∏è  [TIMING]   - TOTAL MISSING: ~150-550ms typically
2025-12-17T06:20:37.130859553Z [err]  2025-12-17 06:20:36,732 - server - INFO - ‚è±Ô∏è  [TIMING] ‚ö†Ô∏è NOTE: E2E_TOTAL does not include:
2025-12-17T06:20:37.130859653Z [err]  2025-12-17 06:20:36,732 - server - INFO - ‚è±Ô∏è  [TIMING]   - REAL USER LATENCY: 12152ms estimated
2025-12-17T06:20:37.130867919Z [err]  2025-12-17 06:20:36,732 - server - INFO - ‚è±Ô∏è  [TIMING]   - Telnyx processing time (~50-200ms)
2025-12-17T06:20:37.130868995Z [err]  2025-12-17 06:20:36,732 - server - INFO - ‚è±Ô∏è  [TIMING] RESPONSE_TEXT: 106 chars, 4 sentences
2025-12-17T06:20:37.130876751Z [err]  2025-12-17 06:20:36,732 - server - INFO - ‚è±Ô∏è  [TIMING]   - Network latency to user's phone (~50-150ms)
2025-12-17T06:20:37.130880144Z [err]  2025-12-17 06:20:36,732 - server - INFO - ‚è±Ô∏è  [TIMING] USER_INPUT: 'Yeah. Go.Than ks....'
2025-12-17T06:20:37.130886888Z [err]  2025-12-17 06:20:36,732 - server - INFO - ‚è±Ô∏è  [TIMING]   - Phone audio buffering (~50-200ms)
2025-12-17T06:20:37.130890147Z [err]  2025-12-17 06:20:36,732 - server - INFO - ‚è±Ô∏è  [TIMING] AI_RESPONSE: '[N] Awesome, glad to hear that. So, are you working for some...'
2025-12-17T06:20:37.130899144Z [err]  2025-12-17 06:20:36,732 - server - INFO - ‚è±Ô∏è  [TIMING] ==========================
2025-12-17T06:20:37.130900593Z [err]  2025-12-17 06:20:36,913 - server - INFO - üîä Agent finished generating, 0 playbacks active - waiting for webhooks to close window and start silence tracking
2025-12-17T06:20:37.130907599Z [err]  2025-12-17 06:20:36,732 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2025-12-17T06:20:37.130919271Z [err]  2025-12-17 06:20:36,913 - server - INFO - üìù Saved assistant transcript and latency to database (Node: N200_Super_WorkAndIncomeBackground_V3_Adaptive, Dead Air: 3204ms)
2025-12-17T06:20:37.131116392Z [err]  2025-12-17 06:20:36,731 - elevenlabs_ws_service - INFO - ‚è±Ô∏è  [TIMING] ElevenLabs audio stream complete (0.5s timeout reached) - End of Sentence
2025-12-17T06:20:37.131123927Z [err]  2025-12-17 06:20:36,732 - persistent_tts_service - INFO - ‚úÖ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Finished streaming sentence #21: 2 chunks received
2025-12-17T06:20:37.131128624Z [err]  2025-12-17 06:20:36,732 - server - INFO - ‚úÖ All 4 persistent TTS streams completed
2025-12-17T06:20:37.131132775Z [err]  2025-12-17 06:20:36,732 - server - INFO - ‚úÖ Agent generation complete (persistent TTS) - response window closed
2025-12-17T06:20:37.131139836Z [err]  2025-12-17 06:20:36,732 - server - INFO - ‚è±Ô∏è  FIRST AUDIO STARTED: 11852ms from user stop üöÄ
2025-12-17T06:20:37.131145201Z [err]  2025-12-17 06:20:36,732 - calling_service - INFO - ü§ñ Agent started speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:37.131150145Z [err]  2025-12-17 06:20:36,732 - server - INFO - ‚úÖ Agent generation complete - response window closed
2025-12-17T06:20:37.131154752Z [err]  2025-12-17 06:20:36,732 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2025-12-17T06:20:37.131160342Z [err]  2025-12-17 06:20:36,732 - server - INFO - ‚è±Ô∏è  [TIMING] ==== E2E LATENCY SUMMARY ====
2025-12-17T06:20:37.131166288Z [err]  2025-12-17 06:20:36,732 - server - INFO - ‚è±Ô∏è  [TIMING] STT: 9ms (provider: soniox, model: stt-rt-v3)
2025-12-17T06:20:37.131170901Z [err]  2025-12-17 06:20:36,732 - server - INFO - ‚è±Ô∏è  [TIMING] LLM_TOTAL: 2695ms (provider: grok, model: grok-4-fast-non-reasoning)
2025-12-17T06:20:37.131175258Z [err]  2025-12-17 06:20:36,732 - server - INFO - ‚è±Ô∏è  [TIMING] TTS_TOTAL: 9391ms (provider: elevenlabs, websocket: False)
2025-12-17T06:20:37.131181994Z [err]  2025-12-17 06:20:36,732 - server - INFO - ‚è±Ô∏è  [TIMING] E2E_TOTAL: 11852ms (user stopped ‚Üí play_audio_url called)
2025-12-17T06:20:38.097825060Z [err]  2025-12-17 06:20:38,056 - persistent_tts_service - INFO - üîá [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] FLOOR RELEASED (is_holding_floor=False)
2025-12-17T06:20:38.235066842Z [err]  2025-12-17 06:20:38,232 - dead_air_monitor - INFO - ‚è±Ô∏è Playback expected end time passed (0.5s ago), marking agent as done speaking
2025-12-17T06:20:38.235075141Z [err]  2025-12-17 06:20:38,232 - calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1765952438.2324955 for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:38.235082621Z [err]  2025-12-17 06:20:38,232 - calling_service - INFO - ü§ñ Agent stopped speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:40.248254390Z [err]  2025-12-17 06:20:40,242 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=False, user_speaking=False, silence=2.0s, checkin_count=0/2
2025-12-17T06:20:41.078595589Z [err]  2025-12-17 06:20:40,742 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=False, user_speaking=False, silence=2.5s, checkin_count=0/2
2025-12-17T06:20:41.078607907Z [err]  2025-12-17 06:20:40,810 - server - INFO - üì§ Audio flowing: 5282 packets sent to Soniox (5s update)
2025-12-17T06:20:41.111485682Z [err]  2025-12-17 06:20:41,104 - server - INFO - üî§ RAW TOKENS: [" Say"?]
2025-12-17T06:20:41.111494678Z [err]  2025-12-17 06:20:41,104 - calling_service - INFO - ‚è±Ô∏è SILENCE TIMER RESET (user started speaking) for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:41.111503229Z [err]  2025-12-17 06:20:41,104 - calling_service - INFO - üîä Silence timer reset for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ (user started speaking)
2025-12-17T06:20:41.111511535Z [err]  2025-12-17 06:20:41,104 - calling_service - INFO - üë§ User started speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:41.111518988Z [err]  2025-12-17 06:20:41,104 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Say' | Generating: False
2025-12-17T06:20:41.237704972Z [err]  2025-12-17 06:20:41,231 - server - INFO - üî§ RAW TOKENS: [" Say"?, " that"?]
2025-12-17T06:20:41.237711540Z [err]  2025-12-17 06:20:41,231 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Say that' | Generating: False
2025-12-17T06:20:41.345616727Z [err]  2025-12-17 06:20:41,340 - server - INFO - üî§ RAW TOKENS: [" Say"?, " that"?, " aga"?]
2025-12-17T06:20:41.345629504Z [err]  2025-12-17 06:20:41,340 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Say that aga' | Generating: False
2025-12-17T06:20:41.959301878Z [err]  2025-12-17 06:20:41,429 - server - INFO - ‚úÖ Agent SILENT - User said 4 word(s): 'Say that aga in.' - Processing...
2025-12-17T06:20:41.959309287Z [err]  2025-12-17 06:20:41,440 - server - INFO - üé§ Endpoint detected by Soniox - processing transcript: Say that aga in.
2025-12-17T06:20:41.959318303Z [err]  2025-12-17 06:20:41,440 - calling_service - INFO - üë§ User stopped speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:41.959335562Z [err]  2025-12-17 06:20:41,440 - server - INFO - ‚úÖ User starting new turn - resetting agent speaking flag
2025-12-17T06:20:41.959338571Z [err]  2025-12-17 06:20:41,427 - server - INFO - üé§ Soniox receiver alive - 12 messages received in last 10s
2025-12-17T06:20:41.959344573Z [err]  2025-12-17 06:20:41,440 - server - INFO - ‚è±Ô∏è [TIMING] STT_START: User last audio packet received
2025-12-17T06:20:41.959346847Z [err]  2025-12-17 06:20:41,427 - server - INFO - üî§ RAW TOKENS: [" Say"‚úì, " that"‚úì, " aga"‚úì, "in."‚úì, "<end>"‚úì]
2025-12-17T06:20:41.959354725Z [err]  2025-12-17 06:20:41,440 - server - INFO - ‚è±Ô∏è [TIMING] STT_END: Endpoint detected at T+10ms
2025-12-17T06:20:41.959354999Z [err]  2025-12-17 06:20:41,427 - server - INFO - üéØ Endpoint detected: <end> token received
2025-12-17T06:20:41.959363526Z [err]  2025-12-17 06:20:41,427 - server - INFO - üßπ Cleaned transcript: ' Say  that  aga in.' -> 'Say that aga in.'
2025-12-17T06:20:41.959365710Z [err]  2025-12-17 06:20:41,440 - server - INFO - ‚è±Ô∏è [TIMING] STT_LATENCY: 10ms (Soniox model: stt-rt-v3)
2025-12-17T06:20:41.959371763Z [err]  2025-12-17 06:20:41,428 - server - INFO - üì• FINAL TOKENS: 'Say that aga in.' (4 tokens)
2025-12-17T06:20:41.959374395Z [err]  2025-12-17 06:20:41,440 - server - INFO - ‚è±Ô∏è  USER STOPPED SPEAKING at T=0ms
2025-12-17T06:20:41.959380631Z [err]  2025-12-17 06:20:41,428 - server - INFO - üé§ Soniox final transcript: 'Say that aga in.'
2025-12-17T06:20:41.959383374Z [err]  2025-12-17 06:20:41,441 - server - INFO - üéôÔ∏è Agent generating response - interruption detection active
2025-12-17T06:20:41.959388681Z [err]  2025-12-17 06:20:41,428 - server - INFO - üîç FILTER CHECK: words=4, is_filler=False, is_garbled=False, tts_speaking=False, time_until_done=0.0s, generating=False, playbacks=0, is_active=False
2025-12-17T06:20:41.959391921Z [err]  2025-12-17 06:20:41,441 - calling_service - INFO - ü§ñ Agent started speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:41.959397247Z [err]  2025-12-17 06:20:41,428 - server - INFO - üöÄ Spawned tracked background task for endpoint processing
2025-12-17T06:20:41.959401480Z [err]  2025-12-17 06:20:41,530 - server - INFO - üìù Saved user transcript to database
2025-12-17T06:20:41.959405709Z [err]  2025-12-17 06:20:41,428 - server - INFO - ‚è±Ô∏è [06:20:41.428] üìù FINAL TRANSCRIPT RECEIVED: 'Say that aga in.'
2025-12-17T06:20:41.959410246Z [err]  2025-12-17 06:20:41,531 - calling_service - INFO - ‚è±Ô∏è [06:20:41.530] üì• process_user_input() ENTRY - text: 'Say that aga in....'
2025-12-17T06:20:41.959414738Z [err]  2025-12-17 06:20:41,428 - server - INFO - ‚è±Ô∏è [06:20:41.428] STT endpoint detection latency: 15ms
2025-12-17T06:20:41.959418564Z [err]  2025-12-17 06:20:41,531 - calling_service - INFO - ‚è±Ô∏è [06:20:41.531] ‚è© About to call _process_call_flow_streaming()
2025-12-17T06:20:41.959422737Z [err]  2025-12-17 06:20:41,428 - server - INFO - ‚è±Ô∏è [06:20:41.428] üé§ USER STOPPED SPEAKING - Beginning processing pipeline
2025-12-17T06:20:41.959427173Z [err]  2025-12-17 06:20:41,531 - calling_service - INFO - ‚è±Ô∏è [06:20:41.531] üîÄ Agent type: call_flow, calling flow processor...
2025-12-17T06:20:41.959431206Z [err]  2025-12-17 06:20:41,429 - redis_service - INFO - üì¶ Stored call data in Redis: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ (TTL: 3600s)
2025-12-17T06:20:41.959437766Z [err]  2025-12-17 06:20:41,429 - server - INFO - üë§ User has spoken - aiSpeaksAfterSilence timer cancelled if pending
2025-12-17T06:20:41.961700120Z [err]  2025-12-17 06:20:41,531 - calling_service - INFO - ‚è±Ô∏è [06:20:41.531] üîÄ _process_call_flow_streaming() ENTRY
2025-12-17T06:20:41.961708528Z [err]  2025-12-17 06:20:41,531 - calling_service - INFO - Flow processing - History length: 17, Is first: False
2025-12-17T06:20:41.961715459Z [err]  2025-12-17 06:20:41,531 - calling_service - INFO - üîç Using explicitly set current_node_id: 1763175810279
2025-12-17T06:20:41.961721795Z [err]  2025-12-17 06:20:41,531 - calling_service - INFO - ‚è±Ô∏è [06:20:41.531] üîÄ About to call _follow_transition() for: Say that aga in....
2025-12-17T06:20:41.961727262Z [err]  2025-12-17 06:20:41,531 - calling_service - INFO - Evaluating transitions from N200_Super_WorkAndIncomeBackground_V3_Adaptive for message: Say that aga in.
2025-12-17T06:20:41.961733729Z [err]  2025-12-17 06:20:41,542 - calling_service - INFO - ‚è±Ô∏è [06:20:41.542] üîÄ TRANSITION EVALUATION START - Calling LLM for 3 options
2025-12-17T06:20:41.961739107Z [err]  2025-12-17 06:20:41,873 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-17T06:20:41.961743994Z [err]  2025-12-17 06:20:41,874 - calling_service - INFO - ‚è±Ô∏è [06:20:41.874] üîÄ TRANSITION EVALUATION COMPLETE - took 331ms
2025-12-17T06:20:41.961748957Z [err]  2025-12-17 06:20:41,874 - calling_service - INFO - ü§ñ AI transition decision: '-1'
2025-12-17T06:20:41.961753963Z [err]  2025-12-17 06:20:41,874 - calling_service - INFO - üìä Available transitions: [' Prospect indicates they have a job or work for so...', 'Prospect indicates they own a business (e.g., "I o...', "the person indicates they don't have a job or unem..."]
2025-12-17T06:20:41.961758700Z [err]  2025-12-17 06:20:41,874 - calling_service - INFO - Selected transition index: -1
2025-12-17T06:20:41.961764302Z [err]  2025-12-17 06:20:41,874 - calling_service - INFO - No specific condition matched, looking for default transition...
2025-12-17T06:20:41.964855366Z [err]  2025-12-17 06:20:41,874 - calling_service - INFO - ‚ö†Ô∏è No transition matched, but node has GOAL. Staying on current node to continue with goal-based guidance.
2025-12-17T06:20:41.964873602Z [err]  2025-12-17 06:20:41,874 - calling_service - INFO - üéØ Goal: To leverage a positive interaction with an upbeat tone and determine the user's employment status (e...
2025-12-17T06:20:41.964873861Z [err]  2025-12-17 06:20:41,874 - calling_service - INFO - üîß Replaced {{expected_commitment}} with not_specified in content
2025-12-17T06:20:41.964882458Z [err]  2025-12-17 06:20:41,874 - calling_service - INFO - üîß Replaced {{to_number}} with +17708336397 in content
2025-12-17T06:20:41.964886614Z [err]  2025-12-17 06:20:41,874 - calling_service - INFO - ‚è±Ô∏è [TIMING] TRANSITION_EVAL: 343ms
2025-12-17T06:20:41.964889776Z [err]  2025-12-17 06:20:41,875 - calling_service - INFO - üîß Replaced {{phone_number}} with +17708336397 in content
2025-12-17T06:20:41.964894905Z [err]  2025-12-17 06:20:41,874 - calling_service - INFO - ‚è±Ô∏è [06:20:41.874] ‚úÖ Node selected, about to process content...
2025-12-17T06:20:41.964901721Z [err]  2025-12-17 06:20:41,874 - calling_service - INFO - üîß Replaced {{now}} with Wednesday, December 17, 2025 at 1:20 AM EST in content
2025-12-17T06:20:41.964911156Z [err]  2025-12-17 06:20:41,874 - calling_service - INFO - üîß Replaced {{customer_name}} with Kendrick in content
2025-12-17T06:20:41.964918869Z [err]  2025-12-17 06:20:41,874 - calling_service - INFO - üîß Replaced {{callerName}} with  in content
2025-12-17T06:20:41.964926354Z [err]  2025-12-17 06:20:41,874 - calling_service - INFO - üîß Replaced {{lead_id}} with None in content
2025-12-17T06:20:41.964933321Z [err]  2025-12-17 06:20:41,874 - calling_service - INFO - üîß Replaced {{qc_tracking_enabled}} with False in content
2025-12-17T06:20:41.964940907Z [err]  2025-12-17 06:20:41,874 - calling_service - INFO - üîß Replaced {{track_keywords}} with  in content
2025-12-17T06:20:41.967716363Z [err]  2025-12-17 06:20:41,875 - calling_service - INFO - üîß Replaced {{email}} with None in content
2025-12-17T06:20:41.967727821Z [err]  2025-12-17 06:20:41,875 - calling_service - INFO - üîß Replaced {{has_discussed_income_potential}} with False in content
2025-12-17T06:20:41.967736555Z [err]  2025-12-17 06:20:41,875 - calling_service - INFO - üîß Replaced {{asked_upset}} with False in content
2025-12-17T06:20:41.967742142Z [err]  2025-12-17 06:20:41,883 - calling_service - INFO - üîç Node 'N200_Super_WorkAndIncomeBackground_V3_Adaptive': use_parallel_llm=True
2025-12-17T06:20:41.967747308Z [err]  2025-12-17 06:20:41,875 - calling_service - INFO - Using flow node: N200_Super_WorkAndIncomeBackground_V3_Adaptive (type: conversation, mode: prompt)
2025-12-17T06:20:41.967752861Z [err]  2025-12-17 06:20:41,883 - calling_service - INFO - ‚ö° Parallel mode: Using condensed history (10/17 messages)
2025-12-17T06:20:41.967757981Z [err]  2025-12-17 06:20:41,875 - calling_service - INFO - üìö skip_mandatory_precheck=true - skipping pre-response mandatory check, will check on transition
2025-12-17T06:20:41.967760951Z [err]  2025-12-17 06:20:41,883 - calling_service - INFO - ‚è±Ô∏è [06:20:41.883] üí¨ LLM REQUEST START: 17 conversation turns, 10977 system chars (KB cached)
2025-12-17T06:20:41.967765807Z [err]  2025-12-17 06:20:41,875 - calling_service - INFO - ‚è±Ô∏è [06:20:41.875] üìÑ About to process content (mode=prompt, length=4059)
2025-12-17T06:20:41.967772879Z [err]  2025-12-17 06:20:41,883 - calling_service - INFO - ‚ö° PARALLEL MODE: Running KB + analysis simultaneously
2025-12-17T06:20:41.967782562Z [err]  2025-12-17 06:20:41,883 - kb_router - INFO - üö¶ KB Router: SKIP (short message: 4 words)
2025-12-17T06:20:41.967789655Z [err]  2025-12-17 06:20:41,883 - calling_service - INFO - ‚ö° Skipping KB (reason: short_message)
2025-12-17T06:20:41.967797266Z [err]  2025-12-17 06:20:41,883 - calling_service - INFO - ‚ö° Parallel operations completed in 0ms
2025-12-17T06:20:41.972529645Z [err]  2025-12-17 06:20:41,883 - calling_service - INFO - üìù ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê LLM PROMPT BREAKDOWN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2025-12-17T06:20:41.972540922Z [err]  2025-12-17 06:20:41,883 - calling_service - INFO - üìù [SYSTEM MSG 1 - GLOBAL PROMPT] (5826 chars):
2025-12-17T06:20:41.972547807Z [err]  2025-12-17 06:20:41,883 - calling_service - INFO - üìù   Preview: # Global Prompt: Direct Drive Engine (V4.2 - Acknowledging & Fluid)
2025-12-17T06:20:41.972555371Z [err]  
2025-12-17T06:20:41.972562615Z [err]  When user states income, convert/update as [yearly_income] variable for logic splits.
2025-12-17T06:20:41.972569370Z [err]  
2025-12-17T06:20:41.972581322Z [err]  If user says a name, don't assume it's theirs‚Äîwait for explicit correction.
2025-12-17T06:20:41.972588733Z [err]  
2025-12-17T06:20:41.972597473Z [err]  If user asks to repeat info, rephrase naturally‚Äînever exact repeat.
2025-12-17T06:20:41.972604790Z [err]  
2025-12-17T06:20:41.972612211Z [err]  If asked your state: "Atlanta, GA. Been in Midtown 10 years."
2025-12-17T06:20:41.972619108Z [err]  
2025-12-17T06:20:41.972625021Z [err]  If asked about call number: "Company number."
2025-12-17T06:20:41.972633435Z [err]  
2025-12-17T06:20:41.972640992Z [err]  User email: {customer_email} (for them: {{customer_email}}).
2025-12-17T06:20:41.972647487Z [err]  
2025-12-17T06:20:41.972653359Z [err]  If explaining ends in peri...
2025-12-17T06:20:41.972660204Z [err]  2025-12-17 06:20:41,883 - calling_service - INFO - üìù [SYSTEM MSG 2 - DYNAMIC CONTEXT] (5151 chars):
2025-12-17T06:20:41.972666896Z [err]  2025-12-17 06:20:41,883 - calling_service - INFO - üìù   Preview: 
2025-12-17T06:20:41.972674166Z [err]  
2025-12-17T06:20:41.972689737Z [err]  ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
2025-12-17T06:20:41.975538783Z [err]  PREPROCESSED CONTEXT (to help you prioritize and focus):
2025-12-17T06:20:41.975551090Z [err]  ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
2025-12-17T06:20:41.975557134Z [err]  ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
2025-12-17T06:20:41.975561519Z [err]  
2025-12-17T06:20:41.975566798Z [err]  
2025-12-17T06:20:41.975570951Z [err]  USER COMMUNICATION STYLE: S type - adjust your response accordingly
2025-12-17T06:20:41.975574230Z [err]  # CURRENT CONTEXT
2025-12-17T06:20:41.975580462Z [err]  CONVERSATION STATUS: Turn 9, objection handling phase
2025-12-17T06:20:41.975582141Z [err]  Customer: Kendrick
2025-12-17T06:20:41.975589920Z [err]  Variables: {"now": "Wednesday, December 17, 2025 at 1:20 AM EST", "customer_name": "Kendrick", "callerName": "", "lead_id": null, "qc_tracking_enabled": false, "track_keywords": "", "expected_commitment...
2025-12-17T06:20:41.975591038Z [err]  
2025-12-17T06:20:41.975597105Z [err]  2025-12-17 06:20:41,883 - calling_service - INFO - üìù [CONVERSATION HISTORY] (10 messages)
2025-12-17T06:20:41.975599935Z [err]  This context is provided to help you focus. You still need to:
2025-12-17T06:20:41.975604522Z [err]  2025-12-17 06:20:41,883 - calling_service - INFO - üìù   assistant: [N] Awesome, glad to hear that. So, are you working for someone right now or do you run your own bus...
2025-12-17T06:20:41.975610200Z [err]  1. Generate a natural, contextual response
2025-12-17T06:20:41.975611729Z [err]  2025-12-17 06:20:41,883 - calling_service - INFO - üìù   user: Say that aga in....
2025-12-17T06:20:41.975617527Z [err]  2. Evaluate transitions per your node instructions
2025-12-17T06:20:41.975625135Z [err]  
2025-12-17T06:20:41.980291541Z [err]  2025-12-17 06:20:41,883 - calling_service - INFO - üìù ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2025-12-17T06:20:43.186816929Z [err]  2025-12-17 06:20:42,410 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-17T06:20:43.186821292Z [err]  2025-12-17 06:20:42,641 - calling_service - INFO - ‚è±Ô∏è [06:20:42.641] üí¨ LLM FIRST TOKEN: 757ms (grok grok-4-fast-non-reasoning)
2025-12-17T06:20:43.186826640Z [err]  2025-12-17 06:20:42,661 - server - INFO - üì§ Sentence arrived from LLM: [N] Sure,...
2025-12-17T06:20:43.186831241Z [err]  2025-12-17 06:20:42,661 - server - INFO - ‚è±Ô∏è [TIMING] TTFS (Time To First Sentence): 1220ms
2025-12-17T06:20:43.186836513Z [err]  2025-12-17 06:20:42,661 - server - INFO - ‚ö° Starting REAL-TIME TTS for first sentence
2025-12-17T06:20:43.186842284Z [err]  2025-12-17 06:20:42,661 - server - INFO - üîç Persistent TTS lookup: call_id=v3:sz6RRi_Qx4zS1QlC4..., session=FOUND
2025-12-17T06:20:43.186847540Z [err]  2025-12-17 06:20:42,661 - server - INFO - üöÄ Streaming sentence #1 via persistent WebSocket
2025-12-17T06:20:43.186852024Z [err]  2025-12-17 06:20:42,661 - server - INFO - üéµ TTS task #1 started at +0ms
2025-12-17T06:20:43.186856920Z [err]  2025-12-17 06:20:42,661 - server - INFO - ‚è±Ô∏è [TIMING] TTFT_TTS (First TTS Task Started): 1220ms
2025-12-17T06:20:43.186861898Z [err]  2025-12-17 06:20:42,661 - calling_service - INFO - üì§ Streamed sentence: [N] Sure,...
2025-12-17T06:20:43.186867616Z [err]  2025-12-17 06:20:42,661 - persistent_tts_service - INFO - üé§ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Streaming sentence #22: [N] Sure,...
2025-12-17T06:20:43.186873828Z [err]  2025-12-17 06:20:42,740 - server - INFO - üì§ Sentence arrived from LLM: I was just asking if you're currently working for ...
2025-12-17T06:20:43.186880717Z [err]  2025-12-17 06:20:42,741 - server - INFO - üîç Persistent TTS lookup: call_id=v3:sz6RRi_Qx4zS1QlC4..., session=FOUND
2025-12-17T06:20:43.186885403Z [err]  2025-12-17 06:20:42,741 - server - INFO - üöÄ Streaming sentence #2 via persistent WebSocket
2025-12-17T06:20:43.189664691Z [err]  2025-12-17 06:20:42,741 - server - INFO - üéµ TTS task #2 started at +79ms
2025-12-17T06:20:43.189671346Z [err]  2025-12-17 06:20:42,741 - calling_service - INFO - üì§ Streamed sentence: I was just asking if you're currently working for ...
2025-12-17T06:20:43.189687221Z [err]  2025-12-17 06:20:42,790 - server - INFO - üì§ Sentence arrived from LLM: or if you run your own business?...
2025-12-17T06:20:43.189694481Z [err]  2025-12-17 06:20:42,791 - server - INFO - üîç Persistent TTS lookup: call_id=v3:sz6RRi_Qx4zS1QlC4..., session=FOUND
2025-12-17T06:20:43.189700987Z [err]  2025-12-17 06:20:42,791 - server - INFO - üöÄ Streaming sentence #3 via persistent WebSocket
2025-12-17T06:20:43.189707596Z [err]  2025-12-17 06:20:42,791 - server - INFO - üéµ TTS task #3 started at +129ms
2025-12-17T06:20:43.189718040Z [err]  2025-12-17 06:20:42,791 - calling_service - INFO - üì§ Streamed final fragment: or if you run your own business?...
2025-12-17T06:20:43.189731040Z [err]  2025-12-17 06:20:42,791 - calling_service - INFO - ‚è±Ô∏è [TIMING] LLM_TOTAL: 907ms for 106 chars (grok grok-4-fast-non-reasoning)
2025-12-17T06:20:43.189736432Z [err]  2025-12-17 06:20:42,791 - calling_service - INFO - üîä Silence tracking reset for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ (user responded)
2025-12-17T06:20:43.189741257Z [err]  2025-12-17 06:20:42,791 - calling_service - INFO - ‚úÖ User responded to regular message, resetting counter
2025-12-17T06:20:43.189750963Z [err]  2025-12-17 06:20:42,791 - calling_service - INFO - üíæ Storing node ID 1763175810279 in conversation history
2025-12-17T06:20:43.189757149Z [err]  2025-12-17 06:20:42,791 - calling_service - INFO - LLM response (1.26s): [N] Sure, I was just asking if you're currently working for someone else, or if you run your own business?
2025-12-17T06:20:43.189766519Z [err]  2025-12-17 06:20:42,791 - calling_service - INFO - Total latency: 1.26s
2025-12-17T06:20:43.192644726Z [err]  2025-12-17 06:20:42,791 - server - INFO - ‚úÖ LLM finished in 1350ms, TTS tasks already running in background
2025-12-17T06:20:43.192658094Z [err]  2025-12-17 06:20:42,791 - server - INFO - üéµ Streaming 3 TTS chunks as they complete...
2025-12-17T06:20:43.192666909Z [err]  2025-12-17 06:20:42,791 - server - INFO - üöÄ Persistent TTS: Audio already streaming in background!
2025-12-17T06:20:43.192677430Z [err]  2025-12-17 06:20:42,791 - server - INFO -    3 sentences queued and playing seamlessly
2025-12-17T06:20:43.192685474Z [err]  2025-12-17 06:20:42,950 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_START: Sent to ElevenLabs at T+0ms
2025-12-17T06:20:43.192693462Z [err]  2025-12-17 06:20:42,950 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_TTFB: First audio chunk at T+289ms
2025-12-17T06:20:43.192700759Z [err]  2025-12-17 06:20:42,950 - persistent_tts_service - INFO - üì§ Sending 6687 bytes of audio (42 chunks, 0.8s duration) via WebSocket
2025-12-17T06:20:43.192707298Z [err]  2025-12-17 06:20:42,950 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:20:43.192723188Z [err]  2025-12-17 06:20:42,950 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +0.8s (total: 0.8s from now)
2025-12-17T06:20:43.192730252Z [err]  2025-12-17 06:20:42,951 - persistent_tts_service - INFO - ‚úÖ Sent 42 audio chunks via WebSocket
2025-12-17T06:20:44.266981533Z [err]  2025-12-17 06:20:44,264 - dead_air_monitor - INFO - ‚è±Ô∏è Playback expected end time passed (0.5s ago), marking agent as done speaking
2025-12-17T06:20:44.267002668Z [err]  2025-12-17 06:20:44,264 - calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1765952444.264277 for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:44.267013068Z [err]  2025-12-17 06:20:44,264 - calling_service - INFO - ü§ñ Agent stopped speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:45.164901452Z [err]  2025-12-17 06:20:44,951 - elevenlabs_ws_service - INFO - ‚è±Ô∏è  [TIMING] ElevenLabs audio stream complete (0.5s timeout reached) - End of Sentence
2025-12-17T06:20:45.164908519Z [err]  2025-12-17 06:20:44,951 - persistent_tts_service - INFO - ‚úÖ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Finished streaming sentence #22: 1 chunks received
2025-12-17T06:20:45.164915535Z [err]  2025-12-17 06:20:44,951 - persistent_tts_service - INFO - üé§ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Streaming sentence #23: I was just asking if you're currently working for ...
2025-12-17T06:20:45.265782697Z [err]  2025-12-17 06:20:45,260 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_START: Sent to ElevenLabs at T+0ms
2025-12-17T06:20:45.265796732Z [err]  2025-12-17 06:20:45,261 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_TTFB: First audio chunk at T+309ms
2025-12-17T06:20:45.265805562Z [err]  2025-12-17 06:20:45,261 - persistent_tts_service - INFO - üì§ Sending 8174 bytes of audio (52 chunks, 1.0s duration) via WebSocket
2025-12-17T06:20:45.265813127Z [err]  2025-12-17 06:20:45,261 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:20:45.265819997Z [err]  2025-12-17 06:20:45,261 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.0s (total: 1.0s from now)
2025-12-17T06:20:45.265827180Z [err]  2025-12-17 06:20:45,262 - persistent_tts_service - INFO - ‚úÖ Sent 52 audio chunks via WebSocket
2025-12-17T06:20:45.272913104Z [err]  2025-12-17 06:20:45,269 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (1.0s left)
2025-12-17T06:20:46.203298711Z [err]  2025-12-17 06:20:45,439 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:20:46.203311970Z [err]  2025-12-17 06:20:45,439 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.9s (total: 2.7s from now)
2025-12-17T06:20:46.203324059Z [err]  2025-12-17 06:20:45,440 - persistent_tts_service - INFO - ‚úÖ Sent 96 audio chunks via WebSocket
2025-12-17T06:20:46.203331360Z [err]  2025-12-17 06:20:45,770 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (2.4s left)
2025-12-17T06:20:46.203342766Z [err]  2025-12-17 06:20:45,812 - server - INFO - üì§ Audio flowing: 5524 packets sent to Soniox (5s update)
2025-12-17T06:20:46.203350170Z [err]  2025-12-17 06:20:46,006 - server - INFO - üî§ RAW TOKENS: [" Ban"?]
2025-12-17T06:20:46.203356675Z [err]  2025-12-17 06:20:46,007 - calling_service - INFO - ‚è±Ô∏è SILENCE TIMER RESET (user started speaking) for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:46.203363503Z [err]  2025-12-17 06:20:46,007 - calling_service - INFO - üîä Silence timer reset for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ (user started speaking)
2025-12-17T06:20:46.203369554Z [err]  2025-12-17 06:20:46,007 - calling_service - INFO - üë§ User started speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:46.203377364Z [err]  2025-12-17 06:20:46,007 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Ban' | Generating: True
2025-12-17T06:20:46.203385104Z [err]  2025-12-17 06:20:46,007 - server - INFO - üö¶ BARGE-IN CHECK during response generation: 1 words - 'Ban'
2025-12-17T06:20:46.203458224Z [err]  2025-12-17 06:20:45,439 - persistent_tts_service - INFO - üì§ Sending 15232 bytes of audio (96 chunks, 1.9s duration) via WebSocket
2025-12-17T06:20:46.389440475Z [err]  2025-12-17 06:20:46,384 - server - INFO - üî§ RAW TOKENS: [" Ban"‚úì, "ana."‚úì, "<end>"‚úì]
2025-12-17T06:20:46.389449133Z [err]  2025-12-17 06:20:46,384 - server - INFO - üéØ Endpoint detected: <end> token received
2025-12-17T06:20:46.389456555Z [err]  2025-12-17 06:20:46,384 - server - INFO - üßπ Cleaned transcript: ' Ban ana.' -> 'Ban ana.'
2025-12-17T06:20:46.389463836Z [err]  2025-12-17 06:20:46,384 - server - INFO - üì• FINAL TOKENS: 'Ban ana.' (2 tokens)
2025-12-17T06:20:46.389471509Z [err]  2025-12-17 06:20:46,384 - server - INFO - üé§ Soniox final transcript: 'Ban ana.'
2025-12-17T06:20:46.389482037Z [err]  2025-12-17 06:20:46,384 - server - INFO - üéØ User speaking while TTS is_speaking=True - INTERRUPTION POSSIBLE
2025-12-17T06:20:46.389496371Z [err]  2025-12-17 06:20:46,384 - server - INFO - üîç FILTER CHECK: words=2, is_filler=False, is_garbled=False, tts_speaking=True, time_until_done=1.8s, generating=True, playbacks=0, is_active=True
2025-12-17T06:20:46.389503591Z [err]  2025-12-17 06:20:46,384 - server - INFO - üõë Cancelling previous response task before starting new endpoint processing
2025-12-17T06:20:46.389511439Z [err]  2025-12-17 06:20:46,385 - server - INFO - üöÄ Spawned tracked background task for endpoint processing
2025-12-17T06:20:46.389518290Z [err]  2025-12-17 06:20:46,385 - server - INFO - ‚è±Ô∏è [06:20:46.385] üìù FINAL TRANSCRIPT RECEIVED: 'Ban ana.'
2025-12-17T06:20:46.389525654Z [err]  2025-12-17 06:20:46,385 - server - INFO - ‚è±Ô∏è [06:20:46.385] STT endpoint detection latency: 14ms
2025-12-17T06:20:46.389532827Z [err]  2025-12-17 06:20:46,385 - server - INFO - ‚è±Ô∏è [06:20:46.385] üé§ USER STOPPED SPEAKING - Beginning processing pipeline
2025-12-17T06:20:46.394459590Z [err]  2025-12-17 06:20:46,391 - redis_service - INFO - üì¶ Stored call data in Redis: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ (TTL: 3600s)
2025-12-17T06:20:46.394472343Z [err]  2025-12-17 06:20:46,391 - server - INFO - üë§ User has spoken - aiSpeaksAfterSilence timer cancelled if pending
2025-12-17T06:20:46.394481532Z [err]  2025-12-17 06:20:46,391 - server - INFO - üö¶ Agent SPEAKING - User said 5 word(s), tts_speaking=True, time_until_done=1.8s
2025-12-17T06:20:46.394487921Z [err]  2025-12-17 06:20:46,391 - server - INFO - üõë INTERRUPTION DETECTED - User said 5 words: 'Say that aga in.Ban ana.'
2025-12-17T06:20:46.394494985Z [err]  2025-12-17 06:20:46,391 - server - INFO - üõë Stopping 0 active playbacks immediately...
2025-12-17T06:20:46.394501231Z [err]  2025-12-17 06:20:46,391 - server - INFO - ‚úÖ Agent interrupted, processing user's message: 'Say that aga in.Ban ana.'
2025-12-17T06:20:46.408912443Z [err]  2025-12-17 06:20:46,401 - server - INFO - üé§ Endpoint detected by Soniox - processing transcript: Say that aga in.Ban ana.
2025-12-17T06:20:46.408918871Z [err]  2025-12-17 06:20:46,401 - calling_service - INFO - üë§ User stopped speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:46.408925418Z [err]  2025-12-17 06:20:46,402 - server - INFO - ‚è±Ô∏è [TIMING] STT_START: User last audio packet received
2025-12-17T06:20:46.408932270Z [err]  2025-12-17 06:20:46,402 - server - INFO - ‚è±Ô∏è [TIMING] STT_END: Endpoint detected at T+9ms
2025-12-17T06:20:46.408938233Z [err]  2025-12-17 06:20:46,402 - server - INFO - ‚è±Ô∏è [TIMING] STT_LATENCY: 9ms (Soniox model: stt-rt-v3)
2025-12-17T06:20:46.408947022Z [err]  2025-12-17 06:20:46,402 - server - INFO - ‚è±Ô∏è  USER STOPPED SPEAKING at T=0ms
2025-12-17T06:20:46.408954248Z [err]  2025-12-17 06:20:46,402 - server - INFO - üéôÔ∏è Agent generating response - interruption detection active
2025-12-17T06:20:46.408961276Z [err]  2025-12-17 06:20:46,402 - calling_service - INFO - ü§ñ Agent started speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:47.226493966Z [err]  2025-12-17 06:20:46,943 - calling_service - INFO - üìä Available transitions: [' Prospect indicates they have a job or work for so...', 'Prospect indicates they own a business (e.g., "I o...', "the person indicates they don't have a job or unem..."]
2025-12-17T06:20:47.226502737Z [err]  2025-12-17 06:20:46,943 - calling_service - INFO - Selected transition index: -1
2025-12-17T06:20:47.226506626Z [err]  2025-12-17 06:20:46,943 - calling_service - INFO - No specific condition matched, looking for default transition...
2025-12-17T06:20:47.226514046Z [err]  2025-12-17 06:20:46,943 - calling_service - INFO - üîß Replaced {{customer_name}} with Kendrick in content
2025-12-17T06:20:47.226516889Z [err]  2025-12-17 06:20:46,943 - calling_service - INFO - üéØ Goal: To leverage a positive interaction with an upbeat tone and determine the user's employment status (e...
2025-12-17T06:20:47.226517155Z [err]  2025-12-17 06:20:46,943 - calling_service - INFO - ‚ö†Ô∏è No transition matched, but node has GOAL. Staying on current node to continue with goal-based guidance.
2025-12-17T06:20:47.226523459Z [err]  2025-12-17 06:20:46,943 - calling_service - INFO - üîß Replaced {{callerName}} with  in content
2025-12-17T06:20:47.226528672Z [err]  2025-12-17 06:20:46,943 - calling_service - INFO - ‚è±Ô∏è [TIMING] TRANSITION_EVAL: 442ms
2025-12-17T06:20:47.226528875Z [err]  2025-12-17 06:20:46,944 - calling_service - INFO - üîß Replaced {{qc_tracking_enabled}} with False in content
2025-12-17T06:20:47.226534621Z [err]  2025-12-17 06:20:46,943 - calling_service - INFO - üîß Replaced {{lead_id}} with None in content
2025-12-17T06:20:47.226538802Z [err]  2025-12-17 06:20:46,943 - calling_service - INFO - ‚è±Ô∏è [06:20:46.943] ‚úÖ Node selected, about to process content...
2025-12-17T06:20:47.226545267Z [err]  2025-12-17 06:20:46,943 - calling_service - INFO - üîß Replaced {{now}} with Wednesday, December 17, 2025 at 1:20 AM EST in content
2025-12-17T06:20:47.226967878Z [err]  2025-12-17 06:20:46,500 - server - INFO - üìù Saved user transcript to database
2025-12-17T06:20:47.226973737Z [err]  2025-12-17 06:20:46,501 - calling_service - INFO - ‚è±Ô∏è [06:20:46.501] üì• process_user_input() ENTRY - text: 'Say that aga in.Ban ana....'
2025-12-17T06:20:47.226980228Z [err]  2025-12-17 06:20:46,501 - calling_service - INFO - ‚è±Ô∏è [06:20:46.501] ‚è© About to call _process_call_flow_streaming()
2025-12-17T06:20:47.226986675Z [err]  2025-12-17 06:20:46,501 - calling_service - INFO - ‚è±Ô∏è [06:20:46.501] üîÄ Agent type: call_flow, calling flow processor...
2025-12-17T06:20:47.226992671Z [err]  2025-12-17 06:20:46,501 - calling_service - INFO - ‚è±Ô∏è [06:20:46.501] üîÄ _process_call_flow_streaming() ENTRY
2025-12-17T06:20:47.226998915Z [err]  2025-12-17 06:20:46,501 - calling_service - INFO - Flow processing - History length: 19, Is first: False
2025-12-17T06:20:47.227005372Z [err]  2025-12-17 06:20:46,501 - calling_service - INFO - üîç Using explicitly set current_node_id: 1763175810279
2025-12-17T06:20:47.227012315Z [err]  2025-12-17 06:20:46,501 - calling_service - INFO - ‚è±Ô∏è [06:20:46.501] üîÄ About to call _follow_transition() for: Say that aga in.Ban ana....
2025-12-17T06:20:47.227018429Z [err]  2025-12-17 06:20:46,501 - calling_service - INFO - Evaluating transitions from N200_Super_WorkAndIncomeBackground_V3_Adaptive for message: Say that aga in.Ban ana.
2025-12-17T06:20:47.227024487Z [err]  2025-12-17 06:20:46,510 - calling_service - INFO - ‚è±Ô∏è [06:20:46.510] üîÄ TRANSITION EVALUATION START - Calling LLM for 3 options
2025-12-17T06:20:47.227029744Z [err]  2025-12-17 06:20:46,942 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-17T06:20:47.227035331Z [err]  2025-12-17 06:20:46,943 - calling_service - INFO - ‚è±Ô∏è [06:20:46.943] üîÄ TRANSITION EVALUATION COMPLETE - took 432ms
2025-12-17T06:20:47.227041273Z [err]  2025-12-17 06:20:46,943 - calling_service - INFO - ü§ñ AI transition decision: '-1'
2025-12-17T06:20:47.229767490Z [err]  2025-12-17 06:20:46,944 - calling_service - INFO - üîß Replaced {{track_keywords}} with  in content
2025-12-17T06:20:47.229775471Z [err]  2025-12-17 06:20:46,944 - calling_service - INFO - üîß Replaced {{expected_commitment}} with not_specified in content
2025-12-17T06:20:47.229783120Z [err]  2025-12-17 06:20:46,944 - calling_service - INFO - üîß Replaced {{to_number}} with +17708336397 in content
2025-12-17T06:20:47.229789765Z [err]  2025-12-17 06:20:46,944 - calling_service - INFO - üîß Replaced {{phone_number}} with +17708336397 in content
2025-12-17T06:20:47.229796650Z [err]  2025-12-17 06:20:46,944 - calling_service - INFO - üîß Replaced {{email}} with None in content
2025-12-17T06:20:47.229803721Z [err]  2025-12-17 06:20:46,944 - calling_service - INFO - üîß Replaced {{has_discussed_income_potential}} with False in content
2025-12-17T06:20:47.229810752Z [err]  2025-12-17 06:20:46,944 - calling_service - INFO - üîß Replaced {{asked_upset}} with False in content
2025-12-17T06:20:47.229819060Z [err]  2025-12-17 06:20:46,944 - calling_service - INFO - Using flow node: N200_Super_WorkAndIncomeBackground_V3_Adaptive (type: conversation, mode: prompt)
2025-12-17T06:20:47.229825793Z [err]  2025-12-17 06:20:46,944 - calling_service - INFO - üìö skip_mandatory_precheck=true - skipping pre-response mandatory check, will check on transition
2025-12-17T06:20:47.229833108Z [err]  2025-12-17 06:20:46,944 - calling_service - INFO - ‚è±Ô∏è [06:20:46.944] üìÑ About to process content (mode=prompt, length=4059)
2025-12-17T06:20:47.229840397Z [err]  2025-12-17 06:20:46,953 - calling_service - INFO - ‚ö° PARALLEL MODE: Running KB + analysis simultaneously
2025-12-17T06:20:47.229847316Z [err]  2025-12-17 06:20:46,953 - kb_router - INFO - üö¶ KB Router: SKIP (short message: 5 words)
2025-12-17T06:20:47.229854036Z [err]  2025-12-17 06:20:46,953 - calling_service - INFO - ‚ö° Skipping KB (reason: short_message)
2025-12-17T06:20:47.232106124Z [err]  2025-12-17 06:20:46,953 - calling_service - INFO - ‚ö° Parallel operations completed in 0ms
2025-12-17T06:20:47.232116595Z [err]  2025-12-17 06:20:46,953 - calling_service - INFO - üîç Node 'N200_Super_WorkAndIncomeBackground_V3_Adaptive': use_parallel_llm=True
2025-12-17T06:20:47.232124469Z [err]  2025-12-17 06:20:46,953 - calling_service - INFO - ‚ö° Parallel mode: Using condensed history (10/19 messages)
2025-12-17T06:20:47.232131621Z [err]  2025-12-17 06:20:46,953 - calling_service - INFO - ‚è±Ô∏è [06:20:46.953] üí¨ LLM REQUEST START: 19 conversation turns, 10978 system chars (KB cached)
2025-12-17T06:20:47.232138218Z [err]  2025-12-17 06:20:46,954 - calling_service - INFO - üìù ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê LLM PROMPT BREAKDOWN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2025-12-17T06:20:47.232144916Z [err]  2025-12-17 06:20:46,954 - calling_service - INFO - üìù [SYSTEM MSG 1 - GLOBAL PROMPT] (5826 chars):
2025-12-17T06:20:47.232151457Z [err]  2025-12-17 06:20:46,954 - calling_service - INFO - üìù   Preview: # Global Prompt: Direct Drive Engine (V4.2 - Acknowledging & Fluid)
2025-12-17T06:20:47.232158364Z [err]  
2025-12-17T06:20:47.232163523Z [err]  When user states income, convert/update as [yearly_income] variable for logic splits.
2025-12-17T06:20:47.232168876Z [err]  
2025-12-17T06:20:47.232174488Z [err]  If user says a name, don't assume it's theirs‚Äîwait for explicit correction.
2025-12-17T06:20:47.232179505Z [err]  
2025-12-17T06:20:47.232184950Z [err]  If user asks to repeat info, rephrase naturally‚Äînever exact repeat.
2025-12-17T06:20:47.232190762Z [err]  
2025-12-17T06:20:47.232197489Z [err]  If asked your state: "Atlanta, GA. Been in Midtown 10 years."
2025-12-17T06:20:47.232203027Z [err]  
2025-12-17T06:20:47.232208298Z [err]  If asked about call number: "Company number."
2025-12-17T06:20:47.232214302Z [err]  
2025-12-17T06:20:47.232219937Z [err]  User email: {customer_email} (for them: {{customer_email}}).
2025-12-17T06:20:47.236258092Z [err]  
2025-12-17T06:20:47.236274308Z [err]  If explaining ends in peri...
2025-12-17T06:20:47.236282560Z [err]  2025-12-17 06:20:46,954 - calling_service - INFO - üìù [SYSTEM MSG 2 - DYNAMIC CONTEXT] (5152 chars):
2025-12-17T06:20:47.236290076Z [err]  2025-12-17 06:20:46,954 - calling_service - INFO - üìù   Preview: 
2025-12-17T06:20:47.236299619Z [err]  
2025-12-17T06:20:47.236309190Z [err]  ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
2025-12-17T06:20:47.236316088Z [err]  PREPROCESSED CONTEXT (to help you prioritize and focus):
2025-12-17T06:20:47.236323594Z [err]  ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
2025-12-17T06:20:47.236331625Z [err]  
2025-12-17T06:20:47.236344577Z [err]  USER COMMUNICATION STYLE: C type - adjust your response accordingly
2025-12-17T06:20:47.236352581Z [err]  CONVERSATION STATUS: Turn 10, objection handling phase
2025-12-17T06:20:47.236359608Z [err]  
2025-12-17T06:20:47.236366980Z [err]  This context is provided to help you focus. You still need to:
2025-12-17T06:20:47.236374433Z [err]  1. Generate a natural, contextual response
2025-12-17T06:20:47.236381432Z [err]  2. Evaluate transitions per your node instructions
2025-12-17T06:20:47.236388017Z [err]  
2025-12-17T06:20:47.236395853Z [err]  ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
2025-12-17T06:20:47.236403268Z [err]  
2025-12-17T06:20:47.236410132Z [err]  # CURRENT CONTEXT
2025-12-17T06:20:47.238774037Z [err]  Customer: Kendrick
2025-12-17T06:20:47.238781960Z [err]  Variables: {"now": "Wednesday, December 17, 2025 at 1:20 AM EST", "customer_name": "Kendrick", "callerName": "", "lead_id": null, "qc_tracking_enabled": false, "track_keywords": "", "expected_commitmen...
2025-12-17T06:20:47.238786409Z [err]  2025-12-17 06:20:46,954 - calling_service - INFO - üìù [CONVERSATION HISTORY] (10 messages)
2025-12-17T06:20:47.238792459Z [err]  2025-12-17 06:20:46,954 - calling_service - INFO - üìù   assistant: [N] Sure, I was just asking if you're currently working for someone else, or if you run your own bus...
2025-12-17T06:20:47.238796785Z [err]  2025-12-17 06:20:46,954 - calling_service - INFO - üìù   user: Say that aga in.Ban ana....
2025-12-17T06:20:47.238802029Z [err]  2025-12-17 06:20:46,954 - calling_service - INFO - üìù ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2025-12-17T06:20:47.408566835Z [err]  2025-12-17 06:20:47,406 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-17T06:20:48.055412643Z [err]  2025-12-17 06:20:47,635 - calling_service - INFO - ‚è±Ô∏è [06:20:47.634] üí¨ LLM FIRST TOKEN: 680ms (grok grok-4-fast-non-reasoning)
2025-12-17T06:20:48.055418822Z [err]  2025-12-17 06:20:47,672 - server - INFO - üì§ Sentence arrived from LLM: [N] Sure thing,...
2025-12-17T06:20:48.055425257Z [err]  2025-12-17 06:20:47,672 - server - INFO - ‚è±Ô∏è [TIMING] TTFS (Time To First Sentence): 1270ms
2025-12-17T06:20:48.055431347Z [err]  2025-12-17 06:20:47,672 - server - INFO - ‚ö° Starting REAL-TIME TTS for first sentence
2025-12-17T06:20:48.055437803Z [err]  2025-12-17 06:20:47,672 - server - INFO - üîç Persistent TTS lookup: call_id=v3:sz6RRi_Qx4zS1QlC4..., session=FOUND
2025-12-17T06:20:48.055442856Z [err]  2025-12-17 06:20:47,672 - server - INFO - üöÄ Streaming sentence #1 via persistent WebSocket
2025-12-17T06:20:48.059806634Z [err]  2025-12-17 06:20:47,672 - server - INFO - üéµ TTS task #1 started at +0ms
2025-12-17T06:20:48.059818331Z [err]  2025-12-17 06:20:47,672 - server - INFO - ‚è±Ô∏è [TIMING] TTFT_TTS (First TTS Task Started): 1270ms
2025-12-17T06:20:48.059825384Z [err]  2025-12-17 06:20:47,672 - calling_service - INFO - üì§ Streamed sentence: [N] Sure thing,...
2025-12-17T06:20:48.059832427Z [err]  2025-12-17 06:20:47,673 - persistent_tts_service - INFO - üé§ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Streaming sentence #24: [N] Sure thing,...
2025-12-17T06:20:48.059840191Z [err]  2025-12-17 06:20:47,902 - server - INFO - üì§ Sentence arrived from LLM: I was asking if you're currently working for someo...
2025-12-17T06:20:48.059847120Z [err]  2025-12-17 06:20:47,902 - server - INFO - üîç Persistent TTS lookup: call_id=v3:sz6RRi_Qx4zS1QlC4..., session=FOUND
2025-12-17T06:20:48.059853283Z [err]  2025-12-17 06:20:47,902 - server - INFO - üöÄ Streaming sentence #2 via persistent WebSocket
2025-12-17T06:20:48.059859000Z [err]  2025-12-17 06:20:47,902 - server - INFO - üéµ TTS task #2 started at +230ms
2025-12-17T06:20:48.061968892Z [err]  2025-12-17 06:20:47,902 - calling_service - INFO - üì§ Streamed sentence: I was asking if you're currently working for someo...
2025-12-17T06:20:48.061979422Z [err]  2025-12-17 06:20:47,941 - server - INFO - üì§ Sentence arrived from LLM: or if you run your own business?...
2025-12-17T06:20:48.061999145Z [err]  2025-12-17 06:20:47,941 - server - INFO - üîç Persistent TTS lookup: call_id=v3:sz6RRi_Qx4zS1QlC4..., session=FOUND
2025-12-17T06:20:48.062014345Z [err]  2025-12-17 06:20:47,941 - server - INFO - üöÄ Streaming sentence #3 via persistent WebSocket
2025-12-17T06:20:48.062025208Z [err]  2025-12-17 06:20:47,941 - server - INFO - üéµ TTS task #3 started at +269ms
2025-12-17T06:20:48.062036743Z [err]  2025-12-17 06:20:47,941 - calling_service - INFO - üì§ Streamed final fragment: or if you run your own business?...
2025-12-17T06:20:48.062048512Z [err]  2025-12-17 06:20:47,941 - calling_service - INFO - ‚è±Ô∏è [TIMING] LLM_TOTAL: 987ms for 107 chars (grok grok-4-fast-non-reasoning)
2025-12-17T06:20:48.062062974Z [err]  2025-12-17 06:20:47,942 - calling_service - INFO - üîä Silence tracking reset for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ (user responded)
2025-12-17T06:20:48.062073547Z [err]  2025-12-17 06:20:47,942 - calling_service - INFO - ‚úÖ User responded to regular message, resetting counter
2025-12-17T06:20:48.062083417Z [err]  2025-12-17 06:20:47,942 - calling_service - INFO - üíæ Storing node ID 1763175810279 in conversation history
2025-12-17T06:20:48.062092152Z [err]  2025-12-17 06:20:47,942 - calling_service - INFO - LLM response (1.44s): [N] Sure thing, I was asking if you're currently working for someone else, or if you run your own business?
2025-12-17T06:20:48.062120174Z [err]  2025-12-17 06:20:47,942 - calling_service - INFO - Total latency: 1.44s
2025-12-17T06:20:48.062130551Z [err]  2025-12-17 06:20:47,942 - server - INFO - ‚úÖ LLM finished in 1539ms, TTS tasks already running in background
2025-12-17T06:20:48.065888328Z [err]  2025-12-17 06:20:47,942 - server - INFO - üéµ Streaming 3 TTS chunks as they complete...
2025-12-17T06:20:48.065908436Z [err]  2025-12-17 06:20:47,942 - server - INFO - üöÄ Persistent TTS: Audio already streaming in background!
2025-12-17T06:20:48.065917835Z [err]  2025-12-17 06:20:47,942 - server - INFO -    3 sentences queued and playing seamlessly
2025-12-17T06:20:48.065926545Z [err]  2025-12-17 06:20:47,969 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_START: Sent to ElevenLabs at T+0ms
2025-12-17T06:20:48.065934835Z [err]  2025-12-17 06:20:47,969 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_TTFB: First audio chunk at T+296ms
2025-12-17T06:20:48.065951773Z [err]  2025-12-17 06:20:47,969 - persistent_tts_service - INFO - üì§ Sending 9288 bytes of audio (59 chunks, 1.2s duration) via WebSocket
2025-12-17T06:20:48.065959787Z [err]  2025-12-17 06:20:47,969 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:20:48.065967160Z [err]  2025-12-17 06:20:47,969 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.2s (total: 1.4s from now)
2025-12-17T06:20:48.065975765Z [err]  2025-12-17 06:20:47,970 - persistent_tts_service - INFO - ‚úÖ Sent 59 audio chunks via WebSocket
2025-12-17T06:20:49.375743653Z [err]  2025-12-17 06:20:48,690 - server - INFO - üö¶ BARGE-IN CHECK during response generation: 1 words - 'That's'
2025-12-17T06:20:49.375749505Z [err]  2025-12-17 06:20:48,942 - server - INFO - üî§ RAW TOKENS: [" That"?, "'s"?, " y"?]
2025-12-17T06:20:49.375755255Z [err]  2025-12-17 06:20:48,944 - server - INFO - üîç PARTIAL TRANSCRIPT: 'That's y' | Generating: True
2025-12-17T06:20:49.375760885Z [err]  2025-12-17 06:20:48,944 - server - INFO - üö¶ BARGE-IN CHECK during response generation: 2 words - 'That's y'
2025-12-17T06:20:49.375765341Z [err]  2025-12-17 06:20:49,088 - server - INFO - üî§ RAW TOKENS: [" That"?, "'s"?, " y"?, "our"?]
2025-12-17T06:20:49.375769894Z [err]  2025-12-17 06:20:49,088 - server - INFO - üîç PARTIAL TRANSCRIPT: 'That's your' | Generating: True
2025-12-17T06:20:49.375780383Z [err]  2025-12-17 06:20:48,448 - server - INFO - üî§ RAW TOKENS: [" That"?]
2025-12-17T06:20:49.375786425Z [err]  2025-12-17 06:20:48,448 - calling_service - INFO - üîä Silence timer reset for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ (user started speaking)
2025-12-17T06:20:49.375794524Z [err]  2025-12-17 06:20:49,088 - server - INFO - üö¶ BARGE-IN CHECK during response generation: 2 words - 'That's your'
2025-12-17T06:20:49.375808981Z [err]  2025-12-17 06:20:48,448 - calling_service - INFO - üë§ User started speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:49.375819562Z [err]  2025-12-17 06:20:48,690 - server - INFO - üî§ RAW TOKENS: [" That"?, "'s"?]
2025-12-17T06:20:49.375820870Z [err]  2025-12-17 06:20:48,448 - server - INFO - üîç PARTIAL TRANSCRIPT: 'That' | Generating: True
2025-12-17T06:20:49.375829239Z [err]  2025-12-17 06:20:48,690 - server - INFO - üîç PARTIAL TRANSCRIPT: 'That's' | Generating: True
2025-12-17T06:20:49.375830442Z [err]  2025-12-17 06:20:48,448 - server - INFO - üö¶ BARGE-IN CHECK during response generation: 1 words - 'That'
2025-12-17T06:20:50.067743372Z [err]  2025-12-17 06:20:49,525 - server - INFO - üî§ RAW TOKENS: [" That"?, "'s"?, " y"?, "our"?, " ph"?]
2025-12-17T06:20:50.067748196Z [err]  2025-12-17 06:20:49,526 - server - INFO - üîç PARTIAL TRANSCRIPT: 'That's your ph' | Generating: True
2025-12-17T06:20:50.067753859Z [err]  2025-12-17 06:20:49,526 - server - INFO - üö¶ BARGE-IN CHECK during response generation: 3 words - 'That's your ph'
2025-12-17T06:20:50.067758760Z [err]  2025-12-17 06:20:49,526 - server - INFO - üõë INTERRUPTION TRIGGERED - User said 3 words: 'That's your ph'
2025-12-17T06:20:50.067762878Z [err]  2025-12-17 06:20:49,526 - server - INFO - üõë Stopping agent IMMEDIATELY...
2025-12-17T06:20:50.067767701Z [err]  2025-12-17 06:20:49,526 - server - INFO - üõë Cancelling in-flight response generation task
2025-12-17T06:20:50.067782739Z [err]  2025-12-17 06:20:49,526 - server - INFO - üõë Cancelled 3 in-flight TTS tasks
2025-12-17T06:20:50.067787824Z [err]  2025-12-17 06:20:49,526 - persistent_tts_service - INFO - üõë [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] INTERRUPT - Floor Released (is_holding_floor=False)
2025-12-17T06:20:50.067792983Z [err]  2025-12-17 06:20:49,558 - persistent_tts_service - INFO - üõë [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Sent clear event to Telnyx WebSocket (3x)
2025-12-17T06:20:50.067798326Z [err]  2025-12-17 06:20:49,558 - persistent_tts_service - INFO - ‚è±Ô∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Reset playback_expected_end_time to NOW
2025-12-17T06:20:50.067803005Z [err]  2025-12-17 06:20:49,558 - server - INFO - ‚úã Cleared WebSocket TTS audio buffer
2025-12-17T06:20:50.067808213Z [err]  2025-12-17 06:20:49,560 - redis_service - INFO - üßπ Cleared all playbacks for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:50.067813130Z [err]  2025-12-17 06:20:49,560 - server - INFO - ‚úÖ Agent stopped, user can continue speaking
2025-12-17T06:20:50.067951229Z [err]  2025-12-17 06:20:49,789 - server - INFO - üî§ RAW TOKENS: [" That"‚úì, "'s"‚úì, " y"‚úì, "our"‚úì, " ph"‚úì, "on"‚úì, "e."‚úì, "<end>"‚úì]
2025-12-17T06:20:50.067957633Z [err]  2025-12-17 06:20:49,789 - server - INFO - üéØ Endpoint detected: <end> token received
2025-12-17T06:20:50.067963043Z [err]  2025-12-17 06:20:49,789 - server - INFO - üßπ Cleaned transcript: ' That 's  y our  ph on e.' -> 'That's your phon e.'
2025-12-17T06:20:50.067973252Z [err]  2025-12-17 06:20:49,790 - redis_service - INFO - üì¶ Stored call data in Redis: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ (TTL: 3600s)
2025-12-17T06:20:50.067980041Z [err]  2025-12-17 06:20:49,791 - server - INFO - üë§ User has spoken - aiSpeaksAfterSilence timer cancelled if pending
2025-12-17T06:20:50.067986735Z [err]  2025-12-17 06:20:49,791 - server - INFO - ‚úÖ Agent SILENT - User said 8 word(s): 'Say that aga in.Ban ana.That's your phon e.' - Processing...
2025-12-17T06:20:50.067998230Z [err]  2025-12-17 06:20:49,789 - server - INFO - üì• FINAL TOKENS: 'That's your phon e.' (7 tokens)
2025-12-17T06:20:50.067998359Z [err]  2025-12-17 06:20:49,789 - server - INFO - üöÄ Spawned tracked background task for endpoint processing
2025-12-17T06:20:50.068007019Z [err]  2025-12-17 06:20:49,789 - server - INFO - üé§ Soniox final transcript: 'That's your phon e.'
2025-12-17T06:20:50.068010857Z [err]  2025-12-17 06:20:49,789 - server - INFO - ‚è±Ô∏è [06:20:49.789] üìù FINAL TRANSCRIPT RECEIVED: 'That's your phon e.'
2025-12-17T06:20:50.068015253Z [err]  2025-12-17 06:20:49,789 - server - INFO - üîç FILTER CHECK: words=4, is_filler=False, is_garbled=False, tts_speaking=False, time_until_done=-0.2s, generating=False, playbacks=0, is_active=False
2025-12-17T06:20:50.068019053Z [err]  2025-12-17 06:20:49,789 - server - INFO - ‚è±Ô∏è [06:20:49.789] STT endpoint detection latency: 19ms
2025-12-17T06:20:50.068025261Z [err]  2025-12-17 06:20:49,789 - server - INFO - ‚è±Ô∏è [06:20:49.789] üé§ USER STOPPED SPEAKING - Beginning processing pipeline
2025-12-17T06:20:50.071212205Z [err]  2025-12-17 06:20:49,792 - dead_air_monitor - INFO - ‚è±Ô∏è Playback expected end time passed (0.2s ago), marking agent as done speaking
2025-12-17T06:20:50.071218450Z [err]  2025-12-17 06:20:49,792 - calling_service - INFO - ü§ñ Agent stopped speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:50.071223802Z [err]  2025-12-17 06:20:49,801 - server - INFO - üé§ Endpoint detected by Soniox - processing transcript: Say that aga in.Ban ana.That's your phon e.
2025-12-17T06:20:50.071229898Z [err]  2025-12-17 06:20:49,801 - calling_service - INFO - üë§ User stopped speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:50.071237499Z [err]  2025-12-17 06:20:49,802 - server - INFO - ‚è±Ô∏è [TIMING] STT_START: User last audio packet received
2025-12-17T06:20:50.071244158Z [err]  2025-12-17 06:20:49,802 - server - INFO - ‚è±Ô∏è [TIMING] STT_END: Endpoint detected at T+8ms
2025-12-17T06:20:50.071249912Z [err]  2025-12-17 06:20:49,802 - server - INFO - ‚è±Ô∏è [TIMING] STT_LATENCY: 8ms (Soniox model: stt-rt-v3)
2025-12-17T06:20:50.071256655Z [err]  2025-12-17 06:20:49,802 - server - INFO - ‚è±Ô∏è  USER STOPPED SPEAKING at T=0ms
2025-12-17T06:20:50.071262639Z [err]  2025-12-17 06:20:49,802 - server - INFO - üéôÔ∏è Agent generating response - interruption detection active
2025-12-17T06:20:50.071268716Z [err]  2025-12-17 06:20:49,802 - calling_service - INFO - ü§ñ Agent started speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:50.071274317Z [err]  2025-12-17 06:20:49,892 - server - INFO - üìù Saved user transcript to database
2025-12-17T06:20:50.071280429Z [err]  2025-12-17 06:20:49,892 - persistent_tts_service - INFO - üîÑ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Interrupt flag reset - ready for new audio
2025-12-17T06:20:50.071288019Z [err]  2025-12-17 06:20:49,892 - server - INFO - üîÑ Reset TTS interrupt flag before new response
2025-12-17T06:20:50.073277920Z [err]  2025-12-17 06:20:49,893 - calling_service - INFO - ‚è±Ô∏è [06:20:49.893] üîÄ _process_call_flow_streaming() ENTRY
2025-12-17T06:20:50.073287792Z [err]  2025-12-17 06:20:49,893 - calling_service - INFO - Flow processing - History length: 21, Is first: False
2025-12-17T06:20:50.073294020Z [err]  2025-12-17 06:20:49,893 - calling_service - INFO - üîç Using explicitly set current_node_id: 1763175810279
2025-12-17T06:20:50.073301133Z [err]  2025-12-17 06:20:49,893 - calling_service - INFO - ‚è±Ô∏è [06:20:49.893] üîÄ About to call _follow_transition() for: Say that aga in.Ban ana.That's...
2025-12-17T06:20:50.073308153Z [err]  2025-12-17 06:20:49,893 - calling_service - INFO - Evaluating transitions from N200_Super_WorkAndIncomeBackground_V3_Adaptive for message: Say that aga in.Ban ana.That's your phon e.
2025-12-17T06:20:50.073315270Z [err]  2025-12-17 06:20:49,901 - calling_service - INFO - ‚è±Ô∏è [06:20:49.901] üîÄ TRANSITION EVALUATION START - Calling LLM for 3 options
2025-12-17T06:20:50.073388377Z [err]  2025-12-17 06:20:49,892 - calling_service - INFO - ‚è±Ô∏è [06:20:49.892] üì• process_user_input() ENTRY - text: 'Say that aga in.Ban ana.That's your phon e....'
2025-12-17T06:20:50.073395200Z [err]  2025-12-17 06:20:49,892 - calling_service - INFO - ‚è±Ô∏è [06:20:49.892] ‚è© About to call _process_call_flow_streaming()
2025-12-17T06:20:50.073402096Z [err]  2025-12-17 06:20:49,892 - calling_service - INFO - ‚è±Ô∏è [06:20:49.892] üîÄ Agent type: call_flow, calling flow processor...
2025-12-17T06:20:50.301218983Z [err]  2025-12-17 06:20:50,295 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=True, user_speaking=False, silence=0.0s, checkin_count=0/2
2025-12-17T06:20:51.183159403Z [err]  2025-12-17 06:20:50,798 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=True, user_speaking=False, silence=0.0s, checkin_count=0/2
2025-12-17T06:20:51.183166765Z [err]  2025-12-17 06:20:50,832 - server - INFO - üì§ Audio flowing: 5769 packets sent to Soniox (5s update)
2025-12-17T06:20:51.410054761Z [err]  2025-12-17 06:20:51,402 - calling_service - WARNING - ‚ö†Ô∏è TRANSITION EVALUATION TIMEOUT (>2s) - taking first transition as fallback
2025-12-17T06:20:51.410060513Z [err]  2025-12-17 06:20:51,403 - calling_service - WARNING - ‚ö†Ô∏è This prevents 13-second freezes but user experience may be affected
2025-12-17T06:20:51.410068572Z [err]  2025-12-17 06:20:51,403 - calling_service - INFO - üîÑ Fallback transition: N200_Super_WorkAndIncomeBackground_V3_Adaptive -> N201A_Employed_AskYearlyIncome_V8_Adaptive
2025-12-17T06:20:51.410075333Z [err]  2025-12-17 06:20:51,403 - calling_service - INFO - ‚è±Ô∏è [TIMING] TRANSITION_EVAL: 1510ms
2025-12-17T06:20:51.410082567Z [err]  2025-12-17 06:20:51,403 - calling_service - INFO - ‚è±Ô∏è [06:20:51.403] ‚úÖ Node selected, about to process content...
2025-12-17T06:20:51.410087924Z [err]  2025-12-17 06:20:51,403 - calling_service - INFO - üîß Replaced {{now}} with Wednesday, December 17, 2025 at 1:20 AM EST in content
2025-12-17T06:20:51.410093213Z [err]  2025-12-17 06:20:51,403 - calling_service - INFO - üîß Replaced {{customer_name}} with Kendrick in content
2025-12-17T06:20:51.410098886Z [err]  2025-12-17 06:20:51,403 - calling_service - INFO - üîß Replaced {{callerName}} with  in content
2025-12-17T06:20:51.410103914Z [err]  2025-12-17 06:20:51,403 - calling_service - INFO - üîß Replaced {{lead_id}} with None in content
2025-12-17T06:20:51.410108389Z [err]  2025-12-17 06:20:51,403 - calling_service - INFO - üîß Replaced {{qc_tracking_enabled}} with False in content
2025-12-17T06:20:51.410113094Z [err]  2025-12-17 06:20:51,403 - calling_service - INFO - üîß Replaced {{track_keywords}} with  in content
2025-12-17T06:20:51.410118585Z [err]  2025-12-17 06:20:51,403 - calling_service - INFO - üîß Replaced {{expected_commitment}} with not_specified in content
2025-12-17T06:20:51.410123798Z [err]  2025-12-17 06:20:51,403 - calling_service - INFO - üîß Replaced {{to_number}} with +17708336397 in content
2025-12-17T06:20:51.413754596Z [err]  2025-12-17 06:20:51,403 - calling_service - INFO - üîß Replaced {{phone_number}} with +17708336397 in content
2025-12-17T06:20:51.413760631Z [err]  2025-12-17 06:20:51,403 - calling_service - INFO - üîß Replaced {{email}} with None in content
2025-12-17T06:20:51.413766129Z [err]  2025-12-17 06:20:51,403 - calling_service - INFO - üîß Replaced {{has_discussed_income_potential}} with False in content
2025-12-17T06:20:51.413772372Z [err]  2025-12-17 06:20:51,403 - calling_service - INFO - üîß Replaced {{asked_upset}} with False in content
2025-12-17T06:20:51.413778256Z [err]  2025-12-17 06:20:51,403 - calling_service - INFO - Using flow node: N201A_Employed_AskYearlyIncome_V8_Adaptive (type: conversation, mode: prompt)
2025-12-17T06:20:51.413784446Z [err]  2025-12-17 06:20:51,403 - calling_service - INFO - üìö skip_mandatory_precheck=true - skipping pre-response mandatory check, will check on transition
2025-12-17T06:20:51.413790599Z [err]  2025-12-17 06:20:51,404 - calling_service - INFO - ‚è±Ô∏è [06:20:51.404] üìÑ About to process content (mode=prompt, length=4107)
2025-12-17T06:20:51.421106678Z [err]  2025-12-17 06:20:51,415 - calling_service - INFO - ‚ö° PARALLEL MODE: Running KB + analysis simultaneously
2025-12-17T06:20:51.421117791Z [err]  2025-12-17 06:20:51,415 - kb_router - INFO - üö¶ KB Router: SKIP (short message: 8 words)
2025-12-17T06:20:51.421125842Z [err]  2025-12-17 06:20:51,415 - calling_service - INFO - ‚ö° Skipping KB (reason: short_message)
2025-12-17T06:20:51.421133298Z [err]  2025-12-17 06:20:51,415 - calling_service - INFO - ‚ö° Parallel operations completed in 0ms
2025-12-17T06:20:51.421140349Z [err]  2025-12-17 06:20:51,415 - calling_service - INFO - üîç Node 'N201A_Employed_AskYearlyIncome_V8_Adaptive': use_parallel_llm=True
2025-12-17T06:20:51.421147483Z [err]  2025-12-17 06:20:51,415 - calling_service - INFO - ‚ö° Parallel mode: Using condensed history (10/21 messages)
2025-12-17T06:20:51.421154517Z [err]  2025-12-17 06:20:51,415 - calling_service - INFO - ‚è±Ô∏è [06:20:51.415] üí¨ LLM REQUEST START: 21 conversation turns, 11026 system chars (KB cached)
2025-12-17T06:20:51.421161212Z [err]  2025-12-17 06:20:51,416 - calling_service - INFO - üìù ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê LLM PROMPT BREAKDOWN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2025-12-17T06:20:51.421168514Z [err]  2025-12-17 06:20:51,416 - calling_service - INFO - üìù [SYSTEM MSG 1 - GLOBAL PROMPT] (5826 chars):
2025-12-17T06:20:51.421174314Z [err]  2025-12-17 06:20:51,416 - calling_service - INFO - üìù   Preview: # Global Prompt: Direct Drive Engine (V4.2 - Acknowledging & Fluid)
2025-12-17T06:20:51.421179626Z [err]  
2025-12-17T06:20:51.421185410Z [err]  When user states income, convert/update as [yearly_income] variable for logic splits.
2025-12-17T06:20:51.421191388Z [err]  
2025-12-17T06:20:51.421197493Z [err]  If user says a name, don't assume it's theirs‚Äîwait for explicit correction.
2025-12-17T06:20:51.421202827Z [err]  
2025-12-17T06:20:51.421210331Z [err]  If user asks to repeat info, rephrase naturally‚Äînever exact repeat.
2025-12-17T06:20:51.994147844Z [err]  
2025-12-17T06:20:51.994155044Z [err]  ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
2025-12-17T06:20:51.994161344Z [err]  
2025-12-17T06:20:51.994173871Z [err]  # CURRENT CONTEXT
2025-12-17T06:20:51.994181218Z [err]  Customer: Kendrick
2025-12-17T06:20:51.994187865Z [err]  Variables: {"now": "Wednesday, December 17, 2025 at 1:20 AM EST", "customer_name": "Kendrick", "callerName": "", "lead_id": null, "qc_tracking_enabled": false, "track_keywords": "", "expected_commitmen...
2025-12-17T06:20:51.994195263Z [err]  2025-12-17 06:20:51,416 - calling_service - INFO - üìù [CONVERSATION HISTORY] (10 messages)
2025-12-17T06:20:51.994202142Z [err]  2025-12-17 06:20:51,416 - calling_service - INFO - üìù   assistant: [N] Sure thing, I was asking if you're currently working for someone else, or if you run your own bu...
2025-12-17T06:20:51.994210283Z [err]  2025-12-17 06:20:51,416 - calling_service - INFO - üìù   user: Say that aga in.Ban ana.That's your phon e....
2025-12-17T06:20:51.994216686Z [err]  2025-12-17 06:20:51,416 - calling_service - INFO - üìù ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2025-12-17T06:20:51.994223075Z [err]  2025-12-17 06:20:51,436 - server - INFO - üìû Telnyx WebSocket disconnected. Sent 5789 total packets
2025-12-17T06:20:51.994229706Z [err]  [2025-12-17 06:20:51 +0000] [5] [INFO] connection closed
2025-12-17T06:20:51.994236436Z [err]  2025-12-17 06:20:51,755 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2025-12-17T06:20:51.994244175Z [err]  2025-12-17 06:20:51,755 - server - INFO - üì® Full payload: {'data': {'event_type': 'call.hangup', 'id': '866b88ba-1f5b-4016-9a4e-0491ec9e9b06', 'occurred_at': '2025-12-17T06:20:51.200558Z', 'payload': {'call_control_id': 'v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ', 'call_leg_id': '40dc04a6-db10-11f0-8548-02420aef981f', 'call_quality_stats': {'inbound': {'jitter_max_variance': '52.56', 'jitter_packet_count': '0', 'mos': '4.49', 'packet_count': '5813', 'skip_packet_count': '61'}, 'outbound': {'packet_count': '5842', 'skip_packet_count': '0'}}, 'call_session_id': '40d90d0a-db10-11f0-9ba9-02420aef981f', 'client_state': None, 'connection_id': '2777245537294877821', 'end_time': '2025-12-17T06:20:51.200558Z', 'from': '+14048000152', 'hangup_cause': 'normal_clearing', 'hangup_source': 'callee', 'sip_hangup_cause': '200', 'start_time': '2025-12-17T06:18:50.420558Z', 'to': '+17708336397'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2025-12-17T06:20:51.994280479Z [err]  
2025-12-17T06:20:51.994292509Z [err]  If asked your state: "Atlanta, GA. Been in Midtown 10 years."
2025-12-17T06:20:51.994305337Z [err]  
2025-12-17T06:20:51.994314859Z [err]  If asked about call number: "Company number."
2025-12-17T06:20:51.994323266Z [err]  
2025-12-17T06:20:51.994359017Z [err]  User email: {customer_email} (for them: {{customer_email}}).
2025-12-17T06:20:51.994367108Z [err]  
2025-12-17T06:20:51.994374979Z [err]  If explaining ends in peri...
2025-12-17T06:20:51.994383435Z [err]  2025-12-17 06:20:51,416 - calling_service - INFO - üìù [SYSTEM MSG 2 - DYNAMIC CONTEXT] (5200 chars):
2025-12-17T06:20:51.994392104Z [err]  2025-12-17 06:20:51,416 - calling_service - INFO - üìù   Preview: 
2025-12-17T06:20:51.994400132Z [err]  
2025-12-17T06:20:51.994408573Z [err]  ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
2025-12-17T06:20:51.994416587Z [err]  PREPROCESSED CONTEXT (to help you prioritize and focus):
2025-12-17T06:20:51.994424219Z [err]  ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
2025-12-17T06:20:51.994431814Z [err]  
2025-12-17T06:20:51.994439788Z [err]  USER COMMUNICATION STYLE: C type - adjust your response accordingly
2025-12-17T06:20:51.994447519Z [err]  CONVERSATION STATUS: Turn 11, objection handling phase
2025-12-17T06:20:51.994458685Z [err]  
2025-12-17T06:20:51.994467258Z [err]  This context is provided to help you focus. You still need to:
2025-12-17T06:20:51.994476316Z [err]  1. Generate a natural, contextual response
2025-12-17T06:20:51.994483990Z [err]  2. Evaluate transitions per your node instructions
2025-12-17T06:20:51.997396080Z [err]  2025-12-17 06:20:51,755 - server - INFO - üéØ Event type: call.hangup, Call ID: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:51.997402554Z [err]  2025-12-17 06:20:51,755 - server - INFO - üì® ================================================
2025-12-17T06:20:51.997408697Z [err]  2025-12-17 06:20:51,755 - server - INFO - üìû Call ended: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:51.997416188Z [err]  2025-12-17 06:20:51,755 - server - INFO - üìû Hangup cause: normal_clearing
2025-12-17T06:20:51.997422428Z [err]  2025-12-17 06:20:51,823 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2025-12-17T06:20:51.997428515Z [err]  2025-12-17 06:20:51,823 - server - INFO - üì® Full payload: {'data': {'event_type': 'streaming.stopped', 'id': '99a78fd8-5cf3-4dfb-b22b-6d1ab7b2cb87', 'occurred_at': '2025-12-17T06:20:51.373518Z', 'payload': {'call_control_id': 'v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ', 'call_leg_id': '40dc04a6-db10-11f0-8548-02420aef981f', 'call_session_id': '40d90d0a-db10-11f0-9ba9-02420aef981f', 'client_state': None, 'connection_id': '2777245537294877821', 'stream_id': '239da044-9a08-41a2-985a-8280beae7ac9', 'stream_params': {'stream_track': 'inbound', 'stream_url': 'wss://api.li-ai.org/api/telnyx/audio-stream'}, 'stream_type': 'websocket'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2025-12-17T06:20:51.997434103Z [err]  2025-12-17 06:20:51,823 - server - INFO - üéØ Event type: streaming.stopped, Call ID: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:51.997440168Z [err]  2025-12-17 06:20:51,823 - server - INFO - üì® ================================================
2025-12-17T06:20:51.997447268Z [inf]  100.64.0.3:27262 - "POST /api/telnyx/webhook HTTP/1.1" 200
2025-12-17T06:20:51.997453455Z [err]  2025-12-17 06:20:51,826 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2025-12-17T06:20:52.001600724Z [err]  2025-12-17 06:20:51,826 - server - INFO - üì® Full payload: {'data': {'event_type': 'call.playback.ended', 'id': 'e15e6e45-6e4d-4516-82f1-a6068b4448d9', 'occurred_at': '2025-12-17T06:20:51.240575Z', 'payload': {'call_control_id': 'v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ', 'call_leg_id': '40dc04a6-db10-11f0-8548-02420aef981f', 'call_session_id': '40d90d0a-db10-11f0-9ba9-02420aef981f', 'client_state': None, 'connection_id': '2777245537294877821', 'end_time': '2025-12-17T06:20:51.240575Z', 'media_name': None, 'media_url': 'api.li-ai.org/api/tts-audio/comfort_noise_continuous.mp3', 'overlay': True, 'playback_id': 'i-nuZWF9nw', 'status': 'call_hangup', 'status_detail': ''}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2025-12-17T06:20:52.001607944Z [err]  2025-12-17 06:20:51,826 - server - INFO - üéØ Event type: call.playback.ended, Call ID: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:52.001614926Z [err]  2025-12-17 06:20:51,826 - server - INFO - üì® ================================================
2025-12-17T06:20:52.001622425Z [err]  2025-12-17 06:20:51,828 - redis_service - INFO - ‚ûñ Removed playback i-nuZWF9nw, 0 remaining for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:52.001629010Z [err]  2025-12-17 06:20:51,828 - server - INFO - üîä Redis: Removed playback i-nuZWF9nw, 0 remaining
2025-12-17T06:20:52.001637601Z [err]  2025-12-17 06:20:51,828 - server - INFO - üîä ALL PLAYBACKS FINISHED (via Redis) - attempting to start silence timer
2025-12-17T06:20:52.001643583Z [err]  2025-12-17 06:20:51,828 - server - INFO - ‚è±Ô∏è CLEARED playback_expected_end_time - agent is definitely done speaking
2025-12-17T06:20:52.001650459Z [err]  2025-12-17 06:20:51,829 - server - INFO - ‚úÖ Set 'agent_done_speaking' flag in Redis for worker with session to detect
2025-12-17T06:20:52.001656972Z [err]  2025-12-17 06:20:51,829 - server - INFO - ‚úÖ Found session locally: agent_speaking=True, user_speaking=False
2025-12-17T06:20:52.007786063Z [err]  2025-12-17 06:20:51,829 - calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1765952451.8299608 for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:52.007803204Z [err]  2025-12-17 06:20:51,829 - calling_service - INFO - ü§ñ Agent stopped speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:52.007814308Z [err]  2025-12-17 06:20:51,830 - server - INFO - ‚è±Ô∏è Agent done speaking, silence timer STARTED (local)
2025-12-17T06:20:52.007822854Z [inf]  100.64.0.4:22848 - "POST /api/telnyx/webhook HTTP/1.1" 200
2025-12-17T06:20:52.007830310Z [err]  2025-12-17 06:20:51,933 - server - INFO - üìù Updated call log: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:52.007838075Z [err]  2025-12-17 06:20:51,975 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-17T06:20:52.028641095Z [err]  2025-12-17 06:20:52,023 - server - INFO - ‚úÖ Finalized call log: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ (duration=117s, status=completed)
2025-12-17T06:20:52.119024037Z [err]  2025-12-17 06:20:52,113 - server - INFO - üì¶ Saved 12 session variables to call_log: ['now', 'customer_name', 'callerName', 'lead_id', 'qc_tracking_enabled', 'track_keywords', 'expected_commitment', 'to_number', 'phone_number', 'email', 'has_discussed_income_potential', 'asked_upset']
2025-12-17T06:20:52.285424209Z [err]  2025-12-17 06:20:52,278 - calling_service - INFO - ‚è±Ô∏è [06:20:52.278] üí¨ LLM FIRST TOKEN: 862ms (grok grok-4-fast-non-reasoning)
2025-12-17T06:20:52.338990543Z [err]  2025-12-17 06:20:52,326 - server - INFO - üì§ Sentence arrived from LLM: [N] Got it,...
2025-12-17T06:20:52.339004462Z [err]  2025-12-17 06:20:52,326 - server - INFO - ‚è±Ô∏è [TIMING] TTFS (Time To First Sentence): 2524ms
2025-12-17T06:20:52.339010952Z [err]  2025-12-17 06:20:52,326 - server - INFO - ‚ö° Starting REAL-TIME TTS for first sentence
2025-12-17T06:20:52.339018728Z [err]  2025-12-17 06:20:52,326 - server - INFO - üîç Persistent TTS lookup: call_id=v3:sz6RRi_Qx4zS1QlC4..., session=FOUND
2025-12-17T06:20:52.339025591Z [err]  2025-12-17 06:20:52,326 - server - INFO - üöÄ Streaming sentence #1 via persistent WebSocket
2025-12-17T06:20:52.339031492Z [err]  2025-12-17 06:20:52,326 - server - INFO - üéµ TTS task #1 started at +0ms
2025-12-17T06:20:52.339037482Z [err]  2025-12-17 06:20:52,326 - server - INFO - ‚è±Ô∏è [TIMING] TTFT_TTS (First TTS Task Started): 2524ms
2025-12-17T06:20:52.339046399Z [err]  2025-12-17 06:20:52,326 - calling_service - INFO - üì§ Streamed sentence: [N] Got it,...
2025-12-17T06:20:52.339054178Z [err]  2025-12-17 06:20:52,327 - persistent_tts_service - INFO - üé§ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Streaming sentence #25: [N] Got it,...
2025-12-17T06:20:53.427920643Z [err]  2025-12-17 06:20:52,518 - server - INFO - üöÄ Streaming sentence #4 via persistent WebSocket
2025-12-17T06:20:53.427931019Z [err]  2025-12-17 06:20:52,518 - server - INFO - üéµ TTS task #4 started at +192ms
2025-12-17T06:20:53.428223897Z [err]  2025-12-17 06:20:52,469 - server - INFO - üì§ Sentence arrived from LLM: you're working for someone right now....
2025-12-17T06:20:53.428231913Z [err]  2025-12-17 06:20:52,470 - server - INFO - üîç Persistent TTS lookup: call_id=v3:sz6RRi_Qx4zS1QlC4..., session=FOUND
2025-12-17T06:20:53.428237872Z [err]  2025-12-17 06:20:52,470 - server - INFO - üöÄ Streaming sentence #2 via persistent WebSocket
2025-12-17T06:20:53.428245391Z [err]  2025-12-17 06:20:52,470 - server - INFO - üéµ TTS task #2 started at +143ms
2025-12-17T06:20:53.428254080Z [err]  2025-12-17 06:20:52,470 - calling_service - INFO - üì§ Streamed sentence: you're working for someone right now....
2025-12-17T06:20:53.428259949Z [err]  2025-12-17 06:20:52,516 - server - INFO - üì§ Sentence arrived from LLM: And what's that job producing for you yearly,...
2025-12-17T06:20:53.428266248Z [err]  2025-12-17 06:20:52,517 - server - INFO - üîç Persistent TTS lookup: call_id=v3:sz6RRi_Qx4zS1QlC4..., session=FOUND
2025-12-17T06:20:53.428272518Z [err]  2025-12-17 06:20:52,517 - server - INFO - üöÄ Streaming sentence #3 via persistent WebSocket
2025-12-17T06:20:53.428279153Z [err]  2025-12-17 06:20:52,517 - server - INFO - üéµ TTS task #3 started at +190ms
2025-12-17T06:20:53.428287306Z [err]  2025-12-17 06:20:52,517 - calling_service - INFO - üì§ Streamed sentence: And what's that job producing for you yearly,...
2025-12-17T06:20:53.428293686Z [err]  2025-12-17 06:20:52,518 - server - INFO - üì§ Sentence arrived from LLM: approximately?...
2025-12-17T06:20:53.428300258Z [err]  2025-12-17 06:20:52,518 - server - INFO - üîç Persistent TTS lookup: call_id=v3:sz6RRi_Qx4zS1QlC4..., session=FOUND
2025-12-17T06:20:53.432910256Z [err]  2025-12-17 06:20:52,518 - calling_service - INFO - üì§ Streamed final fragment: approximately?...
2025-12-17T06:20:53.432917137Z [err]  2025-12-17 06:20:52,518 - calling_service - INFO - ‚è±Ô∏è [TIMING] LLM_TOTAL: 1102ms for 110 chars (grok grok-4-fast-non-reasoning)
2025-12-17T06:20:53.432923550Z [err]  2025-12-17 06:20:52,518 - calling_service - INFO - ‚è±Ô∏è SILENCE TIMER RESET (user gave meaningful response) for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:53.432929571Z [err]  2025-12-17 06:20:52,518 - calling_service - INFO - üîä Silence tracking reset for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ (user responded)
2025-12-17T06:20:53.432936444Z [err]  2025-12-17 06:20:52,518 - calling_service - INFO - ‚úÖ User responded to regular message, resetting counter
2025-12-17T06:20:53.432946676Z [err]  2025-12-17 06:20:52,518 - calling_service - INFO - üíæ Storing node ID 1763176007632 in conversation history
2025-12-17T06:20:53.432955164Z [err]  2025-12-17 06:20:52,518 - calling_service - INFO - LLM response (2.63s): [N] Got it, you're working for someone right now. And what's that job producing for you yearly, approximately?
2025-12-17T06:20:53.432961872Z [err]  2025-12-17 06:20:52,518 - calling_service - INFO - Total latency: 2.63s
2025-12-17T06:20:53.432968803Z [err]  2025-12-17 06:20:52,518 - server - INFO - ‚úÖ LLM finished in 2716ms, TTS tasks already running in background
2025-12-17T06:20:53.432976397Z [err]  2025-12-17 06:20:52,518 - server - INFO - üéµ Streaming 4 TTS chunks as they complete...
2025-12-17T06:20:53.432983517Z [err]  2025-12-17 06:20:52,518 - server - INFO - üöÄ Persistent TTS: Audio already streaming in background!
2025-12-17T06:20:53.432991131Z [err]  2025-12-17 06:20:52,518 - server - INFO -    4 sentences queued and playing seamlessly
2025-12-17T06:20:53.433025265Z [err]  2025-12-17 06:20:52,610 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_START: Sent to ElevenLabs at T+0ms
2025-12-17T06:20:54.323453750Z [err]  2025-12-17 06:20:52,610 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_TTFB: First audio chunk at T+283ms
2025-12-17T06:20:54.323459591Z [err]  2025-12-17 06:20:52,610 - persistent_tts_service - INFO - üì§ Sending 8545 bytes of audio (54 chunks, 1.1s duration) via WebSocket
2025-12-17T06:20:54.323465926Z [err]  2025-12-17 06:20:52,610 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] AGENT IS NOW SPEAKING (is_speaking=True)
2025-12-17T06:20:54.323471815Z [err]  2025-12-17 06:20:52,610 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.1s (total: 1.1s from now)
2025-12-17T06:20:54.323477435Z [err]  2025-12-17 06:20:52,610 - persistent_tts_service - ERROR - ‚ùå Error sending audio via WebSocket: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-12-17T06:20:54.323485006Z [err]  2025-12-17 06:20:52,736 - server - INFO - üìä Auto-added call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ to campaign b7bd9ce7-2722-4c61-a2fc-ca1fb127d7b8
2025-12-17T06:20:54.323491017Z [err]  2025-12-17 06:20:52,917 - redis_service - INFO - üì• Retrieved call data from Redis: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:54.323496216Z [err]  2025-12-17 06:20:52,917 - server - INFO - üìá [HANGUP] Data source: redis=Yes, memory=Yes
2025-12-17T06:20:54.323501766Z [err]  2025-12-17 06:20:52,917 - server - INFO - üìá [HANGUP] Missing data from cache, checking MongoDB call_logs...
2025-12-17T06:20:54.323507696Z [err]  2025-12-17 06:20:53,006 - server - INFO - üìá [HANGUP] Found call_log in MongoDB, extracting missing data...
2025-12-17T06:20:54.323513543Z [err]  2025-12-17 06:20:53,093 - server - INFO - üìá [HANGUP] After MongoDB fallback: user_id=dcafa642-6136-4096-b77d-a4cb99a62651, agent_id=bbeda238-e8d9-4d8c-b93b-1b7694581adb, to_number=+17708336397
2025-12-17T06:20:54.329133466Z [err]  2025-12-17 06:20:53,094 - server - INFO - üìá [HANGUP] Final extracted data: user_id=dcafa642-6136-4096-b77d-a4cb99a62651, agent_id=bbeda238-e8d9-4d8c-b93b-1b7694581adb, to_number=+17708336397, lead_id=None, agent_name=JK First Caller-optimizer3
2025-12-17T06:20:54.329139849Z [err]  2025-12-17 06:20:53,094 - server - INFO - üìá [HANGUP] Agent info keys: None
2025-12-17T06:20:54.329146344Z [err]  2025-12-17 06:20:53,095 - server - INFO - üöÄ Triggered QC analysis for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:54.329153083Z [err]  2025-12-17 06:20:53,095 - server - INFO - üìä Triggered Campaign QC for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:54.329159531Z [err]  2025-12-17 06:20:53,095 - server - INFO - üìá Triggered CRM update for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:54.329165985Z [err]  2025-12-17 06:20:53,095 - persistent_tts_service - INFO - üîå [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Closing persistent TTS WebSocket...
2025-12-17T06:20:54.329177248Z [err]  2025-12-17 06:20:53,095 - server - INFO - üîç Starting QC analysis for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:54.329186349Z [err]  2025-12-17 06:20:53,095 - server - INFO - üîç [AUTO-QC] Starting campaign QC check for call=v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ, user=dcafa642-6136-4096-b77d-a4cb99a62651, agent=bbeda238-e8d9-4d8c-b93b-1b7694581adb
2025-12-17T06:20:54.329192107Z [err]  2025-12-17 06:20:53,098 - server - INFO - üìá CRM update starting for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ: to_number=+17708336397, user_id=dcafa642-6136-4096-b77d-a4cb99a62651
2025-12-17T06:20:54.329197818Z [err]  2025-12-17 06:20:53,098 - server - INFO - üìá Normalized phone: +17708336397
2025-12-17T06:20:54.329209596Z [err]  2025-12-17 06:20:53,098 - server - INFO - üìá CRM: Got 12 variables from active session
2025-12-17T06:20:54.333981881Z [err]  2025-12-17 06:20:53,099 - persistent_tts_service - INFO - üõë [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Playback consumer shutting down
2025-12-17T06:20:54.333999254Z [err]  2025-12-17 06:20:53,184 - server - INFO - üìù Converted transcript from 17 messages to 1230 characters
2025-12-17T06:20:54.334008094Z [err]  2025-12-17 06:20:53,271 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2025-12-17T06:20:54.334015355Z [err]  2025-12-17 06:20:53,360 - qc_agents.orchestrator - INFO - No QC agent configs found, using defaults with API key
2025-12-17T06:20:54.334021392Z [err]  2025-12-17 06:20:53,448 - qc_agents.orchestrator - INFO - Using QC model: gpt-4o
2025-12-17T06:20:54.334029750Z [err]  2025-12-17 06:20:53,448 - qc_agents.orchestrator - INFO - ‚úÖ Initialized 3 QC agents for user dcafa642-6136-4096-b77d-a4cb99a62651
2025-12-17T06:20:54.334036760Z [err]  2025-12-17 06:20:53,448 - qc_agents.orchestrator - INFO - üîç Running Commitment Detector on call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:54.334043589Z [err]  2025-12-17 06:20:53,668 - server - INFO - üìá CRM: Got 12 extracted variables
2025-12-17T06:20:54.334049962Z [err]  2025-12-17 06:20:53,668 - server - INFO - üìá CRM: Total variables collected: ['now', 'customer_name', 'callerName', 'lead_id', 'qc_tracking_enabled', 'track_keywords', 'expected_commitment', 'to_number', 'phone_number', 'email', 'has_discussed_income_potential', 'asked_upset']
2025-12-17T06:20:54.334067805Z [err]  2025-12-17 06:20:53,805 - server - INFO - üîç [AUTO-QC] Call log found: transcript_turns=17, logs_count=14, status=completed
2025-12-17T06:20:54.334074373Z [err]  2025-12-17 06:20:53,847 - server - INFO - üìá CRM: Updated lead 288a0e8e-ff8b-4249-b2ea-b84e5cb9929e (+17708336397) - fields: ['updated_at', 'last_contact', 'last_agent_id', 'last_agent_name', 'custom_fields']
2025-12-17T06:20:54.334086697Z [err]  2025-12-17 06:20:54,196 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2025-12-17T06:20:54.337999941Z [err]  2025-12-17 06:20:54,196 - server - INFO - üì® Full payload: {'data': {'event_type': 'call.recording.saved', 'id': 'cc7fddb1-23f5-4dc8-8bed-07e7ae9c6549', 'occurred_at': '2025-12-17T06:20:53.747414Z', 'payload': {'call_control_id': 'v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ', 'call_leg_id': '40dc04a6-db10-11f0-8548-02420aef981f', 'call_session_id': '40d90d0a-db10-11f0-9ba9-02420aef981f', 'channels': 'dual', 'client_state': None, 'connection_id': '2777245537294877821', 'end_time': '2025-12-17T06:20:51.291659Z', 'format': 'mp3', 'public_recording_urls': {}, 'recording_ended_at': '2025-12-17T06:20:51.291659Z', 'recording_id': 'a647afdd-82d9-4c76-83ce-cdf3bab22568', 'recording_started_at': '2025-12-17T06:18:57.261623Z', 'recording_urls': {'mp3': 'https://s3.amazonaws.com/telephony-recorder-prod/227803fb-1717-407d-9bd5-fd04aa27c656/2025-12-17/40dc04a6-db10-11f0-8548-02420aef981f-1765952336343842.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIASDC5E2MJDPKMH7UW%2F20251217%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20251217T062053Z&X-Amz-Expires=600&X-Amz-SignedHeaders=host&X-Amz-Signature=3c04881d869569a5df5b339fb55e24f45b11cdf5b1c676c4c96456cac548dfea'}, 'start_time': '2025-12-17T06:18:57.261623Z'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2025-12-17T06:20:54.338013659Z [err]  2025-12-17 06:20:54,196 - server - INFO - üéØ Event type: call.recording.saved, Call ID: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:54.338026401Z [err]  2025-12-17 06:20:54,196 - server - INFO - üì® ================================================
2025-12-17T06:20:54.338034060Z [err]  2025-12-17 06:20:54,196 - server - INFO - üéôÔ∏è Recording saved for call: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:54.338040793Z [err]  2025-12-17 06:20:54,197 - redis_service - INFO - üì• Retrieved call data from Redis: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:54.342035838Z [err]  2025-12-17 06:20:54,197 - server - INFO - üîç Recording check: download_url=True, channels=dual, recording_id=a647afdd-82d9-4c76-83ce-cdf3bab22568, call_data=True
2025-12-17T06:20:54.342046977Z [err]  2025-12-17 06:20:54,208 - elevenlabs_ws_service - INFO - üîå Closed ElevenLabs WebSocket connection
2025-12-17T06:20:54.342053425Z [err]  2025-12-17 06:20:54,209 - persistent_tts_service - INFO - ‚úÖ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Persistent TTS WebSocket closed
2025-12-17T06:20:54.342059852Z [err]  2025-12-17 06:20:54,209 - persistent_tts_service - INFO - ‚úÖ Closed persistent TTS session for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:54.342067411Z [err]  2025-12-17 06:20:54,209 - server - INFO - ‚úÖ Closed persistent TTS session for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:54.342073595Z [err]  2025-12-17 06:20:54,210 - redis_service - INFO - üßπ Deleted call data from Redis: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:54.342079477Z [err]  2025-12-17 06:20:54,210 - server - INFO - üßπ Cleaned up call session from Redis and memory: v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:20:54.342085097Z [inf]  100.64.0.6:48692 - "POST /api/telnyx/webhook HTTP/1.1" 200
2025-12-17T06:20:54.342095904Z [err]  2025-12-17 06:20:54,211 - elevenlabs_ws_service - WARNING - ‚ö†Ô∏è  ElevenLabs WebSocket connection closed unexpectedly: sent 1000 (OK); then received 1000 (OK)
2025-12-17T06:20:54.342102546Z [err]  2025-12-17 06:20:54,211 - persistent_tts_service - INFO - ‚úÖ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Finished streaming sentence #25: 1 chunks received
2025-12-17T06:20:54.342108870Z [err]  2025-12-17 06:20:54,211 - persistent_tts_service - WARNING - ‚ö†Ô∏è [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] TTS WebSocket disconnected, attempting reconnection...
2025-12-17T06:20:54.345198183Z [err]  2025-12-17 06:20:54,211 - persistent_tts_service - INFO - üîÑ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Attempting TTS WebSocket reconnection...
2025-12-17T06:20:54.345205042Z [err]  2025-12-17 06:20:54,211 - elevenlabs_ws_service - INFO - üîå Connecting to ElevenLabs WebSocket: voice=J5iaaqzR5zn6HFG4jV3b, model=eleven_turbo_v2_5
2025-12-17T06:20:54.345212995Z [err]  2025-12-17 06:20:54,211 - elevenlabs_ws_service - INFO - üéôÔ∏è Voice settings: stability=0.4, similarity=0.75, style=0.2
2025-12-17T06:20:54.345221251Z [err]  2025-12-17 06:20:54,236 - server - INFO - üîç [AUTO-QC] Agent found: name=JK First Caller-optimizer3, has_auto_qc_settings=True
2025-12-17T06:20:54.345228831Z [err]  2025-12-17 06:20:54,288 - server - INFO - üíæ Saved recording URL and ID to database: a647afdd-82d9-4c76-83ce-cdf3bab22568
2025-12-17T06:20:54.345236223Z [err]  2025-12-17 06:20:54,288 - server - INFO - ‚úÖ Entering dual-channel processing
2025-12-17T06:20:54.345243269Z [err]  2025-12-17 06:20:54,288 - server - INFO - üì• Downloading DUAL-CHANNEL recording...
2025-12-17T06:20:54.345258798Z [err]  2025-12-17 06:20:54,323 - server - INFO - üìä [AUTO-QC] Running full QC analysis: call=v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ ‚Üí campaign=b7bd9ce7-2722-4c61-a2fc-ca1fb127d7b8 (tech=True, script=True, tonality=True)
2025-12-17T06:20:54.345270742Z [err]  2025-12-17 06:20:54,323 - server - INFO - üìä [AUTO-QC] LLM settings: provider=grok, model=grok-3
2025-12-17T06:20:54.345277863Z [err]  2025-12-17 06:20:54,323 - server - ERROR - ‚ùå [AUTO-QC] Error in campaign QC for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ: run_full_qc_analysis() got an unexpected keyword argument 'llm_provider'
2025-12-17T06:20:54.345283709Z [err]  2025-12-17 06:20:54,324 - server - ERROR - ‚ùå [AUTO-QC] Traceback: Traceback (most recent call last):
2025-12-17T06:20:54.345291355Z [err]    File "/app/backend/server.py", line 9504, in trigger_campaign_qc_for_call
2025-12-17T06:20:54.348403232Z [err]      await run_full_qc_analysis(
2025-12-17T06:20:54.348410382Z [err]            ^^^^^^^^^^^^^^^^^^^^^
2025-12-17T06:20:54.348416324Z [err]  TypeError: run_full_qc_analysis() got an unexpected keyword argument 'llm_provider'
2025-12-17T06:20:54.348422454Z [err]  
2025-12-17T06:20:54.363601478Z [err]  2025-12-17 06:20:54,360 - elevenlabs_ws_service - INFO - ‚úÖ Connected to ElevenLabs WebSocket
2025-12-17T06:20:54.363611580Z [err]  2025-12-17 06:20:54,360 - elevenlabs_ws_service - INFO - üì§ Sent BOS message with voice settings
2025-12-17T06:20:54.363617828Z [err]  2025-12-17 06:20:54,360 - persistent_tts_service - INFO - ‚úÖ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] TTS WebSocket reconnected
2025-12-17T06:20:54.366601076Z [err]  2025-12-17 06:20:54,360 - persistent_tts_service - INFO - ‚úÖ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] TTS WebSocket reconnected successfully
2025-12-17T06:20:54.366609410Z [err]  2025-12-17 06:20:54,360 - persistent_tts_service - INFO - üé§ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Streaming sentence #26: you're working for someone right now....
2025-12-17T06:20:54.366617083Z [err]  2025-12-17 06:20:54,361 - persistent_tts_service - INFO - üíì [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Starting TTS keep-alive loop (every 15s)
2025-12-17T06:20:55.299672910Z [err]  2025-12-17 06:20:55,253 - server - INFO - ‚úÖ Split into 2 channels
2025-12-17T06:20:55.299806468Z [err]  2025-12-17 06:20:54,593 - httpx - INFO - HTTP Request: GET https://s3.amazonaws.com/telephony-recorder-prod/227803fb-1717-407d-9bd5-fd04aa27c656/2025-12-17/40dc04a6-db10-11f0-8548-02420aef981f-1765952336343842.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIASDC5E2MJDPKMH7UW%2F20251217%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20251217T062053Z&X-Amz-Expires=600&X-Amz-SignedHeaders=host&X-Amz-Signature=3c04881d869569a5df5b339fb55e24f45b11cdf5b1c676c4c96456cac548dfea "HTTP/1.1 200 OK"
2025-12-17T06:20:55.299815485Z [err]  2025-12-17 06:20:54,623 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_START: Sent to ElevenLabs at T+0ms
2025-12-17T06:20:55.299827122Z [err]  2025-12-17 06:20:54,623 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_TTFB: First audio chunk at T+263ms
2025-12-17T06:20:55.299833450Z [err]  2025-12-17 06:20:54,934 - server - INFO - ‚úÖ Downloaded 456245 bytes
2025-12-17T06:20:55.300096669Z [err]  2025-12-17 06:20:55,254 - server - INFO - ‚ùå Channel 0: No speech
2025-12-17T06:20:55.300097812Z [inf]  100.64.0.9:39648 - "POST /api/telnyx/webhook HTTP/1.1" 200
2025-12-17T06:20:55.300111978Z [err]  2025-12-17 06:20:55,253 - server - INFO - üé§ Using STT provider: soniox for interruption detection
2025-12-17T06:20:55.300113155Z [err]  2025-12-17 06:20:55,255 - server - INFO - ‚ùå Channel 1: No speech
2025-12-17T06:20:55.300120835Z [err]  2025-12-17 06:20:55,254 - server - INFO - üìä Channel 0: 2510684 bytes
2025-12-17T06:20:55.300122871Z [err]  2025-12-17 06:20:55,255 - server - WARNING - ‚ö†Ô∏è No speech in any channel
2025-12-17T06:20:55.300133301Z [err]  2025-12-17 06:20:55,255 - server - INFO - üìä Channel 1: 2510684 bytes
2025-12-17T06:20:55.300146634Z [err]  2025-12-17 06:20:55,255 - server - ERROR - ‚ùå No Soniox API key available
2025-12-17T06:20:55.300155463Z [err]  2025-12-17 06:20:55,254 - server - ERROR - ‚ùå No Soniox API key available
2025-12-17T06:20:57.090181978Z [err]  2025-12-17 06:20:56,626 - elevenlabs_ws_service - INFO - ‚è±Ô∏è  [TIMING] ElevenLabs audio stream complete (0.5s timeout reached) - End of Sentence
2025-12-17T06:20:57.090190813Z [err]  2025-12-17 06:20:56,626 - persistent_tts_service - INFO - ‚úÖ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Finished streaming sentence #26: 1 chunks received
2025-12-17T06:20:57.090199170Z [err]  2025-12-17 06:20:56,626 - persistent_tts_service - INFO - üé§ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Streaming sentence #27: And what's that job producing for you yearly,...
2025-12-17T06:20:57.090207960Z [err]  2025-12-17 06:20:56,952 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_START: Sent to ElevenLabs at T+0ms
2025-12-17T06:20:57.090215489Z [err]  2025-12-17 06:20:56,952 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_TTFB: First audio chunk at T+326ms
2025-12-17T06:20:59.645195621Z [err]  2025-12-17 06:20:58,953 - persistent_tts_service - INFO - ‚úÖ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Finished streaming sentence #27: 1 chunks received
2025-12-17T06:20:59.645204102Z [err]  2025-12-17 06:20:58,953 - persistent_tts_service - INFO - üé§ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Streaming sentence #28: approximately?...
2025-12-17T06:20:59.645233232Z [err]  2025-12-17 06:20:59,253 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_START: Sent to ElevenLabs at T+0ms
2025-12-17T06:20:59.645241535Z [err]  2025-12-17 06:20:59,253 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTS_TTFB: First audio chunk at T+300ms
2025-12-17T06:20:59.645505823Z [err]  2025-12-17 06:20:58,953 - elevenlabs_ws_service - INFO - ‚è±Ô∏è  [TIMING] ElevenLabs audio stream complete (0.5s timeout reached) - End of Sentence
2025-12-17T06:21:00.879402851Z [err]  2025-12-17 06:21:00,340 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=False, user_speaking=False, silence=0.0s, checkin_count=0/2
2025-12-17T06:21:00.879409645Z [err]  2025-12-17 06:21:00,841 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=False, user_speaking=False, silence=0.0s, checkin_count=0/2
2025-12-17T06:21:01.846779320Z [err]  2025-12-17 06:21:01,254 - elevenlabs_ws_service - INFO - ‚è±Ô∏è  [TIMING] ElevenLabs audio stream complete (0.5s timeout reached) - End of Sentence
2025-12-17T06:21:01.846785012Z [err]  2025-12-17 06:21:01,254 - persistent_tts_service - INFO - ‚úÖ [Call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ] Finished streaming sentence #28: 1 chunks received
2025-12-17T06:21:01.846792041Z [err]  2025-12-17 06:21:01,254 - server - INFO - ‚úÖ All 4 persistent TTS streams completed
2025-12-17T06:21:01.846798230Z [err]  2025-12-17 06:21:01,254 - server - INFO - ‚úÖ Agent generation complete (persistent TTS) - response window closed
2025-12-17T06:21:01.846804958Z [err]  2025-12-17 06:21:01,254 - server - INFO - ‚è±Ô∏è  FIRST AUDIO STARTED: 11452ms from user stop üöÄ
2025-12-17T06:21:01.846813908Z [err]  2025-12-17 06:21:01,254 - calling_service - INFO - ü§ñ Agent started speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:21:01.846820378Z [err]  2025-12-17 06:21:01,254 - server - INFO - ‚úÖ Agent generation complete - response window closed
2025-12-17T06:21:01.846826388Z [err]  2025-12-17 06:21:01,255 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2025-12-17T06:21:01.846834099Z [err]  2025-12-17 06:21:01,255 - server - INFO - ‚è±Ô∏è  [TIMING] ==== E2E LATENCY SUMMARY ====
2025-12-17T06:21:01.846840537Z [err]  2025-12-17 06:21:01,255 - server - INFO - ‚è±Ô∏è  [TIMING] STT: 8ms (provider: soniox, model: stt-rt-v3)
2025-12-17T06:21:01.846847823Z [err]  2025-12-17 06:21:01,255 - server - INFO - ‚è±Ô∏è  [TIMING] LLM_TOTAL: 2716ms (provider: grok, model: grok-4-fast-non-reasoning)
2025-12-17T06:21:01.846853777Z [err]  2025-12-17 06:21:01,255 - server - INFO - ‚è±Ô∏è  [TIMING] TTS_TOTAL: 8928ms (provider: elevenlabs, websocket: False)
2025-12-17T06:21:01.846860068Z [err]  2025-12-17 06:21:01,255 - server - INFO - ‚è±Ô∏è  [TIMING] E2E_TOTAL: 11452ms (user stopped ‚Üí play_audio_url called)
2025-12-17T06:21:01.847681882Z [err]  2025-12-17 06:21:01,255 - server - INFO - ‚è±Ô∏è  [TIMING] ‚ö†Ô∏è NOTE: E2E_TOTAL does not include:
2025-12-17T06:21:01.847691172Z [err]  2025-12-17 06:21:01,255 - server - INFO - ‚è±Ô∏è  [TIMING]   - Telnyx processing time (~50-200ms)
2025-12-17T06:21:01.847700023Z [err]  2025-12-17 06:21:01,255 - server - INFO - ‚è±Ô∏è  [TIMING]   - Network latency to user's phone (~50-150ms)
2025-12-17T06:21:01.847705927Z [err]  2025-12-17 06:21:01,255 - server - INFO - ‚è±Ô∏è  [TIMING]   - Phone audio buffering (~50-200ms)
2025-12-17T06:21:01.847713508Z [err]  2025-12-17 06:21:01,255 - server - INFO - ‚è±Ô∏è  [TIMING]   - TOTAL MISSING: ~150-550ms typically
2025-12-17T06:21:01.847720152Z [err]  2025-12-17 06:21:01,255 - server - INFO - ‚è±Ô∏è  [TIMING]   - REAL USER LATENCY: 11752ms estimated
2025-12-17T06:21:01.847726057Z [err]  2025-12-17 06:21:01,255 - server - INFO - ‚è±Ô∏è  [TIMING] RESPONSE_TEXT: 110 chars, 4 sentences
2025-12-17T06:21:01.847740376Z [err]  2025-12-17 06:21:01,255 - server - INFO - ‚è±Ô∏è  [TIMING] USER_INPUT: 'Say that aga in.Ban ana.That's your phon e....'
2025-12-17T06:21:01.847747177Z [err]  2025-12-17 06:21:01,255 - server - INFO - ‚è±Ô∏è  [TIMING] AI_RESPONSE: '[N] Got it, you're working for someone right now. And what's...'
2025-12-17T06:21:01.847753669Z [err]  2025-12-17 06:21:01,255 - server - INFO - ‚è±Ô∏è  [TIMING] ==========================
2025-12-17T06:21:01.847758999Z [err]  2025-12-17 06:21:01,255 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2025-12-17T06:21:01.847771697Z [err]  2025-12-17 06:21:01,346 - dead_air_monitor - INFO - üö© Detected 'agent_done_speaking' flag from webhook - marking agent as done
2025-12-17T06:21:01.847778085Z [err]  2025-12-17 06:21:01,346 - calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1765952461.3468058 for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:21:01.853328020Z [err]  2025-12-17 06:21:01,346 - calling_service - INFO - ü§ñ Agent stopped speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:21:01.853334683Z [err]  2025-12-17 06:21:01,438 - server - INFO - üìù Saved assistant transcript and latency to database (Node: N201A_Employed_AskYearlyIncome_V8_Adaptive, Dead Air: 3224ms)
2025-12-17T06:21:01.853341529Z [err]  2025-12-17 06:21:01,438 - server - INFO - üîä Agent finished generating, 0 playbacks active - waiting for webhooks to close window and start silence tracking
2025-12-17T06:21:04.741847474Z [err]  2025-12-17 06:21:04,056 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-17T06:21:04.741854084Z [err]  2025-12-17 06:21:04,060 - qc_agents.commitment_detector - ERROR - Error in CommitmentDetector LLM analysis: Expecting value: line 1 column 1 (char 0), falling back to patterns
2025-12-17T06:21:04.741860275Z [err]  2025-12-17 06:21:04,063 - qc_agents.orchestrator - INFO - üó∫Ô∏è  Running Conversion Pathfinder on call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:21:08.820340412Z [err]  2025-12-17 06:21:08,028 - qc_agents.orchestrator - INFO - ‚≠ê Running Excellence Replicator on call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:21:08.820347797Z [err]  2025-12-17 06:21:08,378 - calling_service - INFO - ‚è∞ Check-in triggered after 7.0s silence (threshold: 7s)
2025-12-17T06:21:08.820686273Z [err]  2025-12-17 06:21:08,022 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-17T06:21:08.820698577Z [err]  2025-12-17 06:21:08,027 - qc_agents.conversion_pathfinder - ERROR - Error in ConversionPathfinder LLM analysis: Expecting value: line 1 column 1 (char 0), falling back to patterns
2025-12-17T06:21:08.825898415Z [err]  2025-12-17 06:21:08,379 - calling_service - INFO - üí¨ Sending check-in #1/2: Are you still there?
2025-12-17T06:21:08.825912567Z [err]  2025-12-17 06:21:08,379 - dead_air_monitor - INFO - üí¨ Sending check-in after 7.0s silence: Are you still there?
2025-12-17T06:21:08.825920672Z [err]  2025-12-17 06:21:08,379 - calling_service - INFO - ü§ñ Agent started speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:21:08.825930533Z [err]  2025-12-17 06:21:08,380 - telnyx_service - INFO - üîä Speaking text on call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ: Are you still there?...
2025-12-17T06:21:08.825939278Z [err]  2025-12-17 06:21:08,380 - telnyx_service - INFO - üîç Agent config provided: True
2025-12-17T06:21:08.825946267Z [err]  2025-12-17 06:21:08,380 - telnyx_service - INFO - üîç TTS provider from settings: elevenlabs
2025-12-17T06:21:08.825953893Z [err]  2025-12-17 06:21:08,380 - telnyx_service - INFO - üîç WebSocket TTS: False
2025-12-17T06:21:08.825961542Z [err]  2025-12-17 06:21:08,380 - telnyx_service - INFO - üéôÔ∏è Attempting elevenlabs TTS (REST)
2025-12-17T06:21:08.825968417Z [err]  2025-12-17 06:21:08,380 - server - INFO - ‚è±Ô∏è [06:21:08.380] üîä TTS REQUEST START: provider=elevenlabs, user=dcafa642, comfort_noise=True
2025-12-17T06:21:08.826602515Z [err]  2025-12-17 06:21:08,380 - server - INFO - ‚ö° Using Turbo v2.5 (high quality)
2025-12-17T06:21:08.826609714Z [err]  2025-12-17 06:21:08,380 - server - INFO - üéôÔ∏è ElevenLabs streaming TTS: voice=J5iaaqzR5zn6HFG4jV3b, model=eleven_turbo_v2_5, speed=1.1, normalization=on, ssml=True
2025-12-17T06:21:08.826616456Z [err]  2025-12-17 06:21:08,464 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2025-12-17T06:21:08.826623209Z [err]  2025-12-17 06:21:08,464 - server - INFO - üì¶ ElevenLabs Request Payload:
2025-12-17T06:21:08.826629851Z [err]  2025-12-17 06:21:08,464 - server - INFO -    Text length: 20 chars
2025-12-17T06:21:08.826640679Z [err]  2025-12-17 06:21:08,464 - server - INFO -    Text content: 'Are you still there?'
2025-12-17T06:21:08.826648202Z [err]  2025-12-17 06:21:08,464 - server - INFO -    Text bytes: b'Are you still there?'
2025-12-17T06:21:08.826659292Z [err]  2025-12-17 06:21:08,464 - server - INFO -    Model: eleven_turbo_v2_5
2025-12-17T06:21:08.826665830Z [err]  2025-12-17 06:21:08,464 - server - INFO -    Voice ID: J5iaaqzR5zn6HFG4jV3b
2025-12-17T06:21:08.826672882Z [err]  2025-12-17 06:21:08,464 - server - INFO -    URL: https://api.elevenlabs.io/v1/text-to-speech/J5iaaqzR5zn6HFG4jV3b/stream
2025-12-17T06:21:08.826679881Z [err]  2025-12-17 06:21:08,464 - server - INFO -    Full data: {'text': 'Are you still there?', 'model_id': 'eleven_turbo_v2_5', 'voice_settings': {'stability': 0.6, 'similarity_boost': 0.65, 'use_speaker_boost': True, 'speed': 1.1, 'style': 0.2}, 'apply_text_normalization': 'on', 'enable_ssml_parsing': True, 'optimize_streaming_latency': 4}
2025-12-17T06:21:08.826707522Z [err]  2025-12-17 06:21:08,464 - server - INFO - üîå Attempting ElevenLabs connection (attempt 1/2)
2025-12-17T06:21:08.826729836Z [err]  2025-12-17 06:21:08,464 - server - INFO -    Timeout: 10.0s
2025-12-17T06:21:08.826741086Z [err]  2025-12-17 06:21:08,473 - server - INFO -    ‚úì HTTP client created (0.009s)
2025-12-17T06:21:08.829206456Z [err]  2025-12-17 06:21:08,473 - server - INFO -    ‚Üí Sending POST request to ElevenLabs (optimize_latency=0)...
2025-12-17T06:21:08.832679195Z [err]  2025-12-17 06:21:08,826 - httpx - INFO - HTTP Request: POST https://api.elevenlabs.io/v1/text-to-speech/J5iaaqzR5zn6HFG4jV3b/stream "HTTP/1.1 200 OK"
2025-12-17T06:21:08.832688583Z [err]  2025-12-17 06:21:08,827 - server - INFO -    ‚úì Connection established (0.363s) [TARGET: <200ms]
2025-12-17T06:21:08.832695500Z [err]  2025-12-17 06:21:08,827 - server - INFO -    ‚úì Response status: 200
2025-12-17T06:21:08.832702253Z [err]  2025-12-17 06:21:08,827 - server - INFO -    ‚Üí Streaming audio chunks...
2025-12-17T06:21:08.850074773Z [err]  2025-12-17 06:21:08,845 - server - INFO -    ‚úì FIRST CHUNK received (0.381s, 1009 bytes) [TARGET: <300ms]
2025-12-17T06:21:08.853362817Z [err]  2025-12-17 06:21:08,847 - server - INFO -    ‚úì ALL CHUNKS received: 22 chunks (0.383s)
2025-12-17T06:21:08.853374416Z [err]  2025-12-17 06:21:08,847 - server - INFO -    ‚úì Total audio size: 17599 bytes
2025-12-17T06:21:08.853384370Z [err]  2025-12-17 06:21:08,847 - server - INFO -    üìä TTS API TIMING BREAKDOWN:
2025-12-17T06:21:08.853391727Z [err]  2025-12-17 06:21:08,847 - server - INFO -       - Connection: 363ms
2025-12-17T06:21:08.853398757Z [err]  2025-12-17 06:21:08,847 - server - INFO -       - First chunk: 381ms
2025-12-17T06:21:08.853407579Z [err]  2025-12-17 06:21:08,847 - server - INFO -       - All chunks: 383ms
2025-12-17T06:21:08.853414671Z [err]  2025-12-17 06:21:08,847 - server - INFO -       - Audio generation only: 18ms
2025-12-17T06:21:08.853421716Z [err]  2025-12-17 06:21:08,848 - server - INFO - ‚è±Ô∏è [06:21:08.847] üîä TTS COMPLETE: 467ms, audio_size=17599 bytes
2025-12-17T06:21:08.853428543Z [err]  2025-12-17 06:21:08,848 - server - INFO - üíæ TTS CACHED: elevenlabs:Are you still there?... (17599 bytes)
2025-12-17T06:21:08.853438744Z [err]  2025-12-17 06:21:08,848 - telnyx_service - INFO - ‚è±Ô∏è  TTS generation time: 0.47s
2025-12-17T06:21:08.853448443Z [err]  2025-12-17 06:21:08,848 - telnyx_service - INFO - ‚úÖ Generated 17599 bytes, saved to /tmp/tts_59aded63200fa5fb87dd5793c8f91482.mp3
2025-12-17T06:21:08.853456420Z [err]  2025-12-17 06:21:08,848 - telnyx_service - INFO - üîó Using audio URL: api.li-ai.org/api/tts-audio/tts_59aded63200fa5fb87dd5793c8f91482.mp3
2025-12-17T06:21:09.911762513Z [err]  2025-12-17 06:21:09,148 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ/actions/playback_start "HTTP/1.1 422 Unprocessable Entity"
2025-12-17T06:21:09.911857126Z [err]  2025-12-17 06:21:09,149 - telnyx_service - INFO - ‚è±Ô∏è  Playback API call time: 0.30s
2025-12-17T06:21:09.911867531Z [err]  2025-12-17 06:21:09,150 - telnyx_service - ERROR - ‚ùå Telnyx playback failed: 422 - {
2025-12-17T06:21:09.911883971Z [err]    "errors": [
2025-12-17T06:21:09.911890564Z [err]      {
2025-12-17T06:21:09.911903422Z [err]        "code": "90018",
2025-12-17T06:21:09.911912480Z [err]        "title": "Call has already ended",
2025-12-17T06:21:09.911919245Z [err]        "detail": "This call is no longer active and can't receive commands."
2025-12-17T06:21:09.911927466Z [err]      }
2025-12-17T06:21:09.911934499Z [err]    ]
2025-12-17T06:21:09.911940937Z [err]  }
2025-12-17T06:21:09.911947724Z [err]  2025-12-17 06:21:09,150 - telnyx_service - INFO - üì¢ Using Telnyx built-in TTS
2025-12-17T06:21:09.911953589Z [err]  2025-12-17 06:21:09,431 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ/actions/speak "HTTP/1.1 422 Unprocessable Entity"
2025-12-17T06:21:09.911959855Z [err]  2025-12-17 06:21:09,432 - telnyx_service - ERROR - ‚ùå Error speaking text: Error code: 422 - {'errors': [{'code': '90018', 'title': 'Call has already ended', 'detail': "This call is no longer active and can't receive commands."}]}
2025-12-17T06:21:09.911972722Z [err]  2025-12-17 06:21:09,432 - dead_air_monitor - INFO - ‚úÖ Check-in message sent
2025-12-17T06:21:10.774257904Z [err]  2025-12-17 06:21:09,933 - calling_service - INFO - ü§ñ Agent stopped speaking for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:21:10.774267636Z [err]  2025-12-17 06:21:10,435 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=False, user_speaking=False, silence=0.5s, checkin_count=1/2
2025-12-17T06:21:10.774270534Z [err]  2025-12-17 06:21:09,933 - dead_air_monitor - INFO - ‚è±Ô∏è Playback expected end time passed (16.3s ago), marking agent as done speaking
2025-12-17T06:21:10.774284510Z [err]  2025-12-17 06:21:09,933 - calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1765952469.9334958 for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:21:11.693691796Z [err]  2025-12-17 06:21:10,937 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=False, user_speaking=False, silence=1.0s, checkin_count=1/2
2025-12-17T06:21:11.698138231Z [err]  2025-12-17 06:21:11,456 - server - INFO - üé§ Soniox receiver alive - 16 messages received in last 10s
2025-12-17T06:21:11.698164872Z [err]  2025-12-17 06:21:11,456 - server - ERROR - ‚ùå Soniox error: {'tokens': [], 'final_audio_proc_ms': 113760, 'total_audio_proc_ms': 114720, 'error_code': 408, 'error_message': 'Request timeout.'}
2025-12-17T06:21:11.698173060Z [err]  2025-12-17 06:21:11,456 - server - INFO - ‚úÖ Soniox receive loop ended normally
2025-12-17T06:21:11.698180135Z [err]  2025-12-17 06:21:11,456 - dead_air_monitor - INFO - üîá Dead air monitoring cancelled for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:21:11.698188085Z [err]  2025-12-17 06:21:11,456 - dead_air_monitor - INFO - üîá Dead air monitoring stopped for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:21:11.698195868Z [err]  2025-12-17 06:21:11,456 - server - INFO - üîá Dead air monitoring task cancelled
2025-12-17T06:21:12.773380430Z [err]  2025-12-17 06:21:12,690 - qc_agents.orchestrator - INFO - ‚úÖ QC analysis stored for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:21:12.773385459Z [err]  2025-12-17 06:21:12,598 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-17T06:21:12.773390413Z [err]  2025-12-17 06:21:12,600 - qc_agents.excellence_replicator - ERROR - Error in ExcellenceReplicator analysis: Expecting value: line 1 column 1 (char 0)
2025-12-17T06:21:12.773393500Z [err]  2025-12-17 06:21:12,691 - server - INFO - ‚úÖ QC analysis completed for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:21:12.773399985Z [err]  2025-12-17 06:21:12,691 - server - INFO - üìä Scores: Commitment=50, Conversion=60, Excellence=50
2025-12-17T06:21:12.869879317Z [err]  2025-12-17 06:21:12,861 - server - INFO - üìä Updated campaign_calls with QC scores for v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ
2025-12-17T06:21:13.984028411Z [err]  2025-12-17 06:21:13,032 - server - INFO - üìà Synced QC scores to lead 288a0e8e-ff8b-4249-b2ea-b84e5cb9929e via phone match
2025-12-17T06:21:13.984048565Z [err]  2025-12-17 06:21:13,117 - server - INFO - üè∑Ô∏è Updated lead status to 'needs_followup' based on risk level 'high'
2025-12-17T06:21:13.984056984Z [err]  2025-12-17 06:21:13,118 - server - ERROR - ‚ùå Error in auto appointment detection for call v3:sz6RRi_Qx4zS1QlC4RyZIJ_Ldtrl628_mNqz32K-cNrEVXHkUS1XkQ: 'str' object has no attribute 'get'
2025-12-17T06:21:13.984064119Z [err]  2025-12-17 06:21:13,458 - soniox_service - ERROR - ‚ùå Error closing Soniox session: received 1000 (OK); then sent 1000 (OK)
2025-12-17T06:21:13.984072190Z [err]  2025-12-17 06:21:13,459 - server - INFO - üîå Telnyx WebSocket disconnected