2026-01-10T18:16:14.748342116Z [err]  2026-01-10 18:16:13,418 - server - INFO -    Model: eleven_turbo_v2_5
2026-01-10T18:16:14.748349544Z [err]  2026-01-10 18:16:13,418 - server - INFO -    Voice ID: J5iaaqzR5zn6HFG4jV3b
2026-01-10T18:16:14.748357018Z [err]  2026-01-10 18:16:13,418 - server - INFO -    URL: https://api.elevenlabs.io/v1/text-to-speech/J5iaaqzR5zn6HFG4jV3b/stream
2026-01-10T18:16:14.748364196Z [err]  2026-01-10 18:16:13,419 - server - INFO -    Full data: {'text': 'Kendrick?', 'model_id': 'eleven_turbo_v2_5', 'voice_settings': {'stability': 0.6, 'similarity_boost': 0.65, 'use_speaker_boost': True, 'speed': 1.1, 'style': 0.2}, 'apply_text_normalization': 'on', 'enable_ssml_parsing': True, 'optimize_streaming_latency': 4}
2026-01-10T18:16:14.748371983Z [err]  2026-01-10 18:16:13,419 - server - INFO - üîå Attempting ElevenLabs connection (attempt 1/2)
2026-01-10T18:16:14.748378473Z [err]  2026-01-10 18:16:13,419 - server - INFO -    Timeout: 10.0s
2026-01-10T18:16:14.748385984Z [err]  2026-01-10 18:16:13,432 - server - INFO -    ‚úì HTTP client created (0.013s)
2026-01-10T18:16:14.748393203Z [err]  2026-01-10 18:16:13,432 - server - INFO -    ‚Üí Sending POST request to ElevenLabs (optimize_latency=0)...
2026-01-10T18:16:14.748399035Z [err]  2026-01-10 18:16:13,464 - server - INFO - üî§ RAW TOKENS: ["H"?]
2026-01-10T18:16:14.748405752Z [err]  2026-01-10 18:16:13,468 - core_calling_service - INFO - üîä Silence timer reset for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ (user started speaking)
2026-01-10T18:16:14.748413049Z [err]  2026-01-10 18:16:13,469 - core_calling_service - INFO - üë§ User started speaking for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:14.748419573Z [err]  2026-01-10 18:16:13,469 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:XUPR9DsBoWRJYNEtE... (active sessions: [])
2026-01-10T18:16:15.632498683Z [err]  2026-01-10 18:16:13,469 - server - WARNING - ‚ö†Ô∏è [REAL TIMING] No TTS session found to clear for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:15.632505938Z [err]  2026-01-10 18:16:13,473 - redis_service - INFO - üì• Retrieved call data from Redis: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:15.632527878Z [err]  2026-01-10 18:16:13,839 - server - INFO -    ‚úì Total audio size: 13837 bytes
2026-01-10T18:16:15.632530887Z [err]  2026-01-10 18:16:13,481 - redis_service - INFO - üì¶ Stored call data in Redis: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ (TTL: 3600s)
2026-01-10T18:16:15.632531445Z [err]  2026-01-10 18:16:13,823 - httpx - INFO - HTTP Request: POST https://api.elevenlabs.io/v1/text-to-speech/J5iaaqzR5zn6HFG4jV3b/stream "HTTP/1.1 200 OK"
2026-01-10T18:16:15.632539278Z [err]  2026-01-10 18:16:13,839 - server - INFO -    üìä TTS API TIMING BREAKDOWN:
2026-01-10T18:16:15.632539315Z [err]  2026-01-10 18:16:13,823 - server - INFO -    ‚úì Connection established (0.405s) [TARGET: <200ms]
2026-01-10T18:16:15.632542010Z [err]  2026-01-10 18:16:13,481 - server - INFO - üîç PARTIAL TRANSCRIPT: 'H' | Generating: False
2026-01-10T18:16:15.632546347Z [err]  2026-01-10 18:16:13,823 - server - INFO -    ‚úì Response status: 200
2026-01-10T18:16:15.632554724Z [err]  2026-01-10 18:16:13,823 - server - INFO -    ‚Üí Streaming audio chunks...
2026-01-10T18:16:15.632561257Z [err]  2026-01-10 18:16:13,833 - server - INFO -    ‚úì FIRST CHUNK received (0.414s, 938 bytes) [TARGET: <300ms]
2026-01-10T18:16:15.632563187Z [err]  2026-01-10 18:16:13,724 - server - INFO - üî§ RAW TOKENS: ["H"?, "ello"?]
2026-01-10T18:16:15.632569448Z [err]  2026-01-10 18:16:13,839 - server - INFO -    ‚úì ALL CHUNKS received: 76 chunks (0.420s)
2026-01-10T18:16:15.632572280Z [err]  2026-01-10 18:16:13,724 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Hello' | Generating: False
2026-01-10T18:16:15.638989839Z [err]  2026-01-10 18:16:13,839 - server - INFO -       - Connection: 405ms
2026-01-10T18:16:15.638998196Z [err]  2026-01-10 18:16:13,839 - server - INFO -       - First chunk: 414ms
2026-01-10T18:16:15.639005333Z [err]  2026-01-10 18:16:13,839 - server - INFO -       - All chunks: 420ms
2026-01-10T18:16:15.639012206Z [err]  2026-01-10 18:16:13,839 - server - INFO -       - Audio generation only: 9ms
2026-01-10T18:16:15.639019357Z [err]  2026-01-10 18:16:13,839 - server - INFO - ‚è±Ô∏è [18:16:13.839] üîä TTS COMPLETE: 509ms, audio_size=13837 bytes
2026-01-10T18:16:15.639026181Z [err]  2026-01-10 18:16:13,839 - server - INFO - üíæ TTS CACHED: elevenlabs:Kendrick?... (13837 bytes)
2026-01-10T18:16:15.639033147Z [err]  2026-01-10 18:16:13,839 - telnyx_service - INFO - ‚è±Ô∏è  TTS generation time: 0.51s
2026-01-10T18:16:15.639043390Z [err]  2026-01-10 18:16:13,840 - telnyx_service - INFO - ‚úÖ Generated 13837 bytes, saved to /tmp/tts_elevenlabs_6262be59fadb4cac1e6b6f597b7b1429.mp3
2026-01-10T18:16:15.639050056Z [err]  2026-01-10 18:16:13,840 - telnyx_service - INFO - üîó Using audio URL: api.li-ai.org/api/tts-audio/tts_elevenlabs_6262be59fadb4cac1e6b6f597b7b1429.mp3
2026-01-10T18:16:15.639057693Z [err]  2026-01-10 18:16:13,853 - server - INFO - üî§ RAW TOKENS: ["H"‚úì, "ello"‚úì, "?"‚úì, "<end>"‚úì]
2026-01-10T18:16:15.639065677Z [err]  2026-01-10 18:16:13,853 - server - INFO - üéØ Endpoint detected: <end> token received
2026-01-10T18:16:15.639072306Z [err]  2026-01-10 18:16:13,853 - server - INFO - üßπ Cleaned transcript: 'H ello ?' -> 'Hello?'
2026-01-10T18:16:15.639078436Z [err]  2026-01-10 18:16:13,853 - server - INFO - üì• FINAL TOKENS: 'Hello?' (3 tokens)
2026-01-10T18:16:15.639083833Z [err]  2026-01-10 18:16:13,853 - server - INFO - üé§ Soniox final transcript: 'Hello?'
2026-01-10T18:16:15.639090038Z [err]  2026-01-10 18:16:13,854 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:XUPR9DsBoWRJYNEtE... (active sessions: [])
2026-01-10T18:16:15.639347324Z [err]  2026-01-10 18:16:13,856 - redis_service - INFO - üì¶ Stored call data in Redis: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ (TTL: 3600s)
2026-01-10T18:16:15.639360554Z [err]  2026-01-10 18:16:13,856 - server - INFO - üë§ User has spoken - aiSpeaksAfterSilence timer cancelled if pending
2026-01-10T18:16:15.639369217Z [err]  2026-01-10 18:16:13,856 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:XUPR9DsBoWRJYNEtE... (active sessions: [])
2026-01-10T18:16:15.639375386Z [err]  2026-01-10 18:16:13,859 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:XUPR9DsBoWRJYNEtE... (active sessions: [])
2026-01-10T18:16:15.639378482Z [err]  2026-01-10 18:16:13,856 - server - INFO - ‚úÖ Agent SILENT - User said 1 word(s): 'Hello?' - Processing...
2026-01-10T18:16:15.639385912Z [err]  2026-01-10 18:16:13,854 - server - INFO - üîç FILTER CHECK: words=1, is_filler=False, is_garbled=False, tts_speaking=False, time_until_done=0.0s, generating=False, playbacks=0, is_active=False
2026-01-10T18:16:15.639394829Z [err]  2026-01-10 18:16:13,854 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:XUPR9DsBoWRJYNEtE... (active sessions: [])
2026-01-10T18:16:15.639402883Z [err]  2026-01-10 18:16:13,854 - server - INFO - üöÄ Spawned tracked background task for endpoint processing
2026-01-10T18:16:15.639417574Z [err]  2026-01-10 18:16:13,855 - server - INFO - ‚è±Ô∏è [18:16:13.855] üìù FINAL TRANSCRIPT RECEIVED: 'Hello?'
2026-01-10T18:16:15.639424983Z [err]  2026-01-10 18:16:13,855 - server - INFO - ‚è±Ô∏è [18:16:13.855] STT endpoint detection latency: 0ms
2026-01-10T18:16:15.639432937Z [err]  2026-01-10 18:16:13,855 - server - INFO - ‚è±Ô∏è [18:16:13.855] üé§ USER STOPPED SPEAKING - Beginning processing pipeline
2026-01-10T18:16:15.639440111Z [err]  2026-01-10 18:16:13,855 - server - INFO - ‚è±Ô∏è User spoke at 1768068973.8556416
2026-01-10T18:16:15.642616894Z [err]  2026-01-10 18:16:13,867 - server - INFO - üìä [REAL TIMING] STT: User audio end ‚Üí Transcript received: 1ms
2026-01-10T18:16:15.642629353Z [err]  2026-01-10 18:16:13,867 - server - INFO - üé§ Endpoint detected by Soniox - processing transcript: Hello?
2026-01-10T18:16:15.642636706Z [err]  2026-01-10 18:16:13,867 - core_calling_service - INFO - üë§ User stopped speaking for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:15.642642622Z [err]  2026-01-10 18:16:13,867 - server - INFO - ‚è±Ô∏è [TIMING] STT_START: User last audio packet received
2026-01-10T18:16:15.642648403Z [err]  2026-01-10 18:16:13,867 - server - INFO - ‚è±Ô∏è [TIMING] STT_END: Endpoint detected at T+12ms
2026-01-10T18:16:15.642654598Z [err]  2026-01-10 18:16:13,868 - server - INFO - ‚è±Ô∏è [TIMING] STT_LATENCY: 12ms (Soniox model: stt-rt-v3)
2026-01-10T18:16:15.642659804Z [err]  2026-01-10 18:16:13,868 - server - INFO - ‚è±Ô∏è  USER STOPPED SPEAKING at T=0ms
2026-01-10T18:16:15.642665510Z [err]  2026-01-10 18:16:13,868 - server - INFO - üìä [REAL TIMING] Processing start: 12ms after user audio end
2026-01-10T18:16:15.642671420Z [err]  2026-01-10 18:16:13,868 - server - INFO - üéôÔ∏è Agent generating response - interruption detection active
2026-01-10T18:16:15.642678480Z [err]  2026-01-10 18:16:13,868 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:15.642684491Z [err]  2026-01-10 18:16:13,962 - server - INFO - üìù Saved user transcript to database
2026-01-10T18:16:15.642689913Z [err]  2026-01-10 18:16:13,962 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:XUPR9DsBoWRJYNEtE... (active sessions: [])
2026-01-10T18:16:15.642694745Z [err]  2026-01-10 18:16:13,962 - core_calling_service - INFO - ‚è±Ô∏è [18:16:13.962] üì• process_user_input() ENTRY - text: 'Hello?...'
2026-01-10T18:16:15.645820433Z [err]  2026-01-10 18:16:13,963 - redis_service - INFO - üì• Retrieved call data from Redis: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:15.645835888Z [err]  2026-01-10 18:16:13,963 - core_calling_service - WARNING - üö® BARGE-IN DETECTED for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ: User spoke while Silence Greeting was triggering
2026-01-10T18:16:15.645851563Z [err]  2026-01-10 18:16:13,999 - telnyx_service - INFO - Telnyx service initialized with connection: 2777245537294877821
2026-01-10T18:16:15.645860974Z [err]  2026-01-10 18:16:14,000 - telnyx_service - INFO - üõë Stopping audio playback on call: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:15.645871073Z [err]  2026-01-10 18:16:14,057 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ/actions/playback_start "HTTP/1.1 200 OK"
2026-01-10T18:16:15.645879637Z [err]  2026-01-10 18:16:14,058 - telnyx_service - INFO - ‚è±Ô∏è  Playback API call time: 0.22s
2026-01-10T18:16:15.645887318Z [err]  2026-01-10 18:16:14,058 - telnyx_service - INFO - ‚è±Ô∏è  Total TTS latency: 0.73s
2026-01-10T18:16:15.645896941Z [err]  2026-01-10 18:16:14,058 - telnyx_service - INFO - ‚úÖ Playing elevenlabs audio via Telnyx playback
2026-01-10T18:16:15.645905987Z [err]  2026-01-10 18:16:14,058 - telnyx_service - INFO - üé¨ Playback ID: 7lEgY5NJPg
2026-01-10T18:16:15.645922351Z [err]  2026-01-10 18:16:14,058 - server - INFO - üîä [WebSocket Worker] Silence greeting spoken via Telnyx TTS
2026-01-10T18:16:15.645932933Z [err]  2026-01-10 18:16:14,059 - server - INFO - ‚è±Ô∏è [WebSocket Worker] Greeting playback started at 1768068974.0590158
2026-01-10T18:16:15.645942093Z [err]  2026-01-10 18:16:14,059 - server - INFO - ‚è±Ô∏è [WebSocket Worker] Silence tracking started for dead air monitoring
2026-01-10T18:16:15.645949453Z [err]  2026-01-10 18:16:14,364 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:XUPR9DsBoWRJYNEtE... (active sessions: [])
2026-01-10T18:16:15.648853906Z [err]  2026-01-10 18:16:14,364 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:XUPR9DsBoWRJYNEtE... (active sessions: [])
2026-01-10T18:16:15.648870714Z [err]  2026-01-10 18:16:14,441 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ/actions/playback_stop "HTTP/1.1 200 OK"
2026-01-10T18:16:15.648878783Z [err]  2026-01-10 18:16:14,442 - telnyx_service - INFO - ‚úÖ Successfully stopped audio playback
2026-01-10T18:16:15.648886660Z [err]  2026-01-10 18:16:14,442 - core_calling_service - INFO - ‚úÖ BARGE-IN: Audio playback STOPPED
2026-01-10T18:16:15.648894408Z [err]  2026-01-10 18:16:14,443 - core_calling_service - INFO - ‚úÖ BARGE-IN: Preserving silence greeting in history to maintain context
2026-01-10T18:16:15.648903383Z [err]  2026-01-10 18:16:14,443 - redis_service - INFO - üì• Retrieved call data from Redis: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:15.648910690Z [err]  2026-01-10 18:16:14,445 - redis_service - INFO - üì¶ Stored call data in Redis: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ (TTL: 3600s)
2026-01-10T18:16:15.648918713Z [err]  2026-01-10 18:16:14,445 - core_calling_service - INFO - ‚úÖ BARGE-IN: Reset silence_greeting_triggered flag
2026-01-10T18:16:15.648927067Z [err]  2026-01-10 18:16:14,445 - core_calling_service - INFO - ‚è±Ô∏è [18:16:14.445] ‚è© About to call _process_call_flow_streaming()
2026-01-10T18:16:15.648935475Z [err]  2026-01-10 18:16:14,445 - core_calling_service - INFO - ‚è±Ô∏è [18:16:14.445] üîÄ Agent type: call_flow, calling flow processor...
2026-01-10T18:16:15.648944397Z [err]  2026-01-10 18:16:14,445 - core_calling_service - INFO - ‚è±Ô∏è [18:16:14.445] üîÄ _process_call_flow_streaming() ENTRY
2026-01-10T18:16:15.648954530Z [err]  2026-01-10 18:16:14,445 - core_calling_service - INFO - Flow processing - History length: 3, Is first: False
2026-01-10T18:16:15.651484406Z [err]  2026-01-10 18:16:14,445 - core_calling_service - INFO - üîç Using explicitly set current_node_id: 2
2026-01-10T18:16:15.651492346Z [err]  2026-01-10 18:16:14,445 - core_calling_service - INFO - ‚è±Ô∏è [18:16:14.445] üöÄ Checking special cases before merged transition+response...
2026-01-10T18:16:15.651514974Z [err]  2026-01-10 18:16:14,445 - core_calling_service - INFO - üîç Checking 'Hello=Yes' override for msg='hello' on node='Greeting'
2026-01-10T18:16:15.651520823Z [err]  2026-01-10 18:16:14,445 - core_calling_service - INFO - ‚è±Ô∏è Using MERGED transition+response for: Hello?...
2026-01-10T18:16:15.651525126Z [err]  2026-01-10 18:16:14,445 - core_calling_service - INFO - Evaluating transitions from Greeting for message: Hello?
2026-01-10T18:16:15.651529622Z [err]  2026-01-10 18:16:14,445 - core_calling_service - INFO - ‚è±Ô∏è [18:16:14.445] üöÄ MERGED TRANSITION+RESPONSE START - 2 options
2026-01-10T18:16:15.651533546Z [err]  2026-01-10 18:16:14,547 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2026-01-10T18:16:15.651537523Z [err]  2026-01-10 18:16:14,547 - server - INFO - üì® Full payload: {'data': {'event_type': 'call.machine.premium.detection.ended', 'id': '041d4689-c125-404d-a737-28ab7e56abcc', 'occurred_at': '2026-01-10T18:16:14.184103Z', 'payload': {'call_control_id': 'v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ', 'call_leg_id': '6e00702c-ee50-11f0-b598-02420aef96a0', 'call_session_id': '6dfdd704-ee50-11f0-8aaf-02420aef96a0', 'client_state': None, 'connection_id': '2777245537294877821', 'from': '+14048000152', 'result': 'human_residence', 'to': '+17708336397'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2026-01-10T18:16:15.651542605Z [err]  2026-01-10 18:16:14,547 - server - INFO - üéØ Event type: call.machine.premium.detection.ended, Call ID: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:15.651548100Z [err]  2026-01-10 18:16:14,547 - server - INFO - üì® ================================================
2026-01-10T18:16:15.657464288Z [inf]  100.64.0.10:25224 - "POST /api/telnyx/webhook HTTP/1.1" 200
2026-01-10T18:16:15.657478558Z [err]  2026-01-10 18:16:14,781 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2026-01-10T18:16:15.657488334Z [err]  2026-01-10 18:16:14,781 - server - INFO - üì® Full payload: {'data': {'event_type': 'call.playback.started', 'id': 'c23e5b60-bb4e-4b49-a3d2-8e013b88e563', 'occurred_at': '2026-01-10T18:16:14.264103Z', 'payload': {'call_control_id': 'v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ', 'call_leg_id': '6e00702c-ee50-11f0-b598-02420aef96a0', 'call_session_id': '6dfdd704-ee50-11f0-8aaf-02420aef96a0', 'client_state': None, 'connection_id': '2777245537294877821', 'media_name': None, 'media_url': 'api.li-ai.org/api/tts-audio/tts_elevenlabs_6262be59fadb4cac1e6b6f597b7b1429.mp3', 'overlay': False, 'playback_id': '7lEgY5NJPg'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2026-01-10T18:16:15.657497929Z [err]  2026-01-10 18:16:14,781 - server - INFO - üéØ Event type: call.playback.started, Call ID: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:15.657505489Z [err]  2026-01-10 18:16:14,781 - server - INFO - üì® ================================================
2026-01-10T18:16:15.657513121Z [inf]  100.64.0.6:12606 - "POST /api/telnyx/webhook HTTP/1.1" 200
2026-01-10T18:16:15.657521754Z [err]  2026-01-10 18:16:14,866 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:XUPR9DsBoWRJYNEtE... (active sessions: [])
2026-01-10T18:16:15.657531046Z [err]  2026-01-10 18:16:14,866 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:XUPR9DsBoWRJYNEtE... (active sessions: [])
2026-01-10T18:16:15.657542307Z [err]  2026-01-10 18:16:15,348 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/2 200 OK"
2026-01-10T18:16:15.657551035Z [err]  2026-01-10 18:16:15,369 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:XUPR9DsBoWRJYNEtE... (active sessions: [])
2026-01-10T18:16:15.663036338Z [err]  2026-01-10 18:16:15,370 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:XUPR9DsBoWRJYNEtE... (active sessions: [])
2026-01-10T18:16:15.663047493Z [err]  2026-01-10 18:16:15,516 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2026-01-10T18:16:15.663054788Z [err]  2026-01-10 18:16:15,516 - server - INFO - üì® Full payload: {'data': {'event_type': 'call.playback.ended', 'id': '6c609027-8c90-4a2a-aff5-a90e1782e696', 'occurred_at': '2026-01-10T18:16:15.144112Z', 'payload': {'call_control_id': 'v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ', 'call_leg_id': '6e00702c-ee50-11f0-b598-02420aef96a0', 'call_session_id': '6dfdd704-ee50-11f0-8aaf-02420aef96a0', 'client_state': None, 'connection_id': '2777245537294877821', 'media_name': None, 'media_url': 'api.li-ai.org/api/tts-audio/tts_elevenlabs_6262be59fadb4cac1e6b6f597b7b1429.mp3', 'overlay': False, 'playback_id': '7lEgY5NJPg', 'status': 'completed', 'status_detail': ''}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2026-01-10T18:16:15.663062497Z [err]  2026-01-10 18:16:15,516 - server - INFO - üéØ Event type: call.playback.ended, Call ID: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:15.663069995Z [err]  2026-01-10 18:16:15,517 - server - INFO - üì® ================================================
2026-01-10T18:16:15.663076872Z [err]  2026-01-10 18:16:15,521 - redis_service - INFO - ‚ûñ Removed playback 7lEgY5NJPg, 0 remaining for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:15.663084431Z [err]  2026-01-10 18:16:15,521 - server - INFO - üîä Redis: Removed playback 7lEgY5NJPg, 0 remaining
2026-01-10T18:16:15.663091465Z [err]  2026-01-10 18:16:15,522 - server - INFO - üîä ALL PLAYBACKS FINISHED (via Redis) - attempting to start silence timer
2026-01-10T18:16:15.663098073Z [err]  2026-01-10 18:16:15,523 - server - INFO - ‚úÖ Set 'agent_done_speaking' flag in Redis for worker with session to detect
2026-01-10T18:16:15.669418626Z [inf]  100.64.0.10:25224 - "POST /api/telnyx/webhook HTTP/1.1" 200
2026-01-10T18:16:16.660715840Z [err]  2026-01-10 18:16:15,872 - dead_air_monitor - INFO - üö© Detected 'agent_done_speaking' flag from webhook - marking agent as done
2026-01-10T18:16:16.660723226Z [err]  2026-01-10 18:16:15,872 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1768068975.8724742 for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:16.660731595Z [err]  2026-01-10 18:16:15,872 - core_calling_service - INFO - ü§ñ Agent stopped speaking for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:16.660739955Z [err]  2026-01-10 18:16:15,873 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:XUPR9DsBoWRJYNEtE... (active sessions: [])
2026-01-10T18:16:16.660748269Z [err]  2026-01-10 18:16:16,238 - core_calling_service - INFO - ‚ö° MERGED TTFT: 1792ms
2026-01-10T18:16:16.660756677Z [err]  2026-01-10 18:16:16,240 - core_calling_service - INFO - ‚ö° MERGED: Transition marker [T:-1] detected
2026-01-10T18:16:16.660764382Z [err]  2026-01-10 18:16:16,281 - server - INFO - üì§ Sentence arrived from LLM: Hey {customer_name}, this is Jake from JK....
2026-01-10T18:16:16.660771087Z [err]  2026-01-10 18:16:16,281 - server - INFO - ‚è±Ô∏è [TIMING] TTFS (Time To First Sentence): 2413ms
2026-01-10T18:16:16.660788554Z [err]  2026-01-10 18:16:16,281 - server - INFO - ‚ö° Starting REAL-TIME TTS for first sentence
2026-01-10T18:16:16.660796311Z [err]  2026-01-10 18:16:16,281 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:XUPR9DsBoWRJYNEtE... (active sessions: [])
2026-01-10T18:16:16.660804008Z [err]  2026-01-10 18:16:16,281 - server - INFO - ‚ö° ON-DEMAND: Creating persistent TTS session (multi-worker mode)
2026-01-10T18:16:16.660812188Z [err]  2026-01-10 18:16:16,369 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2026-01-10T18:16:16.660821401Z [err]  2026-01-10 18:16:16,375 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:XUPR9DsBoWRJYNEtE... (active sessions: [])
2026-01-10T18:16:16.661524036Z [err]  2026-01-10 18:16:16,456 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2026-01-10T18:16:16.661531400Z [err]  2026-01-10 18:16:16,544 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2026-01-10T18:16:16.661538239Z [err]  2026-01-10 18:16:16,594 - telnyx_service - INFO - Telnyx service initialized with connection: 2777245537294877821
2026-01-10T18:16:16.661545715Z [err]  2026-01-10 18:16:16,595 - server - INFO - ‚úÖ ON-DEMAND: Using Telnyx WebSocket from closure for streaming audio
2026-01-10T18:16:16.661552952Z [err]  2026-01-10 18:16:16,595 - persistent_tts_service - INFO - üéôÔ∏è Extracted voice_settings from agent config: {'stability': 0.6, 'similarity_boost': 0.65, 'style': 0.2, 'use_speaker_boost': True}
2026-01-10T18:16:16.661559702Z [err]  2026-01-10 18:16:16,595 - persistent_tts_service - INFO - üîå [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] Establishing persistent TTS WebSocket...
2026-01-10T18:16:16.661568819Z [err]  2026-01-10 18:16:16,595 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] Voice settings: {'stability': 0.6, 'similarity_boost': 0.65, 'style': 0.2, 'use_speaker_boost': True}
2026-01-10T18:16:16.661575937Z [err]  2026-01-10 18:16:16,595 - elevenlabs_ws_service - INFO - üîå Connecting to ElevenLabs WebSocket: voice=J5iaaqzR5zn6HFG4jV3b, model=eleven_turbo_v2_5
2026-01-10T18:16:16.661584543Z [err]  2026-01-10 18:16:16,595 - elevenlabs_ws_service - INFO - üéôÔ∏è Voice settings: stability=0.6, similarity=0.65, style=0.2
2026-01-10T18:16:16.750466747Z [err]  2026-01-10 18:16:16,744 - elevenlabs_ws_service - INFO - ‚úÖ Connected to ElevenLabs WebSocket
2026-01-10T18:16:16.750483039Z [err]  2026-01-10 18:16:16,744 - elevenlabs_ws_service - INFO - üì§ Sent BOS message with voice settings
2026-01-10T18:16:16.750493501Z [err]  2026-01-10 18:16:16,744 - persistent_tts_service - INFO - ‚úÖ [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] Persistent TTS WebSocket established
2026-01-10T18:16:16.750500874Z [err]  2026-01-10 18:16:16,745 - persistent_tts_service - INFO - üéß [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] Continuous audio receiver started
2026-01-10T18:16:16.750509479Z [err]  2026-01-10 18:16:16,745 - persistent_tts_service - INFO - üîä [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] Comfort noise loop started
2026-01-10T18:16:16.750517700Z [err]  2026-01-10 18:16:16,745 - persistent_tts_service - INFO - ‚úÖ Created persistent TTS session for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:16.750524444Z [err]  2026-01-10 18:16:16,745 - server - INFO - ‚úÖ ON-DEMAND: Persistent TTS session created successfully!
2026-01-10T18:16:16.750531151Z [err]  2026-01-10 18:16:16,745 - server - INFO - üîç Persistent TTS lookup: call_id=v3:XUPR9DsBoWRJYNEtE..., session=FOUND
2026-01-10T18:16:16.750537647Z [err]  2026-01-10 18:16:16,745 - server - INFO - üöÄ Streaming sentence #1 via persistent WebSocket
2026-01-10T18:16:16.750545541Z [err]  2026-01-10 18:16:16,745 - server - INFO - üéµ TTS task #1 started at +463ms
2026-01-10T18:16:16.750552307Z [err]  2026-01-10 18:16:16,745 - server - INFO - ‚è±Ô∏è [TIMING] TTFT_TTS (First TTS Task Started): 2877ms
2026-01-10T18:16:16.750559963Z [err]  2026-01-10 18:16:16,745 - core_calling_service - INFO - üì§ Streamed: Hey {customer_name}, this is Jake from JK....
2026-01-10T18:16:16.750567227Z [err]  2026-01-10 18:16:16,745 - persistent_tts_service - INFO - üéµ [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] Playback consumer started
2026-01-10T18:16:17.749453201Z [err]  2026-01-10 18:16:16,746 - persistent_tts_service - INFO - üéß [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] Continuous Audio Receiver STARTED
2026-01-10T18:16:17.749464046Z [err]  2026-01-10 18:16:16,746 - persistent_tts_service - INFO - üíì [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] Starting TTS keep-alive loop (every 15s)
2026-01-10T18:16:17.749470572Z [err]  2026-01-10 18:16:16,746 - persistent_tts_service - INFO - üîä [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] Starting comfort noise loop
2026-01-10T18:16:17.749479467Z [err]  2026-01-10 18:16:16,746 - persistent_tts_service - INFO - üé§ [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] Streaming sentence #1: Hey {customer_name}, this is Jake from JK....
2026-01-10T18:16:17.749486487Z [err]  2026-01-10 18:16:16,746 - persistent_tts_service - INFO - üöÄ [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] Sent sentence #1 to ElevenLabs in 0ms (non-blocking)
2026-01-10T18:16:17.749492776Z [err]  2026-01-10 18:16:16,746 - persistent_tts_service - INFO - üìä [REAL TIMING] TEXT SENT TO ELEVENLABS: 'Hey {customer_name}, this is Jake from JK....'
2026-01-10T18:16:17.749499209Z [err]  2026-01-10 18:16:16,751 - server - INFO - üì§ Sentence arrived from LLM: Is this a good time to chat quick?...
2026-01-10T18:16:17.749505861Z [err]  2026-01-10 18:16:16,751 - server - INFO - üîç Persistent TTS lookup: call_id=v3:XUPR9DsBoWRJYNEtE..., session=FOUND
2026-01-10T18:16:17.749512046Z [err]  2026-01-10 18:16:16,752 - server - INFO - üöÄ Streaming sentence #2 via persistent WebSocket
2026-01-10T18:16:17.749519533Z [err]  2026-01-10 18:16:16,752 - server - INFO - üéµ TTS task #2 started at +470ms
2026-01-10T18:16:17.749524395Z [err]  2026-01-10 18:16:16,752 - core_calling_service - INFO - üì§ Streamed: Is this a good time to chat quick?...
2026-01-10T18:16:17.749529854Z [err]  2026-01-10 18:16:16,755 - persistent_tts_service - INFO - üé§ [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] Streaming sentence #2: Is this a good time to chat quick?...
2026-01-10T18:16:17.754837408Z [err]  2026-01-10 18:16:16,758 - core_calling_service - INFO - ‚è±Ô∏è [TIMING] MERGED_TRANSITION_RESPONSE: 2312ms
2026-01-10T18:16:17.754846545Z [err]  2026-01-10 18:16:16,758 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER RESET (user gave meaningful response) for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:17.754854224Z [err]  2026-01-10 18:16:16,758 - core_calling_service - INFO - üîä Silence tracking reset for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ (user responded)
2026-01-10T18:16:17.754862364Z [err]  2026-01-10 18:16:16,758 - core_calling_service - INFO - ‚úÖ User responded to regular message, resetting counter
2026-01-10T18:16:17.754876929Z [err]  2026-01-10 18:16:16,758 - core_calling_service - INFO - üíæ Storing node ID 2 in conversation history
2026-01-10T18:16:17.754889209Z [err]  2026-01-10 18:16:16,758 - core_calling_service - INFO - LLM response (2.80s): Hey {customer_name}, this is Jake from JK. Is this a good time to chat quick?
2026-01-10T18:16:17.754897005Z [err]  2026-01-10 18:16:16,758 - core_calling_service - INFO - Total latency: 2.80s
2026-01-10T18:16:17.754904101Z [err]  2026-01-10 18:16:16,760 - server - INFO - ‚úÖ LLM finished in 2892ms, TTS tasks already running in background
2026-01-10T18:16:17.755083389Z [err]  2026-01-10 18:16:16,756 - persistent_tts_service - INFO - üöÄ [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] Sent sentence #2 to ElevenLabs in 0ms (non-blocking)
2026-01-10T18:16:17.755088268Z [err]  2026-01-10 18:16:16,756 - persistent_tts_service - INFO - üìä [REAL TIMING] TEXT SENT TO ELEVENLABS: 'Is this a good time to chat quick?...'
2026-01-10T18:16:17.755098095Z [err]  2026-01-10 18:16:16,757 - core_calling_service - INFO - ‚è±Ô∏è MERGED TRANSITION+RESPONSE COMPLETE - took 2311ms
2026-01-10T18:16:17.755103937Z [err]  2026-01-10 18:16:16,757 - core_calling_service - INFO - ‚ö†Ô∏è MERGED: No transition matched (marker=-1), staying on current node
2026-01-10T18:16:18.730399253Z [err]  2026-01-10 18:16:16,762 - server - INFO - üéµ Streaming 2 TTS chunks as they complete...
2026-01-10T18:16:18.730404092Z [err]  2026-01-10 18:16:16,762 - server - INFO - üöÄ Persistent TTS: Audio already streaming in background!
2026-01-10T18:16:18.730408776Z [err]  2026-01-10 18:16:16,762 - server - INFO -    2 sentences queued and playing seamlessly
2026-01-10T18:16:18.730414695Z [err]  2026-01-10 18:16:16,762 - server - INFO - ‚úÖ All 2 persistent TTS streams completed
2026-01-10T18:16:18.730419265Z [err]  2026-01-10 18:16:16,763 - server - INFO - ‚úÖ Agent generation complete (persistent TTS) - response window closed
2026-01-10T18:16:18.730424375Z [err]  2026-01-10 18:16:16,763 - server - INFO - ‚è±Ô∏è  FIRST AUDIO STARTED: 2895ms from user stop üöÄ
2026-01-10T18:16:18.730429414Z [err]  2026-01-10 18:16:16,763 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:18.730435578Z [err]  2026-01-10 18:16:16,763 - server - INFO - ‚úÖ Agent generation complete - response window closed
2026-01-10T18:16:18.730441903Z [err]  2026-01-10 18:16:16,763 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2026-01-10T18:16:18.730446746Z [err]  2026-01-10 18:16:16,763 - server - INFO - ‚è±Ô∏è  [TIMING] ==== E2E LATENCY SUMMARY ====
2026-01-10T18:16:18.730452104Z [err]  2026-01-10 18:16:16,763 - server - INFO - ‚è±Ô∏è  [TIMING] STT: 12ms (provider: soniox, model: stt-rt-v3)
2026-01-10T18:16:18.730456662Z [err]  2026-01-10 18:16:16,763 - server - INFO - ‚è±Ô∏è  [TIMING] LLM_TOTAL: 2892ms (provider: grok, model: grok-4-1-fast-non-reasoning)
2026-01-10T18:16:18.730461241Z [err]  2026-01-10 18:16:16,763 - server - INFO - ‚è±Ô∏è  [TIMING] TTS_TOTAL: 481ms (provider: elevenlabs, websocket: False)
2026-01-10T18:16:18.730467021Z [err]  2026-01-10 18:16:16,763 - server - INFO - ‚è±Ô∏è  [TIMING] E2E_TOTAL: 2895ms (user stopped ‚Üí play_audio_url called)
2026-01-10T18:16:18.734382196Z [err]  2026-01-10 18:16:17,210 - server - INFO - üî§ RAW TOKENS: [" Ye"?]
2026-01-10T18:16:18.734393462Z [err]  2026-01-10 18:16:17,210 - core_calling_service - INFO - üîä Silence timer reset for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ (user started speaking)
2026-01-10T18:16:18.734402331Z [err]  2026-01-10 18:16:17,210 - core_calling_service - INFO - üë§ User started speaking for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:18.734411950Z [err]  2026-01-10 18:16:17,211 - persistent_tts_service - INFO - ‚ö° [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] CLEAR_AUDIO called - pending_sentences=0, audio_queue=1
2026-01-10T18:16:18.734430085Z [err]  2026-01-10 18:16:17,005 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTFA (Time To First Audio Playback): 259ms
2026-01-10T18:16:18.734444489Z [err]  2026-01-10 18:16:17,005 - persistent_tts_service - INFO - üì§ Sending 20046 bytes of audio (126 chunks, 2.5s duration) via WebSocket
2026-01-10T18:16:18.734450817Z [err]  2026-01-10 18:16:16,763 - server - INFO - ‚è±Ô∏è  [TIMING] ‚ö†Ô∏è NOTE: E2E_TOTAL does not include:
2026-01-10T18:16:18.734458679Z [err]  2026-01-10 18:16:16,763 - server - INFO - ‚è±Ô∏è  [TIMING]   - Telnyx processing time (~50-200ms)
2026-01-10T18:16:18.734466600Z [err]  2026-01-10 18:16:16,763 - server - INFO - ‚è±Ô∏è  [TIMING]   - Network latency to user's phone (~50-150ms)
2026-01-10T18:16:18.734470415Z [err]  2026-01-10 18:16:17,005 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:16:18.734473533Z [err]  2026-01-10 18:16:16,955 - server - INFO - üîç END CALL CHECK: should_end_call=False, max_checkins=False, max_duration=False
2026-01-10T18:16:18.734475690Z [err]  2026-01-10 18:16:16,763 - server - INFO - ‚è±Ô∏è  [TIMING]   - Phone audio buffering (~50-200ms)
2026-01-10T18:16:18.734482870Z [err]  2026-01-10 18:16:17,004 - persistent_tts_service - INFO - üìä [REAL TIMING] ElevenLabs FIRST AUDIO CHUNK received (chunk #1, 20046 bytes)
2026-01-10T18:16:18.734483060Z [err]  2026-01-10 18:16:17,005 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +2.5s (total: 2.5s from now)
2026-01-10T18:16:18.734485110Z [err]  2026-01-10 18:16:16,763 - server - INFO - ‚è±Ô∏è  [TIMING]   - TOTAL MISSING: ~150-550ms typically
2026-01-10T18:16:18.734492482Z [err]  2026-01-10 18:16:17,005 - persistent_tts_service - INFO - üìä [REAL TIMING] PLAYBACK CONSUMER: First chunk arrived, queue latency: 0ms
2026-01-10T18:16:18.734493838Z [err]  2026-01-10 18:16:16,763 - server - INFO - ‚è±Ô∏è  [TIMING]   - REAL USER LATENCY: 3195ms estimated
2026-01-10T18:16:18.734494520Z [err]  2026-01-10 18:16:17,006 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768068977.006 (chunk 1/126, 160 bytes)
2026-01-10T18:16:18.734503173Z [err]  2026-01-10 18:16:16,763 - server - INFO - ‚è±Ô∏è  [TIMING] RESPONSE_TEXT: 77 chars, 2 sentences
2026-01-10T18:16:18.734512111Z [err]  2026-01-10 18:16:16,763 - server - INFO - ‚è±Ô∏è  [TIMING] USER_INPUT: 'Hello?...'
2026-01-10T18:16:18.734521668Z [err]  2026-01-10 18:16:16,763 - server - INFO - ‚è±Ô∏è  [TIMING] AI_RESPONSE: 'Hey {customer_name}, this is Jake from JK. Is this a good ti...'
2026-01-10T18:16:18.734530003Z [err]  2026-01-10 18:16:16,763 - server - INFO - ‚è±Ô∏è  [TIMING] ==========================
2026-01-10T18:16:18.734537896Z [err]  2026-01-10 18:16:16,763 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2026-01-10T18:16:18.734545338Z [err]  2026-01-10 18:16:16,868 - server - INFO - üì§ Audio flowing: 330 packets sent to Soniox (5s update)
2026-01-10T18:16:18.734552475Z [err]  2026-01-10 18:16:16,954 - server - INFO - üìù Saved assistant transcript and latency to database (Node: Greeting, Dead Air: 3385ms)
2026-01-10T18:16:18.734559057Z [err]  2026-01-10 18:16:16,954 - server - INFO - üîä Agent finished generating, 0 playbacks active - waiting for webhooks to close window and start silence tracking
2026-01-10T18:16:18.738281734Z [err]  2026-01-10 18:16:17,337 - server - INFO - üöÄ Spawned tracked background task for endpoint processing
2026-01-10T18:16:18.738292511Z [err]  2026-01-10 18:16:17,337 - server - INFO - ‚è±Ô∏è [18:16:17.337] üìù FINAL TRANSCRIPT RECEIVED: 'Yeah.'
2026-01-10T18:16:18.738311612Z [err]  2026-01-10 18:16:17,336 - server - INFO - üéØ Endpoint detected: <end> token received
2026-01-10T18:16:18.738313442Z [err]  2026-01-10 18:16:17,243 - server - INFO - üìä [REAL TIMING] AUDIO QUEUE CLEARED (user started speaking) for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:18.738313774Z [err]  2026-01-10 18:16:17,245 - redis_service - INFO - üì¶ Stored call data in Redis: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ (TTL: 3600s)
2026-01-10T18:16:18.738319634Z [err]  2026-01-10 18:16:17,336 - server - INFO - üßπ Cleaned transcript: ' Ye ah.' -> 'Yeah.'
2026-01-10T18:16:18.738324150Z [err]  2026-01-10 18:16:17,244 - redis_service - INFO - üì• Retrieved call data from Redis: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:18.738328808Z [err]  2026-01-10 18:16:17,337 - server - INFO - üì• FINAL TOKENS: 'Yeah.' (2 tokens)
2026-01-10T18:16:18.738335927Z [err]  2026-01-10 18:16:17,245 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Ye' | Generating: False
2026-01-10T18:16:18.738337458Z [err]  2026-01-10 18:16:17,211 - persistent_tts_service - INFO - üõë [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] INTERRUPT - Floor Released (is_holding_floor=False)
2026-01-10T18:16:18.738341196Z [err]  2026-01-10 18:16:17,337 - server - INFO - üé§ Soniox final transcript: 'Yeah.'
2026-01-10T18:16:18.738348162Z [err]  2026-01-10 18:16:17,336 - server - INFO - üî§ RAW TOKENS: [" Ye"‚úì, "ah."‚úì, "<end>"‚úì]
2026-01-10T18:16:18.738348763Z [err]  2026-01-10 18:16:17,213 - persistent_tts_service - INFO - üõë [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] Audio sending STOPPED at chunk 21/126 due to interruption
2026-01-10T18:16:18.738361347Z [err]  2026-01-10 18:16:17,337 - server - INFO - üîç FILTER CHECK: words=1, is_filler=True, is_garbled=False, tts_speaking=False, time_until_done=-0.1s, generating=False, playbacks=0, is_active=False
2026-01-10T18:16:18.738361805Z [err]  2026-01-10 18:16:17,213 - persistent_tts_service - INFO - üîá [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] AGENT STOPPED SPEAKING (interrupted, is_speaking=False)
2026-01-10T18:16:18.738370490Z [err]  2026-01-10 18:16:17,213 - persistent_tts_service - INFO - üì§ Sending 14118 bytes of audio (89 chunks, 1.8s duration) via WebSocket
2026-01-10T18:16:18.738375884Z [err]  2026-01-10 18:16:17,213 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:16:18.738382027Z [err]  2026-01-10 18:16:17,213 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.8s (total: 4.1s from now)
2026-01-10T18:16:18.738386745Z [err]  2026-01-10 18:16:17,213 - persistent_tts_service - INFO - üõë [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] Audio sending STOPPED at chunk 0/89 due to interruption
2026-01-10T18:16:18.738391366Z [err]  2026-01-10 18:16:17,213 - persistent_tts_service - INFO - üîá [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] AGENT STOPPED SPEAKING (interrupted, is_speaking=False)
2026-01-10T18:16:18.738395921Z [err]  2026-01-10 18:16:17,243 - persistent_tts_service - INFO - üõë [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] Sent clear event to Telnyx WebSocket (3x)
2026-01-10T18:16:18.738402724Z [err]  2026-01-10 18:16:17,243 - persistent_tts_service - INFO - ‚è±Ô∏è [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] Reset playback_expected_end_time to NOW
2026-01-10T18:16:18.738485497Z [err]  2026-01-10 18:16:17,337 - server - INFO - ‚è±Ô∏è [18:16:17.337] STT endpoint detection latency: 5ms
2026-01-10T18:16:18.741214290Z [err]  2026-01-10 18:16:17,337 - server - INFO - ‚è±Ô∏è [18:16:17.337] üé§ USER STOPPED SPEAKING - Beginning processing pipeline
2026-01-10T18:16:18.741222265Z [err]  2026-01-10 18:16:17,337 - server - INFO - ‚è±Ô∏è User spoke at 1768068977.3376029
2026-01-10T18:16:18.741228436Z [err]  2026-01-10 18:16:17,338 - redis_service - INFO - üì¶ Stored call data in Redis: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ (TTL: 3600s)
2026-01-10T18:16:18.741235350Z [err]  2026-01-10 18:16:17,338 - server - INFO - üë§ User has spoken - aiSpeaksAfterSilence timer cancelled if pending
2026-01-10T18:16:18.741242738Z [err]  2026-01-10 18:16:17,338 - server - INFO - ‚úÖ Agent SILENT - User said 1 word(s): 'Yeah.' - Processing...
2026-01-10T18:16:18.741250085Z [err]  2026-01-10 18:16:17,350 - server - INFO - üìä [REAL TIMING] STT: User audio end ‚Üí Transcript received: -9ms
2026-01-10T18:16:18.741260498Z [err]  2026-01-10 18:16:17,350 - server - INFO - üé§ Endpoint detected by Soniox - processing transcript: Yeah.
2026-01-10T18:16:18.741267685Z [err]  2026-01-10 18:16:17,350 - core_calling_service - INFO - üë§ User stopped speaking for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:18.741273758Z [err]  2026-01-10 18:16:17,354 - server - INFO - ‚úÖ User starting new turn - resetting agent speaking flag
2026-01-10T18:16:18.741284414Z [err]  2026-01-10 18:16:17,355 - server - INFO - ‚è±Ô∏è [TIMING] STT_START: User last audio packet received
2026-01-10T18:16:18.741290320Z [err]  2026-01-10 18:16:17,355 - server - INFO - ‚è±Ô∏è [TIMING] STT_END: Endpoint detected at T+7ms
2026-01-10T18:16:18.741300219Z [err]  2026-01-10 18:16:17,355 - server - INFO - ‚è±Ô∏è [TIMING] STT_LATENCY: 7ms (Soniox model: stt-rt-v3)
2026-01-10T18:16:18.741306326Z [err]  2026-01-10 18:16:17,355 - server - INFO - ‚è±Ô∏è  USER STOPPED SPEAKING at T=0ms
2026-01-10T18:16:18.741311461Z [err]  2026-01-10 18:16:17,355 - server - INFO - üìä [REAL TIMING] Processing start: 23ms after user audio end
2026-01-10T18:16:18.743258550Z [err]  2026-01-10 18:16:17,355 - server - INFO - üéôÔ∏è Agent generating response - interruption detection active
2026-01-10T18:16:18.743265361Z [err]  2026-01-10 18:16:17,355 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:18.743277586Z [err]  2026-01-10 18:16:17,382 - dead_air_monitor - INFO - ‚è±Ô∏è Playback expected end time passed (0.1s ago), marking agent as done speaking
2026-01-10T18:16:18.743285732Z [err]  2026-01-10 18:16:17,383 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1768068977.3829129 for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:18.743293711Z [err]  2026-01-10 18:16:17,383 - core_calling_service - INFO - ü§ñ Agent stopped speaking for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:18.743301965Z [err]  2026-01-10 18:16:17,450 - server - INFO - üìù Saved user transcript to database
2026-01-10T18:16:18.743310552Z [err]  2026-01-10 18:16:17,450 - persistent_tts_service - INFO - üîÑ [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] Interrupt flag reset - ready for new audio
2026-01-10T18:16:18.743317993Z [err]  2026-01-10 18:16:17,450 - server - INFO - üîÑ Reset TTS interrupt flag before new response
2026-01-10T18:16:18.743325657Z [err]  2026-01-10 18:16:17,450 - core_calling_service - INFO - ‚è±Ô∏è [18:16:17.450] üì• process_user_input() ENTRY - text: 'Yeah....'
2026-01-10T18:16:18.743333812Z [err]  2026-01-10 18:16:17,451 - redis_service - INFO - üì• Retrieved call data from Redis: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:18.743342294Z [err]  2026-01-10 18:16:17,452 - core_calling_service - WARNING - üö® BARGE-IN DETECTED for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ: User spoke while Silence Greeting was triggering
2026-01-10T18:16:18.743352681Z [err]  2026-01-10 18:16:17,495 - telnyx_service - INFO - Telnyx service initialized with connection: 2777245537294877821
2026-01-10T18:16:18.745271977Z [err]  2026-01-10 18:16:17,877 - core_calling_service - INFO - Flow processing - History length: 6, Is first: False
2026-01-10T18:16:18.745293710Z [err]  2026-01-10 18:16:17,495 - telnyx_service - INFO - üõë Stopping audio playback on call: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:18.745304191Z [err]  2026-01-10 18:16:17,871 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ/actions/playback_stop "HTTP/1.1 200 OK"
2026-01-10T18:16:18.745314551Z [err]  2026-01-10 18:16:17,874 - telnyx_service - INFO - ‚úÖ Successfully stopped audio playback
2026-01-10T18:16:18.745319838Z [err]  2026-01-10 18:16:17,877 - core_calling_service - INFO - ‚úÖ BARGE-IN: Reset silence_greeting_triggered flag
2026-01-10T18:16:18.745331799Z [err]  2026-01-10 18:16:17,874 - core_calling_service - INFO - ‚úÖ BARGE-IN: Audio playback STOPPED
2026-01-10T18:16:18.745332232Z [err]  2026-01-10 18:16:17,877 - core_calling_service - INFO - ‚è±Ô∏è [18:16:17.877] ‚è© About to call _process_call_flow_streaming()
2026-01-10T18:16:18.745340752Z [err]  2026-01-10 18:16:17,875 - core_calling_service - INFO - ‚úÖ BARGE-IN: Preserving silence greeting in history to maintain context
2026-01-10T18:16:18.745343406Z [err]  2026-01-10 18:16:17,877 - core_calling_service - INFO - ‚è±Ô∏è [18:16:17.877] üîÄ Agent type: call_flow, calling flow processor...
2026-01-10T18:16:18.745351036Z [err]  2026-01-10 18:16:17,876 - redis_service - INFO - üì• Retrieved call data from Redis: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:18.745354201Z [err]  2026-01-10 18:16:17,877 - core_calling_service - INFO - ‚è±Ô∏è [18:16:17.877] üîÄ _process_call_flow_streaming() ENTRY
2026-01-10T18:16:18.745359827Z [err]  2026-01-10 18:16:17,877 - redis_service - INFO - üì¶ Stored call data in Redis: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ (TTL: 3600s)
2026-01-10T18:16:18.749235620Z [err]  2026-01-10 18:16:17,877 - core_calling_service - INFO - üîç Using explicitly set current_node_id: 2
2026-01-10T18:16:18.749242767Z [err]  2026-01-10 18:16:17,877 - core_calling_service - INFO - ‚è±Ô∏è [18:16:17.877] üöÄ Checking special cases before merged transition+response...
2026-01-10T18:16:18.749249054Z [err]  2026-01-10 18:16:17,878 - core_calling_service - INFO - üîç Checking 'Hello=Yes' override for msg='yeah' on node='Greeting'
2026-01-10T18:16:18.749255562Z [err]  2026-01-10 18:16:17,878 - core_calling_service - INFO - ‚ö° OVERRIDE TRIGGERED: 'Yeah.' on Greeting node -> Forcing Transition 0
2026-01-10T18:16:18.749262545Z [err]  2026-01-10 18:16:17,878 - core_calling_service - INFO - ‚è±Ô∏è [18:16:17.878] ‚úÖ Node selected, about to process content...
2026-01-10T18:16:18.749270450Z [err]  2026-01-10 18:16:17,878 - core_calling_service - INFO - üîß Replaced {{now}} with Saturday, January 10, 2026 at 1:16 PM EST in content
2026-01-10T18:16:18.749278264Z [err]  2026-01-10 18:16:17,878 - core_calling_service - INFO - üîß Replaced {{customer_name}} with Kendrick in content
2026-01-10T18:16:18.749284661Z [err]  2026-01-10 18:16:17,878 - core_calling_service - INFO - üîß Replaced {{callerName}} with  in content
2026-01-10T18:16:18.749292153Z [err]  2026-01-10 18:16:17,878 - core_calling_service - INFO - üîß Replaced {{lead_id}} with None in content
2026-01-10T18:16:18.749298825Z [err]  2026-01-10 18:16:17,878 - core_calling_service - INFO - üîß Replaced {{qc_tracking_enabled}} with False in content
2026-01-10T18:16:18.749305426Z [err]  2026-01-10 18:16:17,878 - core_calling_service - INFO - üîß Replaced {{track_keywords}} with  in content
2026-01-10T18:16:18.749313030Z [err]  2026-01-10 18:16:17,878 - core_calling_service - INFO - üîß Replaced {{expected_commitment}} with not_specified in content
2026-01-10T18:16:18.749320027Z [err]  2026-01-10 18:16:17,878 - core_calling_service - INFO - üîß Replaced {{to_number}} with +17708336397 in content
2026-01-10T18:16:18.753604209Z [err]  2026-01-10 18:16:17,878 - core_calling_service - INFO - üîß Replaced {{phone_number}} with +17708336397 in content
2026-01-10T18:16:18.753610027Z [err]  2026-01-10 18:16:17,878 - core_calling_service - INFO - üîß Replaced {{email}} with None in content
2026-01-10T18:16:18.753616718Z [err]  2026-01-10 18:16:17,878 - core_calling_service - INFO - ‚úÖ Using explicit SCRIPT mode (length: 89 chars) - will return text instantly
2026-01-10T18:16:18.753622960Z [err]  2026-01-10 18:16:17,879 - core_calling_service - INFO - Using flow node: Node Prompt: N001B_IntroAndHelpRequest_Only (V3 - Follows Name Confirmation) (type: conversation, mode: script)
2026-01-10T18:16:18.753629750Z [err]  2026-01-10 18:16:17,879 - core_calling_service - INFO - ‚è±Ô∏è [18:16:17.879] üìÑ About to process content (mode=script, length=89)
2026-01-10T18:16:18.753635853Z [err]  2026-01-10 18:16:17,879 - core_calling_service - INFO - üì§ Streaming script as 2 sentence(s)
2026-01-10T18:16:18.753642546Z [err]  2026-01-10 18:16:17,879 - server - INFO - üì§ Sentence arrived from LLM: This is Jake......
2026-01-10T18:16:18.753649021Z [err]  2026-01-10 18:16:17,880 - server - INFO - ‚è±Ô∏è [TIMING] TTFS (Time To First Sentence): 524ms
2026-01-10T18:16:18.753654781Z [err]  2026-01-10 18:16:17,880 - server - INFO - ‚ö° Starting REAL-TIME TTS for first sentence
2026-01-10T18:16:18.753661441Z [err]  2026-01-10 18:16:17,880 - server - INFO - üîç Persistent TTS lookup: call_id=v3:XUPR9DsBoWRJYNEtE..., session=FOUND
2026-01-10T18:16:18.753667976Z [err]  2026-01-10 18:16:17,880 - server - INFO - üöÄ Streaming sentence #1 via persistent WebSocket
2026-01-10T18:16:18.753678076Z [err]  2026-01-10 18:16:17,880 - server - INFO - üéµ TTS task #1 started at +0ms
2026-01-10T18:16:18.753684022Z [err]  2026-01-10 18:16:17,880 - server - INFO - ‚è±Ô∏è [TIMING] TTFT_TTS (First TTS Task Started): 525ms
2026-01-10T18:16:18.753691478Z [err]  2026-01-10 18:16:17,880 - core_calling_service - INFO - üì§ Streamed script sentence 1/2: This is Jake......
2026-01-10T18:16:19.757905675Z [err]  2026-01-10 18:16:17,887 - server - INFO - üöÄ Persistent TTS: Audio already streaming in background!
2026-01-10T18:16:19.757913905Z [err]  2026-01-10 18:16:17,887 - server - INFO -    2 sentences queued and playing seamlessly
2026-01-10T18:16:19.757921326Z [err]  2026-01-10 18:16:17,887 - persistent_tts_service - INFO - üé§ [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] Streaming sentence #3: This is Jake......
2026-01-10T18:16:19.757927592Z [err]  2026-01-10 18:16:17,888 - persistent_tts_service - INFO - üöÄ [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] Sent sentence #3 to ElevenLabs in 0ms (non-blocking)
2026-01-10T18:16:19.757934600Z [err]  2026-01-10 18:16:17,888 - persistent_tts_service - INFO - üìä [REAL TIMING] TEXT SENT TO ELEVENLABS: 'This is Jake......'
2026-01-10T18:16:19.757941403Z [err]  2026-01-10 18:16:17,888 - persistent_tts_service - INFO - üé§ [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] Streaming sentence #4: I was just, um, wondering if you could possibly he...
2026-01-10T18:16:19.757948631Z [err]  2026-01-10 18:16:17,888 - persistent_tts_service - INFO - üöÄ [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] Sent sentence #4 to ElevenLabs in 0ms (non-blocking)
2026-01-10T18:16:19.757956600Z [err]  2026-01-10 18:16:17,888 - persistent_tts_service - INFO - üìä [REAL TIMING] TEXT SENT TO ELEVENLABS: 'I was just, um, wondering if you could possibly he...'
2026-01-10T18:16:19.757962852Z [err]  2026-01-10 18:16:17,890 - server - INFO - ‚úÖ All 2 persistent TTS streams completed
2026-01-10T18:16:19.757970857Z [err]  2026-01-10 18:16:17,890 - server - INFO - ‚úÖ Agent generation complete (persistent TTS) - response window closed
2026-01-10T18:16:19.757977138Z [err]  2026-01-10 18:16:17,890 - server - INFO - ‚è±Ô∏è  FIRST AUDIO STARTED: 535ms from user stop üöÄ
2026-01-10T18:16:19.757986465Z [err]  2026-01-10 18:16:17,890 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:19.758322871Z [err]  2026-01-10 18:16:17,880 - server - INFO - üì§ Sentence arrived from LLM: I was just, um, wondering if you could possibly he...
2026-01-10T18:16:19.758329251Z [err]  2026-01-10 18:16:17,880 - server - INFO - üîç Persistent TTS lookup: call_id=v3:XUPR9DsBoWRJYNEtE..., session=FOUND
2026-01-10T18:16:19.758335358Z [err]  2026-01-10 18:16:17,880 - server - INFO - üöÄ Streaming sentence #2 via persistent WebSocket
2026-01-10T18:16:19.758341021Z [err]  2026-01-10 18:16:17,880 - server - INFO - üéµ TTS task #2 started at +0ms
2026-01-10T18:16:19.758353761Z [err]  2026-01-10 18:16:17,880 - core_calling_service - INFO - üì§ Streamed script sentence 2/2: I was just, um, wondering if you could possibly he...
2026-01-10T18:16:19.758359859Z [err]  2026-01-10 18:16:17,880 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER RESET (user gave meaningful response) for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:19.758365687Z [err]  2026-01-10 18:16:17,880 - core_calling_service - INFO - üîä Silence tracking reset for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ (user responded)
2026-01-10T18:16:19.758372271Z [err]  2026-01-10 18:16:17,881 - core_calling_service - INFO - ‚úÖ User responded to regular message, resetting counter
2026-01-10T18:16:19.758379454Z [err]  2026-01-10 18:16:17,881 - core_calling_service - INFO - üíæ Storing node ID 1763159750250 in conversation history
2026-01-10T18:16:19.758387832Z [err]  2026-01-10 18:16:17,881 - core_calling_service - INFO - LLM response (0.43s): This is Jake... I was just, um, wondering if you could possibly help me out for a moment?
2026-01-10T18:16:19.758395959Z [err]  2026-01-10 18:16:17,881 - core_calling_service - INFO - Total latency: 0.43s
2026-01-10T18:16:19.758401392Z [err]  2026-01-10 18:16:17,884 - server - INFO - ‚úÖ LLM finished in 529ms, TTS tasks already running in background
2026-01-10T18:16:19.758406707Z [err]  2026-01-10 18:16:17,886 - server - INFO - üéµ Streaming 2 TTS chunks as they complete...
2026-01-10T18:16:19.764216630Z [err]  2026-01-10 18:16:17,891 - server - INFO - ‚úÖ Agent generation complete - response window closed
2026-01-10T18:16:19.764225039Z [err]  2026-01-10 18:16:17,891 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2026-01-10T18:16:19.764232761Z [err]  2026-01-10 18:16:17,891 - server - INFO - ‚è±Ô∏è  [TIMING] ==== E2E LATENCY SUMMARY ====
2026-01-10T18:16:19.764248870Z [err]  2026-01-10 18:16:17,891 - server - INFO - ‚è±Ô∏è  [TIMING] STT: 7ms (provider: soniox, model: stt-rt-v3)
2026-01-10T18:16:19.764254965Z [err]  2026-01-10 18:16:17,891 - server - INFO - ‚è±Ô∏è  [TIMING] LLM_TOTAL: 529ms (provider: grok, model: grok-4-1-fast-non-reasoning)
2026-01-10T18:16:19.764261341Z [err]  2026-01-10 18:16:17,891 - server - INFO - ‚è±Ô∏è  [TIMING] TTS_TOTAL: 11ms (provider: elevenlabs, websocket: False)
2026-01-10T18:16:19.764771906Z [err]  2026-01-10 18:16:17,891 - server - INFO - ‚è±Ô∏è  [TIMING] E2E_TOTAL: 536ms (user stopped ‚Üí play_audio_url called)
2026-01-10T18:16:19.764781764Z [err]  2026-01-10 18:16:17,891 - server - INFO - ‚è±Ô∏è  [TIMING] ‚ö†Ô∏è NOTE: E2E_TOTAL does not include:
2026-01-10T18:16:19.764792555Z [err]  2026-01-10 18:16:17,891 - server - INFO - ‚è±Ô∏è  [TIMING]   - Telnyx processing time (~50-200ms)
2026-01-10T18:16:19.764811219Z [err]  2026-01-10 18:16:17,891 - server - INFO - ‚è±Ô∏è  [TIMING]   - Network latency to user's phone (~50-150ms)
2026-01-10T18:16:19.764821938Z [err]  2026-01-10 18:16:17,891 - server - INFO - ‚è±Ô∏è  [TIMING]   - Phone audio buffering (~50-200ms)
2026-01-10T18:16:19.764829008Z [err]  2026-01-10 18:16:17,891 - server - INFO - ‚è±Ô∏è  [TIMING]   - TOTAL MISSING: ~150-550ms typically
2026-01-10T18:16:19.764836085Z [err]  2026-01-10 18:16:17,891 - server - INFO - ‚è±Ô∏è  [TIMING]   - REAL USER LATENCY: 836ms estimated
2026-01-10T18:16:19.764845815Z [err]  2026-01-10 18:16:17,891 - server - INFO - ‚è±Ô∏è  [TIMING] RESPONSE_TEXT: 89 chars, 2 sentences
2026-01-10T18:16:20.459266542Z [err]  2026-01-10 18:16:17,891 - server - INFO - ‚è±Ô∏è  [TIMING] USER_INPUT: 'Yeah....'
2026-01-10T18:16:20.459273777Z [err]  2026-01-10 18:16:17,891 - server - INFO - ‚è±Ô∏è  [TIMING] AI_RESPONSE: 'This is Jake... I was just, um, wondering if you could possi...'
2026-01-10T18:16:20.459282280Z [err]  2026-01-10 18:16:17,891 - server - INFO - ‚è±Ô∏è  [TIMING] ==========================
2026-01-10T18:16:20.459291963Z [err]  2026-01-10 18:16:17,891 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2026-01-10T18:16:20.459298999Z [err]  2026-01-10 18:16:18,081 - server - INFO - üìù Saved assistant transcript and latency to database (Node: Node Prompt: N001B_IntroAndHelpRequest_Only (V3 - Follows Name Confirmation), Dead Air: 547ms)
2026-01-10T18:16:20.459317058Z [err]  2026-01-10 18:16:18,082 - server - INFO - üîä Agent finished generating, 0 playbacks active - waiting for webhooks to close window and start silence tracking
2026-01-10T18:16:20.459326358Z [err]  2026-01-10 18:16:18,082 - server - INFO - üîç END CALL CHECK: should_end_call=False, max_checkins=False, max_duration=False
2026-01-10T18:16:20.459334187Z [err]  2026-01-10 18:16:18,184 - persistent_tts_service - INFO - üì§ Sending 9288 bytes of audio (59 chunks, 1.2s duration) via WebSocket
2026-01-10T18:16:20.459342872Z [err]  2026-01-10 18:16:18,184 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:16:20.459349961Z [err]  2026-01-10 18:16:18,184 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.2s (total: 1.2s from now)
2026-01-10T18:16:20.459357627Z [err]  2026-01-10 18:16:18,185 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768068978.185 (chunk 1/59, 160 bytes)
2026-01-10T18:16:20.465363186Z [err]  2026-01-10 18:16:19,109 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 59 CHUNKS SENT TO TELNYX in 924ms (audio duration: 1.2s, paced after 10 chunks)
2026-01-10T18:16:20.465372053Z [err]  2026-01-10 18:16:19,109 - persistent_tts_service - INFO - ‚úÖ Sent 59 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:16:20.465380532Z [err]  2026-01-10 18:16:19,109 - persistent_tts_service - INFO - üì§ Sending 13792 bytes of audio (87 chunks, 1.7s duration) via WebSocket
2026-01-10T18:16:20.465388478Z [err]  2026-01-10 18:16:19,109 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:16:20.466587564Z [err]  2026-01-10 18:16:19,109 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.7s (total: 2.0s from now)
2026-01-10T18:16:20.466627526Z [err]  2026-01-10 18:16:19,109 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768068979.110 (chunk 1/87, 160 bytes)
2026-01-10T18:16:20.466636785Z [err]  2026-01-10 18:16:20,408 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (0.7s left)
2026-01-10T18:16:20.553211906Z [err]  2026-01-10 18:16:20,550 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 87 CHUNKS SENT TO TELNYX in 1440ms (audio duration: 1.7s, paced after 10 chunks)
2026-01-10T18:16:20.553220896Z [err]  2026-01-10 18:16:20,550 - persistent_tts_service - INFO - ‚úÖ Sent 87 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:16:20.553227215Z [err]  2026-01-10 18:16:20,550 - persistent_tts_service - INFO - üì§ Sending 1069 bytes of audio (7 chunks, 0.1s duration) via WebSocket
2026-01-10T18:16:20.553232947Z [err]  2026-01-10 18:16:20,550 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:16:20.553237967Z [err]  2026-01-10 18:16:20,550 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +0.1s (total: 0.7s from now)
2026-01-10T18:16:20.553243724Z [err]  2026-01-10 18:16:20,550 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768068980.551 (chunk 1/7, 160 bytes)
2026-01-10T18:16:20.553250410Z [err]  2026-01-10 18:16:20,551 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 7 CHUNKS SENT TO TELNYX in 0ms (audio duration: 0.1s, paced after 10 chunks)
2026-01-10T18:16:20.553257343Z [err]  2026-01-10 18:16:20,551 - persistent_tts_service - INFO - ‚úÖ Sent 7 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:16:20.553262874Z [err]  2026-01-10 18:16:20,551 - persistent_tts_service - INFO - üì§ Sending 18575 bytes of audio (117 chunks, 2.3s duration) via WebSocket
2026-01-10T18:16:20.553268011Z [err]  2026-01-10 18:16:20,551 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:16:20.553274013Z [err]  2026-01-10 18:16:20,551 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +2.3s (total: 3.0s from now)
2026-01-10T18:16:20.555412989Z [err]  2026-01-10 18:16:20,551 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768068980.551 (chunk 1/117, 160 bytes)
2026-01-10T18:16:21.463274767Z [err]  2026-01-10 18:16:20,912 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (2.6s left)
2026-01-10T18:16:22.562458411Z [err]  2026-01-10 18:16:21,894 - server - INFO - üì§ Audio flowing: 578 packets sent to Soniox (5s update)
2026-01-10T18:16:22.577024607Z [err]  2026-01-10 18:16:22,557 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 117 CHUNKS SENT TO TELNYX in 2006ms (audio duration: 2.3s, paced after 10 chunks)
2026-01-10T18:16:22.577032289Z [err]  2026-01-10 18:16:22,557 - persistent_tts_service - INFO - ‚úÖ Sent 117 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:16:22.675714185Z [err]  2026-01-10 18:16:22,672 - server - INFO - üé§ Soniox receiver alive - 14 messages received in last 10s
2026-01-10T18:16:23.735097877Z [err]  2026-01-10 18:16:23,617 - persistent_tts_service - INFO - üîá [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] FLOOR RELEASED (is_holding_floor=False)
2026-01-10T18:16:24.604772053Z [err]  2026-01-10 18:16:23,923 - dead_air_monitor - INFO - ‚è±Ô∏è Playback expected end time passed (0.4s ago), marking agent as done speaking
2026-01-10T18:16:24.604779574Z [err]  2026-01-10 18:16:23,923 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1768068983.9235096 for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:24.604787002Z [err]  2026-01-10 18:16:23,923 - core_calling_service - INFO - ü§ñ Agent stopped speaking for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:26.663524828Z [err]  2026-01-10 18:16:26,263 - server - INFO - üî§ RAW TOKENS: [" S"?]
2026-01-10T18:16:26.663531752Z [err]  2026-01-10 18:16:26,264 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER RESET (user started speaking) for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:26.663538211Z [err]  2026-01-10 18:16:26,264 - core_calling_service - INFO - üîä Silence timer reset for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ (user started speaking)
2026-01-10T18:16:26.663545637Z [err]  2026-01-10 18:16:26,264 - core_calling_service - INFO - üë§ User started speaking for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:26.663552491Z [err]  2026-01-10 18:16:26,264 - persistent_tts_service - INFO - ‚ö° [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] CLEAR_AUDIO called - pending_sentences=0, audio_queue=0
2026-01-10T18:16:26.663558481Z [err]  2026-01-10 18:16:26,264 - persistent_tts_service - INFO - üõë [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] INTERRUPT - Floor Released (is_holding_floor=False)
2026-01-10T18:16:26.663566085Z [err]  2026-01-10 18:16:26,297 - persistent_tts_service - INFO - üõë [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] Sent clear event to Telnyx WebSocket (3x)
2026-01-10T18:16:26.663571657Z [err]  2026-01-10 18:16:26,297 - persistent_tts_service - INFO - ‚è±Ô∏è [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] Reset playback_expected_end_time to NOW
2026-01-10T18:16:26.663579576Z [err]  2026-01-10 18:16:26,297 - server - INFO - üìä [REAL TIMING] AUDIO QUEUE CLEARED (user started speaking) for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:26.663587363Z [err]  2026-01-10 18:16:26,298 - redis_service - INFO - üì• Retrieved call data from Redis: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:26.663597165Z [err]  2026-01-10 18:16:26,299 - redis_service - INFO - üì¶ Stored call data in Redis: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ (TTL: 3600s)
2026-01-10T18:16:26.668446390Z [err]  2026-01-10 18:16:26,299 - server - INFO - üîç PARTIAL TRANSCRIPT: 'S' | Generating: False
2026-01-10T18:16:26.668453759Z [err]  2026-01-10 18:16:26,409 - server - INFO - üî§ RAW TOKENS: [" S"?, "ure"?]
2026-01-10T18:16:26.668460672Z [err]  2026-01-10 18:16:26,409 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Sure' | Generating: False
2026-01-10T18:16:26.668467517Z [err]  2026-01-10 18:16:26,534 - server - INFO - üî§ RAW TOKENS: [" S"‚úì, "ure"‚úì, "."‚úì, "<end>"‚úì]
2026-01-10T18:16:26.668474745Z [err]  2026-01-10 18:16:26,534 - server - INFO - üéØ Endpoint detected: <end> token received
2026-01-10T18:16:26.668481471Z [err]  2026-01-10 18:16:26,534 - server - INFO - üßπ Cleaned transcript: ' S ure .' -> 'Sure.'
2026-01-10T18:16:26.668488511Z [err]  2026-01-10 18:16:26,535 - server - INFO - üì• FINAL TOKENS: 'Sure.' (3 tokens)
2026-01-10T18:16:26.668495265Z [err]  2026-01-10 18:16:26,535 - server - INFO - üé§ Soniox final transcript: 'Sure.'
2026-01-10T18:16:26.668502087Z [err]  2026-01-10 18:16:26,535 - server - INFO - üîç FILTER CHECK: words=1, is_filler=True, is_garbled=False, tts_speaking=False, time_until_done=-0.2s, generating=False, playbacks=0, is_active=False
2026-01-10T18:16:26.668508807Z [err]  2026-01-10 18:16:26,535 - server - INFO - üöÄ Spawned tracked background task for endpoint processing
2026-01-10T18:16:26.668517750Z [err]  2026-01-10 18:16:26,535 - server - INFO - ‚è±Ô∏è [18:16:26.535] üìù FINAL TRANSCRIPT RECEIVED: 'Sure.'
2026-01-10T18:16:26.668524996Z [err]  2026-01-10 18:16:26,535 - server - INFO - ‚è±Ô∏è [18:16:26.535] STT endpoint detection latency: 7ms
2026-01-10T18:16:26.668531271Z [err]  2026-01-10 18:16:26,535 - server - INFO - ‚è±Ô∏è [18:16:26.535] üé§ USER STOPPED SPEAKING - Beginning processing pipeline
2026-01-10T18:16:26.668539214Z [err]  2026-01-10 18:16:26,535 - server - INFO - ‚è±Ô∏è User spoke at 1768068986.535901
2026-01-10T18:16:26.668546734Z [err]  2026-01-10 18:16:26,538 - redis_service - INFO - üì¶ Stored call data in Redis: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ (TTL: 3600s)
2026-01-10T18:16:26.673252551Z [err]  2026-01-10 18:16:26,538 - server - INFO - üë§ User has spoken - aiSpeaksAfterSilence timer cancelled if pending
2026-01-10T18:16:26.673266229Z [err]  2026-01-10 18:16:26,539 - server - INFO - ‚úÖ Agent SILENT - User said 1 word(s): 'Sure.' - Processing...
2026-01-10T18:16:26.673275155Z [err]  2026-01-10 18:16:26,549 - server - INFO - üìä [REAL TIMING] STT: User audio end ‚Üí Transcript received: -8ms
2026-01-10T18:16:26.673282881Z [err]  2026-01-10 18:16:26,549 - server - INFO - üé§ Endpoint detected by Soniox - processing transcript: Sure.
2026-01-10T18:16:26.673289834Z [err]  2026-01-10 18:16:26,549 - core_calling_service - INFO - üë§ User stopped speaking for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:26.673297766Z [err]  2026-01-10 18:16:26,549 - server - INFO - ‚úÖ User starting new turn - resetting agent speaking flag
2026-01-10T18:16:26.673305385Z [err]  2026-01-10 18:16:26,549 - server - INFO - ‚è±Ô∏è [TIMING] STT_START: User last audio packet received
2026-01-10T18:16:26.673311823Z [err]  2026-01-10 18:16:26,549 - server - INFO - ‚è±Ô∏è [TIMING] STT_END: Endpoint detected at T+2ms
2026-01-10T18:16:26.673319357Z [err]  2026-01-10 18:16:26,549 - server - INFO - ‚è±Ô∏è [TIMING] STT_LATENCY: 2ms (Soniox model: stt-rt-v3)
2026-01-10T18:16:26.673326596Z [err]  2026-01-10 18:16:26,549 - server - INFO - ‚è±Ô∏è  USER STOPPED SPEAKING at T=0ms
2026-01-10T18:16:26.673333166Z [err]  2026-01-10 18:16:26,549 - server - INFO - üìä [REAL TIMING] Processing start: 21ms after user audio end
2026-01-10T18:16:26.673340661Z [err]  2026-01-10 18:16:26,549 - server - INFO - üéôÔ∏è Agent generating response - interruption detection active
2026-01-10T18:16:26.673346004Z [err]  2026-01-10 18:16:26,549 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:26.673352104Z [err]  2026-01-10 18:16:26,644 - server - INFO - üìù Saved user transcript to database
2026-01-10T18:16:26.673584078Z [err]  2026-01-10 18:16:26,644 - persistent_tts_service - INFO - üîÑ [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] Interrupt flag reset - ready for new audio
2026-01-10T18:16:26.673590208Z [err]  2026-01-10 18:16:26,644 - server - INFO - üîÑ Reset TTS interrupt flag before new response
2026-01-10T18:16:26.673596086Z [err]  2026-01-10 18:16:26,644 - core_calling_service - INFO - ‚è±Ô∏è [18:16:26.644] üì• process_user_input() ENTRY - text: 'Sure....'
2026-01-10T18:16:26.673602116Z [err]  2026-01-10 18:16:26,646 - redis_service - INFO - üì• Retrieved call data from Redis: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:26.673608401Z [err]  2026-01-10 18:16:26,646 - core_calling_service - WARNING - üö® BARGE-IN DETECTED for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ: User spoke while Silence Greeting was triggering
2026-01-10T18:16:26.688115242Z [err]  2026-01-10 18:16:26,685 - telnyx_service - INFO - Telnyx service initialized with connection: 2777245537294877821
2026-01-10T18:16:26.688121780Z [err]  2026-01-10 18:16:26,685 - telnyx_service - INFO - üõë Stopping audio playback on call: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:27.618631943Z [err]  2026-01-10 18:16:26,910 - server - INFO - üì§ Audio flowing: 828 packets sent to Soniox (5s update)
2026-01-10T18:16:27.618640466Z [err]  2026-01-10 18:16:27,060 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ/actions/playback_stop "HTTP/1.1 200 OK"
2026-01-10T18:16:27.618788407Z [err]  2026-01-10 18:16:27,061 - telnyx_service - INFO - ‚úÖ Successfully stopped audio playback
2026-01-10T18:16:27.618789489Z [err]  2026-01-10 18:16:27,064 - core_calling_service - INFO - ‚úÖ BARGE-IN: Reset silence_greeting_triggered flag
2026-01-10T18:16:27.618790403Z [err]  2026-01-10 18:16:27,065 - core_calling_service - INFO - Flow processing - History length: 8, Is first: False
2026-01-10T18:16:27.618803007Z [err]  2026-01-10 18:16:27,065 - core_calling_service - INFO - üîç Using explicitly set current_node_id: 1763159750250
2026-01-10T18:16:27.618815548Z [err]  2026-01-10 18:16:27,064 - core_calling_service - INFO - ‚è±Ô∏è [18:16:27.064] ‚è© About to call _process_call_flow_streaming()
2026-01-10T18:16:27.618820905Z [err]  2026-01-10 18:16:27,061 - core_calling_service - INFO - ‚úÖ BARGE-IN: Audio playback STOPPED
2026-01-10T18:16:27.618827704Z [err]  2026-01-10 18:16:27,065 - core_calling_service - INFO - ‚è±Ô∏è [18:16:27.064] üîÄ Agent type: call_flow, calling flow processor...
2026-01-10T18:16:27.618833410Z [err]  2026-01-10 18:16:27,061 - core_calling_service - INFO - ‚úÖ BARGE-IN: Preserving silence greeting in history to maintain context
2026-01-10T18:16:27.618843477Z [err]  2026-01-10 18:16:27,063 - redis_service - INFO - üì• Retrieved call data from Redis: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:27.618850880Z [err]  2026-01-10 18:16:27,065 - core_calling_service - INFO - ‚è±Ô∏è [18:16:27.065] üîÄ _process_call_flow_streaming() ENTRY
2026-01-10T18:16:27.618857355Z [err]  2026-01-10 18:16:27,064 - redis_service - INFO - üì¶ Stored call data in Redis: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ (TTL: 3600s)
2026-01-10T18:16:27.624534205Z [err]  2026-01-10 18:16:27,065 - core_calling_service - INFO - ‚è±Ô∏è [18:16:27.065] üöÄ Checking special cases before merged transition+response...
2026-01-10T18:16:27.624539716Z [err]  2026-01-10 18:16:27,065 - core_calling_service - INFO - üé§ AUTO-TRANSITION AFTER RESPONSE - user spoke, transitioning to: 1763161849799
2026-01-10T18:16:27.624546014Z [err]  2026-01-10 18:16:27,065 - core_calling_service - INFO - ‚úÖ Auto-transitioned (after response) to: Node ID: N_Opener_StackingIncomeHook_V3_CreativeTactic
2026-01-10T18:16:27.624551314Z [err]  2026-01-10 18:16:27,065 - core_calling_service - INFO - ‚è±Ô∏è [18:16:27.065] ‚úÖ Node selected, about to process content...
2026-01-10T18:16:27.624557633Z [err]  2026-01-10 18:16:27,065 - core_calling_service - INFO - üîß Replaced {{now}} with Saturday, January 10, 2026 at 1:16 PM EST in content
2026-01-10T18:16:27.624563525Z [err]  2026-01-10 18:16:27,065 - core_calling_service - INFO - üîß Replaced {{customer_name}} with Kendrick in content
2026-01-10T18:16:27.624570067Z [err]  2026-01-10 18:16:27,065 - core_calling_service - INFO - üîß Replaced {{callerName}} with  in content
2026-01-10T18:16:27.624575412Z [err]  2026-01-10 18:16:27,065 - core_calling_service - INFO - üîß Replaced {{lead_id}} with None in content
2026-01-10T18:16:27.624581259Z [err]  2026-01-10 18:16:27,065 - core_calling_service - INFO - üîß Replaced {{qc_tracking_enabled}} with False in content
2026-01-10T18:16:27.624586942Z [err]  2026-01-10 18:16:27,065 - core_calling_service - INFO - üîß Replaced {{track_keywords}} with  in content
2026-01-10T18:16:27.624592432Z [err]  2026-01-10 18:16:27,065 - core_calling_service - INFO - üîß Replaced {{expected_commitment}} with not_specified in content
2026-01-10T18:16:27.624597831Z [err]  2026-01-10 18:16:27,065 - core_calling_service - INFO - üîß Replaced {{to_number}} with +17708336397 in content
2026-01-10T18:16:27.624604144Z [err]  2026-01-10 18:16:27,065 - core_calling_service - INFO - üîß Replaced {{phone_number}} with +17708336397 in content
2026-01-10T18:16:27.624933704Z [err]  2026-01-10 18:16:27,065 - core_calling_service - INFO - üîß Replaced {{email}} with None in content
2026-01-10T18:16:27.624942869Z [err]  2026-01-10 18:16:27,065 - core_calling_service - INFO - ‚úÖ Using explicit SCRIPT mode (length: 260 chars) - will return text instantly
2026-01-10T18:16:27.624951117Z [err]  2026-01-10 18:16:27,065 - core_calling_service - INFO - Using flow node: Node ID: N_Opener_StackingIncomeHook_V3_CreativeTactic (type: conversation, mode: script)
2026-01-10T18:16:27.624958140Z [err]  2026-01-10 18:16:27,066 - core_calling_service - INFO - ‚è±Ô∏è [18:16:27.065] üìÑ About to process content (mode=script, length=260)
2026-01-10T18:16:27.624964900Z [err]  2026-01-10 18:16:27,066 - core_calling_service - INFO - üì§ Streaming script as 2 sentence(s)
2026-01-10T18:16:27.624982636Z [err]  2026-01-10 18:16:27,066 - server - INFO - üì§ Sentence arrived from LLM: Well, uh, I don't know if you could yet, but, I'm ...
2026-01-10T18:16:27.624989462Z [err]  2026-01-10 18:16:27,066 - server - INFO - ‚è±Ô∏è [TIMING] TTFS (Time To First Sentence): 516ms
2026-01-10T18:16:27.624996963Z [err]  2026-01-10 18:16:27,066 - server - INFO - ‚ö° Starting REAL-TIME TTS for first sentence
2026-01-10T18:16:27.625003388Z [err]  2026-01-10 18:16:27,066 - server - INFO - üîç Persistent TTS lookup: call_id=v3:XUPR9DsBoWRJYNEtE..., session=FOUND
2026-01-10T18:16:27.625011905Z [err]  2026-01-10 18:16:27,066 - server - INFO - üöÄ Streaming sentence #1 via persistent WebSocket
2026-01-10T18:16:27.625018583Z [err]  2026-01-10 18:16:27,066 - server - INFO - üéµ TTS task #1 started at +0ms
2026-01-10T18:16:27.625025900Z [err]  2026-01-10 18:16:27,066 - server - INFO - ‚è±Ô∏è [TIMING] TTFT_TTS (First TTS Task Started): 516ms
2026-01-10T18:16:27.625032846Z [err]  2026-01-10 18:16:27,066 - core_calling_service - INFO - üì§ Streamed script sentence 1/2: Well, uh, I don't know if you could yet, but, I'm ...
2026-01-10T18:16:27.625040915Z [err]  2026-01-10 18:16:27,066 - server - INFO - üì§ Sentence arrived from LLM: I know this call is out of the blue, but do you ha...
2026-01-10T18:16:27.626911826Z [err]  2026-01-10 18:16:27,066 - server - INFO - üîç Persistent TTS lookup: call_id=v3:XUPR9DsBoWRJYNEtE..., session=FOUND
2026-01-10T18:16:27.626920699Z [err]  2026-01-10 18:16:27,066 - server - INFO - üöÄ Streaming sentence #2 via persistent WebSocket
2026-01-10T18:16:27.626926349Z [err]  2026-01-10 18:16:27,066 - server - INFO - üéµ TTS task #2 started at +0ms
2026-01-10T18:16:27.626931926Z [err]  2026-01-10 18:16:27,066 - core_calling_service - INFO - üì§ Streamed script sentence 2/2: I know this call is out of the blue, but do you ha...
2026-01-10T18:16:27.626937933Z [err]  2026-01-10 18:16:27,066 - core_calling_service - INFO - üîä Silence tracking reset for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ (user responded)
2026-01-10T18:16:27.626944857Z [err]  2026-01-10 18:16:27,066 - core_calling_service - INFO - ‚úÖ User responded to regular message, resetting counter
2026-01-10T18:16:27.626956832Z [err]  2026-01-10 18:16:27,066 - core_calling_service - INFO - üíæ Storing node ID 1763161849799 in conversation history
2026-01-10T18:16:27.626963333Z [err]  2026-01-10 18:16:27,066 - core_calling_service - INFO - LLM response (0.42s): Well, uh, I don't know if you could yet, but, I'm calling because you filled out an ad about stacking income without stacking hours. I know this call is out of the blue, but do you have just 25 seconds for me to explain why I'm reaching out today specifically?
2026-01-10T18:16:27.626969267Z [err]  2026-01-10 18:16:27,066 - core_calling_service - INFO - Total latency: 0.42s
2026-01-10T18:16:27.626976030Z [err]  2026-01-10 18:16:27,068 - server - INFO - ‚úÖ LLM finished in 519ms, TTS tasks already running in background
2026-01-10T18:16:27.626984351Z [err]  2026-01-10 18:16:27,070 - server - INFO - üéµ Streaming 2 TTS chunks as they complete...
2026-01-10T18:16:27.626990764Z [err]  2026-01-10 18:16:27,070 - server - INFO - üöÄ Persistent TTS: Audio already streaming in background!
2026-01-10T18:16:27.629829787Z [err]  2026-01-10 18:16:27,070 - server - INFO -    2 sentences queued and playing seamlessly
2026-01-10T18:16:27.629837812Z [err]  2026-01-10 18:16:27,070 - persistent_tts_service - INFO - üé§ [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] Streaming sentence #5: Well, uh, I don't know if you could yet, but, I'm ...
2026-01-10T18:16:27.629843091Z [err]  2026-01-10 18:16:27,070 - persistent_tts_service - INFO - üöÄ [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] Sent sentence #5 to ElevenLabs in 0ms (non-blocking)
2026-01-10T18:16:27.629848148Z [err]  2026-01-10 18:16:27,072 - persistent_tts_service - INFO - üìä [REAL TIMING] TEXT SENT TO ELEVENLABS: 'Well, uh, I don't know if you could yet, but, I'm ...'
2026-01-10T18:16:27.629854140Z [err]  2026-01-10 18:16:27,072 - persistent_tts_service - INFO - üé§ [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] Streaming sentence #6: I know this call is out of the blue, but do you ha...
2026-01-10T18:16:27.629860114Z [err]  2026-01-10 18:16:27,072 - persistent_tts_service - INFO - üöÄ [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] Sent sentence #6 to ElevenLabs in 0ms (non-blocking)
2026-01-10T18:16:27.629864653Z [err]  2026-01-10 18:16:27,072 - persistent_tts_service - INFO - üìä [REAL TIMING] TEXT SENT TO ELEVENLABS: 'I know this call is out of the blue, but do you ha...'
2026-01-10T18:16:27.629869361Z [err]  2026-01-10 18:16:27,073 - server - INFO - ‚úÖ All 2 persistent TTS streams completed
2026-01-10T18:16:27.629873947Z [err]  2026-01-10 18:16:27,073 - server - INFO - ‚úÖ Agent generation complete (persistent TTS) - response window closed
2026-01-10T18:16:27.629878400Z [err]  2026-01-10 18:16:27,073 - server - INFO - ‚è±Ô∏è  FIRST AUDIO STARTED: 523ms from user stop üöÄ
2026-01-10T18:16:27.629882849Z [err]  2026-01-10 18:16:27,073 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:27.634084577Z [err]  2026-01-10 18:16:27,073 - server - INFO - ‚úÖ Agent generation complete - response window closed
2026-01-10T18:16:27.634095993Z [err]  2026-01-10 18:16:27,073 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2026-01-10T18:16:27.634104918Z [err]  2026-01-10 18:16:27,073 - server - INFO - ‚è±Ô∏è  [TIMING] ==== E2E LATENCY SUMMARY ====
2026-01-10T18:16:27.634108397Z [err]  2026-01-10 18:16:27,073 - server - INFO - ‚è±Ô∏è  [TIMING]   - REAL USER LATENCY: 823ms estimated
2026-01-10T18:16:27.634112406Z [err]  2026-01-10 18:16:27,073 - server - INFO - ‚è±Ô∏è  [TIMING] STT: 2ms (provider: soniox, model: stt-rt-v3)
2026-01-10T18:16:27.634119655Z [err]  2026-01-10 18:16:27,073 - server - INFO - ‚è±Ô∏è  [TIMING] LLM_TOTAL: 519ms (provider: grok, model: grok-4-1-fast-non-reasoning)
2026-01-10T18:16:27.634124910Z [err]  2026-01-10 18:16:27,073 - server - INFO - ‚è±Ô∏è  [TIMING] RESPONSE_TEXT: 260 chars, 2 sentences
2026-01-10T18:16:27.634128125Z [err]  2026-01-10 18:16:27,073 - server - INFO - ‚è±Ô∏è  [TIMING] TTS_TOTAL: 7ms (provider: elevenlabs, websocket: False)
2026-01-10T18:16:27.634136451Z [err]  2026-01-10 18:16:27,073 - server - INFO - ‚è±Ô∏è  [TIMING] E2E_TOTAL: 523ms (user stopped ‚Üí play_audio_url called)
2026-01-10T18:16:27.634142815Z [err]  2026-01-10 18:16:27,073 - server - INFO - ‚è±Ô∏è  [TIMING] ‚ö†Ô∏è NOTE: E2E_TOTAL does not include:
2026-01-10T18:16:27.634149135Z [err]  2026-01-10 18:16:27,073 - server - INFO - ‚è±Ô∏è  [TIMING]   - Telnyx processing time (~50-200ms)
2026-01-10T18:16:27.634155485Z [err]  2026-01-10 18:16:27,073 - server - INFO - ‚è±Ô∏è  [TIMING]   - Network latency to user's phone (~50-150ms)
2026-01-10T18:16:27.634162759Z [err]  2026-01-10 18:16:27,073 - server - INFO - ‚è±Ô∏è  [TIMING]   - Phone audio buffering (~50-200ms)
2026-01-10T18:16:27.634168670Z [err]  2026-01-10 18:16:27,073 - server - INFO - ‚è±Ô∏è  [TIMING]   - TOTAL MISSING: ~150-550ms typically
2026-01-10T18:16:27.638152889Z [err]  2026-01-10 18:16:27,073 - server - INFO - ‚è±Ô∏è  [TIMING] USER_INPUT: 'Sure....'
2026-01-10T18:16:27.638163911Z [err]  2026-01-10 18:16:27,073 - server - INFO - ‚è±Ô∏è  [TIMING] AI_RESPONSE: 'Well, uh, I don't know if you could yet, but, I'm calling be...'
2026-01-10T18:16:27.638171365Z [err]  2026-01-10 18:16:27,073 - server - INFO - ‚è±Ô∏è  [TIMING] ==========================
2026-01-10T18:16:27.638178656Z [err]  2026-01-10 18:16:27,073 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2026-01-10T18:16:27.638185698Z [err]  2026-01-10 18:16:27,263 - server - INFO - üìù Saved assistant transcript and latency to database (Node: Node ID: N_Opener_StackingIncomeHook_V3_CreativeTactic, Dead Air: 528ms)
2026-01-10T18:16:27.638192870Z [err]  2026-01-10 18:16:27,263 - server - INFO - üîä Agent finished generating, 0 playbacks active - waiting for webhooks to close window and start silence tracking
2026-01-10T18:16:27.638200820Z [err]  2026-01-10 18:16:27,263 - server - INFO - üîç END CALL CHECK: should_end_call=False, max_checkins=False, max_duration=False
2026-01-10T18:16:27.638208267Z [err]  2026-01-10 18:16:27,406 - persistent_tts_service - INFO - üì§ Sending 13793 bytes of audio (87 chunks, 1.7s duration) via WebSocket
2026-01-10T18:16:27.638215921Z [err]  2026-01-10 18:16:27,406 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:16:27.638222358Z [err]  2026-01-10 18:16:27,406 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.7s (total: 1.7s from now)
2026-01-10T18:16:27.638228633Z [err]  2026-01-10 18:16:27,407 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768068987.407 (chunk 1/87, 160 bytes)
2026-01-10T18:16:28.965902401Z [err]  2026-01-10 18:16:28,857 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 87 CHUNKS SENT TO TELNYX in 1450ms (audio duration: 1.7s, paced after 10 chunks)
2026-01-10T18:16:28.965908032Z [err]  2026-01-10 18:16:28,857 - persistent_tts_service - INFO - ‚úÖ Sent 87 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:16:28.965916652Z [err]  2026-01-10 18:16:28,857 - persistent_tts_service - INFO - üì§ Sending 325 bytes of audio (3 chunks, 0.0s duration) via WebSocket
2026-01-10T18:16:28.965922286Z [err]  2026-01-10 18:16:28,857 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:16:28.965928897Z [err]  2026-01-10 18:16:28,857 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +0.0s (total: 0.3s from now)
2026-01-10T18:16:28.965935428Z [err]  2026-01-10 18:16:28,857 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768068988.858 (chunk 1/3, 160 bytes)
2026-01-10T18:16:28.965944749Z [err]  2026-01-10 18:16:28,857 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 3 CHUNKS SENT TO TELNYX in 0ms (audio duration: 0.0s, paced after 10 chunks)
2026-01-10T18:16:28.965950510Z [err]  2026-01-10 18:16:28,857 - persistent_tts_service - INFO - ‚úÖ Sent 3 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:16:28.965956654Z [err]  2026-01-10 18:16:28,857 - persistent_tts_service - INFO - üì§ Sending 13793 bytes of audio (87 chunks, 1.7s duration) via WebSocket
2026-01-10T18:16:28.966021358Z [err]  2026-01-10 18:16:28,857 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:16:28.966027782Z [err]  2026-01-10 18:16:28,857 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.7s (total: 2.0s from now)
2026-01-10T18:16:30.104488371Z [err]  2026-01-10 18:16:28,858 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768068988.858 (chunk 1/87, 160 bytes)
2026-01-10T18:16:30.869913037Z [err]  2026-01-10 18:16:30,474 - persistent_tts_service - INFO - ‚úÖ Sent 19 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:16:30.869923772Z [err]  2026-01-10 18:16:30,474 - persistent_tts_service - INFO - üì§ Sending 13792 bytes of audio (87 chunks, 1.7s duration) via WebSocket
2026-01-10T18:16:30.869932321Z [err]  2026-01-10 18:16:30,474 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:16:30.870015081Z [err]  2026-01-10 18:16:30,305 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 87 CHUNKS SENT TO TELNYX in 1447ms (audio duration: 1.7s, paced after 10 chunks)
2026-01-10T18:16:30.870024108Z [err]  2026-01-10 18:16:30,306 - persistent_tts_service - INFO - ‚úÖ Sent 87 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:16:30.870033002Z [err]  2026-01-10 18:16:30,306 - persistent_tts_service - INFO - üì§ Sending 2926 bytes of audio (19 chunks, 0.4s duration) via WebSocket
2026-01-10T18:16:30.870039153Z [err]  2026-01-10 18:16:30,306 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:16:30.870046095Z [err]  2026-01-10 18:16:30,306 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +0.4s (total: 1.0s from now)
2026-01-10T18:16:30.870051316Z [err]  2026-01-10 18:16:30,306 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768068990.306 (chunk 1/19, 160 bytes)
2026-01-10T18:16:30.870057011Z [err]  2026-01-10 18:16:30,452 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (0.8s left)
2026-01-10T18:16:30.870063082Z [err]  2026-01-10 18:16:30,474 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 19 CHUNKS SENT TO TELNYX in 168ms (audio duration: 0.4s, paced after 10 chunks)
2026-01-10T18:16:30.875815786Z [err]  2026-01-10 18:16:30,475 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768068990.475 (chunk 1/87, 160 bytes)
2026-01-10T18:16:30.876284597Z [err]  2026-01-10 18:16:30,474 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.7s (total: 2.5s from now)
2026-01-10T18:16:30.957109076Z [err]  2026-01-10 18:16:30,955 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (2.0s left)
2026-01-10T18:16:31.926273615Z [err]  2026-01-10 18:16:31,922 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 87 CHUNKS SENT TO TELNYX in 1447ms (audio duration: 1.7s, paced after 10 chunks)
2026-01-10T18:16:31.926289990Z [err]  2026-01-10 18:16:31,922 - persistent_tts_service - INFO - ‚úÖ Sent 87 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:16:31.926303101Z [err]  2026-01-10 18:16:31,922 - persistent_tts_service - INFO - üì§ Sending 2183 bytes of audio (14 chunks, 0.3s duration) via WebSocket
2026-01-10T18:16:31.926312924Z [err]  2026-01-10 18:16:31,922 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:16:31.926321141Z [err]  2026-01-10 18:16:31,922 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +0.3s (total: 1.3s from now)
2026-01-10T18:16:31.926331297Z [err]  2026-01-10 18:16:31,922 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768068991.923 (chunk 1/14, 160 bytes)
2026-01-10T18:16:31.933303809Z [err]  2026-01-10 18:16:31,928 - server - INFO - üì§ Audio flowing: 1079 packets sent to Soniox (5s update)
2026-01-10T18:16:32.004159024Z [err]  2026-01-10 18:16:31,999 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 14 CHUNKS SENT TO TELNYX in 77ms (audio duration: 0.3s, paced after 10 chunks)
2026-01-10T18:16:32.004167540Z [err]  2026-01-10 18:16:31,999 - persistent_tts_service - INFO - ‚úÖ Sent 14 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:16:32.004173142Z [err]  2026-01-10 18:16:31,999 - persistent_tts_service - INFO - üì§ Sending 15975 bytes of audio (100 chunks, 2.0s duration) via WebSocket
2026-01-10T18:16:32.004178728Z [err]  2026-01-10 18:16:31,999 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:16:32.004183875Z [err]  2026-01-10 18:16:31,999 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +2.0s (total: 3.3s from now)
2026-01-10T18:16:32.004203861Z [err]  2026-01-10 18:16:31,999 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768068992.000 (chunk 1/100, 160 bytes)
2026-01-10T18:16:32.999665198Z [err]  2026-01-10 18:16:32,979 - server - INFO - üé§ Soniox receiver alive - 12 messages received in last 10s
2026-01-10T18:16:33.980592156Z [err]  2026-01-10 18:16:33,687 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 100 CHUNKS SENT TO TELNYX in 1687ms (audio duration: 2.0s, paced after 10 chunks)
2026-01-10T18:16:33.980598121Z [err]  2026-01-10 18:16:33,687 - persistent_tts_service - INFO - ‚úÖ Sent 100 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:16:33.980604324Z [err]  2026-01-10 18:16:33,687 - persistent_tts_service - INFO - üì§ Sending 9288 bytes of audio (59 chunks, 1.2s duration) via WebSocket
2026-01-10T18:16:33.980610776Z [err]  2026-01-10 18:16:33,687 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:16:33.980617322Z [err]  2026-01-10 18:16:33,687 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.2s (total: 2.7s from now)
2026-01-10T18:16:33.980624209Z [err]  2026-01-10 18:16:33,688 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768068993.688 (chunk 1/59, 160 bytes)
2026-01-10T18:16:34.906309827Z [err]  2026-01-10 18:16:34,619 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 59 CHUNKS SENT TO TELNYX in 931ms (audio duration: 1.2s, paced after 10 chunks)
2026-01-10T18:16:34.906335004Z [err]  2026-01-10 18:16:34,620 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:16:34.906348125Z [err]  2026-01-10 18:16:34,620 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.7s (total: 3.5s from now)
2026-01-10T18:16:34.906358249Z [err]  2026-01-10 18:16:34,620 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768068994.620 (chunk 1/87, 160 bytes)
2026-01-10T18:16:34.906382395Z [err]  2026-01-10 18:16:34,620 - persistent_tts_service - INFO - ‚úÖ Sent 59 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:16:34.906389901Z [err]  2026-01-10 18:16:34,620 - persistent_tts_service - INFO - üì§ Sending 13793 bytes of audio (87 chunks, 1.7s duration) via WebSocket
2026-01-10T18:16:35.911317985Z [err]  2026-01-10 18:16:35,478 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (2.7s left)
2026-01-10T18:16:35.983519798Z [err]  2026-01-10 18:16:35,979 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (2.2s left)
2026-01-10T18:16:36.075482182Z [err]  2026-01-10 18:16:36,073 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 87 CHUNKS SENT TO TELNYX in 1452ms (audio duration: 1.7s, paced after 10 chunks)
2026-01-10T18:16:36.075495604Z [err]  2026-01-10 18:16:36,073 - persistent_tts_service - INFO - ‚úÖ Sent 87 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:16:36.075507962Z [err]  2026-01-10 18:16:36,073 - persistent_tts_service - INFO - üì§ Sending 325 bytes of audio (3 chunks, 0.0s duration) via WebSocket
2026-01-10T18:16:36.075516348Z [err]  2026-01-10 18:16:36,073 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:16:36.075522423Z [err]  2026-01-10 18:16:36,073 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +0.0s (total: 2.1s from now)
2026-01-10T18:16:36.075528995Z [err]  2026-01-10 18:16:36,073 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768068996.074 (chunk 1/3, 160 bytes)
2026-01-10T18:16:36.075534969Z [err]  2026-01-10 18:16:36,073 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 3 CHUNKS SENT TO TELNYX in 0ms (audio duration: 0.0s, paced after 10 chunks)
2026-01-10T18:16:36.075541569Z [err]  2026-01-10 18:16:36,073 - persistent_tts_service - INFO - ‚úÖ Sent 3 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:16:36.075547065Z [err]  2026-01-10 18:16:36,073 - persistent_tts_service - INFO - üì§ Sending 25635 bytes of audio (161 chunks, 3.2s duration) via WebSocket
2026-01-10T18:16:36.075554025Z [err]  2026-01-10 18:16:36,073 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:16:36.075560318Z [err]  2026-01-10 18:16:36,073 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +3.2s (total: 5.3s from now)
2026-01-10T18:16:36.079551764Z [err]  2026-01-10 18:16:36,073 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768068996.074 (chunk 1/161, 160 bytes)
2026-01-10T18:16:36.996641008Z [err]  2026-01-10 18:16:36,947 - server - INFO - üì§ Audio flowing: 1329 packets sent to Soniox (5s update)
2026-01-10T18:16:38.907967615Z [err]  2026-01-10 18:16:38,900 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 161 CHUNKS SENT TO TELNYX in 2826ms (audio duration: 3.2s, paced after 10 chunks)
2026-01-10T18:16:38.907976509Z [err]  2026-01-10 18:16:38,900 - persistent_tts_service - INFO - ‚úÖ Sent 161 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:16:40.051417334Z [err]  2026-01-10 18:16:40,007 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (1.4s left)
2026-01-10T18:16:40.938800588Z [err]  2026-01-10 18:16:40,509 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (0.9s left)
2026-01-10T18:16:41.916712963Z [err]  2026-01-10 18:16:41,514 - dead_air_monitor - INFO - ‚è±Ô∏è Playback expected end time passed (0.1s ago), marking agent as done speaking
2026-01-10T18:16:41.916726205Z [err]  2026-01-10 18:16:41,514 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1768069001.5144703 for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:41.916735033Z [err]  2026-01-10 18:16:41,514 - core_calling_service - INFO - ü§ñ Agent stopped speaking for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:41.916742292Z [err]  2026-01-10 18:16:41,685 - persistent_tts_service - INFO - üîá [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] FLOOR RELEASED (is_holding_floor=False)
2026-01-10T18:16:41.972199749Z [err]  2026-01-10 18:16:41,967 - server - INFO - üì§ Audio flowing: 1580 packets sent to Soniox (5s update)
2026-01-10T18:16:44.112837584Z [err]  2026-01-10 18:16:43,649 - redis_service - INFO - üì¶ Stored call data in Redis: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ (TTL: 3600s)
2026-01-10T18:16:44.112855982Z [err]  2026-01-10 18:16:43,649 - server - INFO - üîç PARTIAL TRANSCRIPT: 'I' | Generating: False
2026-01-10T18:16:44.112864659Z [err]  2026-01-10 18:16:43,743 - server - INFO - üî§ RAW TOKENS: [" I"?, " don"?, "'t"?]
2026-01-10T18:16:44.112871535Z [err]  2026-01-10 18:16:43,744 - server - INFO - üîç PARTIAL TRANSCRIPT: 'I don't' | Generating: False
2026-01-10T18:16:44.112882809Z [err]  2026-01-10 18:16:43,984 - server - INFO - üî§ RAW TOKENS: [" I"?, " don"?, "'t"?, " l"?, "ike"?]
2026-01-10T18:16:44.112887761Z [err]  2026-01-10 18:16:43,985 - server - INFO - üîç PARTIAL TRANSCRIPT: 'I don't like' | Generating: False
2026-01-10T18:16:44.112903236Z [err]  2026-01-10 18:16:43,614 - server - INFO - üé§ Soniox receiver alive - 10 messages received in last 10s
2026-01-10T18:16:44.112911825Z [err]  2026-01-10 18:16:43,614 - server - INFO - üî§ RAW TOKENS: [" I"?]
2026-01-10T18:16:44.112919179Z [err]  2026-01-10 18:16:43,615 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER RESET (user started speaking) for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:44.113046819Z [err]  2026-01-10 18:16:43,615 - core_calling_service - INFO - üîä Silence timer reset for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ (user started speaking)
2026-01-10T18:16:44.113124113Z [err]  2026-01-10 18:16:43,615 - core_calling_service - INFO - üë§ User started speaking for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:44.113135631Z [err]  2026-01-10 18:16:43,615 - persistent_tts_service - INFO - ‚ö° [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] CLEAR_AUDIO called - pending_sentences=0, audio_queue=0
2026-01-10T18:16:44.113143724Z [err]  2026-01-10 18:16:43,615 - persistent_tts_service - INFO - üõë [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] INTERRUPT - Floor Released (is_holding_floor=False)
2026-01-10T18:16:44.113151912Z [err]  2026-01-10 18:16:43,646 - persistent_tts_service - INFO - üõë [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] Sent clear event to Telnyx WebSocket (3x)
2026-01-10T18:16:44.113160153Z [err]  2026-01-10 18:16:43,647 - persistent_tts_service - INFO - ‚è±Ô∏è [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] Reset playback_expected_end_time to NOW
2026-01-10T18:16:44.113167493Z [err]  2026-01-10 18:16:43,647 - server - INFO - üìä [REAL TIMING] AUDIO QUEUE CLEARED (user started speaking) for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:44.113175471Z [err]  2026-01-10 18:16:43,648 - redis_service - INFO - üì• Retrieved call data from Redis: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:45.118201711Z [err]  2026-01-10 18:16:44,384 - server - INFO - üî§ RAW TOKENS: [" I"?, " don"?, "'t"?, " l"?, "ike"?, " sc"?]
2026-01-10T18:16:45.118210627Z [err]  2026-01-10 18:16:44,385 - server - INFO - üîç PARTIAL TRANSCRIPT: 'I don't like sc' | Generating: False
2026-01-10T18:16:45.118219526Z [err]  2026-01-10 18:16:44,442 - server - INFO - üî§ RAW TOKENS: [" I"?, " don"?, "'t"?, " l"?, "ike"?, " sc"?, "am"?]
2026-01-10T18:16:45.118225789Z [err]  2026-01-10 18:16:44,444 - server - INFO - üîç PARTIAL TRANSCRIPT: 'I don't like scam' | Generating: False
2026-01-10T18:16:45.118233451Z [err]  2026-01-10 18:16:44,705 - server - INFO - üî§ RAW TOKENS: [" I"‚úì, " don"‚úì, "'t"‚úì, " l"‚úì, "ike"‚úì, " sc"‚úì, "am"‚úì, "s."‚úì, "<end>"‚úì]
2026-01-10T18:16:45.118240561Z [err]  2026-01-10 18:16:44,705 - server - INFO - üéØ Endpoint detected: <end> token received
2026-01-10T18:16:45.118249557Z [err]  2026-01-10 18:16:44,705 - server - INFO - üßπ Cleaned transcript: ' I  don 't  l ike  sc am s.' -> 'I don't like scam s.'
2026-01-10T18:16:45.118258601Z [err]  2026-01-10 18:16:44,705 - server - INFO - üì• FINAL TOKENS: 'I don't like scam s.' (8 tokens)
2026-01-10T18:16:45.118265569Z [err]  2026-01-10 18:16:44,705 - server - INFO - üé§ Soniox final transcript: 'I don't like scam s.'
2026-01-10T18:16:45.118270935Z [err]  2026-01-10 18:16:44,705 - server - INFO - üîç FILTER CHECK: words=5, is_filler=False, is_garbled=False, tts_speaking=False, time_until_done=-1.1s, generating=False, playbacks=0, is_active=False
2026-01-10T18:16:45.118277777Z [err]  2026-01-10 18:16:44,705 - server - INFO - üöÄ Spawned tracked background task for endpoint processing
2026-01-10T18:16:45.118284262Z [err]  2026-01-10 18:16:44,705 - server - INFO - ‚è±Ô∏è [18:16:44.705] üìù FINAL TRANSCRIPT RECEIVED: 'I don't like scam s.'
2026-01-10T18:16:45.118291401Z [err]  2026-01-10 18:16:44,705 - server - INFO - ‚è±Ô∏è [18:16:44.705] STT endpoint detection latency: 18ms
2026-01-10T18:16:45.125671986Z [err]  2026-01-10 18:16:44,705 - server - INFO - ‚è±Ô∏è [18:16:44.705] üé§ USER STOPPED SPEAKING - Beginning processing pipeline
2026-01-10T18:16:45.125679728Z [err]  2026-01-10 18:16:44,705 - server - INFO - ‚è±Ô∏è User spoke at 1768069004.7059567
2026-01-10T18:16:45.125686823Z [err]  2026-01-10 18:16:44,706 - redis_service - INFO - üì¶ Stored call data in Redis: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ (TTL: 3600s)
2026-01-10T18:16:45.125693494Z [err]  2026-01-10 18:16:44,707 - server - INFO - üë§ User has spoken - aiSpeaksAfterSilence timer cancelled if pending
2026-01-10T18:16:45.125700840Z [err]  2026-01-10 18:16:44,707 - server - INFO - ‚úÖ Agent SILENT - User said 5 word(s): 'I don't like scam s.' - Processing...
2026-01-10T18:16:45.125707904Z [err]  2026-01-10 18:16:44,718 - server - INFO - üìä [REAL TIMING] STT: User audio end ‚Üí Transcript received: -6ms
2026-01-10T18:16:45.125716946Z [err]  2026-01-10 18:16:44,718 - server - INFO - üé§ Endpoint detected by Soniox - processing transcript: I don't like scam s.
2026-01-10T18:16:45.125723368Z [err]  2026-01-10 18:16:44,718 - core_calling_service - INFO - üë§ User stopped speaking for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:45.125731431Z [err]  2026-01-10 18:16:44,719 - server - INFO - ‚úÖ User starting new turn - resetting agent speaking flag
2026-01-10T18:16:45.125738901Z [err]  2026-01-10 18:16:44,719 - server - INFO - ‚è±Ô∏è [TIMING] STT_START: User last audio packet received
2026-01-10T18:16:45.125746686Z [err]  2026-01-10 18:16:44,719 - server - INFO - ‚è±Ô∏è [TIMING] STT_END: Endpoint detected at T+5ms
2026-01-10T18:16:45.125753771Z [err]  2026-01-10 18:16:44,719 - server - INFO - ‚è±Ô∏è [TIMING] STT_LATENCY: 5ms (Soniox model: stt-rt-v3)
2026-01-10T18:16:45.125762789Z [err]  2026-01-10 18:16:44,719 - server - INFO - ‚è±Ô∏è  USER STOPPED SPEAKING at T=0ms
2026-01-10T18:16:45.125768959Z [err]  2026-01-10 18:16:44,719 - server - INFO - üìä [REAL TIMING] Processing start: 31ms after user audio end
2026-01-10T18:16:45.127773585Z [err]  2026-01-10 18:16:44,719 - server - INFO - üéôÔ∏è Agent generating response - interruption detection active
2026-01-10T18:16:45.127781412Z [err]  2026-01-10 18:16:44,719 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:45.127787884Z [err]  2026-01-10 18:16:44,813 - server - INFO - üìù Saved user transcript to database
2026-01-10T18:16:45.127795730Z [err]  2026-01-10 18:16:44,813 - persistent_tts_service - INFO - üîÑ [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] Interrupt flag reset - ready for new audio
2026-01-10T18:16:45.127801594Z [err]  2026-01-10 18:16:44,813 - server - INFO - üîÑ Reset TTS interrupt flag before new response
2026-01-10T18:16:45.127807298Z [err]  2026-01-10 18:16:44,813 - core_calling_service - INFO - ‚è±Ô∏è [18:16:44.813] üì• process_user_input() ENTRY - text: 'I don't like scam s....'
2026-01-10T18:16:45.127815459Z [err]  2026-01-10 18:16:44,814 - redis_service - INFO - üì• Retrieved call data from Redis: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:45.127822335Z [err]  2026-01-10 18:16:44,815 - core_calling_service - WARNING - üö® BARGE-IN DETECTED for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ: User spoke while Silence Greeting was triggering
2026-01-10T18:16:45.127828723Z [err]  2026-01-10 18:16:44,861 - telnyx_service - INFO - Telnyx service initialized with connection: 2777245537294877821
2026-01-10T18:16:45.127835120Z [err]  2026-01-10 18:16:44,861 - telnyx_service - INFO - üõë Stopping audio playback on call: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:45.127844250Z [err]  2026-01-10 18:16:45,029 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - response generation still in progress
2026-01-10T18:16:45.999677057Z [err]  2026-01-10 18:16:45,243 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ/actions/playback_stop "HTTP/1.1 200 OK"
2026-01-10T18:16:45.999686969Z [err]  2026-01-10 18:16:45,244 - telnyx_service - INFO - ‚úÖ Successfully stopped audio playback
2026-01-10T18:16:45.999703198Z [err]  2026-01-10 18:16:45,244 - core_calling_service - INFO - ‚úÖ BARGE-IN: Audio playback STOPPED
2026-01-10T18:16:45.999713273Z [err]  2026-01-10 18:16:45,244 - core_calling_service - INFO - ‚úÖ BARGE-IN: Preserving silence greeting in history to maintain context
2026-01-10T18:16:45.999720988Z [err]  2026-01-10 18:16:45,246 - redis_service - INFO - üì• Retrieved call data from Redis: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:45.999730515Z [err]  2026-01-10 18:16:45,247 - redis_service - INFO - üì¶ Stored call data in Redis: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ (TTL: 3600s)
2026-01-10T18:16:45.999739800Z [err]  2026-01-10 18:16:45,247 - core_calling_service - INFO - ‚úÖ BARGE-IN: Reset silence_greeting_triggered flag
2026-01-10T18:16:45.999747006Z [err]  2026-01-10 18:16:45,247 - core_calling_service - INFO - ‚è±Ô∏è [18:16:45.247] ‚è© About to call _process_call_flow_streaming()
2026-01-10T18:16:45.999754075Z [err]  2026-01-10 18:16:45,247 - core_calling_service - INFO - ‚è±Ô∏è [18:16:45.247] üîÄ Agent type: call_flow, calling flow processor...
2026-01-10T18:16:45.999761715Z [err]  2026-01-10 18:16:45,247 - core_calling_service - INFO - ‚è±Ô∏è [18:16:45.247] üîÄ _process_call_flow_streaming() ENTRY
2026-01-10T18:16:45.999768742Z [err]  2026-01-10 18:16:45,247 - core_calling_service - INFO - Flow processing - History length: 10, Is first: False
2026-01-10T18:16:45.999775791Z [err]  2026-01-10 18:16:45,247 - core_calling_service - INFO - üîç Using explicitly set current_node_id: 1763161849799
2026-01-10T18:16:45.999785936Z [err]  2026-01-10 18:16:45,247 - core_calling_service - INFO - ‚è±Ô∏è [18:16:45.247] üöÄ Checking special cases before merged transition+response...
2026-01-10T18:16:46.004932275Z [err]  2026-01-10 18:16:45,247 - core_calling_service - INFO - ‚è±Ô∏è Using MERGED transition+response for: I don't like scam s....
2026-01-10T18:16:46.004940139Z [err]  2026-01-10 18:16:45,247 - core_calling_service - INFO - Evaluating transitions from Node ID: N_Opener_StackingIncomeHook_V3_CreativeTactic for message: I don't like scam s.
2026-01-10T18:16:46.004947203Z [err]  2026-01-10 18:16:45,248 - core_calling_service - INFO - ‚è±Ô∏è [18:16:45.247] üöÄ MERGED TRANSITION+RESPONSE START - 4 options
2026-01-10T18:16:46.004958642Z [err]  2026-01-10 18:16:45,532 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - response generation still in progress
2026-01-10T18:16:46.004965698Z [err]  2026-01-10 18:16:45,773 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/2 200 OK"
2026-01-10T18:16:46.975980590Z [err]  2026-01-10 18:16:46,243 - core_calling_service - INFO - ‚ö° MERGED TTFT: 995ms
2026-01-10T18:16:46.975988392Z [err]  2026-01-10 18:16:46,269 - core_calling_service - INFO - ‚ö° MERGED: Transition marker [T:1] detected
2026-01-10T18:16:46.975996957Z [err]  2026-01-10 18:16:46,317 - server - INFO - üì§ Sentence arrived from LLM: [S] I get why you might think that....
2026-01-10T18:16:46.976003456Z [err]  2026-01-10 18:16:46,317 - server - INFO - ‚è±Ô∏è [TIMING] TTFS (Time To First Sentence): 1598ms
2026-01-10T18:16:46.976009661Z [err]  2026-01-10 18:16:46,317 - server - INFO - ‚ö° Starting REAL-TIME TTS for first sentence
2026-01-10T18:16:46.976019722Z [err]  2026-01-10 18:16:46,317 - server - INFO - üîç Persistent TTS lookup: call_id=v3:XUPR9DsBoWRJYNEtE..., session=FOUND
2026-01-10T18:16:46.976025377Z [err]  2026-01-10 18:16:46,317 - server - INFO - üöÄ Streaming sentence #1 via persistent WebSocket
2026-01-10T18:16:46.976030906Z [err]  2026-01-10 18:16:46,317 - server - INFO - üéµ TTS task #1 started at +0ms
2026-01-10T18:16:46.976036374Z [err]  2026-01-10 18:16:46,317 - server - INFO - ‚è±Ô∏è [TIMING] TTFT_TTS (First TTS Task Started): 1598ms
2026-01-10T18:16:46.976041198Z [err]  2026-01-10 18:16:46,317 - core_calling_service - INFO - üì§ Streamed: [S] I get why you might think that....
2026-01-10T18:16:46.976046496Z [err]  2026-01-10 18:16:46,318 - persistent_tts_service - INFO - üé§ [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] Streaming sentence #7: [S] I get why you might think that....
2026-01-10T18:16:46.976051933Z [err]  2026-01-10 18:16:46,318 - persistent_tts_service - INFO - üöÄ [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] Sent sentence #7 to ElevenLabs in 0ms (non-blocking)
2026-01-10T18:16:46.976058854Z [err]  2026-01-10 18:16:46,318 - persistent_tts_service - INFO - üìä [REAL TIMING] TEXT SENT TO ELEVENLABS: '[S] I get why you might think that....'
2026-01-10T18:16:46.978514038Z [err]  2026-01-10 18:16:46,460 - server - INFO - üì§ Sentence arrived from LLM: We've helped over seven thousand five hundred stud...
2026-01-10T18:16:46.978519249Z [err]  2026-01-10 18:16:46,460 - server - INFO - üîç Persistent TTS lookup: call_id=v3:XUPR9DsBoWRJYNEtE..., session=FOUND
2026-01-10T18:16:46.978526178Z [err]  2026-01-10 18:16:46,460 - server - INFO - üöÄ Streaming sentence #2 via persistent WebSocket
2026-01-10T18:16:46.978532297Z [err]  2026-01-10 18:16:46,460 - server - INFO - üéµ TTS task #2 started at +143ms
2026-01-10T18:16:46.978538639Z [err]  2026-01-10 18:16:46,461 - core_calling_service - INFO - üì§ Streamed: We've helped over seven thousand five hundred stud...
2026-01-10T18:16:46.978544095Z [err]  2026-01-10 18:16:46,461 - persistent_tts_service - INFO - üé§ [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] Streaming sentence #8: We've helped over seven thousand five hundred stud...
2026-01-10T18:16:46.978550387Z [err]  2026-01-10 18:16:46,461 - persistent_tts_service - INFO - üöÄ [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] Sent sentence #8 to ElevenLabs in 0ms (non-blocking)
2026-01-10T18:16:46.978557517Z [err]  2026-01-10 18:16:46,461 - persistent_tts_service - INFO - üìä [REAL TIMING] TEXT SENT TO ELEVENLABS: 'We've helped over seven thousand five hundred stud...'
2026-01-10T18:16:46.978565062Z [err]  2026-01-10 18:16:46,484 - server - INFO - üì§ Sentence arrived from LLM: What specific part concerns you?...
2026-01-10T18:16:46.978571552Z [err]  2026-01-10 18:16:46,485 - server - INFO - üîç Persistent TTS lookup: call_id=v3:XUPR9DsBoWRJYNEtE..., session=FOUND
2026-01-10T18:16:46.978595001Z [err]  2026-01-10 18:16:46,485 - server - INFO - üöÄ Streaming sentence #3 via persistent WebSocket
2026-01-10T18:16:46.978601994Z [err]  2026-01-10 18:16:46,485 - server - INFO - üéµ TTS task #3 started at +167ms
2026-01-10T18:16:46.978610397Z [err]  2026-01-10 18:16:46,485 - core_calling_service - INFO - üì§ Streamed: What specific part concerns you?...
2026-01-10T18:16:46.978746281Z [err]  2026-01-10 18:16:46,485 - persistent_tts_service - INFO - üé§ [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] Streaming sentence #9: What specific part concerns you?...
2026-01-10T18:16:46.978756365Z [err]  2026-01-10 18:16:46,485 - persistent_tts_service - INFO - üöÄ [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] Sent sentence #9 to ElevenLabs in 0ms (non-blocking)
2026-01-10T18:16:46.978763249Z [err]  2026-01-10 18:16:46,485 - persistent_tts_service - INFO - üìä [REAL TIMING] TEXT SENT TO ELEVENLABS: 'What specific part concerns you?...'
2026-01-10T18:16:46.978770278Z [err]  2026-01-10 18:16:46,486 - core_calling_service - INFO - ‚è±Ô∏è MERGED TRANSITION+RESPONSE COMPLETE - took 1238ms
2026-01-10T18:16:46.978777438Z [err]  2026-01-10 18:16:46,486 - core_calling_service - INFO - ‚úÖ MERGED: Transitioning to Node ID: N003B_DeframeInitialObjection_V7_GoalOriented
2026-01-10T18:16:46.978784405Z [err]  2026-01-10 18:16:46,486 - core_calling_service - INFO - ‚è±Ô∏è [TIMING] MERGED_TRANSITION_RESPONSE: 1238ms
2026-01-10T18:16:46.978791217Z [err]  2026-01-10 18:16:46,486 - core_calling_service - INFO - üîä Silence tracking reset for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ (user responded)
2026-01-10T18:16:46.978797331Z [err]  2026-01-10 18:16:46,486 - core_calling_service - INFO - ‚úÖ User responded to regular message, resetting counter
2026-01-10T18:16:46.978803652Z [err]  2026-01-10 18:16:46,486 - core_calling_service - INFO - üíæ Storing node ID 1763161961589 in conversation history
2026-01-10T18:16:46.978810816Z [err]  2026-01-10 18:16:46,486 - core_calling_service - INFO - LLM response (1.67s): [S] I get why you might think that. We've helped over seven thousand five hundred students build real passive income with this. What specific part concerns you?
2026-01-10T18:16:46.978816513Z [err]  2026-01-10 18:16:46,486 - core_calling_service - INFO - Total latency: 1.67s
2026-01-10T18:16:46.982417147Z [err]  2026-01-10 18:16:46,488 - server - INFO - ‚úÖ LLM finished in 1769ms, TTS tasks already running in background
2026-01-10T18:16:46.982424506Z [err]  2026-01-10 18:16:46,489 - server - INFO - üéµ Streaming 3 TTS chunks as they complete...
2026-01-10T18:16:46.982429771Z [err]  2026-01-10 18:16:46,489 - server - INFO - üöÄ Persistent TTS: Audio already streaming in background!
2026-01-10T18:16:46.982434435Z [err]  2026-01-10 18:16:46,489 - server - INFO -    3 sentences queued and playing seamlessly
2026-01-10T18:16:46.982439682Z [err]  2026-01-10 18:16:46,489 - server - INFO - ‚úÖ All 3 persistent TTS streams completed
2026-01-10T18:16:46.982444622Z [err]  2026-01-10 18:16:46,489 - server - INFO - ‚úÖ Agent generation complete (persistent TTS) - response window closed
2026-01-10T18:16:46.982450130Z [err]  2026-01-10 18:16:46,489 - server - INFO - ‚è±Ô∏è  FIRST AUDIO STARTED: 1770ms from user stop üöÄ
2026-01-10T18:16:46.982455959Z [err]  2026-01-10 18:16:46,489 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:46.982461344Z [err]  2026-01-10 18:16:46,489 - server - INFO - ‚úÖ Agent generation complete - response window closed
2026-01-10T18:16:46.982466237Z [err]  2026-01-10 18:16:46,489 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2026-01-10T18:16:46.982471347Z [err]  2026-01-10 18:16:46,489 - server - INFO - ‚è±Ô∏è  [TIMING] ==== E2E LATENCY SUMMARY ====
2026-01-10T18:16:46.982476243Z [err]  2026-01-10 18:16:46,489 - server - INFO - ‚è±Ô∏è  [TIMING] STT: 5ms (provider: soniox, model: stt-rt-v3)
2026-01-10T18:16:46.982483327Z [err]  2026-01-10 18:16:46,489 - server - INFO - ‚è±Ô∏è  [TIMING] LLM_TOTAL: 1769ms (provider: grok, model: grok-4-1-fast-non-reasoning)
2026-01-10T18:16:46.982488415Z [err]  2026-01-10 18:16:46,489 - server - INFO - ‚è±Ô∏è  [TIMING] TTS_TOTAL: 172ms (provider: elevenlabs, websocket: False)
2026-01-10T18:16:46.984828329Z [err]  2026-01-10 18:16:46,489 - server - INFO - ‚è±Ô∏è  [TIMING] E2E_TOTAL: 1770ms (user stopped ‚Üí play_audio_url called)
2026-01-10T18:16:46.984838214Z [err]  2026-01-10 18:16:46,489 - server - INFO - ‚è±Ô∏è  [TIMING] ‚ö†Ô∏è NOTE: E2E_TOTAL does not include:
2026-01-10T18:16:46.984845576Z [err]  2026-01-10 18:16:46,489 - server - INFO - ‚è±Ô∏è  [TIMING]   - Telnyx processing time (~50-200ms)
2026-01-10T18:16:46.984852066Z [err]  2026-01-10 18:16:46,489 - server - INFO - ‚è±Ô∏è  [TIMING]   - Network latency to user's phone (~50-150ms)
2026-01-10T18:16:46.984859371Z [err]  2026-01-10 18:16:46,489 - server - INFO - ‚è±Ô∏è  [TIMING]   - Phone audio buffering (~50-200ms)
2026-01-10T18:16:46.984866051Z [err]  2026-01-10 18:16:46,489 - server - INFO - ‚è±Ô∏è  [TIMING]   - TOTAL MISSING: ~150-550ms typically
2026-01-10T18:16:46.984871123Z [err]  2026-01-10 18:16:46,489 - server - INFO - ‚è±Ô∏è  [TIMING]   - REAL USER LATENCY: 2070ms estimated
2026-01-10T18:16:46.984876773Z [err]  2026-01-10 18:16:46,490 - server - INFO - ‚è±Ô∏è  [TIMING] RESPONSE_TEXT: 160 chars, 3 sentences
2026-01-10T18:16:46.984881929Z [err]  2026-01-10 18:16:46,490 - server - INFO - ‚è±Ô∏è  [TIMING] USER_INPUT: 'I don't like scam s....'
2026-01-10T18:16:46.984888198Z [err]  2026-01-10 18:16:46,490 - server - INFO - ‚è±Ô∏è  [TIMING] AI_RESPONSE: '[S] I get why you might think that. We've helped over seven ...'
2026-01-10T18:16:46.984894262Z [err]  2026-01-10 18:16:46,490 - server - INFO - ‚è±Ô∏è  [TIMING] ==========================
2026-01-10T18:16:46.984901237Z [err]  2026-01-10 18:16:46,490 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2026-01-10T18:16:46.984908516Z [err]  2026-01-10 18:16:46,538 - dead_air_monitor - INFO - ‚è±Ô∏è Playback expected end time passed (2.9s ago), marking agent as done speaking
2026-01-10T18:16:46.984915486Z [err]  2026-01-10 18:16:46,538 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1768069006.538352 for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:46.989047656Z [err]  2026-01-10 18:16:46,538 - core_calling_service - INFO - ü§ñ Agent stopped speaking for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:46.989067537Z [err]  2026-01-10 18:16:46,600 - persistent_tts_service - INFO - üì§ Sending 14861 bytes of audio (93 chunks, 1.9s duration) via WebSocket
2026-01-10T18:16:46.989078185Z [err]  2026-01-10 18:16:46,600 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:16:46.989084614Z [err]  2026-01-10 18:16:46,600 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.9s (total: 1.9s from now)
2026-01-10T18:16:46.989091503Z [err]  2026-01-10 18:16:46,600 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768069006.601 (chunk 1/93, 160 bytes)
2026-01-10T18:16:46.989098626Z [err]  2026-01-10 18:16:46,678 - server - INFO - üìù Saved assistant transcript and latency to database (Node: Node ID: N003B_DeframeInitialObjection_V7_GoalOriented, Dead Air: 1946ms)
2026-01-10T18:16:46.989105559Z [err]  2026-01-10 18:16:46,679 - server - INFO - üîä Agent finished generating, 0 playbacks active - waiting for webhooks to close window and start silence tracking
2026-01-10T18:16:46.989112142Z [err]  2026-01-10 18:16:46,679 - server - INFO - üîç END CALL CHECK: should_end_call=False, max_checkins=False, max_duration=False
2026-01-10T18:16:46.992714529Z [err]  2026-01-10 18:16:46,987 - server - INFO - üì§ Audio flowing: 1829 packets sent to Soniox (5s update)
2026-01-10T18:16:49.036887289Z [err]  2026-01-10 18:16:48,169 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 93 CHUNKS SENT TO TELNYX in 1568ms (audio duration: 1.9s, paced after 10 chunks)
2026-01-10T18:16:49.036898338Z [err]  2026-01-10 18:16:48,169 - persistent_tts_service - INFO - ‚úÖ Sent 93 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:16:49.036908088Z [err]  2026-01-10 18:16:48,169 - persistent_tts_service - INFO - üì§ Sending 11888 bytes of audio (75 chunks, 1.5s duration) via WebSocket
2026-01-10T18:16:49.036916216Z [err]  2026-01-10 18:16:48,169 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:16:49.036924593Z [err]  2026-01-10 18:16:48,169 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.5s (total: 1.8s from now)
2026-01-10T18:16:49.036932842Z [err]  2026-01-10 18:16:48,169 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768069008.170 (chunk 1/75, 160 bytes)
2026-01-10T18:16:50.137356496Z [err]  2026-01-10 18:16:49,378 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 75 CHUNKS SENT TO TELNYX in 1209ms (audio duration: 1.5s, paced after 10 chunks)
2026-01-10T18:16:50.137364590Z [err]  2026-01-10 18:16:49,378 - persistent_tts_service - INFO - ‚úÖ Sent 75 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:16:50.137373610Z [err]  2026-01-10 18:16:49,378 - persistent_tts_service - INFO - üì§ Sending 13793 bytes of audio (87 chunks, 1.7s duration) via WebSocket
2026-01-10T18:16:50.137380824Z [err]  2026-01-10 18:16:49,378 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:16:50.137387615Z [err]  2026-01-10 18:16:49,378 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.7s (total: 2.3s from now)
2026-01-10T18:16:50.137394302Z [err]  2026-01-10 18:16:49,379 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768069009.379 (chunk 1/87, 160 bytes)
2026-01-10T18:16:50.137401760Z [err]  2026-01-10 18:16:50,050 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (1.6s left)
2026-01-10T18:16:51.116450363Z [err]  2026-01-10 18:16:50,553 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (1.1s left)
2026-01-10T18:16:51.116455395Z [err]  2026-01-10 18:16:50,816 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 87 CHUNKS SENT TO TELNYX in 1437ms (audio duration: 1.7s, paced after 10 chunks)
2026-01-10T18:16:51.116463776Z [err]  2026-01-10 18:16:50,817 - persistent_tts_service - INFO - ‚úÖ Sent 87 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:16:51.116470028Z [err]  2026-01-10 18:16:50,817 - persistent_tts_service - INFO - üì§ Sending 4040 bytes of audio (26 chunks, 0.5s duration) via WebSocket
2026-01-10T18:16:51.116475539Z [err]  2026-01-10 18:16:50,817 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:16:51.116480792Z [err]  2026-01-10 18:16:50,817 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +0.5s (total: 1.4s from now)
2026-01-10T18:16:51.116485957Z [err]  2026-01-10 18:16:50,817 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768069010.817 (chunk 1/26, 160 bytes)
2026-01-10T18:16:51.122313334Z [err]  2026-01-10 18:16:51,117 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 26 CHUNKS SENT TO TELNYX in 300ms (audio duration: 0.5s, paced after 10 chunks)
2026-01-10T18:16:51.122331762Z [err]  2026-01-10 18:16:51,118 - persistent_tts_service - INFO - ‚úÖ Sent 26 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:16:51.122342431Z [err]  2026-01-10 18:16:51,118 - persistent_tts_service - INFO - üì§ Sending 11889 bytes of audio (75 chunks, 1.5s duration) via WebSocket
2026-01-10T18:16:51.122351779Z [err]  2026-01-10 18:16:51,118 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:16:51.122362325Z [err]  2026-01-10 18:16:51,118 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.5s (total: 2.5s from now)
2026-01-10T18:16:51.122371485Z [err]  2026-01-10 18:16:51,118 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768069011.118 (chunk 1/75, 160 bytes)
2026-01-10T18:16:51.828764399Z [err]  2026-01-10 18:16:51,363 - server - INFO - üìû Telnyx WebSocket disconnected. Sent 2041 total packets
2026-01-10T18:16:51.828770816Z [err]  [2026-01-10 18:16:51 +0000] [3] [INFO] connection closed
2026-01-10T18:16:51.828776884Z [err]  2026-01-10 18:16:51,379 - persistent_tts_service - ERROR - ‚ùå Error sending audio via WebSocket: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2026-01-10T18:16:51.828785007Z [err]  2026-01-10 18:16:51,379 - persistent_tts_service - INFO - üì§ Sending 14860 bytes of audio (93 chunks, 1.9s duration) via WebSocket
2026-01-10T18:16:51.828791507Z [err]  2026-01-10 18:16:51,379 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:16:51.828797647Z [err]  2026-01-10 18:16:51,379 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.9s (total: 4.1s from now)
2026-01-10T18:16:51.828804290Z [err]  2026-01-10 18:16:51,379 - persistent_tts_service - ERROR - ‚ùå Error sending audio via WebSocket: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2026-01-10T18:16:51.828811308Z [inf]  100.64.0.10:25224 - "POST /api/telnyx/webhook HTTP/1.1" 200
2026-01-10T18:16:51.828817152Z [err]  2026-01-10 18:16:51,624 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2026-01-10T18:16:51.828822848Z [err]  2026-01-10 18:16:51,624 - server - INFO - üì® Full payload: {'data': {'event_type': 'streaming.stopped', 'id': '0da8940b-a6c3-4413-bc4e-8c106b830026', 'occurred_at': '2026-01-10T18:16:51.294341Z', 'payload': {'call_control_id': 'v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ', 'call_leg_id': '6e00702c-ee50-11f0-b598-02420aef96a0', 'call_session_id': '6dfdd704-ee50-11f0-8aaf-02420aef96a0', 'client_state': None, 'connection_id': '2777245537294877821', 'stream_id': '6628eceb-bd21-44cf-9b70-156a74f92ff0', 'stream_params': {'stream_track': 'inbound', 'stream_url': 'wss://api.li-ai.org/api/telnyx/audio-stream'}, 'stream_type': 'websocket'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2026-01-10T18:16:51.829194397Z [err]  2026-01-10 18:16:51,624 - server - INFO - üéØ Event type: streaming.stopped, Call ID: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:51.829201379Z [err]  2026-01-10 18:16:51,624 - server - INFO - üì® ================================================
2026-01-10T18:16:51.836804657Z [err]  2026-01-10 18:16:51,832 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2026-01-10T18:16:51.836814029Z [err]  2026-01-10 18:16:51,832 - server - INFO - üì® Full payload: {'data': {'event_type': 'call.playback.ended', 'id': '28c93e50-ce33-49b6-8956-6440d05d4445', 'occurred_at': '2026-01-10T18:16:51.224116Z', 'payload': {'call_control_id': 'v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ', 'call_leg_id': '6e00702c-ee50-11f0-b598-02420aef96a0', 'call_session_id': '6dfdd704-ee50-11f0-8aaf-02420aef96a0', 'client_state': None, 'connection_id': '2777245537294877821', 'end_time': '2026-01-10T18:16:51.224116Z', 'media_name': None, 'media_url': 'api.li-ai.org/api/tts-audio/comfort_noise_continuous.mp3', 'overlay': True, 'playback_id': 'HTTn9hA8CQ', 'status': 'call_hangup', 'status_detail': ''}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2026-01-10T18:16:51.836820773Z [err]  2026-01-10 18:16:51,832 - server - INFO - üéØ Event type: call.playback.ended, Call ID: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:51.837136542Z [err]  2026-01-10 18:16:51,832 - server - INFO - üì® ================================================
2026-01-10T18:16:51.837144818Z [err]  2026-01-10 18:16:51,832 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2026-01-10T18:16:51.837151331Z [err]  2026-01-10 18:16:51,832 - server - INFO - üì® Full payload: {'data': {'event_type': 'call.hangup', 'id': 'c840db1f-251a-44f7-98f0-5254ea3bb7b2', 'occurred_at': '2026-01-10T18:16:51.184105Z', 'payload': {'call_control_id': 'v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ', 'call_leg_id': '6e00702c-ee50-11f0-b598-02420aef96a0', 'call_quality_stats': {'inbound': {'jitter_max_variance': '21.82', 'jitter_packet_count': '0', 'mos': '4.49', 'packet_count': '2082', 'skip_packet_count': '23'}, 'outbound': {'packet_count': '2054', 'skip_packet_count': '0'}}, 'call_session_id': '6dfdd704-ee50-11f0-8aaf-02420aef96a0', 'client_state': None, 'connection_id': '2777245537294877821', 'end_time': '2026-01-10T18:16:51.184105Z', 'from': '+14048000152', 'hangup_cause': 'normal_clearing', 'hangup_source': 'callee', 'sip_hangup_cause': '200', 'start_time': '2026-01-10T18:16:06.004103Z', 'to': '+17708336397'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2026-01-10T18:16:51.838987860Z [err]  2026-01-10 18:16:51,832 - server - INFO - üéØ Event type: call.hangup, Call ID: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:51.839000603Z [err]  2026-01-10 18:16:51,832 - server - INFO - üì® ================================================
2026-01-10T18:16:51.839005894Z [err]  2026-01-10 18:16:51,832 - server - INFO - üìû Call ended: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:51.839011069Z [err]  2026-01-10 18:16:51,832 - server - INFO - üìû Hangup cause: normal_clearing
2026-01-10T18:16:51.839016035Z [err]  2026-01-10 18:16:51,834 - redis_service - INFO - ‚ûñ Removed playback HTTn9hA8CQ, 0 remaining for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:51.839021401Z [err]  2026-01-10 18:16:51,834 - server - INFO - üîä Redis: Removed playback HTTn9hA8CQ, 0 remaining
2026-01-10T18:16:51.839026717Z [err]  2026-01-10 18:16:51,834 - server - INFO - üîä ALL PLAYBACKS FINISHED (via Redis) - attempting to start silence timer
2026-01-10T18:16:51.839030752Z [err]  2026-01-10 18:16:51,835 - server - INFO - ‚úÖ Set 'agent_done_speaking' flag in Redis for worker with session to detect
2026-01-10T18:16:51.839034965Z [err]  2026-01-10 18:16:51,835 - server - INFO - ‚úÖ Found session in active_telnyx_calls: agent_speaking=False, user_speaking=False
2026-01-10T18:16:51.839039189Z [err]  2026-01-10 18:16:51,835 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1768069011.8356686 for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:51.839043991Z [err]  2026-01-10 18:16:51,835 - server - INFO - ‚è±Ô∏è Silence timer STARTED (memory fallback, agent wasn't marked as speaking)
2026-01-10T18:16:51.839049214Z [inf]  100.64.0.11:31294 - "POST /api/telnyx/webhook HTTP/1.1" 200
2026-01-10T18:16:52.025065549Z [err]  2026-01-10 18:16:52,016 - server - INFO - üìù Updated call log: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:52.116499517Z [err]  2026-01-10 18:16:52,112 - server - INFO - ‚úÖ Finalized call log: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ (duration=41s, status=completed)
2026-01-10T18:16:53.163609483Z [err]  2026-01-10 18:16:53,115 - server - INFO - ‚úÖ Closed persistent TTS session for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:53.163628270Z [err]  2026-01-10 18:16:53,115 - server - INFO - ‚úÖ Closed CallSession for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:53.163635679Z [err]  2026-01-10 18:16:53,116 - redis_service - INFO - üßπ Deleted call data from Redis: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:53.163835691Z [err]  2026-01-10 18:16:53,115 - server - INFO - üìá [HANGUP] Agent info keys: None
2026-01-10T18:16:53.163845027Z [err]  2026-01-10 18:16:53,115 - server - INFO - üöÄ Triggered QC analysis for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:53.163853511Z [err]  2026-01-10 18:16:53,115 - server - INFO - üìä Triggered Campaign QC for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:53.163862159Z [err]  2026-01-10 18:16:53,115 - server - INFO - üìá Triggered CRM update for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:53.163962555Z [err]  2026-01-10 18:16:52,744 - server - INFO - üìä Auto-added call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ to campaign b7bd9ce7-2722-4c61-a2fc-ca1fb127d7b8
2026-01-10T18:16:53.163973754Z [err]  2026-01-10 18:16:52,929 - server - INFO - üì§ Sending post-call webhook to: https://n8n.outlier-agency.com/webhook/2adb150a-9e08-4053-9fa4-e47df18bf39b
2026-01-10T18:16:53.163980253Z [err]  2026-01-10 18:16:52,934 - redis_service - INFO - üì• Retrieved call data from Redis: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:53.163987029Z [err]  2026-01-10 18:16:52,934 - server - INFO - üìá [HANGUP] Data source: redis=Yes, memory=Yes
2026-01-10T18:16:53.163993970Z [err]  2026-01-10 18:16:52,934 - server - INFO - üìá [HANGUP] Missing data from cache, checking MongoDB call_logs...
2026-01-10T18:16:53.163999933Z [err]  2026-01-10 18:16:52,990 - httpx - INFO - HTTP Request: POST https://n8n.outlier-agency.com/webhook/2adb150a-9e08-4053-9fa4-e47df18bf39b "HTTP/1.1 530 <none>"
2026-01-10T18:16:53.164005870Z [err]  2026-01-10 18:16:52,992 - server - WARNING - ‚ö†Ô∏è Post-call webhook returned status 530: <!doctype html>
2026-01-10T18:16:53.164012214Z [err]  <!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en-US"> <![endif]-->
2026-01-10T18:16:53.164021195Z [err]  <!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en-US"> <![endif]-->
2026-01-10T18:16:53.164029156Z [err]  <!--[if IE 8]>    <html class="no-
2026-01-10T18:16:53.164035792Z [err]  2026-01-10 18:16:53,027 - server - INFO - üìá [HANGUP] Found call_log in MongoDB, extracting missing data...
2026-01-10T18:16:53.164042746Z [err]  2026-01-10 18:16:53,114 - server - INFO - üìá [HANGUP] After MongoDB fallback: user_id=dcafa642-6136-4096-b77d-a4cb99a62651, agent_id=bbeda238-e8d9-4d8c-b93b-1b7694581adb, to_number=+17708336397
2026-01-10T18:16:53.164049551Z [err]  2026-01-10 18:16:53,114 - server - INFO - üìá [HANGUP] Final extracted data: user_id=dcafa642-6136-4096-b77d-a4cb99a62651, agent_id=bbeda238-e8d9-4d8c-b93b-1b7694581adb, to_number=+17708336397, lead_id=None, agent_name=JK First Caller-optimizer3
2026-01-10T18:16:53.167556135Z [err]  2026-01-10 18:16:53,116 - server - INFO - üßπ Cleaned up call session from Redis and memory: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:53.167568515Z [inf]  100.64.0.11:31298 - "POST /api/telnyx/webhook HTTP/1.1" 200
2026-01-10T18:16:53.167576886Z [err]  2026-01-10 18:16:53,117 - server - INFO - üîç Starting QC analysis for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:53.167583655Z [err]  2026-01-10 18:16:53,117 - server - INFO - üîç [AUTO-QC] Starting campaign QC check for call=v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ, user=dcafa642-6136-4096-b77d-a4cb99a62651, agent=bbeda238-e8d9-4d8c-b93b-1b7694581adb
2026-01-10T18:16:53.167591250Z [err]  2026-01-10 18:16:53,119 - server - INFO - üìá CRM update starting for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ: to_number=+17708336397, user_id=dcafa642-6136-4096-b77d-a4cb99a62651
2026-01-10T18:16:53.167927808Z [err]  2026-01-10 18:16:53,119 - server - INFO - üìá Normalized phone: +17708336397
2026-01-10T18:16:53.167935999Z [err]  2026-01-10 18:16:53,132 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2026-01-10T18:16:53.168044663Z [err]  2026-01-10 18:16:53,132 - server - INFO - üì® Full payload: {'data': {'event_type': 'call.recording.saved', 'id': '9eb5451f-cd41-4774-b0a6-bca41ad208ad', 'occurred_at': '2026-01-10T18:16:52.715400Z', 'payload': {'call_control_id': 'v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ', 'call_leg_id': '6e00702c-ee50-11f0-b598-02420aef96a0', 'call_session_id': '6dfdd704-ee50-11f0-8aaf-02420aef96a0', 'channels': 'dual', 'client_state': None, 'connection_id': '2777245537294877821', 'end_time': '2026-01-10T18:16:51.284698Z', 'format': 'mp3', 'public_recording_urls': {}, 'recording_ended_at': '2026-01-10T18:16:51.284698Z', 'recording_id': '22965a66-63c3-4b6e-9375-5bd52b9e5f65', 'recording_started_at': '2026-01-10T18:16:12.518301Z', 'recording_urls': {'mp3': 'https://s3.amazonaws.com/telephony-recorder-prod/227803fb-1717-407d-9bd5-fd04aa27c656/2026-01-10/6e00702c-ee50-11f0-b598-02420aef96a0-1768068971602106.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIASDC5E2MJDPKMH7UW%2F20260110%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20260110T181652Z&X-Amz-Expires=600&X-Amz-SignedHeaders=host&X-Amz-Signature=22f1731c164909c15b29d3b2e495030ac5ab28043cfde183bb7241463f1fae01'}, 'start_time': '2026-01-10T18:16:12.518301Z'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2026-01-10T18:16:53.168051359Z [err]  2026-01-10 18:16:53,132 - server - INFO - üéØ Event type: call.recording.saved, Call ID: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:53.168057647Z [err]  2026-01-10 18:16:53,132 - server - INFO - üì® ================================================
2026-01-10T18:16:53.168064277Z [err]  2026-01-10 18:16:53,132 - server - INFO - üéôÔ∏è Recording saved for call: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:54.132271005Z [err]  2026-01-10 18:16:53,209 - server - INFO - üìù Converted transcript from 9 messages to 718 characters
2026-01-10T18:16:54.132282583Z [err]  2026-01-10 18:16:53,229 - server - INFO - üíæ Saved recording URL and ID to database: 22965a66-63c3-4b6e-9375-5bd52b9e5f65
2026-01-10T18:16:54.132292613Z [err]  2026-01-10 18:16:53,229 - server - INFO - ‚úÖ Entering dual-channel processing
2026-01-10T18:16:54.132301754Z [err]  2026-01-10 18:16:53,229 - server - INFO - üì• Downloading DUAL-CHANNEL recording...
2026-01-10T18:16:54.132317780Z [err]  2026-01-10 18:16:53,296 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2026-01-10T18:16:54.132335288Z [err]  2026-01-10 18:16:53,383 - qc_agents.orchestrator - INFO - No QC agent configs found, using defaults with API key
2026-01-10T18:16:54.132347574Z [err]  2026-01-10 18:16:53,134 - redis_service - WARNING - ‚ö†Ô∏è Call data not found in Redis: v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:54.132352773Z [err]  2026-01-10 18:16:53,469 - qc_agents.orchestrator - INFO - Using QC model: gpt-4o
2026-01-10T18:16:54.132362864Z [err]  2026-01-10 18:16:53,469 - qc_agents.orchestrator - INFO - ‚úÖ Initialized 3 QC agents for user dcafa642-6136-4096-b77d-a4cb99a62651
2026-01-10T18:16:54.132366266Z [err]  2026-01-10 18:16:53,134 - server - INFO - üîç Recording check: download_url=True, channels=dual, recording_id=22965a66-63c3-4b6e-9375-5bd52b9e5f65, call_data=True
2026-01-10T18:16:54.132397327Z [err]  2026-01-10 18:16:53,469 - qc_agents.orchestrator - INFO - üîç Running Commitment Detector on call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:54.132406568Z [err]  2026-01-10 18:16:53,558 - httpx - INFO - HTTP Request: GET https://s3.amazonaws.com/telephony-recorder-prod/227803fb-1717-407d-9bd5-fd04aa27c656/2026-01-10/6e00702c-ee50-11f0-b598-02420aef96a0-1768068971602106.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIASDC5E2MJDPKMH7UW%2F20260110%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20260110T181652Z&X-Amz-Expires=600&X-Amz-SignedHeaders=host&X-Amz-Signature=22f1731c164909c15b29d3b2e495030ac5ab28043cfde183bb7241463f1fae01 "HTTP/1.1 200 OK"
2026-01-10T18:16:54.140077326Z [err]  2026-01-10 18:16:53,742 - server - INFO - ‚úÖ Downloaded 155314 bytes
2026-01-10T18:16:54.140089942Z [err]  2026-01-10 18:16:53,748 - server - INFO - üîç [AUTO-QC] Call log found: transcript_turns=9, logs_count=10, status=completed
2026-01-10T18:16:54.140110540Z [err]  2026-01-10 18:16:53,761 - server - INFO - üìá CRM: Total variables collected: []
2026-01-10T18:16:54.140119359Z [err]  2026-01-10 18:16:53,954 - server - INFO - üåê Created WebSocket stream URL: wss://api.li-ai.org/api/telnyx/audio-stream
2026-01-10T18:16:54.140127388Z [err]  2026-01-10 18:16:53,957 - server - INFO - üìá CRM: Updated lead 288a0e8e-ff8b-4249-b2ea-b84e5cb9929e (+17708336397) - fields: ['updated_at', 'last_contact', 'last_agent_id', 'last_agent_name']
2026-01-10T18:16:54.140138071Z [err]  2026-01-10 18:16:54,052 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2026-01-10T18:16:54.140156574Z [err]  2026-01-10 18:16:54,132 - server - INFO - üîç [AUTO-QC] Agent found: name=JK First Caller-optimizer3, has_auto_qc_settings=True
2026-01-10T18:16:54.158287102Z [err]  2026-01-10 18:16:54,148 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2026-01-10T18:16:55.244027433Z [err]  2026-01-10 18:16:54,191 - telnyx_service - INFO - Telnyx service initialized with connection: 2777245537294877821
2026-01-10T18:16:55.244034009Z [err]  2026-01-10 18:16:54,191 - telnyx_service - INFO - üìû Initiating outbound call from +14048000152 to +17708336397
2026-01-10T18:16:55.244040077Z [err]  2026-01-10 18:16:54,191 - telnyx_service - INFO - ü§ñ Enabling AMD (premium mode)
2026-01-10T18:16:55.244046708Z [err]  2026-01-10 18:16:54,191 - telnyx_service - INFO - üåê Adding streaming parameters: wss://api.li-ai.org/api/telnyx/audio-stream
2026-01-10T18:16:55.244055300Z [err]  2026-01-10 18:16:54,350 - server - INFO - ‚úÖ Split into 2 channels
2026-01-10T18:16:55.244062432Z [err]  2026-01-10 18:16:54,351 - server - INFO - üé§ Using STT provider: soniox for interruption detection
2026-01-10T18:16:55.244068586Z [err]  2026-01-10 18:16:54,351 - server - INFO - üìä Channel 0: 851884 bytes
2026-01-10T18:16:55.244076405Z [err]  2026-01-10 18:16:54,441 - server - INFO - Soniox: Using user's DB API key (first 10 chars): b999f22d7b...
2026-01-10T18:16:55.244081922Z [err]  2026-01-10 18:16:54,441 - server - INFO - Soniox: Uploading audio file (0.81 MB)...
2026-01-10T18:16:55.244088687Z [err]  2026-01-10 18:16:54,442 - server - INFO - Soniox: Running curl upload command (HTTP/1.1)...
2026-01-10T18:16:55.244095385Z [err]  2026-01-10 18:16:54,445 - server - ERROR - Error transcribing audio file with Soniox: [Errno 2] No such file or directory: 'curl'
2026-01-10T18:16:55.244104376Z [err]  2026-01-10 18:16:54,448 - server - ERROR - Traceback (most recent call last):
2026-01-10T18:16:55.244111914Z [err]    File "/app/backend/server.py", line 6201, in transcribe_audio_soniox_file
2026-01-10T18:16:55.244124262Z [err]      result = subprocess.run(curl_cmd, capture_output=True, text=True, timeout=300)
2026-01-10T18:16:55.244130809Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-10T18:16:56.077485364Z [err]  2026-01-10 18:16:54,538 - server - INFO - Soniox: Running curl upload command (HTTP/1.1)...
2026-01-10T18:16:56.077499477Z [err]  2026-01-10 18:16:54,540 - server - ERROR - Error transcribing audio file with Soniox: [Errno 2] No such file or directory: 'curl'
2026-01-10T18:16:56.077523576Z [err]      with Popen(*popenargs, **kwargs) as process:
2026-01-10T18:16:56.077535200Z [err]           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-10T18:16:56.077540767Z [err]  FileNotFoundError: [Errno 2] No such file or directory: 'curl'
2026-01-10T18:16:56.077553747Z [err]  
2026-01-10T18:16:56.077555946Z [err]    File "/usr/local/lib/python3.11/subprocess.py", line 548, in run
2026-01-10T18:16:56.077556781Z [err]    File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
2026-01-10T18:16:56.077560144Z [err]      self._execute_child(args, executable, preexec_fn, close_fds,
2026-01-10T18:16:56.077563813Z [err]  2026-01-10 18:16:54,448 - server - INFO - ‚ùå Channel 0: No speech
2026-01-10T18:16:56.077571326Z [err]  2026-01-10 18:16:54,448 - server - INFO - üìä Channel 1: 851884 bytes
2026-01-10T18:16:56.077578638Z [err]    File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
2026-01-10T18:16:56.077579199Z [err]  2026-01-10 18:16:54,536 - server - INFO - Soniox: Using user's DB API key (first 10 chars): b999f22d7b...
2026-01-10T18:16:56.077589388Z [err]      raise child_exception_type(errno_num, err_msg, err_filename)
2026-01-10T18:16:56.077606376Z [err]  2026-01-10 18:16:54,536 - server - INFO - Soniox: Uploading audio file (0.81 MB)...
2026-01-10T18:16:56.077680386Z [err]  2026-01-10 18:16:54,541 - server - ERROR - Traceback (most recent call last):
2026-01-10T18:16:56.077692195Z [err]    File "/app/backend/server.py", line 6201, in transcribe_audio_soniox_file
2026-01-10T18:16:56.077699538Z [err]      result = subprocess.run(curl_cmd, capture_output=True, text=True, timeout=300)
2026-01-10T18:16:56.082651409Z [err]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-10T18:16:56.082659057Z [err]    File "/usr/local/lib/python3.11/subprocess.py", line 548, in run
2026-01-10T18:16:56.082667310Z [err]      with Popen(*popenargs, **kwargs) as process:
2026-01-10T18:16:56.082674694Z [err]           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-10T18:16:56.082681789Z [err]    File "/usr/local/lib/python3.11/subprocess.py", line 1026, in __init__
2026-01-10T18:16:56.082688949Z [err]      self._execute_child(args, executable, preexec_fn, close_fds,
2026-01-10T18:16:56.082696237Z [err]    File "/usr/local/lib/python3.11/subprocess.py", line 1955, in _execute_child
2026-01-10T18:16:56.082704185Z [err]      raise child_exception_type(errno_num, err_msg, err_filename)
2026-01-10T18:16:56.082716909Z [err]  FileNotFoundError: [Errno 2] No such file or directory: 'curl'
2026-01-10T18:16:56.082724630Z [err]  
2026-01-10T18:16:56.082734262Z [err]  2026-01-10 18:16:54,542 - server - INFO - ‚ùå Channel 1: No speech
2026-01-10T18:16:56.082740736Z [err]  2026-01-10 18:16:54,542 - server - WARNING - ‚ö†Ô∏è No speech in any channel
2026-01-10T18:16:56.082747804Z [inf]  100.64.0.8:24040 - "POST /api/telnyx/webhook HTTP/1.1" 200
2026-01-10T18:16:56.082755151Z [err]  2026-01-10 18:16:54,810 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls "HTTP/1.1 200 OK"
2026-01-10T18:16:56.082762412Z [err]  2026-01-10 18:16:54,811 - telnyx_service - INFO - ‚úÖ Call initiated: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:16:56.082770366Z [err]  2026-01-10 18:16:54,812 - server - INFO - üìä [AUTO-QC] Running full QC analysis: call=v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ ‚Üí campaign=b7bd9ce7-2722-4c61-a2fc-ca1fb127d7b8 (tech=True, script=True, tonality=True)
2026-01-10T18:16:56.082776704Z [err]  2026-01-10 18:16:54,812 - server - INFO - üìä [AUTO-QC] LLM settings: provider=grok, model=grok-3
2026-01-10T18:16:56.082947847Z [err]  2026-01-10 18:16:54,813 - server - ERROR - ‚ùå [AUTO-QC] Error in campaign QC for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ: run_full_qc_analysis() got an unexpected keyword argument 'llm_provider'
2026-01-10T18:16:56.082961329Z [err]  2026-01-10 18:16:54,814 - server - ERROR - ‚ùå [AUTO-QC] Traceback: Traceback (most recent call last):
2026-01-10T18:16:56.082967303Z [err]    File "/app/backend/server.py", line 10079, in trigger_campaign_qc_for_call
2026-01-10T18:16:56.082972398Z [err]      await run_full_qc_analysis(
2026-01-10T18:16:56.082977947Z [err]            ^^^^^^^^^^^^^^^^^^^^^
2026-01-10T18:16:56.082983873Z [err]  TypeError: run_full_qc_analysis() got an unexpected keyword argument 'llm_provider'
2026-01-10T18:16:56.082989875Z [err]  
2026-01-10T18:16:56.082995774Z [err]  2026-01-10 18:16:54,910 - server - INFO - üìù Created call log: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:16:56.083001152Z [err]  2026-01-10 18:16:54,910 - server - INFO - üîç DEBUG Call Initiated Webhook (UI Trigger): url='https://n8n.outlier-agency.com/webhook/2adb150a-9e08-4053-9fa4-e47df18bf39b', active=True, should_fire=True
2026-01-10T18:16:56.083007191Z [err]  2026-01-10 18:16:54,910 - server - INFO - üîç DEBUG Agent Settings Webhook Context: {'temperature': 0.2, 'max_tokens': 500, 'tts_speed': 1, 'llm_provider': 'grok', 'tts_provider': 'elevenlabs', 'stt_provider': 'soniox', 'enable_comfort_noise': True, 'dead_air_settings': {'silence_timeout_normal': 7, 'silence_timeout_hold_on': 25, 'max_checkins_before_disconnect': 2, 'max_call_duration': 1500, 'checkin_message': 'Are you still there?'}, 'voicemail_detection': {'enabled': True, 'use_telnyx_amd': True, 'telnyx_amd_mode': 'premium', 'use_llm_detection': True, 'disconnect_on_detection': True}, 'deepgram_settings': {'endpointing': 500, 'vad_turnoff': 250, 'utterance_end_ms': 1000, 'interim_results': True, 'smart_format': True}, 'elevenlabs_settings': {'voice_id': 'J5iaaqzR5zn6HFG4jV3b', 'model': 'eleven_turbo_v2_5', 'stability': 0.6, 'similarity_boost': 0.65, 'style': 0.2, 'speed': 1.1, 'use_speaker_boost': True, 'enable_normalization': True, 'enable_ssml_parsing': True}, 'hume_settings': {'voice_name': 'e7af7ed6-3381-48aa-ab97-49485007470b', 'description': 'warm and friendly', 'speed': 1}, 'sesame_settings': {'speaker_id': 0, 'output_format': 'wav'}, 'melo_settings': {'voice': 'EN-US', 'speed': 1.2, 'clone_wav': None}, 'dia_settings': {'voice': 'S1', 'speed': 1, 'response_format': 'wav'}, 'kokoro_settings': {'voice': 'af_bella', 'speed': 1, 'response_format': 'mp3'}, 'chattts_settings': {'voice': 'female_1', 'speed': 1, 'temperature': 0.3, 'response_format': 'wav'}, 'assemblyai_settings': {'sample_rate': 8000, 'word_boost': [], 'enable_extra_session_information': True, 'disable_partial_transcripts': False, 'threshold': 0, 'end_of_turn_confidence_threshold': 0.8, 'min_end_of_turn_silence_when_confident': 500, 'max_turn_silence': 2000}, 'soniox_settings': {'model': 'stt-rt-v3', 'sample_rate': 8000, 'audio_format': 'mulaw', 'num_channels': 1, 'enable_endpoint_detection': True, 'enable_speaker_diarization': False, 'language_hints': ['en'], 'context': ''}, 'barge_in_settings': {'enable_verbose_barge_in': True, 'word_count_threshold': 10, 'interruption_prompt': 'The user is speaking for a long time. Interrupt them politely but firmly to acknowledge what they said and guide the conversation back to the goal. start by saying an elongated why whhhhyyyy...'}, 'post_call_webhook_url': 'https://n8n.outlier-agency.com/webhook/2adb150a-9e08-4053-9fa4-e47df18bf39b', 'post_call_webhook_active': True, 'call_started_webhook_url': 'https://n8n.outlier-agency.com/webhook/2adb150a-9e08-4053-9fa4-e47df18bf39b', 'call_started_webhook_active': True}
2026-01-10T18:16:56.085785066Z [err]  2026-01-10 18:16:54,910 - server - INFO - üîç DEBUG Call Initiated Webhook: url='https://n8n.outlier-agency.com/webhook/2adb150a-9e08-4053-9fa4-e47df18bf39b', active=True, should_fire=True
2026-01-10T18:16:56.085800021Z [err]  2026-01-10 18:16:54,910 - server - INFO - üì§ Sending call-initiated webhook to: https://n8n.outlier-agency.com/webhook/2adb150a-9e08-4053-9fa4-e47df18bf39b
2026-01-10T18:16:56.085807227Z [err]  2026-01-10 18:16:54,920 - redis_service - INFO - üì¶ Stored call data in Redis: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g (TTL: 3600s)
2026-01-10T18:16:56.085815002Z [err]  2026-01-10 18:16:54,920 - server - INFO - üì¶ Call data stored in Redis and memory
2026-01-10T18:16:56.085820799Z [err]  2026-01-10 18:16:54,920 - server - INFO - üìû Outbound call initiated: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:16:56.085827214Z [inf]  100.64.0.4:58028 - "POST /api/telnyx/call/outbound HTTP/1.1" 200
2026-01-10T18:16:56.085833430Z [err]  2026-01-10 18:16:54,950 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2026-01-10T18:16:56.085839193Z [err]  2026-01-10 18:16:54,950 - server - INFO - üì® Full payload: {'data': {'event_type': 'call.initiated', 'id': '0d131db3-c71a-4151-bc5b-df63588b1344', 'occurred_at': '2026-01-10T18:16:54.698808Z', 'payload': {'call_control_id': 'v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g', 'call_leg_id': '8af960d0-ee50-11f0-9c17-02420aef99a0', 'call_session_id': '8af65dae-ee50-11f0-b860-02420aef99a0', 'client_state': None, 'connection_id': '2777245537294877821', 'direction': 'outgoing', 'from': '+14048000152', 'state': 'bridging', 'to': '+17708336397'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2026-01-10T18:16:56.085848161Z [err]  2026-01-10 18:16:54,950 - server - INFO - üéØ Event type: call.initiated, Call ID: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:16:56.088454101Z [err]  2026-01-10 18:16:54,950 - server - INFO - üì® ================================================
2026-01-10T18:16:56.088464424Z [err]  2026-01-10 18:16:54,950 - server - INFO - üìû Call initiated - Direction: outgoing, From: +14048000152, To: +17708336397
2026-01-10T18:16:56.088471802Z [inf]  100.64.0.9:57274 - "POST /api/telnyx/webhook HTTP/1.1" 200
2026-01-10T18:16:56.088478100Z [err]  2026-01-10 18:16:54,971 - httpx - INFO - HTTP Request: POST https://n8n.outlier-agency.com/webhook/2adb150a-9e08-4053-9fa4-e47df18bf39b "HTTP/1.1 530 <none>"
2026-01-10T18:16:56.088484557Z [err]  2026-01-10 18:16:54,973 - server - WARNING - ‚ö†Ô∏è Call-initiated webhook returned status 530: <!doctype html>
2026-01-10T18:16:56.088491524Z [err]  <!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en-US"> <![endif]-->
2026-01-10T18:16:56.088498073Z [err]  <!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en-US"> <![endif]-->
2026-01-10T18:16:56.088593633Z [err]  <!--[if IE 8]>    <html class="no-
2026-01-10T18:16:56.088607573Z [err]  2026-01-10 18:16:55,060 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 429 Too Many Requests"
2026-01-10T18:16:56.088621192Z [err]  2026-01-10 18:16:55,062 - qc_agents.base_agent - ERROR - Error calling LLM (openai): Client error '429 Too Many Requests' for url 'https://api.openai.com/v1/chat/completions'
2026-01-10T18:16:56.088626447Z [err]  For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429, falling back to patterns
2026-01-10T18:16:56.088637124Z [err]  For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429
2026-01-10T18:16:56.088640422Z [err]  2026-01-10 18:16:55,065 - qc_agents.orchestrator - INFO - üó∫Ô∏è  Running Conversion Pathfinder on call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:56.088711257Z [err]  2026-01-10 18:16:55,062 - qc_agents.commitment_detector - ERROR - Error in CommitmentDetector LLM analysis: Client error '429 Too Many Requests' for url 'https://api.openai.com/v1/chat/completions'
2026-01-10T18:16:56.091662395Z [err]  2026-01-10 18:16:55,070 - core_calling_service - INFO - ‚è∞ Check-in triggered after 8.5s silence (threshold: 7s)
2026-01-10T18:16:56.091672603Z [err]  2026-01-10 18:16:55,071 - core_calling_service - INFO - üí¨ Sending check-in #1/2: Are you still there?
2026-01-10T18:16:56.091680104Z [err]  2026-01-10 18:16:55,071 - dead_air_monitor - INFO - üí¨ Sending check-in after 8.5s silence: Are you still there?
2026-01-10T18:16:56.091687929Z [err]  2026-01-10 18:16:55,071 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:56.091695201Z [err]  2026-01-10 18:16:55,072 - telnyx_service - INFO - üîä Speaking text on call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ: Are you still there?...
2026-01-10T18:16:56.091702901Z [err]  2026-01-10 18:16:55,072 - telnyx_service - INFO - üîç Agent config provided: True
2026-01-10T18:16:56.091709862Z [err]  2026-01-10 18:16:55,072 - telnyx_service - INFO - üîç TTS provider from settings: elevenlabs
2026-01-10T18:16:56.091718881Z [err]  2026-01-10 18:16:55,072 - telnyx_service - INFO - üîç WebSocket TTS: False
2026-01-10T18:16:56.091767080Z [err]  2026-01-10 18:16:55,072 - server - INFO - ‚è±Ô∏è [18:16:55.072] üîä TTS REQUEST START: provider=elevenlabs, user=dcafa642, comfort_noise=True
2026-01-10T18:16:56.091778508Z [err]  2026-01-10 18:16:55,072 - telnyx_service - INFO - üéôÔ∏è Attempting elevenlabs TTS (REST)
2026-01-10T18:16:56.091783524Z [err]  2026-01-10 18:16:55,072 - server - INFO - ‚ö° Using Turbo v2.5 (high quality)
2026-01-10T18:16:56.091791333Z [err]  2026-01-10 18:16:55,072 - server - INFO - üéôÔ∏è ElevenLabs streaming TTS: voice=J5iaaqzR5zn6HFG4jV3b, model=eleven_turbo_v2_5, speed=1.1, normalization=on, ssml=True
2026-01-10T18:16:56.091798624Z [err]  2026-01-10 18:16:55,089 - server - INFO - üîåüîåüîå WEBSOCKET CONNECTION ATTEMPT
2026-01-10T18:16:56.091806717Z [err]  2026-01-10 18:16:55,089 - server - INFO -    Client: Address(host='100.64.0.6', port=35464)
2026-01-10T18:16:56.092951442Z [err]  2026-01-10 18:16:55,089 - server - INFO -    Headers: {'host': 'api.li-ai.org', 'user-agent': 'telnyx-websocket', 'connection': 'Upgrade', 'sec-websocket-key': 'AX43ZEoCzUR3E9sGK/a2MQ==', 'sec-websocket-version': '13', 'upgrade': 'websocket', 'x-forwarded-for': '192.76.120.151', 'x-forwarded-host': 'api.li-ai.org', 'x-forwarded-proto': 'https', 'x-railway-edge': 'railway/us-west2', 'x-railway-request-id': '7yxAIhzUQ02vr1dS2prcFg', 'x-real-ip': '192.76.120.151', 'x-request-start': '1768069014863', 'accept-encoding': 'gzip'}
2026-01-10T18:16:56.092958681Z [err]  2026-01-10 18:16:55,089 - server - INFO -    Path: /api/telnyx/audio-stream
2026-01-10T18:16:56.092964087Z [err]  2026-01-10 18:16:55,089 - server - INFO - üîå Incoming Telnyx WebSocket connection
2026-01-10T18:16:56.092970268Z [err]  [2026-01-10 18:16:55 +0000] [3] [INFO] ('100.64.0.6', 35464) - "WebSocket /api/telnyx/audio-stream" [accepted]
2026-01-10T18:16:56.092975104Z [err]  2026-01-10 18:16:55,089 - server - INFO - ‚úÖ WebSocket accepted, waiting for Telnyx events
2026-01-10T18:16:56.092980280Z [err]  [2026-01-10 18:16:55 +0000] [3] [INFO] connection open
2026-01-10T18:16:56.092984732Z [err]  2026-01-10 18:16:55,162 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2026-01-10T18:16:56.092989060Z [err]  2026-01-10 18:16:55,162 - server - INFO - üì¶ ElevenLabs Request Payload:
2026-01-10T18:16:56.092993503Z [err]  2026-01-10 18:16:55,162 - server - INFO -    Text length: 20 chars
2026-01-10T18:16:56.092999789Z [err]  2026-01-10 18:16:55,162 - server - INFO -    Text content: 'Are you still there?'
2026-01-10T18:16:56.093006507Z [err]  2026-01-10 18:16:55,162 - server - INFO -    Text bytes: b'Are you still there?'
2026-01-10T18:16:56.093012810Z [err]  2026-01-10 18:16:55,162 - server - INFO -    Model: eleven_turbo_v2_5
2026-01-10T18:16:56.093018268Z [err]  2026-01-10 18:16:55,162 - server - INFO -    Voice ID: J5iaaqzR5zn6HFG4jV3b
2026-01-10T18:16:56.095366503Z [err]  2026-01-10 18:16:55,162 - server - INFO -    URL: https://api.elevenlabs.io/v1/text-to-speech/J5iaaqzR5zn6HFG4jV3b/stream
2026-01-10T18:16:56.095376671Z [err]  2026-01-10 18:16:55,162 - server - INFO -    Full data: {'text': 'Are you still there?', 'model_id': 'eleven_turbo_v2_5', 'voice_settings': {'stability': 0.6, 'similarity_boost': 0.65, 'use_speaker_boost': True, 'speed': 1.1, 'style': 0.2}, 'apply_text_normalization': 'on', 'enable_ssml_parsing': True, 'optimize_streaming_latency': 4}
2026-01-10T18:16:56.095383150Z [err]  2026-01-10 18:16:55,162 - server - INFO - üîå Attempting ElevenLabs connection (attempt 1/2)
2026-01-10T18:16:56.095389104Z [err]  2026-01-10 18:16:55,162 - server - INFO -    Timeout: 10.0s
2026-01-10T18:16:56.095394398Z [err]  2026-01-10 18:16:55,175 - server - INFO -    ‚úì HTTP client created (0.013s)
2026-01-10T18:16:56.095401157Z [err]  2026-01-10 18:16:55,175 - server - INFO -    ‚Üí Sending POST request to ElevenLabs (optimize_latency=0)...
2026-01-10T18:16:56.095406642Z [err]  2026-01-10 18:16:55,243 - server - INFO - üì¨ Received Telnyx event: connected
2026-01-10T18:16:56.095412875Z [err]  2026-01-10 18:16:55,243 - server - INFO - üìû Telnyx connected event received, waiting for 'start'...
2026-01-10T18:16:56.095419262Z [err]  2026-01-10 18:16:55,478 - httpx - INFO - HTTP Request: POST https://api.elevenlabs.io/v1/text-to-speech/J5iaaqzR5zn6HFG4jV3b/stream "HTTP/1.1 200 OK"
2026-01-10T18:16:56.095424715Z [err]  2026-01-10 18:16:55,478 - server - INFO -    ‚úì Connection established (0.316s) [TARGET: <200ms]
2026-01-10T18:16:56.095429878Z [err]  2026-01-10 18:16:55,478 - server - INFO -    ‚úì Response status: 200
2026-01-10T18:16:56.095434997Z [err]  2026-01-10 18:16:55,478 - server - INFO -    ‚Üí Streaming audio chunks...
2026-01-10T18:16:56.095440181Z [err]  2026-01-10 18:16:55,490 - server - INFO -    ‚úì FIRST CHUNK received (0.328s, 1115 bytes) [TARGET: <300ms]
2026-01-10T18:16:56.099883201Z [err]  2026-01-10 18:16:55,492 - server - INFO -    ‚úì ALL CHUNKS received: 14 chunks (0.330s)
2026-01-10T18:16:56.099895894Z [err]  2026-01-10 18:16:55,492 - server - INFO -    ‚úì Total audio size: 17599 bytes
2026-01-10T18:16:56.099903295Z [err]  2026-01-10 18:16:55,492 - server - INFO -    üìä TTS API TIMING BREAKDOWN:
2026-01-10T18:16:56.099910508Z [err]  2026-01-10 18:16:55,493 - server - INFO -       - Connection: 316ms
2026-01-10T18:16:56.099917942Z [err]  2026-01-10 18:16:55,493 - server - INFO -       - First chunk: 328ms
2026-01-10T18:16:56.099926302Z [err]  2026-01-10 18:16:55,493 - server - INFO -       - All chunks: 330ms
2026-01-10T18:16:56.099939824Z [err]  2026-01-10 18:16:55,493 - server - INFO -       - Audio generation only: 12ms
2026-01-10T18:16:56.099947967Z [err]  2026-01-10 18:16:55,494 - server - INFO - ‚è±Ô∏è [18:16:55.494] üîä TTS COMPLETE: 421ms, audio_size=17599 bytes
2026-01-10T18:16:56.099961889Z [err]  2026-01-10 18:16:55,494 - server - INFO - üíæ TTS CACHED: elevenlabs:Are you still there?... (17599 bytes)
2026-01-10T18:16:56.099972996Z [err]  2026-01-10 18:16:55,494 - telnyx_service - INFO - ‚è±Ô∏è  TTS generation time: 0.42s
2026-01-10T18:16:56.099980427Z [err]  2026-01-10 18:16:55,495 - telnyx_service - INFO - ‚úÖ Generated 17599 bytes, saved to /tmp/tts_elevenlabs_01b2ec34551c0c3ab527c8199487051c.mp3
2026-01-10T18:16:56.099987639Z [err]  2026-01-10 18:16:55,495 - telnyx_service - INFO - üîó Using audio URL: api.li-ai.org/api/tts-audio/tts_elevenlabs_01b2ec34551c0c3ab527c8199487051c.mp3
2026-01-10T18:16:56.099995030Z [err]  2026-01-10 18:16:55,676 - persistent_tts_service - INFO - üîá [Call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ] FLOOR RELEASED (is_holding_floor=False)
2026-01-10T18:16:56.100004392Z [err]  2026-01-10 18:16:55,767 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ/actions/playback_start "HTTP/1.1 422 Unprocessable Entity"
2026-01-10T18:16:56.103579931Z [err]  2026-01-10 18:16:55,767 - telnyx_service - INFO - ‚è±Ô∏è  Playback API call time: 0.27s
2026-01-10T18:16:56.103605126Z [err]  2026-01-10 18:16:55,768 - telnyx_service - ERROR - ‚ùå Telnyx playback failed: 422 - {
2026-01-10T18:16:56.103617867Z [err]    "errors": [
2026-01-10T18:16:56.103629551Z [err]      {
2026-01-10T18:16:56.103641670Z [err]        "code": "90018",
2026-01-10T18:16:56.103654275Z [err]        "title": "Call has already ended",
2026-01-10T18:16:56.103662295Z [err]        "detail": "This call is no longer active and can't receive commands."
2026-01-10T18:16:56.103671013Z [err]      }
2026-01-10T18:16:56.103679889Z [err]    ]
2026-01-10T18:16:56.103692862Z [err]  }
2026-01-10T18:16:56.103698888Z [err]  2026-01-10 18:16:55,768 - telnyx_service - INFO - üì¢ Using Telnyx built-in TTS
2026-01-10T18:16:56.103707310Z [err]  2026-01-10 18:16:56,033 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ/actions/speak "HTTP/1.1 422 Unprocessable Entity"
2026-01-10T18:16:56.103714582Z [err]  2026-01-10 18:16:56,033 - telnyx_service - ERROR - ‚ùå Error speaking text: Error code: 422 - {'errors': [{'code': '90018', 'title': 'Call has already ended', 'detail': "This call is no longer active and can't receive commands."}]}
2026-01-10T18:16:56.103726921Z [err]  2026-01-10 18:16:56,033 - dead_air_monitor - INFO - ‚úÖ Check-in message sent
2026-01-10T18:16:56.103734367Z [err]  2026-01-10 18:16:56,034 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 429 Too Many Requests"
2026-01-10T18:16:56.103742436Z [err]  2026-01-10 18:16:56,035 - qc_agents.base_agent - ERROR - Error calling LLM (openai): Client error '429 Too Many Requests' for url 'https://api.openai.com/v1/chat/completions'
2026-01-10T18:16:56.103760325Z [err]  For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429
2026-01-10T18:16:56.107402745Z [err]  2026-01-10 18:16:56,035 - qc_agents.conversion_pathfinder - ERROR - Error in ConversionPathfinder LLM analysis: Client error '429 Too Many Requests' for url 'https://api.openai.com/v1/chat/completions'
2026-01-10T18:16:56.107418098Z [err]  For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429, falling back to patterns
2026-01-10T18:16:56.107434601Z [err]  2026-01-10 18:16:56,036 - qc_agents.orchestrator - INFO - ‚≠ê Running Excellence Replicator on call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:57.054057548Z [err]  2026-01-10 18:16:56,536 - dead_air_monitor - INFO - üö© Detected 'agent_done_speaking' flag from webhook - marking agent as done
2026-01-10T18:16:57.054064648Z [err]  2026-01-10 18:16:56,536 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1768069016.5369043 for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:57.054071574Z [err]  2026-01-10 18:16:56,536 - core_calling_service - INFO - ü§ñ Agent stopped speaking for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:57.171230555Z [err]  2026-01-10 18:16:57,167 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 429 Too Many Requests"
2026-01-10T18:16:57.171240973Z [err]  2026-01-10 18:16:57,168 - qc_agents.base_agent - ERROR - Error calling LLM (openai): Client error '429 Too Many Requests' for url 'https://api.openai.com/v1/chat/completions'
2026-01-10T18:16:57.171249053Z [err]  For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429
2026-01-10T18:16:57.171257587Z [err]  2026-01-10 18:16:57,168 - qc_agents.excellence_replicator - ERROR - Error in ExcellenceReplicator analysis: Client error '429 Too Many Requests' for url 'https://api.openai.com/v1/chat/completions'
2026-01-10T18:16:57.171264385Z [err]  For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429
2026-01-10T18:16:58.163415773Z [err]  2026-01-10 18:16:57,272 - qc_agents.orchestrator - INFO - ‚úÖ QC analysis stored for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:58.163423062Z [err]  2026-01-10 18:16:57,273 - server - INFO - ‚úÖ QC analysis completed for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:58.163431639Z [err]  2026-01-10 18:16:57,273 - server - INFO - üìä Scores: Commitment=50, Conversion=40, Excellence=50
2026-01-10T18:16:58.163440121Z [err]  2026-01-10 18:16:57,477 - server - INFO - üìä Updated campaign_calls with QC scores for v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:16:58.163446967Z [err]  2026-01-10 18:16:57,671 - server - INFO - üìà Synced QC scores to lead 288a0e8e-ff8b-4249-b2ea-b84e5cb9929e via phone match
2026-01-10T18:16:58.163454157Z [err]  2026-01-10 18:16:57,767 - server - INFO - üè∑Ô∏è Updated lead status to 'needs_followup' based on risk level 'high'
2026-01-10T18:16:58.163461441Z [err]  2026-01-10 18:16:57,767 - server - ERROR - ‚ùå Error in auto appointment detection for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ: 'str' object has no attribute 'get'
2026-01-10T18:16:59.974773545Z [err]  2026-01-10 18:16:59,421 - server - INFO - üì¨ Received Telnyx event: start
2026-01-10T18:16:59.974786475Z [err]  2026-01-10 18:16:59,421 - server - INFO - üé¨ Stream started for call: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:16:59.974791242Z [err]  2026-01-10 18:16:59,427 - redis_service - INFO - üì• Retrieved call data from Redis: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:16:59.974791941Z [err]  2026-01-10 18:16:59,441 - server - INFO - ‚è≥ Session not found locally, waiting briefly for webhook...
2026-01-10T18:16:59.974804337Z [err]  2026-01-10 18:16:59,440 - server - INFO - ‚úÖ Call data found after 0s wait
2026-01-10T18:16:59.974804744Z [err]  2026-01-10 18:16:59,569 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2026-01-10T18:16:59.974812956Z [err]  2026-01-10 18:16:59,569 - server - INFO - üì® Full payload: {'data': {'event_type': 'call.answered', 'id': 'ab070c78-588c-4ab4-bba7-41bd4745b881', 'occurred_at': '2026-01-10T18:16:59.298820Z', 'payload': {'call_control_id': 'v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g', 'call_leg_id': '8af960d0-ee50-11f0-9c17-02420aef99a0', 'call_session_id': '8af65dae-ee50-11f0-b860-02420aef99a0', 'client_state': None, 'codec': 'PCMU', 'connection_id': '2777245537294877821', 'from': '+14048000152', 'sampling_rate': 8000, 'start_time': '2026-01-10T18:16:54.698808Z', 'to': '+17708336397'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2026-01-10T18:16:59.974821083Z [err]  2026-01-10 18:16:59,569 - server - INFO - üéØ Event type: call.answered, Call ID: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:16:59.974828130Z [err]  2026-01-10 18:16:59,569 - server - INFO - üì® ================================================
2026-01-10T18:16:59.974835416Z [err]  2026-01-10 18:16:59,569 - server - INFO - ‚úÖ Call answered: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:16:59.981618258Z [err]  2026-01-10 18:16:59,573 - redis_service - INFO - üì• Retrieved call data from Redis: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:16:59.981626923Z [err]  2026-01-10 18:16:59,575 - server - INFO - ‚úÖ Found call in Redis (multi-worker state sharing working)
2026-01-10T18:16:59.981635755Z [err]  2026-01-10 18:16:59,575 - server - INFO - üìû Phone numbers added to session: from=+14048000152, to=+17708336397
2026-01-10T18:16:59.981644374Z [err]  2026-01-10 18:16:59,669 - server - INFO - ‚úÖ Call log updated
2026-01-10T18:16:59.981652964Z [err]  2026-01-10 18:16:59,669 - server - INFO - üîç DEBUG Webhook: url='https://n8n.outlier-agency.com/webhook/2adb150a-9e08-4053-9fa4-e47df18bf39b', active=True, should_fire=True
2026-01-10T18:16:59.981659880Z [err]  2026-01-10 18:16:59,669 - server - INFO - üì§ Sending call-started webhook to: https://n8n.outlier-agency.com/webhook/2adb150a-9e08-4053-9fa4-e47df18bf39b
2026-01-10T18:16:59.981677397Z [err]  2026-01-10 18:16:59,669 - server - INFO - üîß Getting Telnyx API keys for user: dcafa642-6136-4096-b77d-a4cb99a62651
2026-01-10T18:16:59.981687886Z [err]  2026-01-10 18:16:59,737 - httpx - INFO - HTTP Request: POST https://n8n.outlier-agency.com/webhook/2adb150a-9e08-4053-9fa4-e47df18bf39b "HTTP/1.1 530 <none>"
2026-01-10T18:16:59.981696260Z [err]  2026-01-10 18:16:59,738 - server - WARNING - ‚ö†Ô∏è Call-started webhook returned status 530: <!doctype html>
2026-01-10T18:16:59.981704452Z [err]  <!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en-US"> <![endif]-->
2026-01-10T18:16:59.981712819Z [err]  <!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en-US"> <![endif]-->
2026-01-10T18:16:59.981720501Z [err]  <!--[if IE 8]>    <html class="no-
2026-01-10T18:16:59.981729794Z [err]  2026-01-10 18:16:59,757 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2026-01-10T18:16:59.981737635Z [inf]  100.64.0.8:43568 - "POST /api/telnyx/webhook HTTP/1.1" 200
2026-01-10T18:16:59.988808841Z [err]  2026-01-10 18:16:59,823 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2026-01-10T18:16:59.988827427Z [err]  2026-01-10 18:16:59,823 - server - INFO - üì® Full payload: {'data': {'event_type': 'streaming.started', 'id': '7c3be1f8-1b70-469a-957a-17b0db63c5c4', 'occurred_at': '2026-01-10T18:16:59.558810Z', 'payload': {'call_control_id': 'v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g', 'call_leg_id': '8af960d0-ee50-11f0-9c17-02420aef99a0', 'call_session_id': '8af65dae-ee50-11f0-b860-02420aef99a0', 'client_state': None, 'connection_id': '2777245537294877821', 'stream_id': '0a2b4a0f-7501-488e-a960-b4af0833663d', 'stream_params': {'stream_track': 'inbound', 'stream_url': 'wss://api.li-ai.org/api/telnyx/audio-stream'}, 'stream_type': 'websocket'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2026-01-10T18:16:59.988837549Z [err]  2026-01-10 18:16:59,823 - server - INFO - üéØ Event type: streaming.started, Call ID: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:16:59.988944997Z [err]  2026-01-10 18:16:59,824 - server - INFO - üì® ================================================
2026-01-10T18:16:59.988958738Z [err]  2026-01-10 18:16:59,844 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2026-01-10T18:16:59.988983090Z [err]  2026-01-10 18:16:59,844 - server - INFO - üîß Creating Telnyx service with user's keys...
2026-01-10T18:16:59.988993612Z [err]  2026-01-10 18:16:59,895 - telnyx_service - INFO - Telnyx service initialized with connection: 2777245537294877821
2026-01-10T18:16:59.989005903Z [err]  2026-01-10 18:16:59,941 - server - INFO - ‚ö†Ô∏è Session still not found after wait, will create in worker
2026-01-10T18:16:59.989016603Z [err]  2026-01-10 18:16:59,941 - server - WARNING - ‚ö†Ô∏è Session not found after waiting, creating in WebSocket worker...
2026-01-10T18:16:59.989024211Z [err]  2026-01-10 18:16:59,945 - redis_service - INFO - üì• Retrieved call data from Redis: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:16:59.993588385Z [err]  2026-01-10 18:16:59,947 - server - INFO - üìù Creating session with agent_id=bbeda238-e8d9-4d8c-b93b-1b7694581adb, user_id=dcafa642-6136-4096-b77d-a4cb99a62651
2026-01-10T18:16:59.993606847Z [err]  2026-01-10 18:16:59,948 - core_calling_service - INFO - üîç Checking KB for agent bbeda238-e8d9-4d8c-b93b-1b7694581adb...
2026-01-10T18:17:00.041753966Z [err]  2026-01-10 18:17:00,036 - core_calling_service - INFO - üîç KB count query completed: 4 items
2026-01-10T18:17:00.041754670Z [err]  2026-01-10 18:17:00,036 - core_calling_service - INFO - üî• Pre-warming LLM client (grok)...
2026-01-10T18:17:00.041769147Z [err]  2026-01-10 18:17:00,036 - core_calling_service - INFO - üìö Agent bbeda238-e8d9-4d8c-b93b-1b7694581adb has 4 KB items - Smart routing enabled (RAG on demand)
2026-01-10T18:17:00.041779458Z [err]  2026-01-10 18:17:00,036 - core_calling_service - INFO - üìã Built cached system prompt: 5065 chars (global) + 1402 chars (technical)
2026-01-10T18:17:00.041791220Z [err]  2026-01-10 18:17:00,036 - core_calling_service - INFO - üìö KB available - will use smart routing (simple chat: NO KB, factual: WITH KB)
2026-01-10T18:17:00.083829976Z [err]  2026-01-10 18:17:00,053 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=False, user_speaking=False, silence=3.5s, checkin_count=1/2
2026-01-10T18:17:00.140580507Z [err]  2026-01-10 18:17:00,124 - server - INFO - ‚è±Ô∏è [WebSocket Worker] Silence timeout task scheduled!
2026-01-10T18:17:00.140595890Z [err]  2026-01-10 18:17:00,124 - server - INFO - üìû Call data loaded, starting SONIOX connection...
2026-01-10T18:17:00.140608280Z [err]  2026-01-10 18:17:00,124 - server - INFO - ‚úÖ Initialized call_states for v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g with session reference
2026-01-10T18:17:00.140611869Z [err]  2026-01-10 18:17:00,123 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2026-01-10T18:17:00.140619671Z [err]  2026-01-10 18:17:00,124 - core_calling_service - INFO - ‚úÖ LLM client pre-warmed in 87ms
2026-01-10T18:17:00.140635703Z [err]  2026-01-10 18:17:00,124 - server - INFO - ‚úÖ Session created in WebSocket worker
2026-01-10T18:17:00.140643557Z [err]  2026-01-10 18:17:00,124 - server - INFO - ‚è±Ô∏è [WebSocket Worker] Silence timeout task started, waiting 2000ms...
2026-01-10T18:17:00.140645193Z [err]  2026-01-10 18:17:00,124 - server - INFO - ‚è±Ô∏è [WebSocket Worker] Scheduling silence timeout: 2000ms
2026-01-10T18:17:00.186557842Z [err]  2026-01-10 18:17:00,180 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g/actions/playback_start "HTTP/1.1 200 OK"
2026-01-10T18:17:00.186566788Z [err]  2026-01-10 18:17:00,181 - telnyx_service - INFO - ‚úÖ Playing audio from URL, playback_id: bBFxMfT9rQ (loop=True, overlay=True)
2026-01-10T18:17:00.186584032Z [err]  2026-01-10 18:17:00,181 - server - WARNING - ‚ö†Ô∏è Failed to start comfort noise: 'v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g'
2026-01-10T18:17:00.186591995Z [err]  2026-01-10 18:17:00,182 - telnyx_service - INFO - üéôÔ∏è Starting recording: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:00.217103076Z [err]  2026-01-10 18:17:00,212 - server - INFO - üîë Using user's Soniox API key (first 10 chars): b999f22d7b...
2026-01-10T18:17:00.243099336Z [err]  2026-01-10 18:17:00,238 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2026-01-10T18:17:00.243109388Z [err]  2026-01-10 18:17:00,238 - server - INFO - üì® Full payload: {'data': {'event_type': 'call.playback.started', 'id': '48b43111-9692-4200-834c-610015c923db', 'occurred_at': '2026-01-10T18:17:00.138805Z', 'payload': {'call_control_id': 'v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g', 'call_leg_id': '8af960d0-ee50-11f0-9c17-02420aef99a0', 'call_session_id': '8af65dae-ee50-11f0-b860-02420aef99a0', 'client_state': None, 'connection_id': '2777245537294877821', 'media_name': None, 'media_url': 'api.li-ai.org/api/tts-audio/comfort_noise_continuous.mp3', 'overlay': True, 'playback_id': 'bBFxMfT9rQ', 'start_time': '2026-01-10T18:17:00.138805Z'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2026-01-10T18:17:00.243127432Z [err]  2026-01-10 18:17:00,238 - server - INFO - üéØ Event type: call.playback.started, Call ID: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:00.243133460Z [err]  2026-01-10 18:17:00,238 - server - INFO - üì® ================================================
2026-01-10T18:17:00.243139891Z [inf]  100.64.0.10:25224 - "POST /api/telnyx/webhook HTTP/1.1" 200
2026-01-10T18:17:01.051349033Z [err]  2026-01-10 18:17:00,533 - server - INFO - üéôÔ∏è Call recording started for v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:01.051363805Z [err]  2026-01-10 18:17:00,533 - server - INFO - üîß Creating call session for v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g...
2026-01-10T18:17:01.051372639Z [err]  2026-01-10 18:17:00,533 - server - INFO - üîç Agent ID: bbeda238-e8d9-4d8c-b93b-1b7694581adb, User ID: dcafa642-6136-4096-b77d-a4cb99a62651
2026-01-10T18:17:01.051380010Z [err]  2026-01-10 18:17:00,533 - server - INFO - üîß Calling create_call_session() - START
2026-01-10T18:17:01.051386990Z [err]  2026-01-10 18:17:00,533 - core_calling_service - INFO - üîç Checking KB for agent bbeda238-e8d9-4d8c-b93b-1b7694581adb...
2026-01-10T18:17:01.051394807Z [err]  2026-01-10 18:17:00,555 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=False, user_speaking=False, silence=4.0s, checkin_count=1/2
2026-01-10T18:17:01.051402384Z [err]  2026-01-10 18:17:00,621 - core_calling_service - INFO - üîç KB count query completed: 4 items
2026-01-10T18:17:01.051409561Z [err]  2026-01-10 18:17:00,621 - core_calling_service - INFO - üìö Agent bbeda238-e8d9-4d8c-b93b-1b7694581adb has 4 KB items - Smart routing enabled (RAG on demand)
2026-01-10T18:17:01.051416233Z [err]  2026-01-10 18:17:00,621 - core_calling_service - INFO - üìã Built cached system prompt: 5065 chars (global) + 1402 chars (technical)
2026-01-10T18:17:01.051423558Z [err]  2026-01-10 18:17:00,621 - core_calling_service - INFO - üìö KB available - will use smart routing (simple chat: NO KB, factual: WITH KB)
2026-01-10T18:17:01.051430666Z [err]  2026-01-10 18:17:00,621 - core_calling_service - INFO - üî• Pre-warming LLM client (grok)...
2026-01-10T18:17:01.051845678Z [err]  2026-01-10 18:17:00,532 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g/actions/record_start "HTTP/1.1 200 OK"
2026-01-10T18:17:01.057101536Z [err]  2026-01-10 18:17:00,708 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2026-01-10T18:17:01.057123221Z [err]  2026-01-10 18:17:00,708 - core_calling_service - INFO - ‚úÖ LLM client pre-warmed in 87ms
2026-01-10T18:17:01.057131546Z [err]  2026-01-10 18:17:00,708 - server - INFO - üîß Calling create_call_session() - COMPLETE
2026-01-10T18:17:01.057139842Z [err]  2026-01-10 18:17:00,709 - server - INFO - ‚úÖ Session object created: CallSession
2026-01-10T18:17:01.057147403Z [err]  2026-01-10 18:17:00,717 - redis_service - INFO - üì¶ Stored call data in Redis: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g (TTL: 3600s)
2026-01-10T18:17:01.057154990Z [err]  2026-01-10 18:17:00,717 - server - INFO - ‚úÖ Serializable call_data synced to Redis (agent_id, user_id)
2026-01-10T18:17:01.057162498Z [err]  2026-01-10 18:17:00,717 - server - INFO - ‚úÖ Session stored in worker memory (not Redis)
2026-01-10T18:17:01.057171729Z [err]  2026-01-10 18:17:00,718 - redis_service - INFO - ‚úÖ Marked session ready in Redis: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:01.057183628Z [err]  2026-01-10 18:17:00,718 - server - INFO - ü§ñ AI session created for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:01.057197329Z [err]  2026-01-10 18:17:00,718 - server - INFO - üì¶ Custom variables injected: {'lead_id': None, 'qc_tracking_enabled': False, 'track_keywords': '', 'expected_commitment': 'not_specified', 'customer_name': 'Kendrick', 'to_number': '+17708336397', 'phone_number': '+17708336397', 'email': None, 'from_number': '+14048000152'}
2026-01-10T18:17:01.057209386Z [err]  2026-01-10 18:17:00,718 - server - INFO - ‚è≠Ô∏è Skipping persistent TTS creation in webhook - will create on-demand with telnyx_ws
2026-01-10T18:17:01.057218263Z [err]  2026-01-10 18:17:00,718 - server - INFO - üë§ Who speaks first: user, aiSpeaksAfterSilence: True, timeout: 2000ms
2026-01-10T18:17:01.063540064Z [err]  2026-01-10 18:17:00,718 - server - INFO - üëÇ User speaks first - waiting for user input...
2026-01-10T18:17:01.063548056Z [err]  2026-01-10 18:17:00,718 - server - INFO - üõ°Ô∏è Voicemail timeout protection started (15000ms)
2026-01-10T18:17:01.063554222Z [err]  2026-01-10 18:17:00,718 - server - INFO - ‚è±Ô∏è AI will speak after 2000ms of silence (scheduled in WebSocket worker)
2026-01-10T18:17:01.063561904Z [err]  2026-01-10 18:17:00,718 - server - INFO - üé§ Voice flow - streaming started via dial command
2026-01-10T18:17:01.063568897Z [err]  2026-01-10 18:17:00,724 - redis_service - INFO - üì• Retrieved call data from Redis: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:01.063575346Z [err]  2026-01-10 18:17:00,725 - server - INFO - ü§ê No greeting - waiting for user to speak first
2026-01-10T18:17:01.063581250Z [err]  2026-01-10 18:17:00,725 - server - INFO - üé§ Voice flow - WebSocket streaming already initiated
2026-01-10T18:17:01.063586995Z [inf]  100.64.0.8:24040 - "POST /api/telnyx/webhook HTTP/1.1" 200
2026-01-10T18:17:01.063592296Z [err]  2026-01-10 18:17:00,746 - soniox_service - INFO - ‚úÖ Connected to Soniox Real-Time STT
2026-01-10T18:17:01.063597202Z [err]  2026-01-10 18:17:00,747 - soniox_service - INFO - ‚öôÔ∏è  Config: model=stt-rt-v3, format=mulaw, rate=8000Hz, channels=1
2026-01-10T18:17:01.063602442Z [err]  2026-01-10 18:17:00,747 - soniox_service - INFO - ‚öôÔ∏è  Endpoint detection: True, Speaker diarization: False
2026-01-10T18:17:01.063609378Z [err]  2026-01-10 18:17:00,747 - dead_air_monitor - INFO - üîá Dead air monitoring started for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:01.063614545Z [err]  2026-01-10 18:17:00,748 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:pxZiwhAYGmIvm7qB_... (active sessions: ['v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ'])
2026-01-10T18:17:01.067375806Z [err]  2026-01-10 18:17:00,748 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=False, user_speaking=False, silence=0.0s, checkin_count=0/2
2026-01-10T18:17:01.067390889Z [err]  2026-01-10 18:17:00,748 - server - INFO - ‚úÖ Started forwarding audio (8kHz mulaw ‚Üí Soniox, NO BUFFERING)
2026-01-10T18:17:01.255208342Z [err]  2026-01-10 18:17:01,250 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:pxZiwhAYGmIvm7qB_... (active sessions: ['v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ'])
2026-01-10T18:17:02.086373753Z [err]  2026-01-10 18:17:01,764 - server - INFO - üî§ RAW TOKENS: ["H"?]
2026-01-10T18:17:02.086383781Z [err]  2026-01-10 18:17:01,764 - core_calling_service - INFO - üîä Silence timer reset for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g (user started speaking)
2026-01-10T18:17:02.086389534Z [err]  2026-01-10 18:17:01,764 - core_calling_service - INFO - üë§ User started speaking for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:02.086396630Z [err]  2026-01-10 18:17:01,764 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:pxZiwhAYGmIvm7qB_... (active sessions: ['v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ'])
2026-01-10T18:17:02.086402692Z [err]  2026-01-10 18:17:01,764 - server - WARNING - ‚ö†Ô∏è [REAL TIMING] No TTS session found to clear for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:02.086407848Z [err]  2026-01-10 18:17:01,772 - redis_service - INFO - üì• Retrieved call data from Redis: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:02.086413640Z [err]  2026-01-10 18:17:01,782 - redis_service - INFO - üì¶ Stored call data in Redis: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g (TTL: 3600s)
2026-01-10T18:17:02.086421324Z [err]  2026-01-10 18:17:01,783 - server - INFO - üîç PARTIAL TRANSCRIPT: 'H' | Generating: False
2026-01-10T18:17:02.086473224Z [err]  2026-01-10 18:17:02,033 - server - INFO - üî§ RAW TOKENS: ["H"?, "ello"?]
2026-01-10T18:17:02.086485332Z [err]  2026-01-10 18:17:02,034 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Hello' | Generating: False
2026-01-10T18:17:02.086877969Z [err]  2026-01-10 18:17:01,752 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:pxZiwhAYGmIvm7qB_... (active sessions: ['v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ'])
2026-01-10T18:17:02.097598379Z [err]  2026-01-10 18:17:02,094 - server - INFO - üî§ RAW TOKENS: ["H"‚úì, "ello"‚úì, "?"‚úì, "<end>"‚úì]
2026-01-10T18:17:02.097609409Z [err]  2026-01-10 18:17:02,094 - server - INFO - üéØ Endpoint detected: <end> token received
2026-01-10T18:17:02.097615797Z [err]  2026-01-10 18:17:02,095 - server - INFO - üßπ Cleaned transcript: 'H ello ?' -> 'Hello?'
2026-01-10T18:17:02.097621746Z [err]  2026-01-10 18:17:02,095 - server - INFO - üì• FINAL TOKENS: 'Hello?' (3 tokens)
2026-01-10T18:17:02.097626336Z [err]  2026-01-10 18:17:02,095 - server - INFO - üé§ Soniox final transcript: 'Hello?'
2026-01-10T18:17:02.097631619Z [err]  2026-01-10 18:17:02,095 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:pxZiwhAYGmIvm7qB_... (active sessions: ['v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ'])
2026-01-10T18:17:02.097637555Z [err]  2026-01-10 18:17:02,095 - server - INFO - üîç FILTER CHECK: words=1, is_filler=False, is_garbled=False, tts_speaking=False, time_until_done=0.0s, generating=False, playbacks=0, is_active=False
2026-01-10T18:17:02.097645827Z [err]  2026-01-10 18:17:02,095 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:pxZiwhAYGmIvm7qB_... (active sessions: ['v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ'])
2026-01-10T18:17:02.097651565Z [err]  2026-01-10 18:17:02,095 - server - INFO - üöÄ Spawned tracked background task for endpoint processing
2026-01-10T18:17:02.097656913Z [err]  2026-01-10 18:17:02,095 - server - INFO - ‚è±Ô∏è [18:17:02.095] üìù FINAL TRANSCRIPT RECEIVED: 'Hello?'
2026-01-10T18:17:02.097662301Z [err]  2026-01-10 18:17:02,095 - server - INFO - ‚è±Ô∏è [18:17:02.095] STT endpoint detection latency: 9ms
2026-01-10T18:17:02.097667178Z [err]  2026-01-10 18:17:02,095 - server - INFO - ‚è±Ô∏è [18:17:02.095] üé§ USER STOPPED SPEAKING - Beginning processing pipeline
2026-01-10T18:17:02.097673891Z [err]  2026-01-10 18:17:02,095 - server - INFO - ‚è±Ô∏è User spoke at 1768069022.0954995
2026-01-10T18:17:02.102565693Z [err]  2026-01-10 18:17:02,096 - redis_service - INFO - üì¶ Stored call data in Redis: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g (TTL: 3600s)
2026-01-10T18:17:02.102602192Z [err]  2026-01-10 18:17:02,096 - server - INFO - üë§ User has spoken - aiSpeaksAfterSilence timer cancelled if pending
2026-01-10T18:17:02.102609984Z [err]  2026-01-10 18:17:02,096 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:pxZiwhAYGmIvm7qB_... (active sessions: ['v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ'])
2026-01-10T18:17:02.102615597Z [err]  2026-01-10 18:17:02,096 - server - INFO - ‚úÖ Agent SILENT - User said 1 word(s): 'Hello?' - Processing...
2026-01-10T18:17:02.115219919Z [err]  2026-01-10 18:17:02,107 - server - INFO - üìä [REAL TIMING] STT: User audio end ‚Üí Transcript received: -9ms
2026-01-10T18:17:02.115235860Z [err]  2026-01-10 18:17:02,107 - server - INFO - üé§ Endpoint detected by Soniox - processing transcript: Hello?
2026-01-10T18:17:02.115247207Z [err]  2026-01-10 18:17:02,107 - core_calling_service - INFO - üë§ User stopped speaking for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:02.115255060Z [err]  2026-01-10 18:17:02,107 - server - INFO - ‚è±Ô∏è [TIMING] STT_START: User last audio packet received
2026-01-10T18:17:02.115263348Z [err]  2026-01-10 18:17:02,107 - server - INFO - ‚è±Ô∏è [TIMING] STT_END: Endpoint detected at T+1ms
2026-01-10T18:17:02.115270847Z [err]  2026-01-10 18:17:02,107 - server - INFO - ‚è±Ô∏è [TIMING] STT_LATENCY: 1ms (Soniox model: stt-rt-v3)
2026-01-10T18:17:02.115278893Z [err]  2026-01-10 18:17:02,107 - server - INFO - ‚è±Ô∏è  USER STOPPED SPEAKING at T=0ms
2026-01-10T18:17:02.115285879Z [err]  2026-01-10 18:17:02,107 - server - INFO - üìä [REAL TIMING] Processing start: 21ms after user audio end
2026-01-10T18:17:02.115294065Z [err]  2026-01-10 18:17:02,107 - server - INFO - üéôÔ∏è Agent generating response - interruption detection active
2026-01-10T18:17:02.115301431Z [err]  2026-01-10 18:17:02,107 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:02.140621296Z [err]  2026-01-10 18:17:02,127 - redis_service - INFO - üì• Retrieved call data from Redis: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:02.140658684Z [err]  2026-01-10 18:17:02,128 - server - INFO - ‚è±Ô∏è [WebSocket Worker] Silence timeout: User already spoke, skipping greeting
2026-01-10T18:17:02.211635775Z [err]  2026-01-10 18:17:02,201 - server - INFO - üìù Saved user transcript to database
2026-01-10T18:17:02.211643170Z [err]  2026-01-10 18:17:02,202 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:pxZiwhAYGmIvm7qB_... (active sessions: ['v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ'])
2026-01-10T18:17:02.211651185Z [err]  2026-01-10 18:17:02,202 - core_calling_service - INFO - ‚è±Ô∏è [18:17:02.202] üì• process_user_input() ENTRY - text: 'Hello?...'
2026-01-10T18:17:02.211659730Z [err]  2026-01-10 18:17:02,203 - redis_service - INFO - üì• Retrieved call data from Redis: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:02.211667244Z [err]  2026-01-10 18:17:02,203 - core_calling_service - WARNING - üö® BARGE-IN DETECTED for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g: User spoke while Silence Greeting was triggering
2026-01-10T18:17:02.244238846Z [err]  2026-01-10 18:17:02,238 - telnyx_service - INFO - Telnyx service initialized with connection: 2777245537294877821
2026-01-10T18:17:02.244249386Z [err]  2026-01-10 18:17:02,238 - telnyx_service - INFO - üõë Stopping audio playback on call: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:02.269673035Z [err]  2026-01-10 18:17:02,264 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:pxZiwhAYGmIvm7qB_... (active sessions: ['v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ'])
2026-01-10T18:17:02.269682357Z [err]  2026-01-10 18:17:02,264 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:pxZiwhAYGmIvm7qB_... (active sessions: ['v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ'])
2026-01-10T18:17:03.325847304Z [err]  2026-01-10 18:17:02,515 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g/actions/playback_stop "HTTP/1.1 200 OK"
2026-01-10T18:17:03.325854622Z [err]  2026-01-10 18:17:02,516 - telnyx_service - INFO - ‚úÖ Successfully stopped audio playback
2026-01-10T18:17:03.325869745Z [err]  2026-01-10 18:17:02,516 - core_calling_service - INFO - ‚úÖ BARGE-IN: Audio playback STOPPED
2026-01-10T18:17:03.325879979Z [err]  2026-01-10 18:17:02,516 - core_calling_service - INFO - ‚úÖ BARGE-IN: Preserving silence greeting in history to maintain context
2026-01-10T18:17:03.325886120Z [err]  2026-01-10 18:17:02,520 - redis_service - INFO - üì• Retrieved call data from Redis: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:03.325891959Z [err]  2026-01-10 18:17:02,521 - redis_service - INFO - üì¶ Stored call data in Redis: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g (TTL: 3600s)
2026-01-10T18:17:03.325898071Z [err]  2026-01-10 18:17:02,521 - core_calling_service - INFO - ‚úÖ BARGE-IN: Reset silence_greeting_triggered flag
2026-01-10T18:17:03.325907153Z [err]  2026-01-10 18:17:02,521 - core_calling_service - INFO - ‚è±Ô∏è [18:17:02.521] ‚è© About to call _process_call_flow_streaming()
2026-01-10T18:17:03.325914343Z [err]  2026-01-10 18:17:02,521 - core_calling_service - INFO - ‚è±Ô∏è [18:17:02.521] üîÄ Agent type: call_flow, calling flow processor...
2026-01-10T18:17:03.325921897Z [err]  2026-01-10 18:17:02,521 - core_calling_service - INFO - ‚è±Ô∏è [18:17:02.521] üîÄ _process_call_flow_streaming() ENTRY
2026-01-10T18:17:03.325928380Z [err]  2026-01-10 18:17:02,521 - core_calling_service - INFO - Flow processing - History length: 1, Is first: True
2026-01-10T18:17:03.325934541Z [err]  2026-01-10 18:17:02,521 - core_calling_service - INFO - ‚è±Ô∏è [18:17:02.521] ‚úÖ Node selected, about to process content...
2026-01-10T18:17:03.325943350Z [err]  2026-01-10 18:17:02,521 - core_calling_service - INFO - üîß Replaced {{now}} with Saturday, January 10, 2026 at 1:17 PM EST in content
2026-01-10T18:17:04.252418771Z [err]  2026-01-10 18:17:02,521 - core_calling_service - INFO - üîß Replaced {{customer_name}} with Kendrick in content
2026-01-10T18:17:04.254172506Z [err]  2026-01-10 18:17:02,521 - core_calling_service - INFO - üîß Replaced {{callerName}} with  in content
2026-01-10T18:17:04.254183918Z [err]  2026-01-10 18:17:02,521 - core_calling_service - INFO - üîß Replaced {{lead_id}} with None in content
2026-01-10T18:17:04.254191527Z [err]  2026-01-10 18:17:02,521 - core_calling_service - INFO - üîß Replaced {{qc_tracking_enabled}} with False in content
2026-01-10T18:17:04.254197501Z [err]  2026-01-10 18:17:02,522 - core_calling_service - INFO - üîß Replaced {{track_keywords}} with  in content
2026-01-10T18:17:04.254202427Z [err]  2026-01-10 18:17:02,522 - core_calling_service - INFO - üîß Replaced {{expected_commitment}} with not_specified in content
2026-01-10T18:17:04.254208437Z [err]  2026-01-10 18:17:02,522 - core_calling_service - INFO - üîß Replaced {{to_number}} with +17708336397 in content
2026-01-10T18:17:04.254215127Z [err]  2026-01-10 18:17:02,522 - core_calling_service - INFO - üîß Replaced {{phone_number}} with +17708336397 in content
2026-01-10T18:17:04.254220173Z [err]  2026-01-10 18:17:02,522 - core_calling_service - INFO - üîß Replaced {{email}} with None in content
2026-01-10T18:17:04.254229535Z [err]  2026-01-10 18:17:02,522 - core_calling_service - INFO - ‚úÖ Using explicit SCRIPT mode (length: 9 chars) - will return text instantly
2026-01-10T18:17:04.254236175Z [err]  2026-01-10 18:17:02,522 - core_calling_service - INFO - Using flow node: Greeting (type: conversation, mode: script)
2026-01-10T18:17:04.254243056Z [err]  2026-01-10 18:17:02,522 - core_calling_service - INFO - üìö skip_mandatory_precheck=true - skipping pre-response mandatory check, will check on transition
2026-01-10T18:17:04.254249275Z [err]  2026-01-10 18:17:02,522 - core_calling_service - INFO - ‚è±Ô∏è [18:17:02.522] üìÑ About to process content (mode=script, length=9)
2026-01-10T18:17:04.259513790Z [err]  2026-01-10 18:17:02,522 - core_calling_service - INFO - üì§ Streaming script as 1 sentence(s)
2026-01-10T18:17:04.259520001Z [err]  2026-01-10 18:17:02,522 - server - INFO - üì§ Sentence arrived from LLM: Kendrick?...
2026-01-10T18:17:04.259526280Z [err]  2026-01-10 18:17:02,524 - server - INFO - ‚è±Ô∏è [TIMING] TTFS (Time To First Sentence): 414ms
2026-01-10T18:17:04.259532678Z [err]  2026-01-10 18:17:02,524 - server - INFO - ‚ö° Starting REAL-TIME TTS for first sentence
2026-01-10T18:17:04.259539211Z [err]  2026-01-10 18:17:02,524 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:pxZiwhAYGmIvm7qB_... (active sessions: ['v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ'])
2026-01-10T18:17:04.259545734Z [err]  2026-01-10 18:17:02,524 - server - INFO - ‚ö° ON-DEMAND: Creating persistent TTS session (multi-worker mode)
2026-01-10T18:17:04.259552202Z [err]  2026-01-10 18:17:02,612 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2026-01-10T18:17:04.259558799Z [err]  2026-01-10 18:17:02,699 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2026-01-10T18:17:04.259565148Z [err]  2026-01-10 18:17:02,767 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:pxZiwhAYGmIvm7qB_... (active sessions: ['v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ'])
2026-01-10T18:17:04.259572857Z [err]  2026-01-10 18:17:02,767 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:pxZiwhAYGmIvm7qB_... (active sessions: ['v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ'])
2026-01-10T18:17:04.259579812Z [err]  2026-01-10 18:17:02,788 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2026-01-10T18:17:04.259587243Z [err]  2026-01-10 18:17:02,819 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2026-01-10T18:17:04.259594627Z [err]  2026-01-10 18:17:02,819 - server - INFO - üì® Full payload: {'data': {'event_type': 'call.machine.premium.detection.ended', 'id': 'e3f35923-15f0-40ea-a0dc-bbf4e5043c55', 'occurred_at': '2026-01-10T18:17:02.698808Z', 'payload': {'call_control_id': 'v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g', 'call_leg_id': '8af960d0-ee50-11f0-9c17-02420aef99a0', 'call_session_id': '8af65dae-ee50-11f0-b860-02420aef99a0', 'client_state': None, 'connection_id': '2777245537294877821', 'from': '+14048000152', 'result': 'human_residence', 'to': '+17708336397'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2026-01-10T18:17:04.266026786Z [err]  2026-01-10 18:17:03,321 - persistent_tts_service - INFO - üéôÔ∏è Extracted voice_settings from agent config: {'stability': 0.6, 'similarity_boost': 0.65, 'style': 0.2, 'use_speaker_boost': True}
2026-01-10T18:17:04.266049160Z [err]  2026-01-10 18:17:03,321 - persistent_tts_service - INFO - üîå [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] Establishing persistent TTS WebSocket...
2026-01-10T18:17:04.266060209Z [err]  2026-01-10 18:17:03,321 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] Voice settings: {'stability': 0.6, 'similarity_boost': 0.65, 'style': 0.2, 'use_speaker_boost': True}
2026-01-10T18:17:04.266070868Z [err]  2026-01-10 18:17:03,321 - elevenlabs_ws_service - INFO - üîå Connecting to ElevenLabs WebSocket: voice=J5iaaqzR5zn6HFG4jV3b, model=eleven_turbo_v2_5
2026-01-10T18:17:04.266084552Z [err]  2026-01-10 18:17:03,321 - elevenlabs_ws_service - INFO - üéôÔ∏è Voice settings: stability=0.6, similarity=0.65, style=0.2
2026-01-10T18:17:04.266099270Z [err]  2026-01-10 18:17:03,336 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:pxZiwhAYGmIvm7qB_... (active sessions: ['v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ'])
2026-01-10T18:17:04.266203513Z [err]  2026-01-10 18:17:02,819 - server - INFO - üéØ Event type: call.machine.premium.detection.ended, Call ID: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:04.266210341Z [err]  2026-01-10 18:17:02,819 - server - INFO - üì® ================================================
2026-01-10T18:17:04.266217960Z [inf]  100.64.0.11:31298 - "POST /api/telnyx/webhook HTTP/1.1" 200
2026-01-10T18:17:04.266225429Z [err]  2026-01-10 18:17:03,320 - telnyx_service - INFO - Telnyx service initialized with connection: 2777245537294877821
2026-01-10T18:17:04.266234107Z [err]  2026-01-10 18:17:03,321 - server - INFO - ‚úÖ ON-DEMAND: Using Telnyx WebSocket from closure for streaming audio
2026-01-10T18:17:04.272906263Z [err]  2026-01-10 18:17:03,336 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:pxZiwhAYGmIvm7qB_... (active sessions: ['v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ'])
2026-01-10T18:17:04.272913200Z [err]  2026-01-10 18:17:03,466 - elevenlabs_ws_service - INFO - ‚úÖ Connected to ElevenLabs WebSocket
2026-01-10T18:17:04.272921710Z [err]  2026-01-10 18:17:03,466 - elevenlabs_ws_service - INFO - üì§ Sent BOS message with voice settings
2026-01-10T18:17:04.272928213Z [err]  2026-01-10 18:17:03,466 - persistent_tts_service - INFO - ‚úÖ [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] Persistent TTS WebSocket established
2026-01-10T18:17:04.272936240Z [err]  2026-01-10 18:17:03,466 - persistent_tts_service - INFO - üéß [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] Continuous audio receiver started
2026-01-10T18:17:04.272955447Z [err]  2026-01-10 18:17:03,466 - persistent_tts_service - INFO - üîä [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] Comfort noise loop started
2026-01-10T18:17:04.272961714Z [err]  2026-01-10 18:17:03,466 - persistent_tts_service - INFO - ‚úÖ Created persistent TTS session for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:04.272967581Z [err]  2026-01-10 18:17:03,466 - server - INFO - ‚úÖ ON-DEMAND: Persistent TTS session created successfully!
2026-01-10T18:17:04.272974654Z [err]  2026-01-10 18:17:03,466 - server - INFO - üîç Persistent TTS lookup: call_id=v3:pxZiwhAYGmIvm7qB_..., session=FOUND
2026-01-10T18:17:04.272982155Z [err]  2026-01-10 18:17:03,466 - server - INFO - üöÄ Streaming sentence #1 via persistent WebSocket
2026-01-10T18:17:04.272988970Z [err]  2026-01-10 18:17:03,466 - server - INFO - üéµ TTS task #1 started at +944ms
2026-01-10T18:17:04.272999132Z [err]  2026-01-10 18:17:03,466 - server - INFO - ‚è±Ô∏è [TIMING] TTFT_TTS (First TTS Task Started): 1359ms
2026-01-10T18:17:04.278312737Z [err]  2026-01-10 18:17:03,466 - core_calling_service - INFO - üì§ Streamed script sentence 1/1: Kendrick?...
2026-01-10T18:17:04.278312784Z [err]  2026-01-10 18:17:03,466 - core_calling_service - INFO - Total latency: 1.26s
2026-01-10T18:17:04.278321269Z [err]  2026-01-10 18:17:03,466 - core_calling_service - INFO - üîä Silence tracking reset for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g (user responded)
2026-01-10T18:17:04.278327770Z [err]  2026-01-10 18:17:03,468 - server - INFO - ‚úÖ LLM finished in 1360ms, TTS tasks already running in background
2026-01-10T18:17:04.278329598Z [err]  2026-01-10 18:17:03,466 - core_calling_service - INFO - ‚úÖ User responded to regular message, resetting counter
2026-01-10T18:17:04.278337008Z [err]  2026-01-10 18:17:03,466 - core_calling_service - INFO - üíæ Storing node ID 2 in conversation history
2026-01-10T18:17:04.278343315Z [err]  2026-01-10 18:17:03,468 - server - INFO - üéµ Streaming 1 TTS chunks as they complete...
2026-01-10T18:17:04.278347573Z [err]  2026-01-10 18:17:03,466 - core_calling_service - INFO - LLM response (1.26s): Kendrick?
2026-01-10T18:17:04.278352405Z [err]  2026-01-10 18:17:03,468 - server - INFO - üöÄ Persistent TTS: Audio already streaming in background!
2026-01-10T18:17:04.278359524Z [err]  2026-01-10 18:17:03,468 - server - INFO -    1 sentences queued and playing seamlessly
2026-01-10T18:17:04.278367526Z [err]  2026-01-10 18:17:03,469 - persistent_tts_service - INFO - üéµ [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] Playback consumer started
2026-01-10T18:17:04.278378511Z [err]  2026-01-10 18:17:03,469 - persistent_tts_service - INFO - üéß [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] Continuous Audio Receiver STARTED
2026-01-10T18:17:04.278393995Z [err]  2026-01-10 18:17:03,469 - persistent_tts_service - INFO - üíì [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] Starting TTS keep-alive loop (every 15s)
2026-01-10T18:17:04.283485044Z [err]  2026-01-10 18:17:03,469 - persistent_tts_service - INFO - üîä [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] Starting comfort noise loop
2026-01-10T18:17:04.283492382Z [err]  2026-01-10 18:17:03,469 - persistent_tts_service - INFO - üé§ [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] Streaming sentence #1: Kendrick?...
2026-01-10T18:17:04.283499667Z [err]  2026-01-10 18:17:03,469 - persistent_tts_service - INFO - üöÄ [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] Sent sentence #1 to ElevenLabs in 0ms (non-blocking)
2026-01-10T18:17:04.283507323Z [err]  2026-01-10 18:17:03,469 - persistent_tts_service - INFO - üìä [REAL TIMING] TEXT SENT TO ELEVENLABS: 'Kendrick?...'
2026-01-10T18:17:04.283515840Z [err]  2026-01-10 18:17:03,469 - server - INFO - ‚úÖ All 1 persistent TTS streams completed
2026-01-10T18:17:04.283523578Z [err]  2026-01-10 18:17:03,469 - server - INFO - ‚úÖ Agent generation complete (persistent TTS) - response window closed
2026-01-10T18:17:04.283531574Z [err]  2026-01-10 18:17:03,469 - server - INFO - ‚è±Ô∏è  FIRST AUDIO STARTED: 1362ms from user stop üöÄ
2026-01-10T18:17:04.283537963Z [err]  2026-01-10 18:17:03,469 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:04.283545194Z [err]  2026-01-10 18:17:03,469 - server - INFO - ‚úÖ Agent generation complete - response window closed
2026-01-10T18:17:04.283552376Z [err]  2026-01-10 18:17:03,469 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2026-01-10T18:17:04.283560795Z [err]  2026-01-10 18:17:03,469 - server - INFO - ‚è±Ô∏è  [TIMING] ==== E2E LATENCY SUMMARY ====
2026-01-10T18:17:04.283571075Z [err]  2026-01-10 18:17:03,470 - server - INFO - ‚è±Ô∏è  [TIMING] STT: 1ms (provider: soniox, model: stt-rt-v3)
2026-01-10T18:17:04.291229531Z [err]  2026-01-10 18:17:03,470 - server - INFO - ‚è±Ô∏è  [TIMING] LLM_TOTAL: 1360ms (provider: grok, model: grok-4-1-fast-non-reasoning)
2026-01-10T18:17:04.291242204Z [err]  2026-01-10 18:17:03,470 - server - INFO - ‚è±Ô∏è  [TIMING] TTS_TOTAL: 947ms (provider: elevenlabs, websocket: False)
2026-01-10T18:17:04.291251493Z [err]  2026-01-10 18:17:03,470 - server - INFO - ‚è±Ô∏è  [TIMING] E2E_TOTAL: 1362ms (user stopped ‚Üí play_audio_url called)
2026-01-10T18:17:04.291257045Z [err]  2026-01-10 18:17:03,470 - server - INFO - ‚è±Ô∏è  [TIMING]   - REAL USER LATENCY: 1662ms estimated
2026-01-10T18:17:04.291260910Z [err]  2026-01-10 18:17:03,470 - server - INFO - ‚è±Ô∏è  [TIMING] ‚ö†Ô∏è NOTE: E2E_TOTAL does not include:
2026-01-10T18:17:04.291268664Z [err]  2026-01-10 18:17:03,470 - server - INFO - ‚è±Ô∏è  [TIMING]   - Telnyx processing time (~50-200ms)
2026-01-10T18:17:04.291274946Z [err]  2026-01-10 18:17:03,470 - server - INFO - ‚è±Ô∏è  [TIMING] RESPONSE_TEXT: 9 chars, 1 sentences
2026-01-10T18:17:04.291284859Z [err]  2026-01-10 18:17:03,470 - server - INFO - ‚è±Ô∏è  [TIMING] USER_INPUT: 'Hello?...'
2026-01-10T18:17:04.291293156Z [err]  2026-01-10 18:17:03,470 - server - INFO - ‚è±Ô∏è  [TIMING] AI_RESPONSE: 'Kendrick?...'
2026-01-10T18:17:04.291302087Z [err]  2026-01-10 18:17:03,470 - server - INFO - ‚è±Ô∏è  [TIMING] ==========================
2026-01-10T18:17:04.291314627Z [err]  2026-01-10 18:17:03,470 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2026-01-10T18:17:04.291456873Z [err]  2026-01-10 18:17:03,470 - server - INFO - ‚è±Ô∏è  [TIMING]   - Network latency to user's phone (~50-150ms)
2026-01-10T18:17:04.291466246Z [err]  2026-01-10 18:17:03,470 - server - INFO - ‚è±Ô∏è  [TIMING]   - Phone audio buffering (~50-200ms)
2026-01-10T18:17:04.291473911Z [err]  2026-01-10 18:17:03,470 - server - INFO - ‚è±Ô∏è  [TIMING]   - TOTAL MISSING: ~150-550ms typically
2026-01-10T18:17:04.295938281Z [err]  2026-01-10 18:17:03,659 - server - INFO - üìù Saved assistant transcript and latency to database (Node: Greeting, Dead Air: 1861ms)
2026-01-10T18:17:04.295944726Z [err]  2026-01-10 18:17:03,659 - server - INFO - üîä Agent finished generating, 0 playbacks active - waiting for webhooks to close window and start silence tracking
2026-01-10T18:17:04.295950697Z [err]  2026-01-10 18:17:03,659 - server - INFO - üîç END CALL CHECK: should_end_call=False, max_checkins=False, max_duration=False
2026-01-10T18:17:04.295958051Z [err]  2026-01-10 18:17:03,689 - persistent_tts_service - INFO - üìä [REAL TIMING] ElevenLabs FIRST AUDIO CHUNK received (chunk #1, 7043 bytes)
2026-01-10T18:17:04.295964896Z [err]  2026-01-10 18:17:03,690 - persistent_tts_service - INFO - üìä [REAL TIMING] PLAYBACK CONSUMER: First chunk arrived, queue latency: 0ms
2026-01-10T18:17:04.295971204Z [err]  2026-01-10 18:17:03,690 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTFA (Time To First Audio Playback): 220ms
2026-01-10T18:17:04.295976584Z [err]  2026-01-10 18:17:03,690 - persistent_tts_service - INFO - üì§ Sending 7043 bytes of audio (45 chunks, 0.9s duration) via WebSocket
2026-01-10T18:17:04.295982360Z [err]  2026-01-10 18:17:03,690 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:17:04.295988532Z [err]  2026-01-10 18:17:03,690 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +0.9s (total: 0.9s from now)
2026-01-10T18:17:04.295995640Z [err]  2026-01-10 18:17:03,690 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768069023.691 (chunk 1/45, 160 bytes)
2026-01-10T18:17:04.296001914Z [err]  2026-01-10 18:17:03,836 - core_calling_service - INFO - ‚è∞ Check-in triggered after 7.3s silence (threshold: 7s)
2026-01-10T18:17:04.296010477Z [err]  2026-01-10 18:17:03,837 - core_calling_service - INFO - üí¨ Sending FINAL check-in #2/2: Are you still there?
2026-01-10T18:17:04.305709918Z [err]  2026-01-10 18:17:04,057 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ/actions/playback_start "HTTP/1.1 422 Unprocessable Entity"
2026-01-10T18:17:04.305816335Z [err]  2026-01-10 18:17:03,837 - core_calling_service - INFO - ‚ö†Ô∏è Will end call if no response after next silence timeout
2026-01-10T18:17:04.305826121Z [err]  2026-01-10 18:17:03,837 - dead_air_monitor - INFO - üí¨ Sending check-in after 7.3s silence: Are you still there?
2026-01-10T18:17:04.305838428Z [err]  2026-01-10 18:17:03,837 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:17:04.305846155Z [err]  2026-01-10 18:17:03,837 - telnyx_service - INFO - üîä Speaking text on call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ: Are you still there?...
2026-01-10T18:17:04.305852919Z [err]  2026-01-10 18:17:03,837 - telnyx_service - INFO - üîç Agent config provided: True
2026-01-10T18:17:04.305860359Z [err]  2026-01-10 18:17:03,837 - telnyx_service - INFO - üîç TTS provider from settings: elevenlabs
2026-01-10T18:17:04.305867450Z [err]  2026-01-10 18:17:03,837 - telnyx_service - INFO - üîç WebSocket TTS: False
2026-01-10T18:17:04.305874500Z [err]  2026-01-10 18:17:03,837 - telnyx_service - INFO - üéôÔ∏è Attempting elevenlabs TTS (REST)
2026-01-10T18:17:04.305880974Z [err]  2026-01-10 18:17:03,838 - server - INFO - üíæ TTS CACHE HIT: Returning cached audio (17599 bytes)
2026-01-10T18:17:04.305888714Z [err]  2026-01-10 18:17:03,838 - telnyx_service - INFO - ‚è±Ô∏è  TTS generation time: 0.00s
2026-01-10T18:17:04.305898703Z [err]  2026-01-10 18:17:03,838 - telnyx_service - INFO - ‚úÖ Generated 17599 bytes, saved to /tmp/tts_elevenlabs_01b2ec34551c0c3ab527c8199487051c.mp3
2026-01-10T18:17:04.305905839Z [err]  2026-01-10 18:17:03,838 - telnyx_service - INFO - üîó Using audio URL: api.li-ai.org/api/tts-audio/tts_elevenlabs_01b2ec34551c0c3ab527c8199487051c.mp3
2026-01-10T18:17:04.313560101Z [err]  2026-01-10 18:17:04,059 - telnyx_service - INFO - ‚è±Ô∏è  Playback API call time: 0.22s
2026-01-10T18:17:04.313568231Z [err]  2026-01-10 18:17:04,060 - telnyx_service - ERROR - ‚ùå Telnyx playback failed: 422 - {
2026-01-10T18:17:04.313576309Z [err]    "errors": [
2026-01-10T18:17:04.313584897Z [err]      {
2026-01-10T18:17:04.313593143Z [err]        "code": "90018",
2026-01-10T18:17:04.313601298Z [err]        "title": "Call has already ended",
2026-01-10T18:17:04.313609471Z [err]        "detail": "This call is no longer active and can't receive commands."
2026-01-10T18:17:04.313617460Z [err]      }
2026-01-10T18:17:04.313627026Z [err]    ]
2026-01-10T18:17:04.313659717Z [err]  }
2026-01-10T18:17:04.313668861Z [err]  2026-01-10 18:17:04,061 - telnyx_service - INFO - üì¢ Using Telnyx built-in TTS
2026-01-10T18:17:04.313676829Z [err]  2026-01-10 18:17:04,261 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ/actions/speak "HTTP/1.1 422 Unprocessable Entity"
2026-01-10T18:17:04.313685688Z [err]  2026-01-10 18:17:04,262 - telnyx_service - ERROR - ‚ùå Error speaking text: Error code: 422 - {'errors': [{'code': '90018', 'title': 'Call has already ended', 'detail': "This call is no longer active and can't receive commands."}]}
2026-01-10T18:17:04.313692997Z [err]  2026-01-10 18:17:04,262 - dead_air_monitor - INFO - ‚úÖ Check-in message sent
2026-01-10T18:17:05.229192335Z [err]  2026-01-10 18:17:04,543 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 45 CHUNKS SENT TO TELNYX in 853ms (audio duration: 0.9s, paced after 10 chunks)
2026-01-10T18:17:05.229200525Z [err]  2026-01-10 18:17:04,543 - persistent_tts_service - INFO - ‚úÖ Sent 45 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:17:05.229207253Z [err]  2026-01-10 18:17:04,763 - dead_air_monitor - INFO - ‚è±Ô∏è Playback expected end time passed (9.2s ago), marking agent as done speaking
2026-01-10T18:17:05.229213227Z [err]  2026-01-10 18:17:04,763 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1768069024.7636068 for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:17:05.229220861Z [err]  2026-01-10 18:17:04,763 - core_calling_service - INFO - ü§ñ Agent stopped speaking for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:17:05.229230632Z [err]  2026-01-10 18:17:04,870 - dead_air_monitor - INFO - ‚è±Ô∏è Playback expected end time passed (0.3s ago), marking agent as done speaking
2026-01-10T18:17:05.229236841Z [err]  2026-01-10 18:17:04,870 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1768069024.8708913 for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:05.229242555Z [err]  2026-01-10 18:17:04,870 - core_calling_service - INFO - ü§ñ Agent stopped speaking for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:05.229247596Z [err]  2026-01-10 18:17:04,871 - persistent_tts_service - INFO - üîá [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] FLOOR RELEASED (is_holding_floor=False)
2026-01-10T18:17:06.223396339Z [err]  2026-01-10 18:17:05,762 - server - INFO - üì§ Audio flowing: 297 packets sent to Soniox (5s update)
2026-01-10T18:17:07.141318496Z [err]  2026-01-10 18:17:06,989 - server - INFO - ‚è±Ô∏è [18:17:06.989] STT endpoint detection latency: 7ms
2026-01-10T18:17:07.141327443Z [err]  2026-01-10 18:17:06,989 - server - INFO - ‚è±Ô∏è [18:17:06.989] üé§ USER STOPPED SPEAKING - Beginning processing pipeline
2026-01-10T18:17:07.141328985Z [err]  2026-01-10 18:17:06,990 - redis_service - INFO - üì¶ Stored call data in Redis: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g (TTL: 3600s)
2026-01-10T18:17:07.141335210Z [err]  2026-01-10 18:17:06,990 - server - INFO - üë§ User has spoken - aiSpeaksAfterSilence timer cancelled if pending
2026-01-10T18:17:07.141342481Z [err]  2026-01-10 18:17:06,989 - server - INFO - ‚è±Ô∏è User spoke at 1768069026.9897928
2026-01-10T18:17:07.141441328Z [err]  2026-01-10 18:17:06,967 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Ye' | Generating: False
2026-01-10T18:17:07.141446352Z [err]  2026-01-10 18:17:06,987 - server - INFO - üî§ RAW TOKENS: [" Ye"‚úì, "ah."‚úì, "<end>"‚úì]
2026-01-10T18:17:07.141452384Z [err]  2026-01-10 18:17:06,988 - server - INFO - üßπ Cleaned transcript: ' Ye ah.' -> 'Yeah.'
2026-01-10T18:17:07.141455099Z [err]  2026-01-10 18:17:06,988 - server - INFO - üîç FILTER CHECK: words=1, is_filler=True, is_garbled=False, tts_speaking=False, time_until_done=-0.0s, generating=False, playbacks=0, is_active=False
2026-01-10T18:17:07.141460012Z [err]  2026-01-10 18:17:06,988 - server - INFO - üì• FINAL TOKENS: 'Yeah.' (2 tokens)
2026-01-10T18:17:07.141461847Z [err]  2026-01-10 18:17:06,989 - server - INFO - üöÄ Spawned tracked background task for endpoint processing
2026-01-10T18:17:07.141465832Z [err]  2026-01-10 18:17:06,988 - server - INFO - üé§ Soniox final transcript: 'Yeah.'
2026-01-10T18:17:07.141471050Z [err]  2026-01-10 18:17:06,989 - server - INFO - ‚è±Ô∏è [18:17:06.989] üìù FINAL TRANSCRIPT RECEIVED: 'Yeah.'
2026-01-10T18:17:07.141492028Z [err]  2026-01-10 18:17:06,988 - server - INFO - üéØ Endpoint detected: <end> token received
2026-01-10T18:17:07.142862808Z [err]  2026-01-10 18:17:07,002 - server - INFO - ‚è±Ô∏è [TIMING] STT_LATENCY: 19ms (Soniox model: stt-rt-v3)
2026-01-10T18:17:07.142874058Z [err]  2026-01-10 18:17:07,002 - server - INFO - ‚è±Ô∏è  USER STOPPED SPEAKING at T=0ms
2026-01-10T18:17:07.142880518Z [err]  2026-01-10 18:17:07,002 - server - INFO - üìä [REAL TIMING] Processing start: 19ms after user audio end
2026-01-10T18:17:07.142886822Z [err]  2026-01-10 18:17:07,002 - server - INFO - üéôÔ∏è Agent generating response - interruption detection active
2026-01-10T18:17:07.142887671Z [err]  2026-01-10 18:17:06,990 - server - INFO - ‚úÖ Agent SILENT - User said 1 word(s): 'Yeah.' - Processing...
2026-01-10T18:17:07.142894023Z [err]  2026-01-10 18:17:07,002 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:07.142895234Z [err]  2026-01-10 18:17:07,001 - server - INFO - üìä [REAL TIMING] STT: User audio end ‚Üí Transcript received: 8ms
2026-01-10T18:17:07.142901215Z [err]  2026-01-10 18:17:07,001 - server - INFO - üé§ Endpoint detected by Soniox - processing transcript: Yeah.
2026-01-10T18:17:07.142905198Z [err]  2026-01-10 18:17:07,096 - server - INFO - üìù Saved user transcript to database
2026-01-10T18:17:07.142909981Z [err]  2026-01-10 18:17:07,001 - core_calling_service - INFO - üë§ User stopped speaking for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:07.142911717Z [err]  2026-01-10 18:17:07,097 - persistent_tts_service - INFO - üîÑ [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] Interrupt flag reset - ready for new audio
2026-01-10T18:17:07.142917661Z [err]  2026-01-10 18:17:07,002 - server - INFO - ‚úÖ User starting new turn - resetting agent speaking flag
2026-01-10T18:17:07.142927658Z [err]  2026-01-10 18:17:07,002 - server - INFO - ‚è±Ô∏è [TIMING] STT_START: User last audio packet received
2026-01-10T18:17:07.142933229Z [err]  2026-01-10 18:17:07,002 - server - INFO - ‚è±Ô∏è [TIMING] STT_END: Endpoint detected at T+19ms
2026-01-10T18:17:07.143385604Z [err]  2026-01-10 18:17:06,932 - server - INFO - üî§ RAW TOKENS: [" Ye"?]
2026-01-10T18:17:07.143390566Z [err]  2026-01-10 18:17:06,933 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER RESET (user started speaking) for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:07.143395598Z [err]  2026-01-10 18:17:06,933 - core_calling_service - INFO - üîä Silence timer reset for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g (user started speaking)
2026-01-10T18:17:07.143401518Z [err]  2026-01-10 18:17:06,933 - core_calling_service - INFO - üë§ User started speaking for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:07.143406640Z [err]  2026-01-10 18:17:06,933 - persistent_tts_service - INFO - ‚ö° [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] CLEAR_AUDIO called - pending_sentences=0, audio_queue=0
2026-01-10T18:17:07.143415166Z [err]  2026-01-10 18:17:06,933 - persistent_tts_service - INFO - üõë [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] INTERRUPT - Floor Released (is_holding_floor=False)
2026-01-10T18:17:07.143420708Z [err]  2026-01-10 18:17:06,965 - persistent_tts_service - INFO - üõë [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] Sent clear event to Telnyx WebSocket (3x)
2026-01-10T18:17:07.143426908Z [err]  2026-01-10 18:17:06,965 - persistent_tts_service - INFO - ‚è±Ô∏è [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] Reset playback_expected_end_time to NOW
2026-01-10T18:17:07.143433000Z [err]  2026-01-10 18:17:06,965 - server - INFO - üìä [REAL TIMING] AUDIO QUEUE CLEARED (user started speaking) for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:07.143440445Z [err]  2026-01-10 18:17:06,966 - redis_service - INFO - üì• Retrieved call data from Redis: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:07.143448529Z [err]  2026-01-10 18:17:06,967 - redis_service - INFO - üì¶ Stored call data in Redis: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g (TTL: 3600s)
2026-01-10T18:17:07.149898581Z [err]  2026-01-10 18:17:07,097 - server - INFO - üîÑ Reset TTS interrupt flag before new response
2026-01-10T18:17:07.149908312Z [err]  2026-01-10 18:17:07,097 - core_calling_service - INFO - ‚è±Ô∏è [18:17:07.097] üì• process_user_input() ENTRY - text: 'Yeah....'
2026-01-10T18:17:07.149914638Z [err]  2026-01-10 18:17:07,098 - redis_service - INFO - üì• Retrieved call data from Redis: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:07.149921132Z [err]  2026-01-10 18:17:07,098 - core_calling_service - WARNING - üö® BARGE-IN DETECTED for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g: User spoke while Silence Greeting was triggering
2026-01-10T18:17:07.149927369Z [err]  2026-01-10 18:17:07,136 - telnyx_service - INFO - Telnyx service initialized with connection: 2777245537294877821
2026-01-10T18:17:07.149934728Z [err]  2026-01-10 18:17:07,136 - telnyx_service - INFO - üõë Stopping audio playback on call: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:08.227696140Z [err]  2026-01-10 18:17:07,420 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g/actions/playback_stop "HTTP/1.1 200 OK"
2026-01-10T18:17:08.227704042Z [err]  2026-01-10 18:17:07,421 - telnyx_service - INFO - ‚úÖ Successfully stopped audio playback
2026-01-10T18:17:08.227711154Z [err]  2026-01-10 18:17:07,421 - core_calling_service - INFO - ‚úÖ BARGE-IN: Audio playback STOPPED
2026-01-10T18:17:08.227819226Z [err]  2026-01-10 18:17:07,422 - core_calling_service - INFO - ‚úÖ BARGE-IN: Preserving silence greeting in history to maintain context
2026-01-10T18:17:08.227833761Z [err]  2026-01-10 18:17:07,423 - redis_service - INFO - üì• Retrieved call data from Redis: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:08.227843691Z [err]  2026-01-10 18:17:07,424 - redis_service - INFO - üì¶ Stored call data in Redis: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g (TTL: 3600s)
2026-01-10T18:17:08.227853648Z [err]  2026-01-10 18:17:07,424 - core_calling_service - INFO - ‚úÖ BARGE-IN: Reset silence_greeting_triggered flag
2026-01-10T18:17:08.227867275Z [err]  2026-01-10 18:17:07,424 - core_calling_service - INFO - ‚è±Ô∏è [18:17:07.424] ‚è© About to call _process_call_flow_streaming()
2026-01-10T18:17:08.227886476Z [err]  2026-01-10 18:17:07,424 - core_calling_service - INFO - ‚è±Ô∏è [18:17:07.424] üîÄ Agent type: call_flow, calling flow processor...
2026-01-10T18:17:08.227919150Z [err]  2026-01-10 18:17:07,424 - core_calling_service - INFO - ‚è±Ô∏è [18:17:07.424] üîÄ _process_call_flow_streaming() ENTRY
2026-01-10T18:17:08.227927441Z [err]  2026-01-10 18:17:07,424 - core_calling_service - INFO - Flow processing - History length: 3, Is first: False
2026-01-10T18:17:08.227936147Z [err]  2026-01-10 18:17:07,424 - core_calling_service - INFO - üîç Using explicitly set current_node_id: 2
2026-01-10T18:17:08.227945196Z [err]  2026-01-10 18:17:07,424 - core_calling_service - INFO - ‚è±Ô∏è [18:17:07.424] üöÄ Checking special cases before merged transition+response...
2026-01-10T18:17:08.232722321Z [err]  2026-01-10 18:17:07,424 - core_calling_service - INFO - üîç Checking 'Hello=Yes' override for msg='yeah' on node='Greeting'
2026-01-10T18:17:08.232728211Z [err]  2026-01-10 18:17:07,424 - core_calling_service - INFO - ‚ö° OVERRIDE TRIGGERED: 'Yeah.' on Greeting node -> Forcing Transition 0
2026-01-10T18:17:08.232735987Z [err]  2026-01-10 18:17:07,424 - core_calling_service - INFO - ‚è±Ô∏è [18:17:07.424] ‚úÖ Node selected, about to process content...
2026-01-10T18:17:08.232743204Z [err]  2026-01-10 18:17:07,424 - core_calling_service - INFO - üîß Replaced {{now}} with Saturday, January 10, 2026 at 1:17 PM EST in content
2026-01-10T18:17:08.232750867Z [err]  2026-01-10 18:17:07,424 - core_calling_service - INFO - üîß Replaced {{customer_name}} with Kendrick in content
2026-01-10T18:17:08.232757471Z [err]  2026-01-10 18:17:07,424 - core_calling_service - INFO - üîß Replaced {{callerName}} with  in content
2026-01-10T18:17:08.232762942Z [err]  2026-01-10 18:17:07,424 - core_calling_service - INFO - üîß Replaced {{lead_id}} with None in content
2026-01-10T18:17:08.232767829Z [err]  2026-01-10 18:17:07,424 - core_calling_service - INFO - üîß Replaced {{qc_tracking_enabled}} with False in content
2026-01-10T18:17:08.232773810Z [err]  2026-01-10 18:17:07,424 - core_calling_service - INFO - üîß Replaced {{track_keywords}} with  in content
2026-01-10T18:17:08.232779451Z [err]  2026-01-10 18:17:07,424 - core_calling_service - INFO - üîß Replaced {{expected_commitment}} with not_specified in content
2026-01-10T18:17:08.232785084Z [err]  2026-01-10 18:17:07,425 - core_calling_service - INFO - üîß Replaced {{to_number}} with +17708336397 in content
2026-01-10T18:17:08.232790798Z [err]  2026-01-10 18:17:07,425 - core_calling_service - INFO - üîß Replaced {{phone_number}} with +17708336397 in content
2026-01-10T18:17:08.232795645Z [err]  2026-01-10 18:17:07,425 - core_calling_service - INFO - üîß Replaced {{email}} with None in content
2026-01-10T18:17:08.234042170Z [err]  2026-01-10 18:17:07,425 - core_calling_service - INFO - ‚úÖ Using explicit SCRIPT mode (length: 89 chars) - will return text instantly
2026-01-10T18:17:08.234060150Z [err]  2026-01-10 18:17:07,425 - core_calling_service - INFO - Using flow node: Node Prompt: N001B_IntroAndHelpRequest_Only (V3 - Follows Name Confirmation) (type: conversation, mode: script)
2026-01-10T18:17:08.234067630Z [err]  2026-01-10 18:17:07,425 - core_calling_service - INFO - ‚è±Ô∏è [18:17:07.425] üìÑ About to process content (mode=script, length=89)
2026-01-10T18:17:08.234080384Z [err]  2026-01-10 18:17:07,425 - core_calling_service - INFO - üì§ Streaming script as 2 sentence(s)
2026-01-10T18:17:08.234086411Z [err]  2026-01-10 18:17:07,425 - server - INFO - üì§ Sentence arrived from LLM: This is Jake......
2026-01-10T18:17:08.234093261Z [err]  2026-01-10 18:17:07,425 - server - INFO - ‚è±Ô∏è [TIMING] TTFS (Time To First Sentence): 423ms
2026-01-10T18:17:08.234098775Z [err]  2026-01-10 18:17:07,425 - server - INFO - ‚ö° Starting REAL-TIME TTS for first sentence
2026-01-10T18:17:08.234103365Z [err]  2026-01-10 18:17:07,425 - server - INFO - üîç Persistent TTS lookup: call_id=v3:pxZiwhAYGmIvm7qB_..., session=FOUND
2026-01-10T18:17:08.234108394Z [err]  2026-01-10 18:17:07,425 - server - INFO - üöÄ Streaming sentence #1 via persistent WebSocket
2026-01-10T18:17:08.234124765Z [err]  2026-01-10 18:17:07,425 - server - INFO - üéµ TTS task #1 started at +0ms
2026-01-10T18:17:08.234130935Z [err]  2026-01-10 18:17:07,425 - server - INFO - ‚è±Ô∏è [TIMING] TTFT_TTS (First TTS Task Started): 423ms
2026-01-10T18:17:08.234135845Z [err]  2026-01-10 18:17:07,425 - core_calling_service - INFO - üì§ Streamed script sentence 1/2: This is Jake......
2026-01-10T18:17:08.234142949Z [err]  2026-01-10 18:17:07,425 - server - INFO - üì§ Sentence arrived from LLM: I was just, um, wondering if you could possibly he...
2026-01-10T18:17:08.234149156Z [err]  2026-01-10 18:17:07,425 - server - INFO - üîç Persistent TTS lookup: call_id=v3:pxZiwhAYGmIvm7qB_..., session=FOUND
2026-01-10T18:17:08.238470287Z [err]  2026-01-10 18:17:07,425 - server - INFO - üöÄ Streaming sentence #2 via persistent WebSocket
2026-01-10T18:17:08.238477852Z [err]  2026-01-10 18:17:07,425 - server - INFO - üéµ TTS task #2 started at +0ms
2026-01-10T18:17:08.238484804Z [err]  2026-01-10 18:17:07,425 - core_calling_service - INFO - üì§ Streamed script sentence 2/2: I was just, um, wondering if you could possibly he...
2026-01-10T18:17:08.238493412Z [err]  2026-01-10 18:17:07,425 - core_calling_service - INFO - üîä Silence tracking reset for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g (user responded)
2026-01-10T18:17:08.238500977Z [err]  2026-01-10 18:17:07,425 - core_calling_service - INFO - ‚úÖ User responded to regular message, resetting counter
2026-01-10T18:17:08.238511383Z [err]  2026-01-10 18:17:07,425 - core_calling_service - INFO - üíæ Storing node ID 1763159750250 in conversation history
2026-01-10T18:17:08.238517455Z [err]  2026-01-10 18:17:07,425 - core_calling_service - INFO - LLM response (0.33s): This is Jake... I was just, um, wondering if you could possibly help me out for a moment?
2026-01-10T18:17:08.238524846Z [err]  2026-01-10 18:17:07,425 - core_calling_service - INFO - Total latency: 0.33s
2026-01-10T18:17:08.238840974Z [err]  2026-01-10 18:17:07,427 - server - INFO - ‚úÖ LLM finished in 425ms, TTS tasks already running in background
2026-01-10T18:17:08.238852755Z [err]  2026-01-10 18:17:07,428 - server - INFO - üéµ Streaming 2 TTS chunks as they complete...
2026-01-10T18:17:08.238860432Z [err]  2026-01-10 18:17:07,428 - server - INFO - üöÄ Persistent TTS: Audio already streaming in background!
2026-01-10T18:17:08.238867901Z [err]  2026-01-10 18:17:07,428 - server - INFO -    2 sentences queued and playing seamlessly
2026-01-10T18:17:08.238873878Z [err]  2026-01-10 18:17:07,428 - persistent_tts_service - INFO - üé§ [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] Streaming sentence #2: This is Jake......
2026-01-10T18:17:08.240756384Z [err]  2026-01-10 18:17:07,429 - persistent_tts_service - INFO - üöÄ [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] Sent sentence #2 to ElevenLabs in 0ms (non-blocking)
2026-01-10T18:17:08.240765917Z [err]  2026-01-10 18:17:07,429 - persistent_tts_service - INFO - üìä [REAL TIMING] TEXT SENT TO ELEVENLABS: 'This is Jake......'
2026-01-10T18:17:08.240772793Z [err]  2026-01-10 18:17:07,429 - persistent_tts_service - INFO - üé§ [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] Streaming sentence #3: I was just, um, wondering if you could possibly he...
2026-01-10T18:17:08.240779050Z [err]  2026-01-10 18:17:07,429 - persistent_tts_service - INFO - üöÄ [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] Sent sentence #3 to ElevenLabs in 0ms (non-blocking)
2026-01-10T18:17:08.240789981Z [err]  2026-01-10 18:17:07,429 - persistent_tts_service - INFO - üìä [REAL TIMING] TEXT SENT TO ELEVENLABS: 'I was just, um, wondering if you could possibly he...'
2026-01-10T18:17:08.240796616Z [err]  2026-01-10 18:17:07,429 - server - INFO - ‚úÖ All 2 persistent TTS streams completed
2026-01-10T18:17:08.240803075Z [err]  2026-01-10 18:17:07,429 - server - INFO - ‚úÖ Agent generation complete (persistent TTS) - response window closed
2026-01-10T18:17:08.240809330Z [err]  2026-01-10 18:17:07,429 - server - INFO - ‚è±Ô∏è  FIRST AUDIO STARTED: 427ms from user stop üöÄ
2026-01-10T18:17:08.240815836Z [err]  2026-01-10 18:17:07,429 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:08.240821988Z [err]  2026-01-10 18:17:07,429 - server - INFO - ‚úÖ Agent generation complete - response window closed
2026-01-10T18:17:08.240828456Z [err]  2026-01-10 18:17:07,429 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2026-01-10T18:17:08.245932496Z [err]  2026-01-10 18:17:07,429 - server - INFO - ‚è±Ô∏è  [TIMING] ==== E2E LATENCY SUMMARY ====
2026-01-10T18:17:08.245940235Z [err]  2026-01-10 18:17:07,429 - server - INFO - ‚è±Ô∏è  [TIMING] STT: 19ms (provider: soniox, model: stt-rt-v3)
2026-01-10T18:17:08.245947968Z [err]  2026-01-10 18:17:07,429 - server - INFO - ‚è±Ô∏è  [TIMING] LLM_TOTAL: 425ms (provider: grok, model: grok-4-1-fast-non-reasoning)
2026-01-10T18:17:08.245955087Z [err]  2026-01-10 18:17:07,429 - server - INFO - ‚è±Ô∏è  [TIMING] TTS_TOTAL: 4ms (provider: elevenlabs, websocket: False)
2026-01-10T18:17:08.245963173Z [err]  2026-01-10 18:17:07,429 - server - INFO - ‚è±Ô∏è  [TIMING] E2E_TOTAL: 427ms (user stopped ‚Üí play_audio_url called)
2026-01-10T18:17:08.245970183Z [err]  2026-01-10 18:17:07,429 - server - INFO - ‚è±Ô∏è  [TIMING] ‚ö†Ô∏è NOTE: E2E_TOTAL does not include:
2026-01-10T18:17:08.245977729Z [err]  2026-01-10 18:17:07,429 - server - INFO - ‚è±Ô∏è  [TIMING]   - Telnyx processing time (~50-200ms)
2026-01-10T18:17:08.245985593Z [err]  2026-01-10 18:17:07,429 - server - INFO - ‚è±Ô∏è  [TIMING]   - Network latency to user's phone (~50-150ms)
2026-01-10T18:17:08.245993924Z [err]  2026-01-10 18:17:07,429 - server - INFO - ‚è±Ô∏è  [TIMING]   - Phone audio buffering (~50-200ms)
2026-01-10T18:17:08.246001344Z [err]  2026-01-10 18:17:07,429 - server - INFO - ‚è±Ô∏è  [TIMING]   - TOTAL MISSING: ~150-550ms typically
2026-01-10T18:17:08.246008251Z [err]  2026-01-10 18:17:07,429 - server - INFO - ‚è±Ô∏è  [TIMING]   - REAL USER LATENCY: 727ms estimated
2026-01-10T18:17:08.246016409Z [err]  2026-01-10 18:17:07,430 - server - INFO - ‚è±Ô∏è  [TIMING] RESPONSE_TEXT: 89 chars, 2 sentences
2026-01-10T18:17:08.246022771Z [err]  2026-01-10 18:17:07,430 - server - INFO - ‚è±Ô∏è  [TIMING] USER_INPUT: 'Yeah....'
2026-01-10T18:17:08.246028183Z [err]  2026-01-10 18:17:07,430 - server - INFO - ‚è±Ô∏è  [TIMING] AI_RESPONSE: 'This is Jake... I was just, um, wondering if you could possi...'
2026-01-10T18:17:08.251292687Z [err]  2026-01-10 18:17:07,430 - server - INFO - ‚è±Ô∏è  [TIMING] ==========================
2026-01-10T18:17:08.251304598Z [err]  2026-01-10 18:17:07,430 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2026-01-10T18:17:08.251312603Z [err]  2026-01-10 18:17:07,617 - server - INFO - üìù Saved assistant transcript and latency to database (Node: Node Prompt: N001B_IntroAndHelpRequest_Only (V3 - Follows Name Confirmation), Dead Air: 448ms)
2026-01-10T18:17:08.251319471Z [err]  2026-01-10 18:17:07,618 - server - INFO - üîä Agent finished generating, 0 playbacks active - waiting for webhooks to close window and start silence tracking
2026-01-10T18:17:08.251326374Z [err]  2026-01-10 18:17:07,618 - server - INFO - üîç END CALL CHECK: should_end_call=False, max_checkins=False, max_duration=False
2026-01-10T18:17:08.251335373Z [err]  2026-01-10 18:17:07,654 - persistent_tts_service - INFO - üì§ Sending 8545 bytes of audio (54 chunks, 1.1s duration) via WebSocket
2026-01-10T18:17:08.251344669Z [err]  2026-01-10 18:17:07,654 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:17:08.251352343Z [err]  2026-01-10 18:17:07,654 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.1s (total: 1.1s from now)
2026-01-10T18:17:08.251359559Z [err]  2026-01-10 18:17:07,654 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768069027.654 (chunk 1/54, 160 bytes)
2026-01-10T18:17:09.218620470Z [err]  2026-01-10 18:17:08,477 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 54 CHUNKS SENT TO TELNYX in 823ms (audio duration: 1.1s, paced after 10 chunks)
2026-01-10T18:17:09.218627601Z [err]  2026-01-10 18:17:08,477 - persistent_tts_service - INFO - ‚úÖ Sent 54 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:17:09.218634811Z [err]  2026-01-10 18:17:08,477 - persistent_tts_service - INFO - üì§ Sending 13792 bytes of audio (87 chunks, 1.7s duration) via WebSocket
2026-01-10T18:17:09.218641477Z [err]  2026-01-10 18:17:08,477 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:17:09.218648769Z [err]  2026-01-10 18:17:08,477 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.7s (total: 2.0s from now)
2026-01-10T18:17:09.218656578Z [err]  2026-01-10 18:17:08,477 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768069028.478 (chunk 1/87, 160 bytes)
2026-01-10T18:17:10.041058415Z [err]  2026-01-10 18:17:09,915 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 87 CHUNKS SENT TO TELNYX in 1437ms (audio duration: 1.7s, paced after 10 chunks)
2026-01-10T18:17:10.041064638Z [err]  2026-01-10 18:17:09,915 - persistent_tts_service - INFO - ‚úÖ Sent 87 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:17:10.041071964Z [err]  2026-01-10 18:17:09,915 - persistent_tts_service - INFO - üì§ Sending 2926 bytes of audio (19 chunks, 0.4s duration) via WebSocket
2026-01-10T18:17:10.041081434Z [err]  2026-01-10 18:17:09,915 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:17:10.041088498Z [err]  2026-01-10 18:17:09,915 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +0.4s (total: 0.9s from now)
2026-01-10T18:17:10.041099184Z [err]  2026-01-10 18:17:09,915 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768069029.916 (chunk 1/19, 160 bytes)
2026-01-10T18:17:10.090028630Z [err]  2026-01-10 18:17:10,084 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 19 CHUNKS SENT TO TELNYX in 169ms (audio duration: 0.4s, paced after 10 chunks)
2026-01-10T18:17:10.090041427Z [err]  2026-01-10 18:17:10,085 - persistent_tts_service - INFO - ‚úÖ Sent 19 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:17:10.090050904Z [err]  2026-01-10 18:17:10,085 - persistent_tts_service - INFO - üì§ Sending 17833 bytes of audio (112 chunks, 2.2s duration) via WebSocket
2026-01-10T18:17:10.090059334Z [err]  2026-01-10 18:17:10,085 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:17:10.090068006Z [err]  2026-01-10 18:17:10,085 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +2.2s (total: 3.0s from now)
2026-01-10T18:17:10.090075677Z [err]  2026-01-10 18:17:10,085 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768069030.085 (chunk 1/112, 160 bytes)
2026-01-10T18:17:10.290232377Z [err]  2026-01-10 18:17:10,282 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=False, user_speaking=False, silence=5.5s, checkin_count=2/2
2026-01-10T18:17:11.038304755Z [err]  2026-01-10 18:17:10,784 - server - INFO - üì§ Audio flowing: 548 packets sent to Soniox (5s update)
2026-01-10T18:17:11.038312426Z [err]  2026-01-10 18:17:10,898 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (2.1s left)
2026-01-10T18:17:11.038452108Z [err]  2026-01-10 18:17:10,395 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (2.6s left)
2026-01-10T18:17:11.038461103Z [err]  2026-01-10 18:17:10,783 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=False, user_speaking=False, silence=6.0s, checkin_count=2/2
2026-01-10T18:17:11.325843294Z [err]  2026-01-10 18:17:11,322 - server - INFO - üé§ Soniox receiver alive - 14 messages received in last 10s
2026-01-10T18:17:12.052680163Z [err]  2026-01-10 18:17:11,450 - server - INFO - üé§ Soniox receiver alive - 12 messages received in last 10s
2026-01-10T18:17:12.052691168Z [err]  2026-01-10 18:17:11,450 - server - ERROR - ‚ùå Soniox error: {'tokens': [], 'final_audio_proc_ms': 36000, 'total_audio_proc_ms': 40440, 'error_code': 408, 'error_message': 'Request timeout.'}
2026-01-10T18:17:12.052698493Z [err]  2026-01-10 18:17:11,451 - server - INFO - ‚úÖ Soniox receive loop ended normally
2026-01-10T18:17:12.052703272Z [err]  2026-01-10 18:17:11,451 - dead_air_monitor - INFO - üîá Dead air monitoring cancelled for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:17:12.052708219Z [err]  2026-01-10 18:17:11,451 - dead_air_monitor - INFO - üîá Dead air monitoring stopped for call v3:XUPR9DsBoWRJYNEtEgg_wJG1qfOn8cUsm78OkG566noagJy85qQ8SQ
2026-01-10T18:17:12.052712858Z [err]  2026-01-10 18:17:11,451 - server - INFO - üîá Dead air monitoring task cancelled
2026-01-10T18:17:12.052720028Z [err]  2026-01-10 18:17:11,984 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 112 CHUNKS SENT TO TELNYX in 1899ms (audio duration: 2.2s, paced after 10 chunks)
2026-01-10T18:17:12.052725446Z [err]  2026-01-10 18:17:11,984 - persistent_tts_service - INFO - ‚úÖ Sent 112 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:17:14.242950523Z [err]  2026-01-10 18:17:13,341 - persistent_tts_service - INFO - üîá [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] FLOOR RELEASED (is_holding_floor=False)
2026-01-10T18:17:14.242958217Z [err]  2026-01-10 18:17:13,413 - dead_air_monitor - INFO - ‚è±Ô∏è Playback expected end time passed (0.4s ago), marking agent as done speaking
2026-01-10T18:17:14.242965154Z [err]  2026-01-10 18:17:13,413 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1768069033.4132216 for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:14.242974262Z [err]  2026-01-10 18:17:13,413 - core_calling_service - INFO - ü§ñ Agent stopped speaking for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:14.242980969Z [err]  2026-01-10 18:17:13,451 - soniox_service - ERROR - ‚ùå Error closing Soniox session: received 1000 (OK); then sent 1000 (OK)
2026-01-10T18:17:14.242988843Z [err]  2026-01-10 18:17:13,451 - server - INFO - üîå Telnyx WebSocket disconnected
2026-01-10T18:17:16.203282338Z [err]  2026-01-10 18:17:15,787 - server - INFO - üì§ Audio flowing: 798 packets sent to Soniox (5s update)
2026-01-10T18:17:17.380042674Z [err]  2026-01-10 18:17:16,395 - server - INFO - üî§ RAW TOKENS: [" Wh"?]
2026-01-10T18:17:17.380164760Z [err]  2026-01-10 18:17:16,396 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER RESET (user started speaking) for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:17.380175347Z [err]  2026-01-10 18:17:16,396 - core_calling_service - INFO - üîä Silence timer reset for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g (user started speaking)
2026-01-10T18:17:17.380184493Z [err]  2026-01-10 18:17:16,396 - core_calling_service - INFO - üë§ User started speaking for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:17.380226509Z [err]  2026-01-10 18:17:16,396 - persistent_tts_service - INFO - ‚ö° [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] CLEAR_AUDIO called - pending_sentences=0, audio_queue=0
2026-01-10T18:17:17.380237154Z [err]  2026-01-10 18:17:16,396 - persistent_tts_service - INFO - üõë [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] INTERRUPT - Floor Released (is_holding_floor=False)
2026-01-10T18:17:17.380246162Z [err]  2026-01-10 18:17:16,427 - persistent_tts_service - INFO - üõë [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] Sent clear event to Telnyx WebSocket (3x)
2026-01-10T18:17:17.380255689Z [err]  2026-01-10 18:17:16,428 - persistent_tts_service - INFO - ‚è±Ô∏è [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] Reset playback_expected_end_time to NOW
2026-01-10T18:17:17.380268915Z [err]  2026-01-10 18:17:16,428 - server - INFO - üìä [REAL TIMING] AUDIO QUEUE CLEARED (user started speaking) for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:17.380278378Z [err]  2026-01-10 18:17:16,438 - redis_service - INFO - üì• Retrieved call data from Redis: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:17.380286127Z [err]  2026-01-10 18:17:16,439 - redis_service - INFO - üì¶ Stored call data in Redis: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g (TTL: 3600s)
2026-01-10T18:17:18.353088574Z [err]  2026-01-10 18:17:16,439 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Wh' | Generating: False
2026-01-10T18:17:18.353098822Z [err]  2026-01-10 18:17:16,534 - server - INFO - üî§ RAW TOKENS: [" Wh"?, "at"?]
2026-01-10T18:17:18.353106566Z [err]  2026-01-10 18:17:16,534 - server - INFO - üîç PARTIAL TRANSCRIPT: 'what' | Generating: False
2026-01-10T18:17:18.353118454Z [err]  2026-01-10 18:17:16,585 - server - INFO - üî§ RAW TOKENS: [" Wh"‚úì, "at"‚úì, "?"‚úì, "<end>"‚úì]
2026-01-10T18:17:18.353130787Z [err]  2026-01-10 18:17:16,585 - server - INFO - üéØ Endpoint detected: <end> token received
2026-01-10T18:17:18.353141096Z [err]  2026-01-10 18:17:16,586 - server - INFO - üßπ Cleaned transcript: ' Wh at ?' -> 'what?'
2026-01-10T18:17:18.353150305Z [err]  2026-01-10 18:17:16,586 - server - INFO - üì• FINAL TOKENS: 'what?' (3 tokens)
2026-01-10T18:17:18.353159635Z [err]  2026-01-10 18:17:16,586 - server - INFO - üé§ Soniox final transcript: 'what?'
2026-01-10T18:17:18.353169396Z [err]  2026-01-10 18:17:16,586 - server - INFO - üîç FILTER CHECK: words=1, is_filler=False, is_garbled=False, tts_speaking=False, time_until_done=-0.2s, generating=False, playbacks=0, is_active=False
2026-01-10T18:17:18.353178182Z [err]  2026-01-10 18:17:16,586 - server - INFO - üöÄ Spawned tracked background task for endpoint processing
2026-01-10T18:17:18.353192672Z [err]  2026-01-10 18:17:16,586 - server - INFO - ‚è±Ô∏è [18:17:16.586] üìù FINAL TRANSCRIPT RECEIVED: 'what?'
2026-01-10T18:17:18.353202347Z [err]  2026-01-10 18:17:16,586 - server - INFO - ‚è±Ô∏è [18:17:16.586] STT endpoint detection latency: 4ms
2026-01-10T18:17:18.353212308Z [err]  2026-01-10 18:17:16,586 - server - INFO - ‚è±Ô∏è [18:17:16.586] üé§ USER STOPPED SPEAKING - Beginning processing pipeline
2026-01-10T18:17:18.353222805Z [err]  2026-01-10 18:17:16,586 - server - INFO - ‚è±Ô∏è User spoke at 1768069036.5865235
2026-01-10T18:17:18.353231874Z [err]  2026-01-10 18:17:16,587 - redis_service - INFO - üì¶ Stored call data in Redis: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g (TTL: 3600s)
2026-01-10T18:17:18.357228117Z [err]  2026-01-10 18:17:16,587 - server - INFO - üë§ User has spoken - aiSpeaksAfterSilence timer cancelled if pending
2026-01-10T18:17:18.357245233Z [err]  2026-01-10 18:17:16,587 - server - INFO - ‚úÖ Agent SILENT - User said 1 word(s): 'what?' - Processing...
2026-01-10T18:17:18.357251551Z [err]  2026-01-10 18:17:16,598 - server - INFO - üìä [REAL TIMING] STT: User audio end ‚Üí Transcript received: 5ms
2026-01-10T18:17:18.357258279Z [err]  2026-01-10 18:17:16,598 - server - INFO - üé§ Endpoint detected by Soniox - processing transcript: what?
2026-01-10T18:17:18.357264505Z [err]  2026-01-10 18:17:16,598 - core_calling_service - INFO - üë§ User stopped speaking for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:18.357270915Z [err]  2026-01-10 18:17:16,599 - server - INFO - ‚úÖ User starting new turn - resetting agent speaking flag
2026-01-10T18:17:18.357278719Z [err]  2026-01-10 18:17:16,599 - server - INFO - ‚è±Ô∏è [TIMING] STT_START: User last audio packet received
2026-01-10T18:17:18.357284567Z [err]  2026-01-10 18:17:16,599 - server - INFO - ‚è±Ô∏è [TIMING] STT_END: Endpoint detected at T+16ms
2026-01-10T18:17:18.357289179Z [err]  2026-01-10 18:17:16,599 - server - INFO - ‚è±Ô∏è [TIMING] STT_LATENCY: 16ms (Soniox model: stt-rt-v3)
2026-01-10T18:17:18.357294220Z [err]  2026-01-10 18:17:16,599 - server - INFO - ‚è±Ô∏è  USER STOPPED SPEAKING at T=0ms
2026-01-10T18:17:18.357298122Z [err]  2026-01-10 18:17:16,599 - server - INFO - üìä [REAL TIMING] Processing start: 16ms after user audio end
2026-01-10T18:17:18.357303131Z [err]  2026-01-10 18:17:16,599 - server - INFO - üéôÔ∏è Agent generating response - interruption detection active
2026-01-10T18:17:18.357306895Z [err]  2026-01-10 18:17:16,599 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:18.357312545Z [err]  2026-01-10 18:17:16,693 - server - INFO - üìù Saved user transcript to database
2026-01-10T18:17:18.359068338Z [err]  2026-01-10 18:17:16,693 - persistent_tts_service - INFO - üîÑ [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] Interrupt flag reset - ready for new audio
2026-01-10T18:17:18.359074855Z [err]  2026-01-10 18:17:16,693 - server - INFO - üîÑ Reset TTS interrupt flag before new response
2026-01-10T18:17:18.359080440Z [err]  2026-01-10 18:17:16,693 - core_calling_service - INFO - ‚è±Ô∏è [18:17:16.693] üì• process_user_input() ENTRY - text: 'what?...'
2026-01-10T18:17:18.359085512Z [err]  2026-01-10 18:17:16,695 - redis_service - INFO - üì• Retrieved call data from Redis: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:18.359092713Z [err]  2026-01-10 18:17:16,695 - core_calling_service - WARNING - üö® BARGE-IN DETECTED for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g: User spoke while Silence Greeting was triggering
2026-01-10T18:17:18.359098220Z [err]  2026-01-10 18:17:16,736 - telnyx_service - INFO - Telnyx service initialized with connection: 2777245537294877821
2026-01-10T18:17:18.359105787Z [err]  2026-01-10 18:17:16,736 - telnyx_service - INFO - üõë Stopping audio playback on call: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:18.359110889Z [err]  2026-01-10 18:17:17,067 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g/actions/playback_stop "HTTP/1.1 200 OK"
2026-01-10T18:17:18.359115686Z [err]  2026-01-10 18:17:17,070 - telnyx_service - INFO - ‚úÖ Successfully stopped audio playback
2026-01-10T18:17:18.359119921Z [err]  2026-01-10 18:17:17,070 - core_calling_service - INFO - ‚úÖ BARGE-IN: Audio playback STOPPED
2026-01-10T18:17:18.359124251Z [err]  2026-01-10 18:17:17,070 - core_calling_service - INFO - ‚úÖ BARGE-IN: Preserving silence greeting in history to maintain context
2026-01-10T18:17:18.359129544Z [err]  2026-01-10 18:17:17,071 - redis_service - INFO - üì• Retrieved call data from Redis: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:18.361423391Z [err]  2026-01-10 18:17:17,073 - redis_service - INFO - üì¶ Stored call data in Redis: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g (TTL: 3600s)
2026-01-10T18:17:18.361438205Z [err]  2026-01-10 18:17:17,073 - core_calling_service - INFO - ‚úÖ BARGE-IN: Reset silence_greeting_triggered flag
2026-01-10T18:17:18.361447499Z [err]  2026-01-10 18:17:17,073 - core_calling_service - INFO - ‚è±Ô∏è [18:17:17.073] ‚è© About to call _process_call_flow_streaming()
2026-01-10T18:17:18.361456028Z [err]  2026-01-10 18:17:17,074 - core_calling_service - INFO - ‚è±Ô∏è [18:17:17.073] üîÄ Agent type: call_flow, calling flow processor...
2026-01-10T18:17:18.361465333Z [err]  2026-01-10 18:17:17,074 - core_calling_service - INFO - ‚è±Ô∏è [18:17:17.074] üîÄ _process_call_flow_streaming() ENTRY
2026-01-10T18:17:18.361472672Z [err]  2026-01-10 18:17:17,074 - core_calling_service - INFO - Flow processing - History length: 5, Is first: False
2026-01-10T18:17:18.361480135Z [err]  2026-01-10 18:17:17,074 - core_calling_service - INFO - üîç Using explicitly set current_node_id: 1763159750250
2026-01-10T18:17:18.361487409Z [err]  2026-01-10 18:17:17,074 - core_calling_service - INFO - ‚è±Ô∏è [18:17:17.074] üöÄ Checking special cases before merged transition+response...
2026-01-10T18:17:18.361494510Z [err]  2026-01-10 18:17:17,074 - core_calling_service - INFO - üé§ AUTO-TRANSITION AFTER RESPONSE - user spoke, transitioning to: 1763161849799
2026-01-10T18:17:18.361502491Z [err]  2026-01-10 18:17:17,074 - core_calling_service - INFO - ‚úÖ Auto-transitioned (after response) to: Node ID: N_Opener_StackingIncomeHook_V3_CreativeTactic
2026-01-10T18:17:18.361509715Z [err]  2026-01-10 18:17:17,074 - core_calling_service - INFO - ‚è±Ô∏è [18:17:17.074] ‚úÖ Node selected, about to process content...
2026-01-10T18:17:18.361518618Z [err]  2026-01-10 18:17:17,074 - core_calling_service - INFO - üîß Replaced {{now}} with Saturday, January 10, 2026 at 1:17 PM EST in content
2026-01-10T18:17:18.364449093Z [err]  2026-01-10 18:17:17,074 - core_calling_service - INFO - üîß Replaced {{customer_name}} with Kendrick in content
2026-01-10T18:17:18.364461421Z [err]  2026-01-10 18:17:17,074 - core_calling_service - INFO - üîß Replaced {{callerName}} with  in content
2026-01-10T18:17:18.364469061Z [err]  2026-01-10 18:17:17,074 - core_calling_service - INFO - üîß Replaced {{lead_id}} with None in content
2026-01-10T18:17:18.364476312Z [err]  2026-01-10 18:17:17,074 - core_calling_service - INFO - üîß Replaced {{qc_tracking_enabled}} with False in content
2026-01-10T18:17:18.364484012Z [err]  2026-01-10 18:17:17,074 - core_calling_service - INFO - üîß Replaced {{track_keywords}} with  in content
2026-01-10T18:17:18.364490861Z [err]  2026-01-10 18:17:17,074 - core_calling_service - INFO - üîß Replaced {{expected_commitment}} with not_specified in content
2026-01-10T18:17:18.364497935Z [err]  2026-01-10 18:17:17,075 - core_calling_service - INFO - üîß Replaced {{to_number}} with +17708336397 in content
2026-01-10T18:17:18.364504631Z [err]  2026-01-10 18:17:17,075 - core_calling_service - INFO - üîß Replaced {{phone_number}} with +17708336397 in content
2026-01-10T18:17:18.364511261Z [err]  2026-01-10 18:17:17,075 - core_calling_service - INFO - üîß Replaced {{email}} with None in content
2026-01-10T18:17:18.364518970Z [err]  2026-01-10 18:17:17,075 - core_calling_service - INFO - ‚úÖ Using explicit SCRIPT mode (length: 260 chars) - will return text instantly
2026-01-10T18:17:18.364534619Z [err]  2026-01-10 18:17:17,075 - core_calling_service - INFO - Using flow node: Node ID: N_Opener_StackingIncomeHook_V3_CreativeTactic (type: conversation, mode: script)
2026-01-10T18:17:18.364542004Z [err]  2026-01-10 18:17:17,075 - core_calling_service - INFO - ‚è±Ô∏è [18:17:17.075] üìÑ About to process content (mode=script, length=260)
2026-01-10T18:17:18.364549017Z [err]  2026-01-10 18:17:17,075 - core_calling_service - INFO - üì§ Streaming script as 2 sentence(s)
2026-01-10T18:17:18.367838356Z [err]  2026-01-10 18:17:17,076 - server - INFO - üîç Persistent TTS lookup: call_id=v3:pxZiwhAYGmIvm7qB_..., session=FOUND
2026-01-10T18:17:18.367850885Z [err]  2026-01-10 18:17:17,076 - server - INFO - üöÄ Streaming sentence #2 via persistent WebSocket
2026-01-10T18:17:18.367859046Z [err]  2026-01-10 18:17:17,076 - server - INFO - üéµ TTS task #2 started at +0ms
2026-01-10T18:17:18.367876369Z [err]  2026-01-10 18:17:17,076 - core_calling_service - INFO - üì§ Streamed script sentence 2/2: I know this call is out of the blue, but do you ha...
2026-01-10T18:17:18.367888661Z [err]  2026-01-10 18:17:17,076 - core_calling_service - INFO - üîä Silence tracking reset for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g (user responded)
2026-01-10T18:17:18.367900249Z [err]  2026-01-10 18:17:17,075 - server - INFO - üì§ Sentence arrived from LLM: Well, uh, I don't know if you could yet, but, I'm ...
2026-01-10T18:17:18.367913971Z [err]  2026-01-10 18:17:17,075 - server - INFO - ‚è±Ô∏è [TIMING] TTFS (Time To First Sentence): 476ms
2026-01-10T18:17:18.367922557Z [err]  2026-01-10 18:17:17,075 - server - INFO - ‚ö° Starting REAL-TIME TTS for first sentence
2026-01-10T18:17:18.367935267Z [err]  2026-01-10 18:17:17,076 - server - INFO - üîç Persistent TTS lookup: call_id=v3:pxZiwhAYGmIvm7qB_..., session=FOUND
2026-01-10T18:17:18.367942283Z [err]  2026-01-10 18:17:17,076 - server - INFO - üöÄ Streaming sentence #1 via persistent WebSocket
2026-01-10T18:17:18.367951351Z [err]  2026-01-10 18:17:17,076 - server - INFO - üéµ TTS task #1 started at +0ms
2026-01-10T18:17:18.367960115Z [err]  2026-01-10 18:17:17,076 - server - INFO - ‚è±Ô∏è [TIMING] TTFT_TTS (First TTS Task Started): 477ms
2026-01-10T18:17:18.367966614Z [err]  2026-01-10 18:17:17,076 - core_calling_service - INFO - üì§ Streamed script sentence 1/2: Well, uh, I don't know if you could yet, but, I'm ...
2026-01-10T18:17:18.367973481Z [err]  2026-01-10 18:17:17,076 - server - INFO - üì§ Sentence arrived from LLM: I know this call is out of the blue, but do you ha...
2026-01-10T18:17:18.371539880Z [err]  2026-01-10 18:17:17,076 - core_calling_service - INFO - ‚úÖ User responded to regular message, resetting counter
2026-01-10T18:17:18.371555889Z [err]  2026-01-10 18:17:17,076 - core_calling_service - INFO - üíæ Storing node ID 1763161849799 in conversation history
2026-01-10T18:17:18.371565639Z [err]  2026-01-10 18:17:17,076 - core_calling_service - INFO - LLM response (0.38s): Well, uh, I don't know if you could yet, but, I'm calling because you filled out an ad about stacking income without stacking hours. I know this call is out of the blue, but do you have just 25 seconds for me to explain why I'm reaching out today specifically?
2026-01-10T18:17:18.371590022Z [err]  2026-01-10 18:17:17,076 - core_calling_service - INFO - Total latency: 0.38s
2026-01-10T18:17:18.371597919Z [err]  2026-01-10 18:17:17,080 - server - INFO - ‚úÖ LLM finished in 481ms, TTS tasks already running in background
2026-01-10T18:17:18.371606565Z [err]  2026-01-10 18:17:17,081 - server - INFO - üéµ Streaming 2 TTS chunks as they complete...
2026-01-10T18:17:18.371614182Z [err]  2026-01-10 18:17:17,081 - server - INFO - üöÄ Persistent TTS: Audio already streaming in background!
2026-01-10T18:17:18.371623142Z [err]  2026-01-10 18:17:17,081 - server - INFO -    2 sentences queued and playing seamlessly
2026-01-10T18:17:18.371631958Z [err]  2026-01-10 18:17:17,081 - persistent_tts_service - INFO - üé§ [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] Streaming sentence #4: Well, uh, I don't know if you could yet, but, I'm ...
2026-01-10T18:17:18.371641970Z [err]  2026-01-10 18:17:17,082 - persistent_tts_service - INFO - üöÄ [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] Sent sentence #4 to ElevenLabs in 0ms (non-blocking)
2026-01-10T18:17:18.371650235Z [err]  2026-01-10 18:17:17,082 - persistent_tts_service - INFO - üìä [REAL TIMING] TEXT SENT TO ELEVENLABS: 'Well, uh, I don't know if you could yet, but, I'm ...'
2026-01-10T18:17:18.373917065Z [err]  2026-01-10 18:17:17,082 - persistent_tts_service - INFO - üé§ [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] Streaming sentence #5: I know this call is out of the blue, but do you ha...
2026-01-10T18:17:18.373931574Z [err]  2026-01-10 18:17:17,082 - persistent_tts_service - INFO - üöÄ [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] Sent sentence #5 to ElevenLabs in 0ms (non-blocking)
2026-01-10T18:17:18.373938728Z [err]  2026-01-10 18:17:17,082 - persistent_tts_service - INFO - üìä [REAL TIMING] TEXT SENT TO ELEVENLABS: 'I know this call is out of the blue, but do you ha...'
2026-01-10T18:17:18.373945012Z [err]  2026-01-10 18:17:17,082 - server - INFO - ‚úÖ All 2 persistent TTS streams completed
2026-01-10T18:17:18.373951204Z [err]  2026-01-10 18:17:17,082 - server - INFO - ‚úÖ Agent generation complete (persistent TTS) - response window closed
2026-01-10T18:17:18.373957791Z [err]  2026-01-10 18:17:17,082 - server - INFO - ‚è±Ô∏è  FIRST AUDIO STARTED: 483ms from user stop üöÄ
2026-01-10T18:17:18.373964314Z [err]  2026-01-10 18:17:17,082 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:18.373970312Z [err]  2026-01-10 18:17:17,082 - server - INFO - ‚úÖ Agent generation complete - response window closed
2026-01-10T18:17:18.373976568Z [err]  2026-01-10 18:17:17,082 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2026-01-10T18:17:18.373984277Z [err]  2026-01-10 18:17:17,083 - server - INFO - ‚è±Ô∏è  [TIMING] ==== E2E LATENCY SUMMARY ====
2026-01-10T18:17:18.373990402Z [err]  2026-01-10 18:17:17,083 - server - INFO - ‚è±Ô∏è  [TIMING] STT: 16ms (provider: soniox, model: stt-rt-v3)
2026-01-10T18:17:18.373997523Z [err]  2026-01-10 18:17:17,083 - server - INFO - ‚è±Ô∏è  [TIMING] LLM_TOTAL: 481ms (provider: grok, model: grok-4-1-fast-non-reasoning)
2026-01-10T18:17:18.377668556Z [err]  2026-01-10 18:17:17,083 - server - INFO - ‚è±Ô∏è  [TIMING] TTS_TOTAL: 7ms (provider: elevenlabs, websocket: False)
2026-01-10T18:17:18.377678139Z [err]  2026-01-10 18:17:17,083 - server - INFO - ‚è±Ô∏è  [TIMING] E2E_TOTAL: 483ms (user stopped ‚Üí play_audio_url called)
2026-01-10T18:17:18.377691698Z [err]  2026-01-10 18:17:17,083 - server - INFO - ‚è±Ô∏è  [TIMING] ‚ö†Ô∏è NOTE: E2E_TOTAL does not include:
2026-01-10T18:17:18.377700088Z [err]  2026-01-10 18:17:17,083 - server - INFO - ‚è±Ô∏è  [TIMING]   - Telnyx processing time (~50-200ms)
2026-01-10T18:17:18.377708399Z [err]  2026-01-10 18:17:17,083 - server - INFO - ‚è±Ô∏è  [TIMING]   - Network latency to user's phone (~50-150ms)
2026-01-10T18:17:18.377718203Z [err]  2026-01-10 18:17:17,083 - server - INFO - ‚è±Ô∏è  [TIMING]   - Phone audio buffering (~50-200ms)
2026-01-10T18:17:18.377727580Z [err]  2026-01-10 18:17:17,083 - server - INFO - ‚è±Ô∏è  [TIMING]   - TOTAL MISSING: ~150-550ms typically
2026-01-10T18:17:18.377734418Z [err]  2026-01-10 18:17:17,083 - server - INFO - ‚è±Ô∏è  [TIMING]   - REAL USER LATENCY: 783ms estimated
2026-01-10T18:17:18.377742772Z [err]  2026-01-10 18:17:17,083 - server - INFO - ‚è±Ô∏è  [TIMING] RESPONSE_TEXT: 260 chars, 2 sentences
2026-01-10T18:17:18.377751553Z [err]  2026-01-10 18:17:17,083 - server - INFO - ‚è±Ô∏è  [TIMING] USER_INPUT: 'what?...'
2026-01-10T18:17:18.377765089Z [err]  2026-01-10 18:17:17,083 - server - INFO - ‚è±Ô∏è  [TIMING] AI_RESPONSE: 'Well, uh, I don't know if you could yet, but, I'm calling be...'
2026-01-10T18:17:18.377772977Z [err]  2026-01-10 18:17:17,083 - server - INFO - ‚è±Ô∏è  [TIMING] ==========================
2026-01-10T18:17:18.377779036Z [err]  2026-01-10 18:17:17,083 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2026-01-10T18:17:18.377785292Z [err]  2026-01-10 18:17:17,272 - server - INFO - üìù Saved assistant transcript and latency to database (Node: Node ID: N_Opener_StackingIncomeHook_V3_CreativeTactic, Dead Air: 504ms)
2026-01-10T18:17:19.192017062Z [err]  2026-01-10 18:17:17,272 - server - INFO - üîä Agent finished generating, 0 playbacks active - waiting for webhooks to close window and start silence tracking
2026-01-10T18:17:19.192023246Z [err]  2026-01-10 18:17:17,273 - server - INFO - üîç END CALL CHECK: should_end_call=False, max_checkins=False, max_duration=False
2026-01-10T18:17:19.192028731Z [err]  2026-01-10 18:17:17,367 - persistent_tts_service - INFO - üì§ Sending 13793 bytes of audio (87 chunks, 1.7s duration) via WebSocket
2026-01-10T18:17:19.192034518Z [err]  2026-01-10 18:17:17,367 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:17:19.192040605Z [err]  2026-01-10 18:17:17,367 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.7s (total: 1.7s from now)
2026-01-10T18:17:19.192046661Z [err]  2026-01-10 18:17:17,367 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768069037.368 (chunk 1/87, 160 bytes)
2026-01-10T18:17:19.192053365Z [err]  2026-01-10 18:17:18,805 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 87 CHUNKS SENT TO TELNYX in 1438ms (audio duration: 1.7s, paced after 10 chunks)
2026-01-10T18:17:19.192060324Z [err]  2026-01-10 18:17:18,806 - persistent_tts_service - INFO - ‚úÖ Sent 87 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:17:19.192068525Z [err]  2026-01-10 18:17:18,806 - persistent_tts_service - INFO - üì§ Sending 1068 bytes of audio (7 chunks, 0.1s duration) via WebSocket
2026-01-10T18:17:19.192073854Z [err]  2026-01-10 18:17:18,806 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:17:19.192083654Z [err]  2026-01-10 18:17:18,806 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +0.1s (total: 0.4s from now)
2026-01-10T18:17:19.193635412Z [err]  2026-01-10 18:17:18,806 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768069038.807 (chunk 1/7, 160 bytes)
2026-01-10T18:17:19.193643356Z [err]  2026-01-10 18:17:18,806 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 7 CHUNKS SENT TO TELNYX in 0ms (audio duration: 0.1s, paced after 10 chunks)
2026-01-10T18:17:19.193650478Z [err]  2026-01-10 18:17:18,806 - persistent_tts_service - INFO - ‚úÖ Sent 7 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:17:19.193658107Z [err]  2026-01-10 18:17:18,806 - persistent_tts_service - INFO - üì§ Sending 13793 bytes of audio (87 chunks, 1.7s duration) via WebSocket
2026-01-10T18:17:19.193666266Z [err]  2026-01-10 18:17:18,806 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:17:19.193674458Z [err]  2026-01-10 18:17:18,806 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.7s (total: 2.1s from now)
2026-01-10T18:17:19.193682300Z [err]  2026-01-10 18:17:18,806 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768069038.807 (chunk 1/87, 160 bytes)
2026-01-10T18:17:20.360745267Z [err]  2026-01-10 18:17:20,249 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768069040.249 (chunk 1/87, 160 bytes)
2026-01-10T18:17:20.361000784Z [err]  2026-01-10 18:17:20,248 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 87 CHUNKS SENT TO TELNYX in 1441ms (audio duration: 1.7s, paced after 10 chunks)
2026-01-10T18:17:20.361005993Z [err]  2026-01-10 18:17:20,248 - persistent_tts_service - INFO - ‚úÖ Sent 87 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:17:20.361012035Z [err]  2026-01-10 18:17:20,248 - persistent_tts_service - INFO - üì§ Sending 1068 bytes of audio (7 chunks, 0.1s duration) via WebSocket
2026-01-10T18:17:20.361018132Z [err]  2026-01-10 18:17:20,248 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:17:20.361023394Z [err]  2026-01-10 18:17:20,248 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +0.1s (total: 0.8s from now)
2026-01-10T18:17:20.361028731Z [err]  2026-01-10 18:17:20,248 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768069040.249 (chunk 1/7, 160 bytes)
2026-01-10T18:17:20.361035878Z [err]  2026-01-10 18:17:20,248 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 7 CHUNKS SENT TO TELNYX in 0ms (audio duration: 0.1s, paced after 10 chunks)
2026-01-10T18:17:20.361041342Z [err]  2026-01-10 18:17:20,248 - persistent_tts_service - INFO - ‚úÖ Sent 7 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:17:20.361045328Z [err]  2026-01-10 18:17:20,248 - persistent_tts_service - INFO - üì§ Sending 13792 bytes of audio (87 chunks, 1.7s duration) via WebSocket
2026-01-10T18:17:20.361051228Z [err]  2026-01-10 18:17:20,248 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:17:20.361055380Z [err]  2026-01-10 18:17:20,248 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.7s (total: 2.6s from now)
2026-01-10T18:17:21.155537695Z [err]  2026-01-10 18:17:20,464 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (2.3s left)
2026-01-10T18:17:21.155550378Z [err]  2026-01-10 18:17:20,803 - server - INFO - üì§ Audio flowing: 1049 packets sent to Soniox (5s update)
2026-01-10T18:17:21.155568706Z [err]  2026-01-10 18:17:20,967 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (1.8s left)
2026-01-10T18:17:22.096819979Z [err]  2026-01-10 18:17:21,766 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +2.0s (total: 3.4s from now)
2026-01-10T18:17:22.096861315Z [err]  2026-01-10 18:17:21,689 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:17:22.096870191Z [err]  2026-01-10 18:17:21,689 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +0.3s (total: 1.4s from now)
2026-01-10T18:17:22.096884176Z [err]  2026-01-10 18:17:21,689 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768069041.690 (chunk 1/14, 160 bytes)
2026-01-10T18:17:22.096886023Z [err]  2026-01-10 18:17:21,766 - persistent_tts_service - INFO - ‚úÖ Sent 14 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:17:22.096888584Z [err]  2026-01-10 18:17:21,689 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 87 CHUNKS SENT TO TELNYX in 1440ms (audio duration: 1.7s, paced after 10 chunks)
2026-01-10T18:17:22.096897784Z [err]  2026-01-10 18:17:21,765 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 14 CHUNKS SENT TO TELNYX in 76ms (audio duration: 0.3s, paced after 10 chunks)
2026-01-10T18:17:22.096903864Z [err]  2026-01-10 18:17:21,689 - persistent_tts_service - INFO - ‚úÖ Sent 87 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:17:22.096907353Z [err]  2026-01-10 18:17:21,766 - persistent_tts_service - INFO - üì§ Sending 16347 bytes of audio (103 chunks, 2.0s duration) via WebSocket
2026-01-10T18:17:22.096917574Z [err]  2026-01-10 18:17:21,689 - persistent_tts_service - INFO - üì§ Sending 2183 bytes of audio (14 chunks, 0.3s duration) via WebSocket
2026-01-10T18:17:22.096924017Z [err]  2026-01-10 18:17:21,766 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:17:22.102241133Z [err]  2026-01-10 18:17:21,766 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768069041.766 (chunk 1/103, 160 bytes)
2026-01-10T18:17:22.102248980Z [err]  2026-01-10 18:17:22,031 - server - INFO - üé§ Soniox receiver alive - 12 messages received in last 10s
2026-01-10T18:17:24.244615883Z [err]  2026-01-10 18:17:23,508 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 103 CHUNKS SENT TO TELNYX in 1741ms (audio duration: 2.0s, paced after 10 chunks)
2026-01-10T18:17:24.244623111Z [err]  2026-01-10 18:17:23,508 - persistent_tts_service - INFO - ‚úÖ Sent 103 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:17:24.244630776Z [err]  2026-01-10 18:17:23,508 - persistent_tts_service - INFO - üì§ Sending 9659 bytes of audio (61 chunks, 1.2s duration) via WebSocket
2026-01-10T18:17:24.244652216Z [err]  2026-01-10 18:17:23,508 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:17:24.244663364Z [err]  2026-01-10 18:17:23,508 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.2s (total: 2.8s from now)
2026-01-10T18:17:24.244670316Z [err]  2026-01-10 18:17:23,508 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768069043.509 (chunk 1/61, 160 bytes)
2026-01-10T18:17:25.155932895Z [err]  2026-01-10 18:17:24,464 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 61 CHUNKS SENT TO TELNYX in 955ms (audio duration: 1.2s, paced after 10 chunks)
2026-01-10T18:17:25.155940503Z [err]  2026-01-10 18:17:24,464 - persistent_tts_service - INFO - ‚úÖ Sent 61 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:17:25.155950981Z [err]  2026-01-10 18:17:24,464 - persistent_tts_service - INFO - üì§ Sending 13793 bytes of audio (87 chunks, 1.7s duration) via WebSocket
2026-01-10T18:17:25.155958874Z [err]  2026-01-10 18:17:24,464 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:17:25.155965633Z [err]  2026-01-10 18:17:24,464 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.7s (total: 3.6s from now)
2026-01-10T18:17:25.155972324Z [err]  2026-01-10 18:17:24,465 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768069044.465 (chunk 1/87, 160 bytes)
2026-01-10T18:17:26.198431360Z [err]  2026-01-10 18:17:25,497 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (2.6s left)
2026-01-10T18:17:26.198436725Z [err]  2026-01-10 18:17:25,822 - server - INFO - üì§ Audio flowing: 1300 packets sent to Soniox (5s update)
2026-01-10T18:17:26.198443290Z [err]  2026-01-10 18:17:25,907 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 87 CHUNKS SENT TO TELNYX in 1442ms (audio duration: 1.7s, paced after 10 chunks)
2026-01-10T18:17:26.198449962Z [err]  2026-01-10 18:17:25,907 - persistent_tts_service - INFO - ‚úÖ Sent 87 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:17:26.198456725Z [err]  2026-01-10 18:17:25,907 - persistent_tts_service - INFO - üì§ Sending 1068 bytes of audio (7 chunks, 0.1s duration) via WebSocket
2026-01-10T18:17:26.198464378Z [err]  2026-01-10 18:17:25,907 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:17:26.198471030Z [err]  2026-01-10 18:17:25,907 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +0.1s (total: 2.3s from now)
2026-01-10T18:17:26.198479798Z [err]  2026-01-10 18:17:25,907 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768069045.908 (chunk 1/7, 160 bytes)
2026-01-10T18:17:26.198489045Z [err]  2026-01-10 18:17:25,907 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 7 CHUNKS SENT TO TELNYX in 0ms (audio duration: 0.1s, paced after 10 chunks)
2026-01-10T18:17:26.198496535Z [err]  2026-01-10 18:17:25,907 - persistent_tts_service - INFO - ‚úÖ Sent 7 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:17:26.198504025Z [err]  2026-01-10 18:17:25,907 - persistent_tts_service - INFO - üì§ Sending 27121 bytes of audio (170 chunks, 3.4s duration) via WebSocket
2026-01-10T18:17:26.198511369Z [err]  2026-01-10 18:17:25,907 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:17:26.198700496Z [err]  2026-01-10 18:17:25,907 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +3.4s (total: 5.7s from now)
2026-01-10T18:17:26.198707300Z [err]  2026-01-10 18:17:25,907 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768069045.908 (chunk 1/170, 160 bytes)
2026-01-10T18:17:26.198715161Z [err]  2026-01-10 18:17:25,999 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (5.6s left)
2026-01-10T18:17:29.400522392Z [err]  2026-01-10 18:17:28,926 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 170 CHUNKS SENT TO TELNYX in 3018ms (audio duration: 3.4s, paced after 10 chunks)
2026-01-10T18:17:29.400530574Z [err]  2026-01-10 18:17:28,926 - persistent_tts_service - INFO - ‚úÖ Sent 170 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:17:30.652272258Z [err]  2026-01-10 18:17:30,022 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (1.6s left)
2026-01-10T18:17:30.652276692Z [err]  2026-01-10 18:17:30,525 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (1.1s left)
2026-01-10T18:17:31.582286630Z [err]  2026-01-10 18:17:30,822 - server - INFO - üì§ Audio flowing: 1550 packets sent to Soniox (5s update)
2026-01-10T18:17:32.649533382Z [err]  2026-01-10 18:17:32,034 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1768069052.0340488 for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:32.649549819Z [err]  2026-01-10 18:17:32,034 - core_calling_service - INFO - ü§ñ Agent stopped speaking for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:32.649599790Z [err]  2026-01-10 18:17:31,818 - persistent_tts_service - INFO - üîá [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] FLOOR RELEASED (is_holding_floor=False)
2026-01-10T18:17:32.649612828Z [err]  2026-01-10 18:17:32,033 - dead_air_monitor - INFO - ‚è±Ô∏è Playback expected end time passed (0.5s ago), marking agent as done speaking
2026-01-10T18:17:33.650309120Z [err]  2026-01-10 18:17:32,844 - server - INFO - üé§ Soniox receiver alive - 10 messages received in last 10s
2026-01-10T18:17:34.450206689Z [err]  2026-01-10 18:17:33,994 - server - INFO - üî§ RAW TOKENS: [" I"?, " don"?]
2026-01-10T18:17:34.450213937Z [err]  2026-01-10 18:17:33,994 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER RESET (user started speaking) for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:34.450222145Z [err]  2026-01-10 18:17:33,994 - core_calling_service - INFO - üîä Silence timer reset for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g (user started speaking)
2026-01-10T18:17:34.450231152Z [err]  2026-01-10 18:17:33,994 - core_calling_service - INFO - üë§ User started speaking for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:34.450238455Z [err]  2026-01-10 18:17:33,994 - persistent_tts_service - INFO - ‚ö° [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] CLEAR_AUDIO called - pending_sentences=0, audio_queue=0
2026-01-10T18:17:34.450247504Z [err]  2026-01-10 18:17:33,994 - persistent_tts_service - INFO - üõë [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] INTERRUPT - Floor Released (is_holding_floor=False)
2026-01-10T18:17:34.450255685Z [err]  2026-01-10 18:17:34,027 - persistent_tts_service - INFO - üõë [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] Sent clear event to Telnyx WebSocket (3x)
2026-01-10T18:17:34.450263482Z [err]  2026-01-10 18:17:34,027 - persistent_tts_service - INFO - ‚è±Ô∏è [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] Reset playback_expected_end_time to NOW
2026-01-10T18:17:34.450272379Z [err]  2026-01-10 18:17:34,027 - server - INFO - üìä [REAL TIMING] AUDIO QUEUE CLEARED (user started speaking) for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:34.450279113Z [err]  2026-01-10 18:17:34,029 - redis_service - INFO - üì• Retrieved call data from Redis: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:34.450287984Z [err]  2026-01-10 18:17:34,030 - redis_service - INFO - üì¶ Stored call data in Redis: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g (TTL: 3600s)
2026-01-10T18:17:34.454307181Z [err]  2026-01-10 18:17:34,030 - server - INFO - üîç PARTIAL TRANSCRIPT: 'I don' | Generating: False
2026-01-10T18:17:34.454314134Z [err]  2026-01-10 18:17:34,139 - server - INFO - üî§ RAW TOKENS: [" I"?, " don"?, "'t"?]
2026-01-10T18:17:34.454320891Z [err]  2026-01-10 18:17:34,140 - server - INFO - üîç PARTIAL TRANSCRIPT: 'I don't' | Generating: False
2026-01-10T18:17:34.454328306Z [err]  2026-01-10 18:17:34,256 - server - INFO - üî§ RAW TOKENS: [" I"?, " don"?, "'t"?, " l"?]
2026-01-10T18:17:34.454337246Z [err]  2026-01-10 18:17:34,257 - server - INFO - üîç PARTIAL TRANSCRIPT: 'I don't l' | Generating: False
2026-01-10T18:17:34.454344064Z [err]  2026-01-10 18:17:34,379 - server - INFO - üî§ RAW TOKENS: [" I"?, " don"?, "'t"?, " l"?, "ike"?]
2026-01-10T18:17:34.454350667Z [err]  2026-01-10 18:17:34,379 - server - INFO - üîç PARTIAL TRANSCRIPT: 'I don't like' | Generating: False
2026-01-10T18:17:34.623648257Z [err]  2026-01-10 18:17:34,620 - server - INFO - üî§ RAW TOKENS: [" I"?, " don"?, "'t"?, " l"?, "ike"?, " sc"?]
2026-01-10T18:17:34.623656780Z [err]  2026-01-10 18:17:34,621 - server - INFO - üîç PARTIAL TRANSCRIPT: 'I don't like sc' | Generating: False
2026-01-10T18:17:35.376660789Z [err]  2026-01-10 18:17:34,964 - server - INFO - ‚è±Ô∏è [TIMING] STT_END: Endpoint detected at T+22ms
2026-01-10T18:17:35.376691872Z [err]  2026-01-10 18:17:34,964 - server - INFO - ‚úÖ User starting new turn - resetting agent speaking flag
2026-01-10T18:17:35.376711392Z [err]  2026-01-10 18:17:34,964 - server - INFO - ‚è±Ô∏è [TIMING] STT_START: User last audio packet received
2026-01-10T18:17:35.376725161Z [err]  2026-01-10 18:17:34,964 - server - INFO - ‚è±Ô∏è [TIMING] STT_LATENCY: 22ms (Soniox model: stt-rt-v3)
2026-01-10T18:17:35.376734738Z [err]  2026-01-10 18:17:34,964 - server - INFO - ‚è±Ô∏è  USER STOPPED SPEAKING at T=0ms
2026-01-10T18:17:35.376743108Z [err]  2026-01-10 18:17:34,964 - server - INFO - üìä [REAL TIMING] Processing start: 22ms after user audio end
2026-01-10T18:17:35.376774983Z [err]  2026-01-10 18:17:34,964 - server - INFO - üéôÔ∏è Agent generating response - interruption detection active
2026-01-10T18:17:35.376783529Z [err]  2026-01-10 18:17:34,964 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:35.377072242Z [err]  2026-01-10 18:17:34,763 - server - INFO - üî§ RAW TOKENS: [" I"?, " don"?, "'t"?, " l"?, "ike"?, " sc"?, "am"?]
2026-01-10T18:17:35.377082591Z [err]  2026-01-10 18:17:34,763 - server - INFO - üîç PARTIAL TRANSCRIPT: 'I don't like scam' | Generating: False
2026-01-10T18:17:35.377089200Z [err]  2026-01-10 18:17:34,949 - server - INFO - üî§ RAW TOKENS: [" I"‚úì, " don"‚úì, "'t"‚úì, " l"‚úì, "ike"‚úì, " sc"‚úì, "am"‚úì, "s."‚úì, "<end>"‚úì]
2026-01-10T18:17:35.377095237Z [err]  2026-01-10 18:17:34,950 - server - INFO - üéØ Endpoint detected: <end> token received
2026-01-10T18:17:35.377106411Z [err]  2026-01-10 18:17:34,950 - server - INFO - üßπ Cleaned transcript: ' I  don 't  l ike  sc am s.' -> 'I don't like scam s.'
2026-01-10T18:17:35.377116781Z [err]  2026-01-10 18:17:34,950 - server - INFO - üì• FINAL TOKENS: 'I don't like scam s.' (8 tokens)
2026-01-10T18:17:35.377123128Z [err]  2026-01-10 18:17:34,950 - server - INFO - üé§ Soniox final transcript: 'I don't like scam s.'
2026-01-10T18:17:35.377129583Z [err]  2026-01-10 18:17:34,951 - server - INFO - üîç FILTER CHECK: words=5, is_filler=False, is_garbled=False, tts_speaking=False, time_until_done=-0.9s, generating=False, playbacks=0, is_active=False
2026-01-10T18:17:35.377136757Z [err]  2026-01-10 18:17:34,951 - server - INFO - üöÄ Spawned tracked background task for endpoint processing
2026-01-10T18:17:35.377144685Z [err]  2026-01-10 18:17:34,951 - server - INFO - ‚è±Ô∏è [18:17:34.951] üìù FINAL TRANSCRIPT RECEIVED: 'I don't like scam s.'
2026-01-10T18:17:35.377151741Z [err]  2026-01-10 18:17:34,951 - server - INFO - ‚è±Ô∏è [18:17:34.951] STT endpoint detection latency: 8ms
2026-01-10T18:17:35.377161741Z [err]  2026-01-10 18:17:34,951 - server - INFO - ‚è±Ô∏è [18:17:34.951] üé§ USER STOPPED SPEAKING - Beginning processing pipeline
2026-01-10T18:17:35.377168674Z [err]  2026-01-10 18:17:34,951 - server - INFO - ‚è±Ô∏è User spoke at 1768069054.951392
2026-01-10T18:17:35.377931909Z [err]  2026-01-10 18:17:34,952 - redis_service - INFO - üì¶ Stored call data in Redis: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g (TTL: 3600s)
2026-01-10T18:17:35.377939082Z [err]  2026-01-10 18:17:34,952 - server - INFO - üë§ User has spoken - aiSpeaksAfterSilence timer cancelled if pending
2026-01-10T18:17:35.377947199Z [err]  2026-01-10 18:17:34,952 - server - INFO - ‚úÖ Agent SILENT - User said 5 word(s): 'I don't like scam s.' - Processing...
2026-01-10T18:17:35.377962167Z [err]  2026-01-10 18:17:34,964 - server - INFO - üìä [REAL TIMING] STT: User audio end ‚Üí Transcript received: 10ms
2026-01-10T18:17:35.377970231Z [err]  2026-01-10 18:17:34,964 - server - INFO - üé§ Endpoint detected by Soniox - processing transcript: I don't like scam s.
2026-01-10T18:17:35.377977396Z [err]  2026-01-10 18:17:34,964 - core_calling_service - INFO - üë§ User stopped speaking for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:35.380049471Z [err]  2026-01-10 18:17:35,050 - dead_air_monitor - INFO - ‚è±Ô∏è Playback expected end time passed (1.0s ago), marking agent as done speaking
2026-01-10T18:17:35.380059003Z [err]  2026-01-10 18:17:35,050 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1768069055.05091 for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:35.380065172Z [err]  2026-01-10 18:17:35,050 - core_calling_service - INFO - ü§ñ Agent stopped speaking for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:35.380072738Z [err]  2026-01-10 18:17:35,059 - server - INFO - üìù Saved user transcript to database
2026-01-10T18:17:35.380077638Z [err]  2026-01-10 18:17:35,059 - persistent_tts_service - INFO - üîÑ [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] Interrupt flag reset - ready for new audio
2026-01-10T18:17:35.380083758Z [err]  2026-01-10 18:17:35,059 - server - INFO - üîÑ Reset TTS interrupt flag before new response
2026-01-10T18:17:35.380088949Z [err]  2026-01-10 18:17:35,060 - core_calling_service - INFO - ‚è±Ô∏è [18:17:35.059] üì• process_user_input() ENTRY - text: 'I don't like scam s....'
2026-01-10T18:17:35.380094322Z [err]  2026-01-10 18:17:35,061 - redis_service - INFO - üì• Retrieved call data from Redis: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:35.380098558Z [err]  2026-01-10 18:17:35,061 - core_calling_service - WARNING - üö® BARGE-IN DETECTED for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g: User spoke while Silence Greeting was triggering
2026-01-10T18:17:35.380103600Z [err]  2026-01-10 18:17:35,105 - telnyx_service - INFO - Telnyx service initialized with connection: 2777245537294877821
2026-01-10T18:17:35.380108884Z [err]  2026-01-10 18:17:35,106 - telnyx_service - INFO - üõë Stopping audio playback on call: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:35.438647685Z [err]  2026-01-10 18:17:35,433 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g/actions/playback_stop "HTTP/1.1 200 OK"
2026-01-10T18:17:35.438657426Z [err]  2026-01-10 18:17:35,434 - telnyx_service - INFO - ‚úÖ Successfully stopped audio playback
2026-01-10T18:17:35.438663416Z [err]  2026-01-10 18:17:35,434 - core_calling_service - INFO - ‚úÖ BARGE-IN: Audio playback STOPPED
2026-01-10T18:17:35.438671992Z [err]  2026-01-10 18:17:35,434 - core_calling_service - INFO - ‚úÖ BARGE-IN: Preserving silence greeting in history to maintain context
2026-01-10T18:17:35.438677072Z [err]  2026-01-10 18:17:35,435 - redis_service - INFO - üì• Retrieved call data from Redis: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:35.443177731Z [err]  2026-01-10 18:17:35,436 - redis_service - INFO - üì¶ Stored call data in Redis: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g (TTL: 3600s)
2026-01-10T18:17:35.443195294Z [err]  2026-01-10 18:17:35,436 - core_calling_service - INFO - ‚úÖ BARGE-IN: Reset silence_greeting_triggered flag
2026-01-10T18:17:35.443205847Z [err]  2026-01-10 18:17:35,436 - core_calling_service - INFO - ‚è±Ô∏è [18:17:35.436] ‚è© About to call _process_call_flow_streaming()
2026-01-10T18:17:35.443215628Z [err]  2026-01-10 18:17:35,436 - core_calling_service - INFO - ‚è±Ô∏è [18:17:35.436] üîÄ Agent type: call_flow, calling flow processor...
2026-01-10T18:17:35.443224959Z [err]  2026-01-10 18:17:35,436 - core_calling_service - INFO - ‚è±Ô∏è [18:17:35.436] üîÄ _process_call_flow_streaming() ENTRY
2026-01-10T18:17:35.443234313Z [err]  2026-01-10 18:17:35,436 - core_calling_service - INFO - Flow processing - History length: 7, Is first: False
2026-01-10T18:17:35.443245265Z [err]  2026-01-10 18:17:35,436 - core_calling_service - INFO - üîç Using explicitly set current_node_id: 1763161849799
2026-01-10T18:17:35.443253716Z [err]  2026-01-10 18:17:35,437 - core_calling_service - INFO - ‚è±Ô∏è [18:17:35.436] üöÄ Checking special cases before merged transition+response...
2026-01-10T18:17:35.443261079Z [err]  2026-01-10 18:17:35,437 - core_calling_service - INFO - ‚è±Ô∏è Using MERGED transition+response for: I don't like scam s....
2026-01-10T18:17:35.443268159Z [err]  2026-01-10 18:17:35,437 - core_calling_service - INFO - Evaluating transitions from Node ID: N_Opener_StackingIncomeHook_V3_CreativeTactic for message: I don't like scam s.
2026-01-10T18:17:35.443273799Z [err]  2026-01-10 18:17:35,437 - core_calling_service - INFO - ‚è±Ô∏è [18:17:35.437] üöÄ MERGED TRANSITION+RESPONSE START - 4 options
2026-01-10T18:17:35.557648726Z [err]  2026-01-10 18:17:35,552 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - response generation still in progress
2026-01-10T18:17:36.375874022Z [err]  2026-01-10 18:17:36,366 - server - INFO - üì§ Sentence arrived from LLM: We've helped over 7,500 students build passive inc...
2026-01-10T18:17:36.375887211Z [err]  2026-01-10 18:17:36,366 - server - INFO - üîç Persistent TTS lookup: call_id=v3:pxZiwhAYGmIvm7qB_..., session=FOUND
2026-01-10T18:17:36.375895833Z [err]  2026-01-10 18:17:36,366 - server - INFO - üöÄ Streaming sentence #2 via persistent WebSocket
2026-01-10T18:17:36.375962851Z [err]  2026-01-10 18:17:36,367 - server - INFO - üéµ TTS task #2 started at +103ms
2026-01-10T18:17:36.375971910Z [err]  2026-01-10 18:17:36,367 - core_calling_service - INFO - üì§ Streamed: We've helped over 7,500 students build passive inc...
2026-01-10T18:17:36.375990238Z [err]  2026-01-10 18:17:36,367 - persistent_tts_service - INFO - üé§ [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] Streaming sentence #7: We've helped over 7,500 students build passive inc...
2026-01-10T18:17:36.376001315Z [err]  2026-01-10 18:17:36,367 - persistent_tts_service - INFO - üöÄ [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] Sent sentence #7 to ElevenLabs in 0ms (non-blocking)
2026-01-10T18:17:36.376013886Z [err]  2026-01-10 18:17:36,368 - persistent_tts_service - INFO - üìä [REAL TIMING] TEXT SENT TO ELEVENLABS: 'We've helped over 7,500 students build passive inc...'
2026-01-10T18:17:36.376177145Z [err]  2026-01-10 18:17:36,265 - persistent_tts_service - INFO - üìä [REAL TIMING] TEXT SENT TO ELEVENLABS: '[S] I get why you might think that....'
2026-01-10T18:17:36.376180135Z [err]  2026-01-10 18:17:35,819 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/2 200 OK"
2026-01-10T18:17:36.376186724Z [err]  2026-01-10 18:17:35,822 - server - INFO - üì§ Audio flowing: 1800 packets sent to Soniox (5s update)
2026-01-10T18:17:36.376193280Z [err]  2026-01-10 18:17:36,261 - core_calling_service - INFO - ‚ö° MERGED TTFT: 824ms
2026-01-10T18:17:36.376199496Z [err]  2026-01-10 18:17:36,262 - core_calling_service - INFO - ‚ö° MERGED: Transition marker [T:1] detected
2026-01-10T18:17:36.376203646Z [err]  2026-01-10 18:17:36,264 - server - INFO - üì§ Sentence arrived from LLM: [S] I get why you might think that....
2026-01-10T18:17:36.376208173Z [err]  2026-01-10 18:17:36,264 - server - INFO - ‚è±Ô∏è [TIMING] TTFS (Time To First Sentence): 1299ms
2026-01-10T18:17:36.376219943Z [err]  2026-01-10 18:17:36,264 - server - INFO - ‚ö° Starting REAL-TIME TTS for first sentence
2026-01-10T18:17:36.376225187Z [err]  2026-01-10 18:17:36,264 - server - INFO - üîç Persistent TTS lookup: call_id=v3:pxZiwhAYGmIvm7qB_..., session=FOUND
2026-01-10T18:17:36.376234754Z [err]  2026-01-10 18:17:36,264 - server - INFO - üöÄ Streaming sentence #1 via persistent WebSocket
2026-01-10T18:17:36.376239716Z [err]  2026-01-10 18:17:36,264 - server - INFO - üéµ TTS task #1 started at +0ms
2026-01-10T18:17:36.376248273Z [err]  2026-01-10 18:17:36,264 - server - INFO - ‚è±Ô∏è [TIMING] TTFT_TTS (First TTS Task Started): 1299ms
2026-01-10T18:17:36.376253104Z [err]  2026-01-10 18:17:36,264 - core_calling_service - INFO - üì§ Streamed: [S] I get why you might think that....
2026-01-10T18:17:36.376258125Z [err]  2026-01-10 18:17:36,264 - persistent_tts_service - INFO - üé§ [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] Streaming sentence #6: [S] I get why you might think that....
2026-01-10T18:17:36.376264063Z [err]  2026-01-10 18:17:36,265 - persistent_tts_service - INFO - üöÄ [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] Sent sentence #6 to ElevenLabs in 0ms (non-blocking)
2026-01-10T18:17:36.398122719Z [err]  2026-01-10 18:17:36,391 - server - INFO - üì§ Sentence arrived from LLM: What specific part concerns you?...
2026-01-10T18:17:36.398144251Z [err]  2026-01-10 18:17:36,391 - server - INFO - üîç Persistent TTS lookup: call_id=v3:pxZiwhAYGmIvm7qB_..., session=FOUND
2026-01-10T18:17:36.398153280Z [err]  2026-01-10 18:17:36,391 - server - INFO - üöÄ Streaming sentence #3 via persistent WebSocket
2026-01-10T18:17:36.398161716Z [err]  2026-01-10 18:17:36,391 - server - INFO - üéµ TTS task #3 started at +127ms
2026-01-10T18:17:36.398170132Z [err]  2026-01-10 18:17:36,392 - core_calling_service - INFO - üì§ Streamed: What specific part concerns you?...
2026-01-10T18:17:36.398178578Z [err]  2026-01-10 18:17:36,392 - persistent_tts_service - INFO - üé§ [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] Streaming sentence #8: What specific part concerns you?...
2026-01-10T18:17:36.398185469Z [err]  2026-01-10 18:17:36,392 - persistent_tts_service - INFO - üöÄ [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] Sent sentence #8 to ElevenLabs in 0ms (non-blocking)
2026-01-10T18:17:36.398192678Z [err]  2026-01-10 18:17:36,392 - persistent_tts_service - INFO - üìä [REAL TIMING] TEXT SENT TO ELEVENLABS: 'What specific part concerns you?...'
2026-01-10T18:17:36.425760967Z [err]  2026-01-10 18:17:36,418 - core_calling_service - INFO - ‚è±Ô∏è MERGED TRANSITION+RESPONSE COMPLETE - took 980ms
2026-01-10T18:17:36.425768106Z [err]  2026-01-10 18:17:36,418 - core_calling_service - INFO - ‚úÖ MERGED: Transitioning to Node ID: N003B_DeframeInitialObjection_V7_GoalOriented
2026-01-10T18:17:36.425775021Z [err]  2026-01-10 18:17:36,418 - core_calling_service - INFO - ‚è±Ô∏è [TIMING] MERGED_TRANSITION_RESPONSE: 981ms
2026-01-10T18:17:36.425781360Z [err]  2026-01-10 18:17:36,418 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER RESET (user gave meaningful response) for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:36.425787480Z [err]  2026-01-10 18:17:36,418 - core_calling_service - INFO - üîä Silence tracking reset for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g (user responded)
2026-01-10T18:17:36.425793903Z [err]  2026-01-10 18:17:36,418 - core_calling_service - INFO - ‚úÖ User responded to regular message, resetting counter
2026-01-10T18:17:36.425801216Z [err]  2026-01-10 18:17:36,418 - core_calling_service - INFO - üíæ Storing node ID 1763161961589 in conversation history
2026-01-10T18:17:36.425807730Z [err]  2026-01-10 18:17:36,418 - core_calling_service - INFO - LLM response (1.36s): [S] I get why you might think that. We've helped over 7,500 students build passive income sites just like this. What specific part concerns you?
2026-01-10T18:17:36.425814263Z [err]  2026-01-10 18:17:36,418 - core_calling_service - INFO - Total latency: 1.36s
2026-01-10T18:17:36.425820623Z [err]  2026-01-10 18:17:36,420 - server - INFO - ‚úÖ LLM finished in 1455ms, TTS tasks already running in background
2026-01-10T18:17:36.425827740Z [err]  2026-01-10 18:17:36,420 - server - INFO - üéµ Streaming 3 TTS chunks as they complete...
2026-01-10T18:17:36.425834776Z [err]  2026-01-10 18:17:36,420 - server - INFO - üöÄ Persistent TTS: Audio already streaming in background!
2026-01-10T18:17:36.431567235Z [err]  2026-01-10 18:17:36,420 - server - INFO -    3 sentences queued and playing seamlessly
2026-01-10T18:17:36.431577467Z [err]  2026-01-10 18:17:36,421 - server - INFO - ‚úÖ All 3 persistent TTS streams completed
2026-01-10T18:17:36.431585714Z [err]  2026-01-10 18:17:36,421 - server - INFO - ‚úÖ Agent generation complete (persistent TTS) - response window closed
2026-01-10T18:17:36.431593478Z [err]  2026-01-10 18:17:36,421 - server - INFO - ‚è±Ô∏è  FIRST AUDIO STARTED: 1456ms from user stop üöÄ
2026-01-10T18:17:36.431603913Z [err]  2026-01-10 18:17:36,421 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:36.431613398Z [err]  2026-01-10 18:17:36,421 - server - INFO - ‚úÖ Agent generation complete - response window closed
2026-01-10T18:17:36.431621563Z [err]  2026-01-10 18:17:36,421 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2026-01-10T18:17:36.431629546Z [err]  2026-01-10 18:17:36,421 - server - INFO - ‚è±Ô∏è  [TIMING] ==== E2E LATENCY SUMMARY ====
2026-01-10T18:17:36.431637543Z [err]  2026-01-10 18:17:36,421 - server - INFO - ‚è±Ô∏è  [TIMING] STT: 22ms (provider: soniox, model: stt-rt-v3)
2026-01-10T18:17:36.431645394Z [err]  2026-01-10 18:17:36,421 - server - INFO - ‚è±Ô∏è  [TIMING] LLM_TOTAL: 1455ms (provider: grok, model: grok-4-1-fast-non-reasoning)
2026-01-10T18:17:36.431652067Z [err]  2026-01-10 18:17:36,421 - server - INFO - ‚è±Ô∏è  [TIMING] TTS_TOTAL: 157ms (provider: elevenlabs, websocket: False)
2026-01-10T18:17:36.431659262Z [err]  2026-01-10 18:17:36,421 - server - INFO - ‚è±Ô∏è  [TIMING] E2E_TOTAL: 1456ms (user stopped ‚Üí play_audio_url called)
2026-01-10T18:17:36.431668305Z [err]  2026-01-10 18:17:36,421 - server - INFO - ‚è±Ô∏è  [TIMING] ‚ö†Ô∏è NOTE: E2E_TOTAL does not include:
2026-01-10T18:17:36.435014355Z [err]  2026-01-10 18:17:36,421 - server - INFO - ‚è±Ô∏è  [TIMING]   - Telnyx processing time (~50-200ms)
2026-01-10T18:17:36.435024016Z [err]  2026-01-10 18:17:36,421 - server - INFO - ‚è±Ô∏è  [TIMING]   - Network latency to user's phone (~50-150ms)
2026-01-10T18:17:36.435037667Z [err]  2026-01-10 18:17:36,421 - server - INFO - ‚è±Ô∏è  [TIMING]   - Phone audio buffering (~50-200ms)
2026-01-10T18:17:36.435044463Z [err]  2026-01-10 18:17:36,421 - server - INFO - ‚è±Ô∏è  [TIMING]   - TOTAL MISSING: ~150-550ms typically
2026-01-10T18:17:36.435051469Z [err]  2026-01-10 18:17:36,421 - server - INFO - ‚è±Ô∏è  [TIMING]   - REAL USER LATENCY: 1756ms estimated
2026-01-10T18:17:36.435058799Z [err]  2026-01-10 18:17:36,421 - server - INFO - ‚è±Ô∏è  [TIMING] RESPONSE_TEXT: 144 chars, 3 sentences
2026-01-10T18:17:36.435065947Z [err]  2026-01-10 18:17:36,421 - server - INFO - ‚è±Ô∏è  [TIMING] USER_INPUT: 'I don't like scam s....'
2026-01-10T18:17:36.435077680Z [err]  2026-01-10 18:17:36,421 - server - INFO - ‚è±Ô∏è  [TIMING] AI_RESPONSE: '[S] I get why you might think that. We've helped over 7,500 ...'
2026-01-10T18:17:36.435084067Z [err]  2026-01-10 18:17:36,421 - server - INFO - ‚è±Ô∏è  [TIMING] ==========================
2026-01-10T18:17:36.435090326Z [err]  2026-01-10 18:17:36,421 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2026-01-10T18:17:36.603640809Z [err]  2026-01-10 18:17:36,601 - persistent_tts_service - INFO - üì§ Sending 41982 bytes of audio (263 chunks, 5.2s duration) via WebSocket
2026-01-10T18:17:36.603649994Z [err]  2026-01-10 18:17:36,601 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:17:36.603656139Z [err]  2026-01-10 18:17:36,601 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +5.2s (total: 5.2s from now)
2026-01-10T18:17:36.603663181Z [err]  2026-01-10 18:17:36,601 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768069056.602 (chunk 1/263, 160 bytes)
2026-01-10T18:17:36.614447689Z [err]  2026-01-10 18:17:36,611 - server - INFO - üìù Saved assistant transcript and latency to database (Node: Node ID: N003B_DeframeInitialObjection_V7_GoalOriented, Dead Air: 1634ms)
2026-01-10T18:17:36.614457832Z [err]  2026-01-10 18:17:36,611 - server - INFO - üîä Agent finished generating, 0 playbacks active - waiting for webhooks to close window and start silence tracking
2026-01-10T18:17:36.614464139Z [err]  2026-01-10 18:17:36,611 - server - INFO - üîç END CALL CHECK: should_end_call=False, max_checkins=False, max_duration=False
2026-01-10T18:17:40.422540879Z [err]  2026-01-10 18:17:40,073 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (1.8s left)
2026-01-10T18:17:40.581296650Z [err]  2026-01-10 18:17:40,576 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (1.3s left)
2026-01-10T18:17:41.333750423Z [err]  2026-01-10 18:17:40,842 - server - INFO - üì§ Audio flowing: 2051 packets sent to Soniox (5s update)
2026-01-10T18:17:41.333757276Z [err]  2026-01-10 18:17:41,325 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 263 CHUNKS SENT TO TELNYX in 4723ms (audio duration: 5.2s, paced after 10 chunks)
2026-01-10T18:17:41.333763625Z [err]  2026-01-10 18:17:41,325 - persistent_tts_service - INFO - ‚úÖ Sent 263 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:17:41.333771707Z [err]  2026-01-10 18:17:41,325 - persistent_tts_service - INFO - üì§ Sending 13792 bytes of audio (87 chunks, 1.7s duration) via WebSocket
2026-01-10T18:17:41.333779152Z [err]  2026-01-10 18:17:41,325 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:17:41.333787189Z [err]  2026-01-10 18:17:41,325 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.7s (total: 2.2s from now)
2026-01-10T18:17:41.333795116Z [err]  2026-01-10 18:17:41,325 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768069061.326 (chunk 1/87, 160 bytes)
2026-01-10T18:17:43.528333591Z [err]  2026-01-10 18:17:42,758 - persistent_tts_service - INFO - ‚úÖ Sent 3 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:17:43.528352132Z [err]  2026-01-10 18:17:42,758 - persistent_tts_service - INFO - üì§ Sending 23035 bytes of audio (144 chunks, 2.9s duration) via WebSocket
2026-01-10T18:17:43.528368442Z [err]  2026-01-10 18:17:42,758 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:17:43.528377577Z [err]  2026-01-10 18:17:42,758 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +2.9s (total: 3.7s from now)
2026-01-10T18:17:43.528393943Z [err]  2026-01-10 18:17:42,757 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 87 CHUNKS SENT TO TELNYX in 1431ms (audio duration: 1.7s, paced after 10 chunks)
2026-01-10T18:17:43.528401994Z [err]  2026-01-10 18:17:42,757 - persistent_tts_service - INFO - ‚úÖ Sent 87 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:17:43.528412409Z [err]  2026-01-10 18:17:42,757 - persistent_tts_service - INFO - üì§ Sending 325 bytes of audio (3 chunks, 0.0s duration) via WebSocket
2026-01-10T18:17:43.528419564Z [err]  2026-01-10 18:17:42,758 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:17:43.528428117Z [err]  2026-01-10 18:17:42,758 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +0.0s (total: 0.9s from now)
2026-01-10T18:17:43.528435457Z [err]  2026-01-10 18:17:42,758 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768069062.758 (chunk 1/3, 160 bytes)
2026-01-10T18:17:43.528443997Z [err]  2026-01-10 18:17:42,758 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 3 CHUNKS SENT TO TELNYX in 0ms (audio duration: 0.0s, paced after 10 chunks)
2026-01-10T18:17:43.538262531Z [err]  2026-01-10 18:17:42,758 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768069062.758 (chunk 1/144, 160 bytes)
2026-01-10T18:17:43.538280969Z [err]  2026-01-10 18:17:43,462 - server - INFO - üé§ Soniox receiver alive - 16 messages received in last 10s
2026-01-10T18:17:45.572555214Z [err]  2026-01-10 18:17:45,104 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (1.4s left)
2026-01-10T18:17:45.572581347Z [err]  2026-01-10 18:17:45,287 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 144 CHUNKS SENT TO TELNYX in 2528ms (audio duration: 2.9s, paced after 10 chunks)
2026-01-10T18:17:45.572590028Z [err]  2026-01-10 18:17:45,287 - persistent_tts_service - INFO - ‚úÖ Sent 144 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:17:45.572613026Z [err]  2026-01-10 18:17:45,287 - persistent_tts_service - INFO - üì§ Sending 15975 bytes of audio (100 chunks, 2.0s duration) via WebSocket
2026-01-10T18:17:45.572625321Z [err]  2026-01-10 18:17:45,287 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:17:45.572641639Z [err]  2026-01-10 18:17:45,287 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +2.0s (total: 3.2s from now)
2026-01-10T18:17:45.572656658Z [err]  2026-01-10 18:17:45,287 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768069065.288 (chunk 1/100, 160 bytes)
2026-01-10T18:17:45.612422534Z [err]  2026-01-10 18:17:45,606 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (2.9s left)
2026-01-10T18:17:46.817748188Z [err]  2026-01-10 18:17:45,843 - server - INFO - üì§ Audio flowing: 2301 packets sent to Soniox (5s update)
2026-01-10T18:17:47.805775519Z [err]  2026-01-10 18:17:46,980 - persistent_tts_service - INFO - ‚úÖ Sent 100 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:17:47.805856796Z [err]  2026-01-10 18:17:46,980 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 100 CHUNKS SENT TO TELNYX in 1693ms (audio duration: 2.0s, paced after 10 chunks)
2026-01-10T18:17:48.699494679Z [err]  2026-01-10 18:17:48,620 - dead_air_monitor - INFO - ‚è±Ô∏è Playback expected end time passed (0.1s ago), marking agent as done speaking
2026-01-10T18:17:48.699500499Z [err]  2026-01-10 18:17:48,620 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1768069068.620573 for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:48.699507178Z [err]  2026-01-10 18:17:48,620 - core_calling_service - INFO - ü§ñ Agent stopped speaking for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:48.793914393Z [err]  2026-01-10 18:17:48,790 - persistent_tts_service - INFO - üîá [Call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g] FLOOR RELEASED (is_holding_floor=False)
2026-01-10T18:17:50.734284806Z [err]  2026-01-10 18:17:50,125 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=False, user_speaking=False, silence=1.5s, checkin_count=0/2
2026-01-10T18:17:50.734295044Z [err]  2026-01-10 18:17:50,627 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=False, user_speaking=False, silence=2.0s, checkin_count=0/2
2026-01-10T18:17:51.496125021Z [err]  2026-01-10 18:17:50,862 - server - INFO - üì§ Audio flowing: 2552 packets sent to Soniox (5s update)
2026-01-10T18:17:52.733078315Z [err]  2026-01-10 18:17:52,725 - server - INFO - üìû Telnyx WebSocket disconnected. Sent 2620 total packets
2026-01-10T18:17:52.733089969Z [err]  [2026-01-10 18:17:52 +0000] [3] [INFO] connection closed
2026-01-10T18:17:52.777023798Z [err]  2026-01-10 18:17:52,751 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2026-01-10T18:17:52.777030286Z [err]  2026-01-10 18:17:52,751 - server - INFO - üì® Full payload: {'data': {'event_type': 'call.hangup', 'id': '1a8bb51a-e107-41f5-b108-9b7541f0ac40', 'occurred_at': '2026-01-10T18:17:52.518808Z', 'payload': {'call_control_id': 'v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g', 'call_leg_id': '8af960d0-ee50-11f0-9c17-02420aef99a0', 'call_quality_stats': {'inbound': {'jitter_max_variance': '3.71', 'jitter_packet_count': '0', 'mos': '4.50', 'packet_count': '2647', 'skip_packet_count': '35'}, 'outbound': {'packet_count': '2643', 'skip_packet_count': '0'}}, 'call_session_id': '8af65dae-ee50-11f0-b860-02420aef99a0', 'client_state': None, 'connection_id': '2777245537294877821', 'end_time': '2026-01-10T18:17:52.518808Z', 'from': '+14048000152', 'hangup_cause': 'normal_clearing', 'hangup_source': 'callee', 'sip_hangup_cause': '200', 'start_time': '2026-01-10T18:16:54.698808Z', 'to': '+17708336397'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2026-01-10T18:17:52.777037227Z [err]  2026-01-10 18:17:52,751 - server - INFO - üéØ Event type: call.hangup, Call ID: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:52.777045613Z [err]  2026-01-10 18:17:52,751 - server - INFO - üì® ================================================
2026-01-10T18:17:52.777051990Z [err]  2026-01-10 18:17:52,751 - server - INFO - üìû Call ended: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:52.777058024Z [err]  2026-01-10 18:17:52,751 - server - INFO - üìû Hangup cause: normal_clearing
2026-01-10T18:17:53.845921509Z [err]  2026-01-10 18:17:52,947 - server - INFO - üìù Updated call log: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:53.845928407Z [err]  2026-01-10 18:17:53,020 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2026-01-10T18:17:53.845935499Z [err]  2026-01-10 18:17:53,021 - server - INFO - üì® Full payload: {'data': {'event_type': 'streaming.stopped', 'id': '87466a9d-194d-4a81-8c5a-ac2dfd5e2910', 'occurred_at': '2026-01-10T18:17:52.649336Z', 'payload': {'call_control_id': 'v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g', 'call_leg_id': '8af960d0-ee50-11f0-9c17-02420aef99a0', 'call_session_id': '8af65dae-ee50-11f0-b860-02420aef99a0', 'client_state': None, 'connection_id': '2777245537294877821', 'stream_id': '0a2b4a0f-7501-488e-a960-b4af0833663d', 'stream_params': {'stream_track': 'inbound', 'stream_url': 'wss://api.li-ai.org/api/telnyx/audio-stream'}, 'stream_type': 'websocket'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2026-01-10T18:17:53.845942430Z [err]  2026-01-10 18:17:53,021 - server - INFO - üéØ Event type: streaming.stopped, Call ID: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:53.845949785Z [err]  2026-01-10 18:17:53,022 - server - INFO - üì® ================================================
2026-01-10T18:17:53.845965505Z [inf]  100.64.0.12:39142 - "POST /api/telnyx/webhook HTTP/1.1" 200
2026-01-10T18:17:53.845972361Z [err]  2026-01-10 18:17:53,042 - server - INFO - ‚úÖ Finalized call log: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g (duration=53s, status=completed)
2026-01-10T18:17:53.845981963Z [err]  2026-01-10 18:17:53,072 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2026-01-10T18:17:53.845989202Z [err]  2026-01-10 18:17:53,072 - server - INFO - üì® Full payload: {'data': {'event_type': 'call.playback.ended', 'id': '5cfa2202-1ecf-4e22-ac6b-737f90565274', 'occurred_at': '2026-01-10T18:17:52.598809Z', 'payload': {'call_control_id': 'v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g', 'call_leg_id': '8af960d0-ee50-11f0-9c17-02420aef99a0', 'call_session_id': '8af65dae-ee50-11f0-b860-02420aef99a0', 'client_state': None, 'connection_id': '2777245537294877821', 'end_time': '2026-01-10T18:17:52.598809Z', 'media_name': None, 'media_url': 'api.li-ai.org/api/tts-audio/comfort_noise_continuous.mp3', 'overlay': True, 'playback_id': 'bBFxMfT9rQ', 'status': 'call_hangup', 'status_detail': ''}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2026-01-10T18:17:54.959933365Z [err]  2026-01-10 18:17:53,077 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1768069073.0769916 for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:54.959946713Z [err]  2026-01-10 18:17:53,077 - server - INFO - ‚è±Ô∏è Silence timer STARTED (memory fallback, agent wasn't marked as speaking)
2026-01-10T18:17:54.959955692Z [inf]  100.64.0.6:58038 - "POST /api/telnyx/webhook HTTP/1.1" 200
2026-01-10T18:17:54.959962637Z [err]  2026-01-10 18:17:53,139 - server - INFO - üì¶ Saved 11 session variables to call_log: ['now', 'customer_name', 'callerName', 'lead_id', 'qc_tracking_enabled', 'track_keywords', 'expected_commitment', 'to_number', 'phone_number', 'email', 'from_number']
2026-01-10T18:17:54.959969425Z [err]  2026-01-10 18:17:53,757 - server - INFO - üìä Auto-added call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g to campaign b7bd9ce7-2722-4c61-a2fc-ca1fb127d7b8
2026-01-10T18:17:54.960351126Z [err]  2026-01-10 18:17:53,072 - server - INFO - üéØ Event type: call.playback.ended, Call ID: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:54.960358285Z [err]  2026-01-10 18:17:53,072 - server - INFO - üì® ================================================
2026-01-10T18:17:54.960365106Z [err]  2026-01-10 18:17:53,075 - redis_service - INFO - ‚ûñ Removed playback bBFxMfT9rQ, 0 remaining for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:54.960371719Z [err]  2026-01-10 18:17:53,075 - server - INFO - üîä Redis: Removed playback bBFxMfT9rQ, 0 remaining
2026-01-10T18:17:54.960382694Z [err]  2026-01-10 18:17:53,075 - server - INFO - üîä ALL PLAYBACKS FINISHED (via Redis) - attempting to start silence timer
2026-01-10T18:17:54.960389322Z [err]  2026-01-10 18:17:53,076 - server - INFO - ‚úÖ Set 'agent_done_speaking' flag in Redis for worker with session to detect
2026-01-10T18:17:54.960396467Z [err]  2026-01-10 18:17:53,076 - server - INFO - ‚úÖ Found session in active_telnyx_calls: agent_speaking=False, user_speaking=False
2026-01-10T18:17:55.846402724Z [err]  <!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en-US"> <![endif]-->
2026-01-10T18:17:55.846412004Z [err]  <!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en-US"> <![endif]-->
2026-01-10T18:17:55.846416970Z [err]  2026-01-10 18:17:54,124 - server - INFO - üìá [HANGUP] After MongoDB fallback: user_id=dcafa642-6136-4096-b77d-a4cb99a62651, agent_id=bbeda238-e8d9-4d8c-b93b-1b7694581adb, to_number=+17708336397
2026-01-10T18:17:55.846421348Z [err]  <!--[if IE 8]>    <html class="no-
2026-01-10T18:17:55.846428504Z [err]  2026-01-10 18:17:54,124 - server - INFO - üìá [HANGUP] Final extracted data: user_id=dcafa642-6136-4096-b77d-a4cb99a62651, agent_id=bbeda238-e8d9-4d8c-b93b-1b7694581adb, to_number=+17708336397, lead_id=None, agent_name=JK First Caller-optimizer3
2026-01-10T18:17:55.846430693Z [err]  2026-01-10 18:17:54,036 - server - INFO - üìá [HANGUP] Found call_log in MongoDB, extracting missing data...
2026-01-10T18:17:55.846438440Z [err]  2026-01-10 18:17:54,124 - server - INFO - üìá [HANGUP] Agent info keys: None
2026-01-10T18:17:55.846456345Z [err]  2026-01-10 18:17:53,940 - server - INFO - üì§ Sending post-call webhook to: https://n8n.outlier-agency.com/webhook/2adb150a-9e08-4053-9fa4-e47df18bf39b
2026-01-10T18:17:55.846463844Z [err]  2026-01-10 18:17:53,942 - redis_service - INFO - üì• Retrieved call data from Redis: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:55.846474310Z [err]  2026-01-10 18:17:53,942 - server - INFO - üìá [HANGUP] Data source: redis=Yes, memory=Yes
2026-01-10T18:17:55.846485068Z [err]  2026-01-10 18:17:53,942 - server - INFO - üìá [HANGUP] Missing data from cache, checking MongoDB call_logs...
2026-01-10T18:17:55.846492078Z [err]  2026-01-10 18:17:53,989 - httpx - INFO - HTTP Request: POST https://n8n.outlier-agency.com/webhook/2adb150a-9e08-4053-9fa4-e47df18bf39b "HTTP/1.1 530 <none>"
2026-01-10T18:17:55.846500559Z [err]  2026-01-10 18:17:53,991 - server - WARNING - ‚ö†Ô∏è Post-call webhook returned status 530: <!doctype html>
2026-01-10T18:17:55.851703193Z [err]  2026-01-10 18:17:54,129 - server - INFO - üìá Normalized phone: +17708336397
2026-01-10T18:17:55.851713038Z [err]  2026-01-10 18:17:54,220 - server - INFO - üìù Converted transcript from 8 messages to 613 characters
2026-01-10T18:17:55.851776359Z [err]  2026-01-10 18:17:54,770 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2026-01-10T18:17:55.851785041Z [err]  2026-01-10 18:17:54,482 - qc_agents.orchestrator - INFO - ‚úÖ Initialized 3 QC agents for user dcafa642-6136-4096-b77d-a4cb99a62651
2026-01-10T18:17:55.851789577Z [err]  2026-01-10 18:17:54,770 - server - INFO - üì® Full payload: {'data': {'event_type': 'call.recording.saved', 'id': '3f8adc81-9f1c-4e71-82fa-352a2321b32f', 'occurred_at': '2026-01-10T18:17:54.235667Z', 'payload': {'call_control_id': 'v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g', 'call_leg_id': '8af960d0-ee50-11f0-9c17-02420aef99a0', 'call_session_id': '8af65dae-ee50-11f0-b860-02420aef99a0', 'channels': 'dual', 'client_state': None, 'connection_id': '2777245537294877821', 'end_time': '2026-01-10T18:17:52.606938Z', 'format': 'mp3', 'public_recording_urls': {}, 'recording_ended_at': '2026-01-10T18:17:52.606938Z', 'recording_id': 'e7edeed8-88e7-40e2-91d6-a272070a8a07', 'recording_started_at': '2026-01-10T18:17:00.433602Z', 'recording_urls': {'mp3': 'https://s3.amazonaws.com/telephony-recorder-prod/227803fb-1717-407d-9bd5-fd04aa27c656/2026-01-10/8af960d0-ee50-11f0-9c17-02420aef99a0-1768069020408669.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIASDC5E2MJDPKMH7UW%2F20260110%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20260110T181754Z&X-Amz-Expires=600&X-Amz-SignedHeaders=host&X-Amz-Signature=a4d0ce4a295814a2206ffe96cf05fb13a7942778989a73722f306f19b7b26f45'}, 'start_time': '2026-01-10T18:17:00.433602Z'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2026-01-10T18:17:55.851797543Z [err]  2026-01-10 18:17:54,482 - qc_agents.orchestrator - INFO - üîç Running Commitment Detector on call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:55.851810869Z [err]  2026-01-10 18:17:54,688 - server - INFO - üîç [AUTO-QC] Call log found: transcript_turns=8, logs_count=10, status=completed
2026-01-10T18:17:55.851816472Z [err]  2026-01-10 18:17:54,307 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2026-01-10T18:17:55.851819798Z [err]  2026-01-10 18:17:54,707 - server - INFO - üìá CRM: Got 11 extracted variables
2026-01-10T18:17:55.851826315Z [err]  2026-01-10 18:17:54,707 - server - INFO - üìá CRM: Total variables collected: ['now', 'customer_name', 'callerName', 'lead_id', 'qc_tracking_enabled', 'track_keywords', 'expected_commitment', 'to_number', 'phone_number', 'email', 'from_number']
2026-01-10T18:17:55.851827840Z [err]  2026-01-10 18:17:54,395 - qc_agents.orchestrator - INFO - No QC agent configs found, using defaults with API key
2026-01-10T18:17:55.851834186Z [err]  2026-01-10 18:17:54,482 - qc_agents.orchestrator - INFO - Using QC model: gpt-4o
2026-01-10T18:17:55.852158577Z [err]  2026-01-10 18:17:54,124 - server - INFO - üöÄ Triggered QC analysis for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:55.852165020Z [err]  2026-01-10 18:17:54,124 - server - INFO - üìä Triggered Campaign QC for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:55.852172005Z [err]  2026-01-10 18:17:54,124 - server - INFO - üìá Triggered CRM update for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:55.852179001Z [err]  2026-01-10 18:17:54,124 - server - INFO - ‚úÖ Closed persistent TTS session for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:55.852184991Z [err]  2026-01-10 18:17:54,124 - core_calling_service - INFO - Call session v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g closed
2026-01-10T18:17:55.852191069Z [err]  2026-01-10 18:17:54,124 - server - INFO - ‚úÖ Closed CallSession for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:55.852197452Z [err]  2026-01-10 18:17:54,125 - redis_service - INFO - üßπ Deleted call data from Redis: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:55.852204230Z [err]  2026-01-10 18:17:54,126 - server - INFO - üßπ Cleaned up call session from Redis and memory: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:55.852210905Z [inf]  100.64.0.8:24040 - "POST /api/telnyx/webhook HTTP/1.1" 200
2026-01-10T18:17:55.852218323Z [err]  2026-01-10 18:17:54,127 - server - INFO - üîç Starting QC analysis for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:55.852227725Z [err]  2026-01-10 18:17:54,128 - server - INFO - üîç [AUTO-QC] Starting campaign QC check for call=v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g, user=dcafa642-6136-4096-b77d-a4cb99a62651, agent=bbeda238-e8d9-4d8c-b93b-1b7694581adb
2026-01-10T18:17:55.852235102Z [err]  2026-01-10 18:17:54,129 - server - INFO - üìá CRM update starting for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g: to_number=+17708336397, user_id=dcafa642-6136-4096-b77d-a4cb99a62651
2026-01-10T18:17:55.855141514Z [err]  2026-01-10 18:17:54,770 - server - INFO - üéØ Event type: call.recording.saved, Call ID: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:55.855153575Z [err]  2026-01-10 18:17:54,770 - server - INFO - üì® ================================================
2026-01-10T18:17:55.855162415Z [err]  2026-01-10 18:17:54,770 - server - INFO - üéôÔ∏è Recording saved for call: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:55.855170152Z [err]  2026-01-10 18:17:54,771 - redis_service - WARNING - ‚ö†Ô∏è Call data not found in Redis: v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:55.855176158Z [err]  2026-01-10 18:17:54,771 - server - INFO - üîç Recording check: download_url=True, channels=dual, recording_id=e7edeed8-88e7-40e2-91d6-a272070a8a07, call_data=True
2026-01-10T18:17:55.855182926Z [err]  2026-01-10 18:17:54,874 - server - INFO - üíæ Saved recording URL and ID to database: e7edeed8-88e7-40e2-91d6-a272070a8a07
2026-01-10T18:17:55.855189897Z [err]  2026-01-10 18:17:54,874 - server - INFO - ‚úÖ Entering dual-channel processing
2026-01-10T18:17:55.855196895Z [err]  2026-01-10 18:17:54,874 - server - INFO - üì• Downloading DUAL-CHANNEL recording...
2026-01-10T18:17:55.855203606Z [err]  2026-01-10 18:17:54,881 - server - INFO - üìá CRM: Updated lead 288a0e8e-ff8b-4249-b2ea-b84e5cb9929e (+17708336397) - fields: ['updated_at', 'last_contact', 'last_agent_id', 'last_agent_name', 'custom_fields']
2026-01-10T18:17:55.855211995Z [err]  2026-01-10 18:17:55,021 - server - INFO - üîç [AUTO-QC] Agent found: name=JK First Caller-optimizer3, has_auto_qc_settings=True
2026-01-10T18:17:55.855220368Z [err]  2026-01-10 18:17:55,105 - server - INFO - üìä [AUTO-QC] Running full QC analysis: call=v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g ‚Üí campaign=b7bd9ce7-2722-4c61-a2fc-ca1fb127d7b8 (tech=True, script=True, tonality=True)
2026-01-10T18:17:55.855227822Z [err]  2026-01-10 18:17:55,106 - server - INFO - üìä [AUTO-QC] LLM settings: provider=grok, model=grok-3
2026-01-10T18:17:55.861374351Z [err]  2026-01-10 18:17:55,106 - server - ERROR - ‚ùå [AUTO-QC] Error in campaign QC for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g: run_full_qc_analysis() got an unexpected keyword argument 'llm_provider'
2026-01-10T18:17:55.861384347Z [err]  2026-01-10 18:17:55,106 - server - ERROR - ‚ùå [AUTO-QC] Traceback: Traceback (most recent call last):
2026-01-10T18:17:55.861392048Z [err]    File "/app/backend/server.py", line 10079, in trigger_campaign_qc_for_call
2026-01-10T18:17:55.861399459Z [err]      await run_full_qc_analysis(
2026-01-10T18:17:55.861406417Z [err]            ^^^^^^^^^^^^^^^^^^^^^
2026-01-10T18:17:55.861413030Z [err]  TypeError: run_full_qc_analysis() got an unexpected keyword argument 'llm_provider'
2026-01-10T18:17:55.861419261Z [err]  
2026-01-10T18:17:55.861427033Z [err]  2026-01-10 18:17:55,271 - httpx - INFO - HTTP Request: GET https://s3.amazonaws.com/telephony-recorder-prod/227803fb-1717-407d-9bd5-fd04aa27c656/2026-01-10/8af960d0-ee50-11f0-9c17-02420aef99a0-1768069020408669.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIASDC5E2MJDPKMH7UW%2F20260110%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20260110T181754Z&X-Amz-Expires=600&X-Amz-SignedHeaders=host&X-Amz-Signature=a4d0ce4a295814a2206ffe96cf05fb13a7942778989a73722f306f19b7b26f45 "HTTP/1.1 200 OK"
2026-01-10T18:17:55.861435381Z [err]  2026-01-10 18:17:55,514 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 429 Too Many Requests"
2026-01-10T18:17:55.861442079Z [err]  2026-01-10 18:17:55,516 - qc_agents.base_agent - ERROR - Error calling LLM (openai): Client error '429 Too Many Requests' for url 'https://api.openai.com/v1/chat/completions'
2026-01-10T18:17:55.861448729Z [err]  For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429
2026-01-10T18:17:55.861455870Z [err]  2026-01-10 18:17:55,516 - qc_agents.commitment_detector - ERROR - Error in CommitmentDetector LLM analysis: Client error '429 Too Many Requests' for url 'https://api.openai.com/v1/chat/completions'
2026-01-10T18:17:55.861844193Z [err]  For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429, falling back to patterns
2026-01-10T18:17:55.861852540Z [err]  2026-01-10 18:17:55,519 - qc_agents.orchestrator - INFO - üó∫Ô∏è  Running Conversion Pathfinder on call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:55.861859349Z [err]  2026-01-10 18:17:55,527 - server - INFO - ‚úÖ Downloaded 209022 bytes
2026-01-10T18:17:55.861866677Z [err]  2026-01-10 18:17:55,644 - core_calling_service - INFO - ‚è∞ Check-in triggered after 7.0s silence (threshold: 7s)
2026-01-10T18:17:55.861873486Z [err]  2026-01-10 18:17:55,645 - core_calling_service - INFO - üí¨ Sending check-in #1/2: Are you still there?
2026-01-10T18:17:55.861879021Z [err]  2026-01-10 18:17:55,645 - dead_air_monitor - INFO - üí¨ Sending check-in after 7.0s silence: Are you still there?
2026-01-10T18:17:55.861885655Z [err]  2026-01-10 18:17:55,645 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:55.861895786Z [err]  2026-01-10 18:17:55,645 - telnyx_service - INFO - üîä Speaking text on call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g: Are you still there?...
2026-01-10T18:17:55.861902556Z [err]  2026-01-10 18:17:55,645 - telnyx_service - INFO - üîç Agent config provided: True
2026-01-10T18:17:55.861909013Z [err]  2026-01-10 18:17:55,645 - telnyx_service - INFO - üîç TTS provider from settings: elevenlabs
2026-01-10T18:17:55.861916550Z [err]  2026-01-10 18:17:55,645 - telnyx_service - INFO - üîç WebSocket TTS: False
2026-01-10T18:17:55.861923282Z [err]  2026-01-10 18:17:55,645 - telnyx_service - INFO - üéôÔ∏è Attempting elevenlabs TTS (REST)
2026-01-10T18:17:55.861930958Z [err]  2026-01-10 18:17:55,645 - server - INFO - üíæ TTS CACHE HIT: Returning cached audio (17599 bytes)
2026-01-10T18:17:55.861938363Z [err]  2026-01-10 18:17:55,645 - telnyx_service - INFO - ‚è±Ô∏è  TTS generation time: 0.00s
2026-01-10T18:17:55.863353563Z [err]  2026-01-10 18:17:55,646 - telnyx_service - INFO - ‚úÖ Generated 17599 bytes, saved to /tmp/tts_elevenlabs_01b2ec34551c0c3ab527c8199487051c.mp3
2026-01-10T18:17:55.863359429Z [err]  2026-01-10 18:17:55,646 - telnyx_service - INFO - üîó Using audio URL: api.li-ai.org/api/tts-audio/tts_elevenlabs_01b2ec34551c0c3ab527c8199487051c.mp3
2026-01-10T18:17:55.863367558Z [err]  2026-01-10 18:17:55,739 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 429 Too Many Requests"
2026-01-10T18:17:55.863377917Z [err]  2026-01-10 18:17:55,740 - qc_agents.base_agent - ERROR - Error calling LLM (openai): Client error '429 Too Many Requests' for url 'https://api.openai.com/v1/chat/completions'
2026-01-10T18:17:55.863385193Z [err]  For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429
2026-01-10T18:17:55.863392397Z [err]  2026-01-10 18:17:55,740 - qc_agents.conversion_pathfinder - ERROR - Error in ConversionPathfinder LLM analysis: Client error '429 Too Many Requests' for url 'https://api.openai.com/v1/chat/completions'
2026-01-10T18:17:55.863399849Z [err]  For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429, falling back to patterns
2026-01-10T18:17:55.863406142Z [err]  2026-01-10 18:17:55,741 - qc_agents.orchestrator - INFO - ‚≠ê Running Excellence Replicator on call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:55.863412809Z [err]  2026-01-10 18:17:55,776 - server - INFO - ‚úÖ Split into 2 channels
2026-01-10T18:17:55.863420459Z [err]  2026-01-10 18:17:55,776 - server - INFO - üé§ Using STT provider: soniox for interruption detection
2026-01-10T18:17:55.863428747Z [err]  2026-01-10 18:17:55,777 - server - INFO - üìä Channel 0: 1147564 bytes
2026-01-10T18:17:55.863436014Z [err]  2026-01-10 18:17:55,777 - server - ERROR - ‚ùå No Soniox API key available
2026-01-10T18:17:55.863442605Z [err]  2026-01-10 18:17:55,777 - server - INFO - ‚ùå Channel 0: No speech
2026-01-10T18:17:55.867218249Z [err]  2026-01-10 18:17:55,777 - server - INFO - üìä Channel 1: 1147564 bytes
2026-01-10T18:17:55.867227197Z [err]  2026-01-10 18:17:55,777 - server - ERROR - ‚ùå No Soniox API key available
2026-01-10T18:17:55.867234767Z [err]  2026-01-10 18:17:55,777 - server - INFO - ‚ùå Channel 1: No speech
2026-01-10T18:17:55.867242123Z [err]  2026-01-10 18:17:55,777 - server - WARNING - ‚ö†Ô∏è No speech in any channel
2026-01-10T18:17:55.867247868Z [inf]  100.64.0.13:16018 - "POST /api/telnyx/webhook HTTP/1.1" 200
2026-01-10T18:17:55.932128343Z [err]  2026-01-10 18:17:55,924 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 429 Too Many Requests"
2026-01-10T18:17:55.932135215Z [err]  2026-01-10 18:17:55,925 - qc_agents.base_agent - ERROR - Error calling LLM (openai): Client error '429 Too Many Requests' for url 'https://api.openai.com/v1/chat/completions'
2026-01-10T18:17:55.932141513Z [err]  For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429
2026-01-10T18:17:55.932155120Z [err]  2026-01-10 18:17:55,925 - qc_agents.excellence_replicator - ERROR - Error in ExcellenceReplicator analysis: Client error '429 Too Many Requests' for url 'https://api.openai.com/v1/chat/completions'
2026-01-10T18:17:55.932162202Z [err]  For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429
2026-01-10T18:17:56.685348876Z [err]      }
2026-01-10T18:17:56.685357664Z [err]    ]
2026-01-10T18:17:56.685366865Z [err]  }
2026-01-10T18:17:56.685374343Z [err]  2026-01-10 18:17:55,962 - telnyx_service - INFO - üì¢ Using Telnyx built-in TTS
2026-01-10T18:17:56.685381269Z [err]  2026-01-10 18:17:56,011 - qc_agents.orchestrator - INFO - ‚úÖ QC analysis stored for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:56.685386876Z [err]  2026-01-10 18:17:56,174 - telnyx_service - ERROR - ‚ùå Error speaking text: Error code: 422 - {'errors': [{'code': '90018', 'title': 'Call has already ended', 'detail': "This call is no longer active and can't receive commands."}]}
2026-01-10T18:17:56.685388423Z [err]  2026-01-10 18:17:56,011 - server - INFO - ‚úÖ QC analysis completed for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:56.685398208Z [err]  2026-01-10 18:17:56,011 - server - INFO - üìä Scores: Commitment=50, Conversion=40, Excellence=50
2026-01-10T18:17:56.685403560Z [err]  2026-01-10 18:17:56,173 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g/actions/speak "HTTP/1.1 422 Unprocessable Entity"
2026-01-10T18:17:56.685429300Z [err]  2026-01-10 18:17:55,961 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g/actions/playback_start "HTTP/1.1 422 Unprocessable Entity"
2026-01-10T18:17:56.685435174Z [err]  2026-01-10 18:17:55,962 - telnyx_service - INFO - ‚è±Ô∏è  Playback API call time: 0.32s
2026-01-10T18:17:56.685448878Z [err]  2026-01-10 18:17:55,962 - telnyx_service - ERROR - ‚ùå Telnyx playback failed: 422 - {
2026-01-10T18:17:56.685454117Z [err]    "errors": [
2026-01-10T18:17:56.685459465Z [err]      {
2026-01-10T18:17:56.685467608Z [err]        "code": "90018",
2026-01-10T18:17:56.685475134Z [err]        "title": "Call has already ended",
2026-01-10T18:17:56.685480646Z [err]        "detail": "This call is no longer active and can't receive commands."
2026-01-10T18:17:56.690443807Z [err]  2026-01-10 18:17:56,175 - dead_air_monitor - INFO - ‚úÖ Check-in message sent
2026-01-10T18:17:56.690456426Z [err]  2026-01-10 18:17:56,189 - server - INFO - üìä Updated campaign_calls with QC scores for v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:56.690481737Z [err]  2026-01-10 18:17:56,359 - server - INFO - üìà Synced QC scores to lead 288a0e8e-ff8b-4249-b2ea-b84e5cb9929e via phone match
2026-01-10T18:17:56.690491819Z [err]  2026-01-10 18:17:56,443 - server - INFO - üè∑Ô∏è Updated lead status to 'needs_followup' based on risk level 'high'
2026-01-10T18:17:56.690499950Z [err]  2026-01-10 18:17:56,443 - server - ERROR - ‚ùå Error in auto appointment detection for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g: 'str' object has no attribute 'get'
2026-01-10T18:17:56.690508225Z [err]  2026-01-10 18:17:56,676 - dead_air_monitor - INFO - üö© Detected 'agent_done_speaking' flag from webhook - marking agent as done
2026-01-10T18:17:56.690515896Z [err]  2026-01-10 18:17:56,676 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1768069076.6764388 for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:17:56.690523630Z [err]  2026-01-10 18:17:56,676 - core_calling_service - INFO - ü§ñ Agent stopped speaking for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:18:00.653837550Z [err]  2026-01-10 18:18:00,189 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=False, user_speaking=False, silence=3.5s, checkin_count=1/2
2026-01-10T18:18:00.748626312Z [err]  2026-01-10 18:18:00,691 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=False, user_speaking=False, silence=4.0s, checkin_count=1/2
2026-01-10T18:18:03.990526003Z [err]  2026-01-10 18:18:03,700 - core_calling_service - INFO - ‚è∞ Check-in triggered after 7.0s silence (threshold: 7s)
2026-01-10T18:18:03.990532327Z [err]  2026-01-10 18:18:03,703 - core_calling_service - INFO - üí¨ Sending FINAL check-in #2/2: Are you still there?
2026-01-10T18:18:03.990538992Z [err]  2026-01-10 18:18:03,703 - core_calling_service - INFO - ‚ö†Ô∏è Will end call if no response after next silence timeout
2026-01-10T18:18:03.990545174Z [err]  2026-01-10 18:18:03,703 - dead_air_monitor - INFO - üí¨ Sending check-in after 7.0s silence: Are you still there?
2026-01-10T18:18:03.990554790Z [err]  2026-01-10 18:18:03,703 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:18:03.990561217Z [err]  2026-01-10 18:18:03,703 - telnyx_service - INFO - üîä Speaking text on call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g: Are you still there?...
2026-01-10T18:18:03.990568753Z [err]  2026-01-10 18:18:03,703 - telnyx_service - INFO - üîç Agent config provided: True
2026-01-10T18:18:03.990689523Z [err]  2026-01-10 18:18:03,703 - telnyx_service - INFO - üîç TTS provider from settings: elevenlabs
2026-01-10T18:18:03.990704371Z [err]  2026-01-10 18:18:03,703 - telnyx_service - INFO - üîç WebSocket TTS: False
2026-01-10T18:18:03.990710985Z [err]  2026-01-10 18:18:03,703 - telnyx_service - INFO - üéôÔ∏è Attempting elevenlabs TTS (REST)
2026-01-10T18:18:03.990721064Z [err]  2026-01-10 18:18:03,703 - server - INFO - üíæ TTS CACHE HIT: Returning cached audio (17599 bytes)
2026-01-10T18:18:03.990728382Z [err]  2026-01-10 18:18:03,703 - telnyx_service - INFO - ‚è±Ô∏è  TTS generation time: 0.00s
2026-01-10T18:18:03.990735003Z [err]  2026-01-10 18:18:03,703 - telnyx_service - INFO - ‚úÖ Generated 17599 bytes, saved to /tmp/tts_elevenlabs_01b2ec34551c0c3ab527c8199487051c.mp3
2026-01-10T18:18:03.990740938Z [err]  2026-01-10 18:18:03,704 - telnyx_service - INFO - üîó Using audio URL: api.li-ai.org/api/tts-audio/tts_elevenlabs_01b2ec34551c0c3ab527c8199487051c.mp3
2026-01-10T18:18:04.013182922Z [err]  2026-01-10 18:18:04,007 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g/actions/playback_start "HTTP/1.1 422 Unprocessable Entity"
2026-01-10T18:18:04.013194956Z [err]  2026-01-10 18:18:04,008 - telnyx_service - INFO - ‚è±Ô∏è  Playback API call time: 0.30s
2026-01-10T18:18:04.013211982Z [err]  2026-01-10 18:18:04,008 - telnyx_service - ERROR - ‚ùå Telnyx playback failed: 422 - {
2026-01-10T18:18:04.013222056Z [err]    "errors": [
2026-01-10T18:18:04.013232409Z [err]      {
2026-01-10T18:18:04.013244261Z [err]        "code": "90018",
2026-01-10T18:18:04.013253149Z [err]        "title": "Call has already ended",
2026-01-10T18:18:04.013261876Z [err]        "detail": "This call is no longer active and can't receive commands."
2026-01-10T18:18:04.013271504Z [err]      }
2026-01-10T18:18:04.013283265Z [err]    ]
2026-01-10T18:18:04.013292493Z [err]  }
2026-01-10T18:18:04.013301718Z [err]  2026-01-10 18:18:04,008 - telnyx_service - INFO - üì¢ Using Telnyx built-in TTS
2026-01-10T18:18:04.876091290Z [err]  2026-01-10 18:18:04,206 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g/actions/speak "HTTP/1.1 422 Unprocessable Entity"
2026-01-10T18:18:04.876101773Z [err]  2026-01-10 18:18:04,207 - telnyx_service - ERROR - ‚ùå Error speaking text: Error code: 422 - {'errors': [{'code': '90018', 'title': 'Call has already ended', 'detail': "This call is no longer active and can't receive commands."}]}
2026-01-10T18:18:04.876107823Z [err]  2026-01-10 18:18:04,207 - dead_air_monitor - INFO - ‚úÖ Check-in message sent
2026-01-10T18:18:10.997788877Z [err]  2026-01-10 18:18:10,237 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=True, user_speaking=False, silence=0.0s, checkin_count=2/2
2026-01-10T18:18:10.997795985Z [err]  2026-01-10 18:18:10,739 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=True, user_speaking=False, silence=0.0s, checkin_count=2/2
2026-01-10T18:18:12.723376136Z [err]  2026-01-10 18:18:12,454 - server - INFO - üé§ Soniox receiver alive - 9 messages received in last 10s
2026-01-10T18:18:12.723382136Z [err]  2026-01-10 18:18:12,454 - server - ERROR - ‚ùå Soniox error: {'tokens': [], 'final_audio_proc_ms': 47040, 'total_audio_proc_ms': 51960, 'error_code': 408, 'error_message': 'Request timeout.'}
2026-01-10T18:18:12.723393801Z [err]  2026-01-10 18:18:12,454 - server - INFO - ‚úÖ Soniox receive loop ended normally
2026-01-10T18:18:12.723400159Z [err]  2026-01-10 18:18:12,455 - dead_air_monitor - INFO - üîá Dead air monitoring cancelled for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:18:12.723406029Z [err]  2026-01-10 18:18:12,455 - dead_air_monitor - INFO - üîá Dead air monitoring stopped for call v3:pxZiwhAYGmIvm7qB_DB8RGnFptUbDsE39z3S-41KNMFterR8Drjx2g
2026-01-10T18:18:12.723412893Z [err]  2026-01-10 18:18:12,455 - server - INFO - üîá Dead air monitoring task cancelled
2026-01-10T18:18:15.291444786Z [err]  2026-01-10 18:18:14,455 - soniox_service - ERROR - ‚ùå Error closing Soniox session: received 1000 (OK); then sent 1000 (OK)
2026-01-10T18:18:15.291453028Z [err]  2026-01-10 18:18:14,455 - server - INFO - üîå Telnyx WebSocket disconnected
2026-01-10T18:24:55.018421989Z [err]  2026-01-10 18:24:45,604 - server - INFO - üåê Created WebSocket stream URL: wss://api.li-ai.org/api/telnyx/audio-stream
2026-01-10T18:24:55.018429823Z [err]  2026-01-10 18:24:45,693 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2026-01-10T18:24:55.018434039Z [err]  2026-01-10 18:24:45,776 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2026-01-10T18:24:55.018438588Z [err]  2026-01-10 18:24:45,812 - telnyx_service - INFO - Telnyx service initialized with connection: 2777245537294877821
2026-01-10T18:24:55.018444121Z [err]  2026-01-10 18:24:46,622 - telnyx_service - INFO - ‚úÖ Call initiated: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:24:55.018449445Z [err]  2026-01-10 18:24:45,813 - telnyx_service - INFO - üìû Initiating outbound call from +14048000152 to +17708336397
2026-01-10T18:24:55.018454317Z [err]  2026-01-10 18:24:45,813 - telnyx_service - INFO - ü§ñ Enabling AMD (premium mode)
2026-01-10T18:24:55.018460119Z [err]  2026-01-10 18:24:46,716 - server - INFO - üìù Created call log: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:24:55.018460574Z [err]  2026-01-10 18:24:45,813 - telnyx_service - INFO - üåê Adding streaming parameters: wss://api.li-ai.org/api/telnyx/audio-stream
2026-01-10T18:24:55.018466015Z [err]  2026-01-10 18:24:46,618 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls "HTTP/1.1 200 OK"
2026-01-10T18:24:55.018470412Z [err]  2026-01-10 18:24:46,716 - server - INFO - üîç DEBUG Call Initiated Webhook (UI Trigger): url='https://n8n.outlier-agency.com/webhook/2adb150a-9e08-4053-9fa4-e47df18bf39b', active=True, should_fire=True
2026-01-10T18:24:55.018478754Z [err]  2026-01-10 18:24:46,716 - server - INFO - üîç DEBUG Agent Settings Webhook Context: {'temperature': 0.2, 'max_tokens': 500, 'tts_speed': 1, 'llm_provider': 'grok', 'tts_provider': 'elevenlabs', 'stt_provider': 'soniox', 'enable_comfort_noise': True, 'dead_air_settings': {'silence_timeout_normal': 7, 'silence_timeout_hold_on': 25, 'max_checkins_before_disconnect': 2, 'max_call_duration': 1500, 'checkin_message': 'Are you still there?'}, 'voicemail_detection': {'enabled': True, 'use_telnyx_amd': True, 'telnyx_amd_mode': 'premium', 'use_llm_detection': True, 'disconnect_on_detection': True}, 'deepgram_settings': {'endpointing': 500, 'vad_turnoff': 250, 'utterance_end_ms': 1000, 'interim_results': True, 'smart_format': True}, 'elevenlabs_settings': {'voice_id': 'J5iaaqzR5zn6HFG4jV3b', 'model': 'eleven_turbo_v2_5', 'stability': 0.6, 'similarity_boost': 0.65, 'style': 0.2, 'speed': 1.1, 'use_speaker_boost': True, 'enable_normalization': True, 'enable_ssml_parsing': True}, 'hume_settings': {'voice_name': 'e7af7ed6-3381-48aa-ab97-49485007470b', 'description': 'warm and friendly', 'speed': 1}, 'sesame_settings': {'speaker_id': 0, 'output_format': 'wav'}, 'melo_settings': {'voice': 'EN-US', 'speed': 1.2, 'clone_wav': None}, 'dia_settings': {'voice': 'S1', 'speed': 1, 'response_format': 'wav'}, 'kokoro_settings': {'voice': 'af_bella', 'speed': 1, 'response_format': 'mp3'}, 'chattts_settings': {'voice': 'female_1', 'speed': 1, 'temperature': 0.3, 'response_format': 'wav'}, 'assemblyai_settings': {'sample_rate': 8000, 'word_boost': [], 'enable_extra_session_information': True, 'disable_partial_transcripts': False, 'threshold': 0, 'end_of_turn_confidence_threshold': 0.8, 'min_end_of_turn_silence_when_confident': 500, 'max_turn_silence': 2000}, 'soniox_settings': {'model': 'stt-rt-v3', 'sample_rate': 8000, 'audio_format': 'mulaw', 'num_channels': 1, 'enable_endpoint_detection': True, 'enable_speaker_diarization': False, 'language_hints': ['en'], 'context': ''}, 'barge_in_settings': {'enable_verbose_barge_in': True, 'word_count_threshold': 10, 'interruption_prompt': 'The user is speaking for a long time. Interrupt them politely but firmly to acknowledge what they said and guide the conversation back to the goal. start by saying an elongated why whhhhyyyy...'}, 'post_call_webhook_url': 'https://n8n.outlier-agency.com/webhook/2adb150a-9e08-4053-9fa4-e47df18bf39b', 'post_call_webhook_active': True, 'call_started_webhook_url': 'https://n8n.outlier-agency.com/webhook/2adb150a-9e08-4053-9fa4-e47df18bf39b', 'call_started_webhook_active': True}
2026-01-10T18:24:55.023341829Z [err]  2026-01-10 18:24:46,716 - server - INFO - üîç DEBUG Call Initiated Webhook: url='https://n8n.outlier-agency.com/webhook/2adb150a-9e08-4053-9fa4-e47df18bf39b', active=True, should_fire=True
2026-01-10T18:24:55.023350928Z [err]  2026-01-10 18:24:46,716 - server - INFO - üì§ Sending call-initiated webhook to: https://n8n.outlier-agency.com/webhook/2adb150a-9e08-4053-9fa4-e47df18bf39b
2026-01-10T18:24:55.023359583Z [err]  2026-01-10 18:24:46,726 - redis_service - INFO - üì¶ Stored call data in Redis: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw (TTL: 3600s)
2026-01-10T18:24:55.023369839Z [err]  2026-01-10 18:24:46,726 - server - INFO - üì¶ Call data stored in Redis and memory
2026-01-10T18:24:55.023381471Z [err]  2026-01-10 18:24:46,726 - server - INFO - üìû Outbound call initiated: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:24:55.023389361Z [inf]  100.64.0.14:27040 - "POST /api/telnyx/call/outbound HTTP/1.1" 200
2026-01-10T18:24:55.023396642Z [err]  2026-01-10 18:24:46,788 - httpx - INFO - HTTP Request: POST https://n8n.outlier-agency.com/webhook/2adb150a-9e08-4053-9fa4-e47df18bf39b "HTTP/1.1 530 <none>"
2026-01-10T18:24:55.023403717Z [err]  2026-01-10 18:24:46,789 - server - WARNING - ‚ö†Ô∏è Call-initiated webhook returned status 530: <!doctype html>
2026-01-10T18:24:55.023410945Z [err]  <!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en-US"> <![endif]-->
2026-01-10T18:24:55.023417904Z [err]  <!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en-US"> <![endif]-->
2026-01-10T18:24:55.023425912Z [err]  <!--[if IE 8]>    <html class="no-
2026-01-10T18:24:55.023432859Z [err]  2026-01-10 18:24:46,907 - server - INFO - üîåüîåüîå WEBSOCKET CONNECTION ATTEMPT
2026-01-10T18:24:55.023439618Z [err]  2026-01-10 18:24:46,907 - server - INFO -    Client: Address(host='100.64.0.12', port=46106)
2026-01-10T18:24:55.023446188Z [err]  2026-01-10 18:24:46,907 - server - INFO -    Headers: {'host': 'api.li-ai.org', 'user-agent': 'telnyx-websocket', 'connection': 'Upgrade', 'sec-websocket-key': 'Y5OxLRiS20DcnnXov72xVw==', 'sec-websocket-version': '13', 'upgrade': 'websocket', 'x-forwarded-for': '192.76.120.151', 'x-forwarded-host': 'api.li-ai.org', 'x-forwarded-proto': 'https', 'x-railway-edge': 'railway/us-west2', 'x-railway-request-id': '42Gp9TkkTDGY_WGb9I3ezw', 'x-real-ip': '192.76.120.151', 'x-request-start': '1768069486683', 'accept-encoding': 'gzip'}
2026-01-10T18:24:55.026451452Z [err]  2026-01-10 18:24:46,921 - server - INFO - üìû Call initiated - Direction: outgoing, From: +14048000152, To: +17708336397
2026-01-10T18:24:55.026463418Z [inf]  100.64.0.11:46438 - "POST /api/telnyx/webhook HTTP/1.1" 200
2026-01-10T18:24:55.026502431Z [err]  2026-01-10 18:24:46,907 - server - INFO -    Path: /api/telnyx/audio-stream
2026-01-10T18:24:55.026508892Z [err]  2026-01-10 18:24:46,907 - server - INFO - üîå Incoming Telnyx WebSocket connection
2026-01-10T18:24:55.026515450Z [err]  [2026-01-10 18:24:46 +0000] [6] [INFO] ('100.64.0.12', 46106) - "WebSocket /api/telnyx/audio-stream" [accepted]
2026-01-10T18:24:55.026522453Z [err]  2026-01-10 18:24:46,907 - server - INFO - ‚úÖ WebSocket accepted, waiting for Telnyx events
2026-01-10T18:24:55.026528495Z [err]  [2026-01-10 18:24:46 +0000] [6] [INFO] connection open
2026-01-10T18:24:55.026535415Z [err]  2026-01-10 18:24:46,921 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2026-01-10T18:24:55.026541362Z [err]  2026-01-10 18:24:46,921 - server - INFO - üì® Full payload: {'data': {'event_type': 'call.initiated', 'id': '7a3cae31-dde9-4d9c-86d2-3114f3b5811f', 'occurred_at': '2026-01-10T18:24:46.487680Z', 'payload': {'call_control_id': 'v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw', 'call_leg_id': 'a42f2994-ee51-11f0-816e-02420aef971f', 'call_session_id': 'a42c958a-ee51-11f0-8e69-02420aef971f', 'client_state': None, 'connection_id': '2777245537294877821', 'direction': 'outgoing', 'from': '+14048000152', 'state': 'bridging', 'to': '+17708336397'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2026-01-10T18:24:55.026547347Z [err]  2026-01-10 18:24:46,921 - server - INFO - üéØ Event type: call.initiated, Call ID: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:24:55.026553002Z [err]  2026-01-10 18:24:46,921 - server - INFO - üì® ================================================
2026-01-10T18:24:55.030341210Z [err]  2026-01-10 18:24:47,059 - server - INFO - üì¨ Received Telnyx event: connected
2026-01-10T18:24:55.030349388Z [err]  2026-01-10 18:24:47,059 - server - INFO - üìû Telnyx connected event received, waiting for 'start'...
2026-01-10T18:24:55.030356859Z [err]  2026-01-10 18:24:51,210 - server - INFO - üì¨ Received Telnyx event: start
2026-01-10T18:24:55.030362509Z [err]  2026-01-10 18:24:51,210 - server - INFO - üé¨ Stream started for call: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:24:55.030370395Z [err]  2026-01-10 18:24:51,215 - redis_service - INFO - üì• Retrieved call data from Redis: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:24:55.030376279Z [err]  2026-01-10 18:24:51,219 - server - INFO - ‚úÖ Call data found after 0s wait
2026-01-10T18:24:55.030382680Z [err]  2026-01-10 18:24:51,219 - server - INFO - ‚è≥ Session not found locally, waiting briefly for webhook...
2026-01-10T18:24:55.030387947Z [err]  2026-01-10 18:24:51,606 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2026-01-10T18:24:55.030393766Z [err]  2026-01-10 18:24:51,606 - server - INFO - üì® Full payload: {'data': {'event_type': 'call.answered', 'id': 'c05d28f9-d6fb-4560-abe2-3995b235c597', 'occurred_at': '2026-01-10T18:24:51.067680Z', 'payload': {'call_control_id': 'v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw', 'call_leg_id': 'a42f2994-ee51-11f0-816e-02420aef971f', 'call_session_id': 'a42c958a-ee51-11f0-8e69-02420aef971f', 'client_state': None, 'codec': 'PCMU', 'connection_id': '2777245537294877821', 'from': '+14048000152', 'sampling_rate': 8000, 'start_time': '2026-01-10T18:24:46.487680Z', 'to': '+17708336397'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2026-01-10T18:24:55.030398229Z [err]  2026-01-10 18:24:51,606 - server - INFO - üéØ Event type: call.answered, Call ID: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:24:55.034119505Z [err]  2026-01-10 18:24:51,606 - server - INFO - üì® ================================================
2026-01-10T18:24:55.034131326Z [err]  2026-01-10 18:24:51,606 - server - INFO - ‚úÖ Call answered: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:24:55.034137494Z [err]  2026-01-10 18:24:51,611 - redis_service - INFO - üì• Retrieved call data from Redis: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:24:55.034143808Z [err]  2026-01-10 18:24:51,613 - server - INFO - ‚úÖ Found call in Redis (multi-worker state sharing working)
2026-01-10T18:24:55.034151604Z [err]  2026-01-10 18:24:51,614 - server - INFO - üìû Phone numbers added to session: from=+14048000152, to=+17708336397
2026-01-10T18:24:55.034158686Z [err]  2026-01-10 18:24:51,707 - server - INFO - ‚úÖ Call log updated
2026-01-10T18:24:55.034164100Z [err]  2026-01-10 18:24:51,707 - server - INFO - üîç DEBUG Webhook: url='https://n8n.outlier-agency.com/webhook/2adb150a-9e08-4053-9fa4-e47df18bf39b', active=True, should_fire=True
2026-01-10T18:24:55.034168978Z [err]  2026-01-10 18:24:51,707 - server - INFO - üì§ Sending call-started webhook to: https://n8n.outlier-agency.com/webhook/2adb150a-9e08-4053-9fa4-e47df18bf39b
2026-01-10T18:24:55.034174136Z [err]  2026-01-10 18:24:51,707 - server - INFO - üîß Getting Telnyx API keys for user: dcafa642-6136-4096-b77d-a4cb99a62651
2026-01-10T18:24:55.034180890Z [err]  2026-01-10 18:24:51,720 - server - INFO - ‚ö†Ô∏è Session still not found after wait, will create in worker
2026-01-10T18:24:55.034186319Z [err]  2026-01-10 18:24:51,720 - server - WARNING - ‚ö†Ô∏è Session not found after waiting, creating in WebSocket worker...
2026-01-10T18:24:55.034194365Z [err]  2026-01-10 18:24:51,724 - redis_service - INFO - üì• Retrieved call data from Redis: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:24:55.034200758Z [err]  2026-01-10 18:24:51,727 - server - INFO - üìù Creating session with agent_id=bbeda238-e8d9-4d8c-b93b-1b7694581adb, user_id=dcafa642-6136-4096-b77d-a4cb99a62651
2026-01-10T18:24:55.038014437Z [err]  2026-01-10 18:24:51,727 - core_calling_service - INFO - üîç Checking KB for agent bbeda238-e8d9-4d8c-b93b-1b7694581adb...
2026-01-10T18:24:55.038021720Z [err]  2026-01-10 18:24:51,743 - httpx - INFO - HTTP Request: POST https://n8n.outlier-agency.com/webhook/2adb150a-9e08-4053-9fa4-e47df18bf39b "HTTP/1.1 530 <none>"
2026-01-10T18:24:55.038027701Z [err]  2026-01-10 18:24:51,744 - server - WARNING - ‚ö†Ô∏è Call-started webhook returned status 530: <!doctype html>
2026-01-10T18:24:55.038033975Z [err]  <!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en-US"> <![endif]-->
2026-01-10T18:24:55.038041105Z [err]  <!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en-US"> <![endif]-->
2026-01-10T18:24:55.038046946Z [err]  <!--[if IE 8]>    <html class="no-
2026-01-10T18:24:55.038053330Z [err]  2026-01-10 18:24:51,795 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2026-01-10T18:24:55.038059251Z [err]  2026-01-10 18:24:51,809 - core_calling_service - INFO - üîç KB count query completed: 4 items
2026-01-10T18:24:55.038065824Z [err]  2026-01-10 18:24:51,810 - core_calling_service - INFO - üìö Agent bbeda238-e8d9-4d8c-b93b-1b7694581adb has 4 KB items - Smart routing enabled (RAG on demand)
2026-01-10T18:24:55.038071512Z [err]  2026-01-10 18:24:51,810 - core_calling_service - INFO - üìã Built cached system prompt: 5065 chars (global) + 1402 chars (technical)
2026-01-10T18:24:55.038076708Z [err]  2026-01-10 18:24:51,810 - core_calling_service - INFO - üìö KB available - will use smart routing (simple chat: NO KB, factual: WITH KB)
2026-01-10T18:24:55.038082283Z [err]  2026-01-10 18:24:51,810 - core_calling_service - INFO - üî• Pre-warming LLM client (grok)...
2026-01-10T18:24:55.038088409Z [err]  2026-01-10 18:24:51,862 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2026-01-10T18:24:55.038094538Z [err]  2026-01-10 18:24:51,862 - server - INFO - üì® Full payload: {'data': {'event_type': 'streaming.started', 'id': '163bd457-690a-493c-befa-e182e74b9a85', 'occurred_at': '2026-01-10T18:24:51.367759Z', 'payload': {'call_control_id': 'v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw', 'call_leg_id': 'a42f2994-ee51-11f0-816e-02420aef971f', 'call_session_id': 'a42c958a-ee51-11f0-8e69-02420aef971f', 'client_state': None, 'connection_id': '2777245537294877821', 'stream_id': '091be7b2-5120-4a6d-91b8-5c22515075fa', 'stream_params': {'stream_track': 'inbound', 'stream_url': 'wss://api.li-ai.org/api/telnyx/audio-stream'}, 'stream_type': 'websocket'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2026-01-10T18:24:55.041660614Z [err]  2026-01-10 18:24:51,862 - server - INFO - üéØ Event type: streaming.started, Call ID: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:24:55.041669160Z [err]  2026-01-10 18:24:51,892 - server - INFO - üìû Call data loaded, starting SONIOX connection...
2026-01-10T18:24:55.041671490Z [err]  2026-01-10 18:24:51,862 - server - INFO - üì® ================================================
2026-01-10T18:24:55.041679393Z [inf]  100.64.0.10:58272 - "POST /api/telnyx/webhook HTTP/1.1" 200
2026-01-10T18:24:55.041687099Z [err]  2026-01-10 18:24:51,893 - server - INFO - ‚úÖ Initialized call_states for v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw with session reference
2026-01-10T18:24:55.041687547Z [err]  2026-01-10 18:24:51,884 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2026-01-10T18:24:55.041696480Z [err]  2026-01-10 18:24:51,893 - server - INFO - ‚úÖ Stored Telnyx WebSocket in call_data for audio streaming
2026-01-10T18:24:55.041698881Z [err]  2026-01-10 18:24:51,884 - server - INFO - üîß Creating Telnyx service with user's keys...
2026-01-10T18:24:55.041707819Z [err]  2026-01-10 18:24:51,893 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found to update for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:24:55.041707898Z [err]  2026-01-10 18:24:51,892 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2026-01-10T18:24:55.041715339Z [err]  2026-01-10 18:24:51,892 - core_calling_service - INFO - ‚úÖ LLM client pre-warmed in 82ms
2026-01-10T18:24:55.041722388Z [err]  2026-01-10 18:24:51,892 - server - INFO - ‚úÖ Session created in WebSocket worker
2026-01-10T18:24:55.041728767Z [err]  2026-01-10 18:24:51,892 - server - INFO - ‚è±Ô∏è [WebSocket Worker] Scheduling silence timeout: 2000ms
2026-01-10T18:24:55.041734842Z [err]  2026-01-10 18:24:51,892 - server - INFO - ‚è±Ô∏è [WebSocket Worker] Silence timeout task scheduled!
2026-01-10T18:24:55.045075366Z [err]  2026-01-10 18:24:51,893 - server - INFO - ‚è±Ô∏è [WebSocket Worker] Silence timeout task started, waiting 2000ms...
2026-01-10T18:24:55.045076772Z [err]  2026-01-10 18:24:52,438 - server - INFO - üîç Agent ID: bbeda238-e8d9-4d8c-b93b-1b7694581adb, User ID: dcafa642-6136-4096-b77d-a4cb99a62651
2026-01-10T18:24:55.045084763Z [err]  2026-01-10 18:24:51,911 - telnyx_service - INFO - Telnyx service initialized with connection: 2777245537294877821
2026-01-10T18:24:55.045091088Z [err]  2026-01-10 18:24:52,438 - server - INFO - üîß Calling create_call_session() - START
2026-01-10T18:24:55.045092169Z [err]  2026-01-10 18:24:51,977 - server - INFO - üîë Using user's Soniox API key (first 10 chars): b999f22d7b...
2026-01-10T18:24:55.045099086Z [err]  2026-01-10 18:24:52,117 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw/actions/playback_start "HTTP/1.1 200 OK"
2026-01-10T18:24:55.045105221Z [err]  2026-01-10 18:24:52,117 - telnyx_service - INFO - ‚úÖ Playing audio from URL, playback_id: 4C4IBTx72w (loop=True, overlay=True)
2026-01-10T18:24:55.045111968Z [err]  2026-01-10 18:24:52,117 - server - WARNING - ‚ö†Ô∏è Failed to start comfort noise: 'v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw'
2026-01-10T18:24:55.045143190Z [err]  2026-01-10 18:24:52,118 - telnyx_service - INFO - üéôÔ∏è Starting recording: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:24:55.045152560Z [err]  2026-01-10 18:24:52,435 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw/actions/record_start "HTTP/1.1 200 OK"
2026-01-10T18:24:55.045163770Z [err]  2026-01-10 18:24:52,438 - server - INFO - üéôÔ∏è Call recording started for v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:24:55.045177363Z [err]  2026-01-10 18:24:52,438 - server - INFO - üîß Creating call session for v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw...
2026-01-10T18:24:55.048242793Z [err]  2026-01-10 18:24:52,438 - core_calling_service - INFO - üîç Checking KB for agent bbeda238-e8d9-4d8c-b93b-1b7694581adb...
2026-01-10T18:24:55.048243392Z [err]  2026-01-10 18:24:52,525 - core_calling_service - INFO - üìö Agent bbeda238-e8d9-4d8c-b93b-1b7694581adb has 4 KB items - Smart routing enabled (RAG on demand)
2026-01-10T18:24:55.048253861Z [inf]  100.64.0.9:15152 - "GET /api/tts-audio/comfort_noise_continuous.mp3 HTTP/1.1" 200
2026-01-10T18:24:55.048255385Z [err]  2026-01-10 18:24:52,525 - core_calling_service - INFO - üìã Built cached system prompt: 5065 chars (global) + 1402 chars (technical)
2026-01-10T18:24:55.048261993Z [err]  2026-01-10 18:24:52,481 - soniox_service - INFO - ‚úÖ Connected to Soniox Real-Time STT
2026-01-10T18:24:55.048263571Z [err]  2026-01-10 18:24:52,525 - core_calling_service - INFO - üìö KB available - will use smart routing (simple chat: NO KB, factual: WITH KB)
2026-01-10T18:24:55.048271809Z [err]  2026-01-10 18:24:52,481 - soniox_service - INFO - ‚öôÔ∏è  Config: model=stt-rt-v3, format=mulaw, rate=8000Hz, channels=1
2026-01-10T18:24:55.048279873Z [err]  2026-01-10 18:24:52,482 - soniox_service - INFO - ‚öôÔ∏è  Endpoint detection: True, Speaker diarization: False
2026-01-10T18:24:55.048288385Z [err]  2026-01-10 18:24:52,522 - telnyx_service - INFO - Telnyx service initialized with connection: 2777245537294877821
2026-01-10T18:24:55.048294830Z [err]  2026-01-10 18:24:52,523 - dead_air_monitor - INFO - üîá Dead air monitoring started for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:24:55.048301333Z [err]  2026-01-10 18:24:52,524 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:FRYJscPFj3xR6SIkG... (active sessions: [])
2026-01-10T18:24:55.048325983Z [err]  2026-01-10 18:24:52,524 - server - INFO - ‚úÖ Started forwarding audio (8kHz mulaw ‚Üí Soniox, NO BUFFERING)
2026-01-10T18:24:55.048369879Z [err]  2026-01-10 18:24:52,525 - core_calling_service - INFO - üîç KB count query completed: 4 items
2026-01-10T18:24:55.053261415Z [err]  2026-01-10 18:24:52,525 - core_calling_service - INFO - üî• Pre-warming LLM client (grok)...
2026-01-10T18:24:55.053272442Z [err]  2026-01-10 18:24:52,612 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2026-01-10T18:24:55.053281092Z [err]  2026-01-10 18:24:52,612 - core_calling_service - INFO - ‚úÖ LLM client pre-warmed in 87ms
2026-01-10T18:24:55.053288417Z [err]  2026-01-10 18:24:52,612 - server - INFO - üîß Calling create_call_session() - COMPLETE
2026-01-10T18:24:55.053294817Z [err]  2026-01-10 18:24:52,612 - server - INFO - ‚úÖ Session object created: CallSession
2026-01-10T18:24:55.053301914Z [err]  2026-01-10 18:24:52,623 - redis_service - INFO - üì¶ Stored call data in Redis: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw (TTL: 3600s)
2026-01-10T18:24:55.053307449Z [err]  2026-01-10 18:24:52,623 - server - INFO - ‚úÖ Serializable call_data synced to Redis (agent_id, user_id)
2026-01-10T18:24:55.053313603Z [err]  2026-01-10 18:24:52,623 - server - INFO - ‚úÖ Session stored in worker memory (not Redis)
2026-01-10T18:24:55.053320620Z [err]  2026-01-10 18:24:52,624 - redis_service - INFO - ‚úÖ Marked session ready in Redis: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:24:55.053326577Z [err]  2026-01-10 18:24:52,625 - server - INFO - ü§ñ AI session created for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:24:55.053332276Z [err]  2026-01-10 18:24:52,625 - server - INFO - üì¶ Custom variables injected: {'lead_id': None, 'qc_tracking_enabled': False, 'track_keywords': '', 'expected_commitment': 'not_specified', 'customer_name': 'Kendrick', 'to_number': '+17708336397', 'phone_number': '+17708336397', 'email': None, 'from_number': '+14048000152'}
2026-01-10T18:24:55.053338314Z [err]  2026-01-10 18:24:52,625 - server - INFO - ‚è≠Ô∏è Skipping persistent TTS creation in webhook - will create on-demand with telnyx_ws
2026-01-10T18:24:55.059565949Z [err]  2026-01-10 18:24:52,625 - server - INFO - üë§ Who speaks first: user, aiSpeaksAfterSilence: True, timeout: 2000ms
2026-01-10T18:24:55.059574063Z [err]  2026-01-10 18:24:52,626 - server - INFO - üëÇ User speaks first - waiting for user input...
2026-01-10T18:24:55.059579018Z [err]  2026-01-10 18:24:52,626 - server - INFO - üõ°Ô∏è Voicemail timeout protection started (15000ms)
2026-01-10T18:24:55.059584955Z [err]  2026-01-10 18:24:52,626 - server - INFO - ‚è±Ô∏è AI will speak after 2000ms of silence (scheduled in WebSocket worker)
2026-01-10T18:24:55.059590615Z [err]  2026-01-10 18:24:52,626 - server - INFO - üé§ Voice flow - streaming started via dial command
2026-01-10T18:24:55.059596302Z [err]  2026-01-10 18:24:52,633 - redis_service - INFO - üì• Retrieved call data from Redis: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:24:55.059603131Z [err]  2026-01-10 18:24:52,635 - server - INFO - ü§ê No greeting - waiting for user to speak first
2026-01-10T18:24:55.059609907Z [err]  2026-01-10 18:24:52,635 - server - INFO - üé§ Voice flow - WebSocket streaming already initiated
2026-01-10T18:24:55.059617393Z [inf]  100.64.0.12:11106 - "POST /api/telnyx/webhook HTTP/1.1" 200
2026-01-10T18:24:55.059622419Z [err]  2026-01-10 18:24:53,025 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:FRYJscPFj3xR6SIkG... (active sessions: [])
2026-01-10T18:24:55.059626876Z [err]  2026-01-10 18:24:53,468 - server - INFO - üî§ RAW TOKENS: ["H"?]
2026-01-10T18:24:55.059631856Z [err]  2026-01-10 18:24:53,472 - core_calling_service - INFO - üîä Silence timer reset for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw (user started speaking)
2026-01-10T18:24:55.059638015Z [err]  2026-01-10 18:24:53,472 - core_calling_service - INFO - üë§ User started speaking for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:24:55.059643750Z [err]  2026-01-10 18:24:53,472 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:FRYJscPFj3xR6SIkG... (active sessions: [])
2026-01-10T18:24:55.063958858Z [err]  2026-01-10 18:24:53,472 - server - WARNING - ‚ö†Ô∏è [REAL TIMING] No TTS session found to clear for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:24:55.063966692Z [err]  2026-01-10 18:24:53,478 - redis_service - INFO - üì• Retrieved call data from Redis: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:24:55.063975461Z [err]  2026-01-10 18:24:53,734 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:FRYJscPFj3xR6SIkG... (active sessions: [])
2026-01-10T18:24:55.063975657Z [err]  2026-01-10 18:24:53,488 - redis_service - INFO - üì¶ Stored call data in Redis: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw (TTL: 3600s)
2026-01-10T18:24:55.063983437Z [err]  2026-01-10 18:24:53,488 - server - INFO - üîç PARTIAL TRANSCRIPT: 'H' | Generating: False
2026-01-10T18:24:55.063991775Z [err]  2026-01-10 18:24:53,528 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:FRYJscPFj3xR6SIkG... (active sessions: [])
2026-01-10T18:24:55.063992268Z [err]  2026-01-10 18:24:53,734 - server - INFO - üîç FILTER CHECK: words=1, is_filler=False, is_garbled=False, tts_speaking=False, time_until_done=0.0s, generating=False, playbacks=0, is_active=False
2026-01-10T18:24:55.064000382Z [err]  2026-01-10 18:24:53,732 - server - INFO - üî§ RAW TOKENS: ["H"‚úì, "ello"‚úì, "?"‚úì, "<end>"‚úì]
2026-01-10T18:24:55.064002308Z [err]  2026-01-10 18:24:53,734 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:FRYJscPFj3xR6SIkG... (active sessions: [])
2026-01-10T18:24:55.064007770Z [err]  2026-01-10 18:24:53,733 - server - INFO - üéØ Endpoint detected: <end> token received
2026-01-10T18:24:55.064014388Z [err]  2026-01-10 18:24:53,733 - server - INFO - üßπ Cleaned transcript: 'H ello ?' -> 'Hello?'
2026-01-10T18:24:55.064020839Z [err]  2026-01-10 18:24:53,733 - server - INFO - üì• FINAL TOKENS: 'Hello?' (3 tokens)
2026-01-10T18:24:55.064027788Z [err]  2026-01-10 18:24:53,733 - server - INFO - üé§ Soniox final transcript: 'Hello?'
2026-01-10T18:24:55.069587676Z [err]  2026-01-10 18:24:53,737 - server - INFO - ‚úÖ Agent SILENT - User said 1 word(s): 'Hello?' - Processing...
2026-01-10T18:24:55.069600179Z [err]  2026-01-10 18:24:53,748 - server - INFO - üìä [REAL TIMING] STT: User audio end ‚Üí Transcript received: -3ms
2026-01-10T18:24:55.069608147Z [err]  2026-01-10 18:24:53,748 - server - INFO - üé§ Endpoint detected by Soniox - processing transcript: Hello?
2026-01-10T18:24:55.069616138Z [err]  2026-01-10 18:24:53,748 - core_calling_service - INFO - üë§ User stopped speaking for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:24:55.069623006Z [err]  2026-01-10 18:24:53,748 - server - INFO - ‚è±Ô∏è [TIMING] STT_START: User last audio packet received
2026-01-10T18:24:55.069623640Z [err]  2026-01-10 18:24:53,734 - server - INFO - üöÄ Spawned tracked background task for endpoint processing
2026-01-10T18:24:55.069629409Z [err]  2026-01-10 18:24:53,734 - server - INFO - ‚è±Ô∏è [18:24:53.734] üìù FINAL TRANSCRIPT RECEIVED: 'Hello?'
2026-01-10T18:24:55.069635834Z [err]  2026-01-10 18:24:53,734 - server - INFO - ‚è±Ô∏è [18:24:53.734] STT endpoint detection latency: 15ms
2026-01-10T18:24:55.069641700Z [err]  2026-01-10 18:24:53,734 - server - INFO - ‚è±Ô∏è [18:24:53.734] üé§ USER STOPPED SPEAKING - Beginning processing pipeline
2026-01-10T18:24:55.069647122Z [err]  2026-01-10 18:24:53,734 - server - INFO - ‚è±Ô∏è User spoke at 1768069493.734658
2026-01-10T18:24:55.069653143Z [err]  2026-01-10 18:24:53,737 - redis_service - INFO - üì¶ Stored call data in Redis: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw (TTL: 3600s)
2026-01-10T18:24:55.069659278Z [err]  2026-01-10 18:24:53,737 - server - INFO - üë§ User has spoken - aiSpeaksAfterSilence timer cancelled if pending
2026-01-10T18:24:55.069664590Z [err]  2026-01-10 18:24:53,737 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:FRYJscPFj3xR6SIkG... (active sessions: [])
2026-01-10T18:24:55.073038349Z [err]  2026-01-10 18:24:53,748 - server - INFO - ‚è±Ô∏è [TIMING] STT_END: Endpoint detected at T+7ms
2026-01-10T18:24:55.073043201Z [err]  2026-01-10 18:24:53,749 - server - INFO - ‚è±Ô∏è [TIMING] STT_LATENCY: 7ms (Soniox model: stt-rt-v3)
2026-01-10T18:24:55.073047518Z [err]  2026-01-10 18:24:53,749 - server - INFO - ‚è±Ô∏è  USER STOPPED SPEAKING at T=0ms
2026-01-10T18:24:55.073051768Z [err]  2026-01-10 18:24:53,749 - server - INFO - üìä [REAL TIMING] Processing start: 29ms after user audio end
2026-01-10T18:24:55.073055907Z [err]  2026-01-10 18:24:53,749 - server - INFO - üéôÔ∏è Agent generating response - interruption detection active
2026-01-10T18:24:55.073060509Z [err]  2026-01-10 18:24:53,749 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:24:55.073064627Z [err]  2026-01-10 18:24:53,850 - server - INFO - üìù Saved user transcript to database
2026-01-10T18:24:55.073077626Z [err]  2026-01-10 18:24:53,850 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:FRYJscPFj3xR6SIkG... (active sessions: [])
2026-01-10T18:24:55.073081584Z [err]  2026-01-10 18:24:53,850 - core_calling_service - INFO - ‚è±Ô∏è [18:24:53.850] üì• process_user_input() ENTRY - text: 'Hello?...'
2026-01-10T18:24:55.073085279Z [err]  2026-01-10 18:24:53,851 - redis_service - INFO - üì• Retrieved call data from Redis: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:24:55.073090630Z [err]  2026-01-10 18:24:53,851 - core_calling_service - WARNING - üö® BARGE-IN DETECTED for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw: User spoke while Silence Greeting was triggering
2026-01-10T18:24:55.073094884Z [err]  2026-01-10 18:24:53,885 - telnyx_service - INFO - Telnyx service initialized with connection: 2777245537294877821
2026-01-10T18:24:55.073099171Z [err]  2026-01-10 18:24:53,885 - telnyx_service - INFO - üõë Stopping audio playback on call: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:24:55.076084664Z [err]  2026-01-10 18:24:53,899 - redis_service - INFO - üì• Retrieved call data from Redis: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:24:55.076097423Z [err]  2026-01-10 18:24:53,899 - server - INFO - ‚è±Ô∏è [WebSocket Worker] Silence timeout: User already spoke, skipping greeting
2026-01-10T18:24:55.076105829Z [err]  2026-01-10 18:24:53,996 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2026-01-10T18:24:55.076113597Z [err]  2026-01-10 18:24:53,996 - server - INFO - üì® Full payload: {'data': {'event_type': 'call.playback.started', 'id': 'de40ca34-8e7f-4d4a-a515-88af0d8ba1ca', 'occurred_at': '2026-01-10T18:24:53.707676Z', 'payload': {'call_control_id': 'v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw', 'call_leg_id': 'a42f2994-ee51-11f0-816e-02420aef971f', 'call_session_id': 'a42c958a-ee51-11f0-8e69-02420aef971f', 'client_state': None, 'connection_id': '2777245537294877821', 'media_name': None, 'media_url': 'api.li-ai.org/api/tts-audio/comfort_noise_continuous.mp3', 'overlay': True, 'playback_id': '4C4IBTx72w', 'start_time': '2026-01-10T18:24:53.707676Z'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2026-01-10T18:24:55.076124682Z [err]  2026-01-10 18:24:53,996 - server - INFO - üéØ Event type: call.playback.started, Call ID: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:24:55.076132698Z [err]  2026-01-10 18:24:53,996 - server - INFO - üì® ================================================
2026-01-10T18:24:55.076142032Z [inf]  100.64.0.8:49216 - "POST /api/telnyx/webhook HTTP/1.1" 200
2026-01-10T18:24:55.076148649Z [err]  2026-01-10 18:24:54,031 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:FRYJscPFj3xR6SIkG... (active sessions: [])
2026-01-10T18:24:55.076155441Z [err]  2026-01-10 18:24:54,031 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:FRYJscPFj3xR6SIkG... (active sessions: [])
2026-01-10T18:24:55.723810539Z [err]  2026-01-10 18:24:54,123 - core_calling_service - INFO - ‚è±Ô∏è [18:24:54.123] üîÄ _process_call_flow_streaming() ENTRY
2026-01-10T18:24:55.723837183Z [err]  2026-01-10 18:24:54,123 - core_calling_service - INFO - Flow processing - History length: 1, Is first: True
2026-01-10T18:24:55.723852151Z [err]  2026-01-10 18:24:54,123 - core_calling_service - INFO - ‚è±Ô∏è [18:24:54.123] ‚úÖ Node selected, about to process content...
2026-01-10T18:24:55.723861493Z [err]  2026-01-10 18:24:54,123 - core_calling_service - INFO - üîß Replaced {{now}} with Saturday, January 10, 2026 at 1:24 PM EST in content
2026-01-10T18:24:55.723861655Z [err]  2026-01-10 18:24:54,120 - telnyx_service - INFO - ‚úÖ Successfully stopped audio playback
2026-01-10T18:24:55.723879611Z [err]  2026-01-10 18:24:54,120 - core_calling_service - INFO - ‚úÖ BARGE-IN: Audio playback STOPPED
2026-01-10T18:24:55.723888637Z [err]  2026-01-10 18:24:54,120 - core_calling_service - INFO - ‚úÖ BARGE-IN: Preserving silence greeting in history to maintain context
2026-01-10T18:24:55.723897124Z [err]  2026-01-10 18:24:54,121 - redis_service - INFO - üì• Retrieved call data from Redis: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:24:55.723905104Z [err]  2026-01-10 18:24:54,122 - redis_service - INFO - üì¶ Stored call data in Redis: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw (TTL: 3600s)
2026-01-10T18:24:55.723913375Z [err]  2026-01-10 18:24:54,123 - core_calling_service - INFO - ‚úÖ BARGE-IN: Reset silence_greeting_triggered flag
2026-01-10T18:24:55.723920281Z [err]  2026-01-10 18:24:54,123 - core_calling_service - INFO - ‚è±Ô∏è [18:24:54.123] ‚è© About to call _process_call_flow_streaming()
2026-01-10T18:24:55.723926801Z [err]  2026-01-10 18:24:54,123 - core_calling_service - INFO - ‚è±Ô∏è [18:24:54.123] üîÄ Agent type: call_flow, calling flow processor...
2026-01-10T18:24:55.723979994Z [err]  2026-01-10 18:24:54,118 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw/actions/playback_stop "HTTP/1.1 200 OK"
2026-01-10T18:24:55.728632100Z [err]  2026-01-10 18:24:54,123 - core_calling_service - INFO - üîß Replaced {{customer_name}} with Kendrick in content
2026-01-10T18:24:55.728638355Z [err]  2026-01-10 18:24:54,123 - core_calling_service - INFO - üîß Replaced {{callerName}} with  in content
2026-01-10T18:24:55.728643188Z [err]  2026-01-10 18:24:54,123 - core_calling_service - INFO - üîß Replaced {{lead_id}} with None in content
2026-01-10T18:24:55.728649881Z [err]  2026-01-10 18:24:54,123 - core_calling_service - INFO - üîß Replaced {{qc_tracking_enabled}} with False in content
2026-01-10T18:24:55.728655853Z [err]  2026-01-10 18:24:54,123 - core_calling_service - INFO - üîß Replaced {{track_keywords}} with  in content
2026-01-10T18:24:55.728661815Z [err]  2026-01-10 18:24:54,123 - core_calling_service - INFO - üîß Replaced {{expected_commitment}} with not_specified in content
2026-01-10T18:24:55.728669976Z [err]  2026-01-10 18:24:54,123 - core_calling_service - INFO - üîß Replaced {{to_number}} with +17708336397 in content
2026-01-10T18:24:55.728675812Z [err]  2026-01-10 18:24:54,123 - core_calling_service - INFO - üîß Replaced {{phone_number}} with +17708336397 in content
2026-01-10T18:24:55.728682353Z [err]  2026-01-10 18:24:54,124 - core_calling_service - INFO - üîß Replaced {{email}} with None in content
2026-01-10T18:24:55.728688562Z [err]  2026-01-10 18:24:54,124 - core_calling_service - INFO - ‚úÖ Using explicit SCRIPT mode (length: 9 chars) - will return text instantly
2026-01-10T18:24:55.728693824Z [err]  2026-01-10 18:24:54,124 - core_calling_service - INFO - Using flow node: Greeting (type: conversation, mode: script)
2026-01-10T18:24:55.728698875Z [err]  2026-01-10 18:24:54,124 - core_calling_service - INFO - üìö skip_mandatory_precheck=true - skipping pre-response mandatory check, will check on transition
2026-01-10T18:24:55.728704373Z [err]  2026-01-10 18:24:54,124 - core_calling_service - INFO - ‚è±Ô∏è [18:24:54.124] üìÑ About to process content (mode=script, length=9)
2026-01-10T18:24:55.730152362Z [err]  2026-01-10 18:24:54,124 - core_calling_service - INFO - üì§ Streaming script as 1 sentence(s)
2026-01-10T18:24:55.730157296Z [err]  2026-01-10 18:24:54,124 - server - INFO - üì§ Sentence arrived from LLM: Kendrick?...
2026-01-10T18:24:55.730162563Z [err]  2026-01-10 18:24:54,124 - server - INFO - ‚è±Ô∏è [TIMING] TTFS (Time To First Sentence): 375ms
2026-01-10T18:24:55.730168908Z [err]  2026-01-10 18:24:54,124 - server - INFO - ‚ö° Starting REAL-TIME TTS for first sentence
2026-01-10T18:24:55.730174107Z [err]  2026-01-10 18:24:54,124 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:FRYJscPFj3xR6SIkG... (active sessions: [])
2026-01-10T18:24:55.730180640Z [err]  2026-01-10 18:24:54,124 - server - INFO - ‚ö° ON-DEMAND: Creating persistent TTS session (multi-worker mode)
2026-01-10T18:24:55.730187900Z [err]  2026-01-10 18:24:54,210 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2026-01-10T18:24:55.730193950Z [err]  2026-01-10 18:24:54,294 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2026-01-10T18:24:55.730199047Z [err]  2026-01-10 18:24:54,377 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2026-01-10T18:24:55.730203951Z [err]  2026-01-10 18:24:54,411 - telnyx_service - INFO - Telnyx service initialized with connection: 2777245537294877821
2026-01-10T18:24:55.730209367Z [err]  2026-01-10 18:24:54,411 - server - INFO - ‚úÖ ON-DEMAND: Using Telnyx WebSocket from closure for streaming audio
2026-01-10T18:24:55.730214894Z [err]  2026-01-10 18:24:54,411 - persistent_tts_service - INFO - üéôÔ∏è Extracted voice_settings from agent config: {'stability': 0.6, 'similarity_boost': 0.65, 'style': 0.2, 'use_speaker_boost': True}
2026-01-10T18:24:55.730221182Z [err]  2026-01-10 18:24:54,411 - persistent_tts_service - INFO - üîå [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] Establishing persistent TTS WebSocket...
2026-01-10T18:24:55.733461183Z [err]  2026-01-10 18:24:54,554 - persistent_tts_service - INFO - ‚úÖ Created persistent TTS session for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:24:55.733495757Z [err]  2026-01-10 18:24:54,411 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] Voice settings: {'stability': 0.6, 'similarity_boost': 0.65, 'style': 0.2, 'use_speaker_boost': True}
2026-01-10T18:24:55.733502912Z [err]  2026-01-10 18:24:54,411 - elevenlabs_ws_service - INFO - üîå Connecting to ElevenLabs WebSocket: voice=J5iaaqzR5zn6HFG4jV3b, model=eleven_turbo_v2_5
2026-01-10T18:24:55.733509928Z [err]  2026-01-10 18:24:54,411 - elevenlabs_ws_service - INFO - üéôÔ∏è Voice settings: stability=0.6, similarity=0.65, style=0.2
2026-01-10T18:24:55.733517675Z [err]  2026-01-10 18:24:54,534 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:FRYJscPFj3xR6SIkG... (active sessions: [])
2026-01-10T18:24:55.733524956Z [err]  2026-01-10 18:24:54,534 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:FRYJscPFj3xR6SIkG... (active sessions: [])
2026-01-10T18:24:55.733534776Z [err]  2026-01-10 18:24:54,553 - elevenlabs_ws_service - INFO - ‚úÖ Connected to ElevenLabs WebSocket
2026-01-10T18:24:55.733543235Z [err]  2026-01-10 18:24:54,553 - elevenlabs_ws_service - INFO - üì§ Sent BOS message with voice settings
2026-01-10T18:24:55.733549866Z [err]  2026-01-10 18:24:54,553 - persistent_tts_service - INFO - ‚úÖ [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] Persistent TTS WebSocket established
2026-01-10T18:24:55.733558092Z [err]  2026-01-10 18:24:54,553 - persistent_tts_service - INFO - üéß [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] Continuous audio receiver started
2026-01-10T18:24:55.733565356Z [err]  2026-01-10 18:24:54,554 - persistent_tts_service - INFO - üîä [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] Comfort noise loop started
2026-01-10T18:24:55.736306750Z [err]  2026-01-10 18:24:54,554 - server - INFO - ‚úÖ ON-DEMAND: Persistent TTS session created successfully!
2026-01-10T18:24:55.736313931Z [err]  2026-01-10 18:24:54,554 - server - INFO - üîç Persistent TTS lookup: call_id=v3:FRYJscPFj3xR6SIkG..., session=FOUND
2026-01-10T18:24:55.736320465Z [err]  2026-01-10 18:24:54,554 - server - INFO - üöÄ Streaming sentence #1 via persistent WebSocket
2026-01-10T18:24:55.736332180Z [err]  2026-01-10 18:24:54,554 - server - INFO - üéµ TTS task #1 started at +429ms
2026-01-10T18:24:55.736338790Z [err]  2026-01-10 18:24:54,554 - server - INFO - ‚è±Ô∏è [TIMING] TTFT_TTS (First TTS Task Started): 805ms
2026-01-10T18:24:55.736345070Z [err]  2026-01-10 18:24:54,554 - core_calling_service - INFO - üì§ Streamed script sentence 1/1: Kendrick?...
2026-01-10T18:24:55.736351543Z [err]  2026-01-10 18:24:54,554 - core_calling_service - INFO - üîä Silence tracking reset for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw (user responded)
2026-01-10T18:24:55.736357464Z [err]  2026-01-10 18:24:54,554 - core_calling_service - INFO - ‚úÖ User responded to regular message, resetting counter
2026-01-10T18:24:55.736362969Z [err]  2026-01-10 18:24:54,554 - core_calling_service - INFO - üíæ Storing node ID 2 in conversation history
2026-01-10T18:24:55.736367292Z [err]  2026-01-10 18:24:54,554 - core_calling_service - INFO - LLM response (0.70s): Kendrick?
2026-01-10T18:24:55.736372763Z [err]  2026-01-10 18:24:54,554 - core_calling_service - INFO - Total latency: 0.70s
2026-01-10T18:24:55.736378073Z [err]  2026-01-10 18:24:54,556 - server - INFO - ‚úÖ LLM finished in 807ms, TTS tasks already running in background
2026-01-10T18:24:55.736383386Z [err]  2026-01-10 18:24:54,557 - server - INFO - üéµ Streaming 1 TTS chunks as they complete...
2026-01-10T18:24:55.736387844Z [err]  2026-01-10 18:24:54,557 - server - INFO - üöÄ Persistent TTS: Audio already streaming in background!
2026-01-10T18:24:55.739237987Z [err]  2026-01-10 18:24:54,559 - server - INFO - ‚è±Ô∏è  FIRST AUDIO STARTED: 810ms from user stop üöÄ
2026-01-10T18:24:55.739245205Z [err]  2026-01-10 18:24:54,559 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:24:55.739266836Z [err]  2026-01-10 18:24:54,557 - server - INFO -    1 sentences queued and playing seamlessly
2026-01-10T18:24:55.739273864Z [err]  2026-01-10 18:24:54,558 - persistent_tts_service - INFO - üéµ [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] Playback consumer started
2026-01-10T18:24:55.739435998Z [err]  2026-01-10 18:24:54,558 - persistent_tts_service - INFO - üéß [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] Continuous Audio Receiver STARTED
2026-01-10T18:24:55.739443367Z [err]  2026-01-10 18:24:54,558 - persistent_tts_service - INFO - üíì [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] Starting TTS keep-alive loop (every 15s)
2026-01-10T18:24:55.739450181Z [err]  2026-01-10 18:24:54,558 - persistent_tts_service - INFO - üîä [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] Starting comfort noise loop
2026-01-10T18:24:55.739457992Z [err]  2026-01-10 18:24:54,558 - persistent_tts_service - INFO - üé§ [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] Streaming sentence #1: Kendrick?...
2026-01-10T18:24:55.739468671Z [err]  2026-01-10 18:24:54,559 - persistent_tts_service - INFO - üöÄ [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] Sent sentence #1 to ElevenLabs in 0ms (non-blocking)
2026-01-10T18:24:55.739475950Z [err]  2026-01-10 18:24:54,559 - persistent_tts_service - INFO - üìä [REAL TIMING] TEXT SENT TO ELEVENLABS: 'Kendrick?...'
2026-01-10T18:24:55.739483527Z [err]  2026-01-10 18:24:54,559 - server - INFO - ‚úÖ All 1 persistent TTS streams completed
2026-01-10T18:24:55.739492658Z [err]  2026-01-10 18:24:54,559 - server - INFO - ‚úÖ Agent generation complete (persistent TTS) - response window closed
2026-01-10T18:24:55.741948667Z [err]  2026-01-10 18:24:54,560 - server - INFO - ‚è±Ô∏è  [TIMING]   - Network latency to user's phone (~50-150ms)
2026-01-10T18:24:55.741959516Z [err]  2026-01-10 18:24:54,560 - server - INFO - ‚è±Ô∏è  [TIMING]   - Phone audio buffering (~50-200ms)
2026-01-10T18:24:55.741961583Z [err]  2026-01-10 18:24:54,559 - server - INFO - ‚úÖ Agent generation complete - response window closed
2026-01-10T18:24:55.741970342Z [err]  2026-01-10 18:24:54,559 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2026-01-10T18:24:55.741977066Z [err]  2026-01-10 18:24:54,559 - server - INFO - ‚è±Ô∏è  [TIMING] ==== E2E LATENCY SUMMARY ====
2026-01-10T18:24:55.741983314Z [err]  2026-01-10 18:24:54,559 - server - INFO - ‚è±Ô∏è  [TIMING] STT: 7ms (provider: soniox, model: stt-rt-v3)
2026-01-10T18:24:55.741991041Z [err]  2026-01-10 18:24:54,560 - server - INFO - ‚è±Ô∏è  [TIMING]   - TOTAL MISSING: ~150-550ms typically
2026-01-10T18:24:55.741992262Z [err]  2026-01-10 18:24:54,560 - server - INFO - ‚è±Ô∏è  [TIMING] LLM_TOTAL: 807ms (provider: grok, model: grok-4-1-fast-non-reasoning)
2026-01-10T18:24:55.741999808Z [err]  2026-01-10 18:24:54,560 - server - INFO - ‚è±Ô∏è  [TIMING]   - REAL USER LATENCY: 1110ms estimated
2026-01-10T18:24:55.742003701Z [err]  2026-01-10 18:24:54,560 - server - INFO - ‚è±Ô∏è  [TIMING] TTS_TOTAL: 435ms (provider: elevenlabs, websocket: False)
2026-01-10T18:24:55.742009070Z [err]  2026-01-10 18:24:54,560 - server - INFO - ‚è±Ô∏è  [TIMING] RESPONSE_TEXT: 9 chars, 1 sentences
2026-01-10T18:24:55.742011967Z [err]  2026-01-10 18:24:54,560 - server - INFO - ‚è±Ô∏è  [TIMING] E2E_TOTAL: 810ms (user stopped ‚Üí play_audio_url called)
2026-01-10T18:24:55.742017616Z [err]  2026-01-10 18:24:54,560 - server - INFO - ‚è±Ô∏è  [TIMING] ‚ö†Ô∏è NOTE: E2E_TOTAL does not include:
2026-01-10T18:24:55.742023866Z [err]  2026-01-10 18:24:54,560 - server - INFO - ‚è±Ô∏è  [TIMING]   - Telnyx processing time (~50-200ms)
2026-01-10T18:24:55.745094802Z [err]  2026-01-10 18:24:54,560 - server - INFO - ‚è±Ô∏è  [TIMING] USER_INPUT: 'Hello?...'
2026-01-10T18:24:55.745105174Z [err]  2026-01-10 18:24:54,560 - server - INFO - ‚è±Ô∏è  [TIMING] AI_RESPONSE: 'Kendrick?...'
2026-01-10T18:24:55.745111854Z [err]  2026-01-10 18:24:54,560 - server - INFO - ‚è±Ô∏è  [TIMING] ==========================
2026-01-10T18:24:55.745117421Z [err]  2026-01-10 18:24:54,560 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2026-01-10T18:24:55.745128129Z [err]  2026-01-10 18:24:54,662 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2026-01-10T18:24:55.745133685Z [err]  2026-01-10 18:24:54,662 - server - INFO - üì® Full payload: {'data': {'event_type': 'call.machine.premium.detection.ended', 'id': 'f3c2ee90-0cb2-41b6-9c41-e42afb052394', 'occurred_at': '2026-01-10T18:24:54.527675Z', 'payload': {'call_control_id': 'v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw', 'call_leg_id': 'a42f2994-ee51-11f0-816e-02420aef971f', 'call_session_id': 'a42c958a-ee51-11f0-8e69-02420aef971f', 'client_state': None, 'connection_id': '2777245537294877821', 'from': '+14048000152', 'result': 'human_residence', 'to': '+17708336397'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2026-01-10T18:24:55.745139515Z [err]  2026-01-10 18:24:54,662 - server - INFO - üéØ Event type: call.machine.premium.detection.ended, Call ID: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:24:55.745145158Z [err]  2026-01-10 18:24:54,662 - server - INFO - üì® ================================================
2026-01-10T18:24:55.745150612Z [inf]  100.64.0.10:58272 - "POST /api/telnyx/webhook HTTP/1.1" 200
2026-01-10T18:24:55.745158782Z [err]  2026-01-10 18:24:54,741 - server - INFO - üìù Saved assistant transcript and latency to database (Node: Greeting, Dead Air: 1249ms)
2026-01-10T18:24:55.748328691Z [err]  2026-01-10 18:24:54,741 - server - INFO - üîä Agent finished generating, 0 playbacks active - waiting for webhooks to close window and start silence tracking
2026-01-10T18:24:55.748343729Z [err]  2026-01-10 18:24:54,741 - server - INFO - üîç END CALL CHECK: should_end_call=False, max_checkins=False, max_duration=False
2026-01-10T18:24:55.748352540Z [err]  2026-01-10 18:24:54,814 - persistent_tts_service - INFO - üìä [REAL TIMING] ElevenLabs FIRST AUDIO CHUNK received (chunk #1, 7043 bytes)
2026-01-10T18:24:55.748362154Z [err]  2026-01-10 18:24:54,814 - persistent_tts_service - INFO - üìä [REAL TIMING] PLAYBACK CONSUMER: First chunk arrived, queue latency: 0ms
2026-01-10T18:24:55.748369353Z [err]  2026-01-10 18:24:54,815 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTFA (Time To First Audio Playback): 256ms
2026-01-10T18:24:55.748378014Z [err]  2026-01-10 18:24:54,815 - persistent_tts_service - INFO - üì§ Sending 7043 bytes of audio (45 chunks, 0.9s duration) via WebSocket
2026-01-10T18:24:55.748385192Z [err]  2026-01-10 18:24:54,815 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:24:55.748392485Z [err]  2026-01-10 18:24:54,815 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +0.9s (total: 0.9s from now)
2026-01-10T18:24:55.748401266Z [err]  2026-01-10 18:24:54,815 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768069494.815 (chunk 1/45, 160 bytes)
2026-01-10T18:24:55.748408813Z [err]  2026-01-10 18:24:55,037 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (0.7s left)
2026-01-10T18:24:55.748416327Z [err]  2026-01-10 18:24:55,465 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 45 CHUNKS SENT TO TELNYX in 649ms (audio duration: 0.9s, paced after 10 chunks)
2026-01-10T18:24:55.748423395Z [err]  2026-01-10 18:24:55,465 - persistent_tts_service - INFO - ‚úÖ Sent 45 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:24:55.969353153Z [err]  2026-01-10 18:24:55,964 - persistent_tts_service - INFO - üîá [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] FLOOR RELEASED (is_holding_floor=False)
2026-01-10T18:24:56.047113534Z [err]  2026-01-10 18:24:56,043 - dead_air_monitor - INFO - ‚è±Ô∏è Playback expected end time passed (0.3s ago), marking agent as done speaking
2026-01-10T18:24:56.047122338Z [err]  2026-01-10 18:24:56,043 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1768069496.043483 for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:24:56.047128614Z [err]  2026-01-10 18:24:56,043 - core_calling_service - INFO - ü§ñ Agent stopped speaking for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:24:57.984292366Z [err]  2026-01-10 18:24:57,539 - server - INFO - üì§ Audio flowing: 300 packets sent to Soniox (5s update)
2026-01-10T18:25:00.394124625Z [err]  2026-01-10 18:25:00,065 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=False, user_speaking=False, silence=4.0s, checkin_count=0/2
2026-01-10T18:25:01.440351153Z [err]  2026-01-10 18:25:00,567 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=False, user_speaking=False, silence=4.5s, checkin_count=0/2
2026-01-10T18:25:03.414250607Z [err]  2026-01-10 18:25:02,542 - server - INFO - üì§ Audio flowing: 550 packets sent to Soniox (5s update)
2026-01-10T18:25:03.414257537Z [err]  2026-01-10 18:25:03,078 - core_calling_service - INFO - ‚è∞ Check-in triggered after 7.0s silence (threshold: 7s)
2026-01-10T18:25:03.414264110Z [err]  2026-01-10 18:25:03,079 - core_calling_service - INFO - üí¨ Sending check-in #1/2: Are you still there?
2026-01-10T18:25:03.414274373Z [err]  2026-01-10 18:25:03,079 - dead_air_monitor - INFO - üí¨ Sending check-in after 7.0s silence: Are you still there?
2026-01-10T18:25:03.414282892Z [err]  2026-01-10 18:25:03,079 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:03.414289924Z [err]  2026-01-10 18:25:03,080 - telnyx_service - INFO - üîä Speaking text on call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw: Are you still there?...
2026-01-10T18:25:03.414295728Z [err]  2026-01-10 18:25:03,080 - telnyx_service - INFO - üîç Agent config provided: True
2026-01-10T18:25:03.414302374Z [err]  2026-01-10 18:25:03,080 - telnyx_service - INFO - üîç TTS provider from settings: elevenlabs
2026-01-10T18:25:03.414310203Z [err]  2026-01-10 18:25:03,080 - telnyx_service - INFO - üîç WebSocket TTS: False
2026-01-10T18:25:03.414318070Z [err]  2026-01-10 18:25:03,080 - telnyx_service - INFO - üéôÔ∏è Attempting elevenlabs TTS (REST)
2026-01-10T18:25:03.414327965Z [err]  2026-01-10 18:25:03,080 - server - INFO - ‚è±Ô∏è [18:25:03.080] üîä TTS REQUEST START: provider=elevenlabs, user=dcafa642, comfort_noise=True
2026-01-10T18:25:03.414335340Z [err]  2026-01-10 18:25:03,080 - server - INFO - ‚ö° Using Turbo v2.5 (high quality)
2026-01-10T18:25:03.414341922Z [err]  2026-01-10 18:25:03,080 - server - INFO - üéôÔ∏è ElevenLabs streaming TTS: voice=J5iaaqzR5zn6HFG4jV3b, model=eleven_turbo_v2_5, speed=1.1, normalization=on, ssml=True
2026-01-10T18:25:03.414772161Z [err]  2026-01-10 18:25:03,163 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2026-01-10T18:25:03.414778909Z [err]  2026-01-10 18:25:03,163 - server - INFO - üì¶ ElevenLabs Request Payload:
2026-01-10T18:25:03.414789698Z [err]  2026-01-10 18:25:03,163 - server - INFO -    Text length: 20 chars
2026-01-10T18:25:03.414797746Z [err]  2026-01-10 18:25:03,163 - server - INFO -    Text content: 'Are you still there?'
2026-01-10T18:25:03.414805410Z [err]  2026-01-10 18:25:03,163 - server - INFO -    Text bytes: b'Are you still there?'
2026-01-10T18:25:03.414813999Z [err]  2026-01-10 18:25:03,163 - server - INFO -    Model: eleven_turbo_v2_5
2026-01-10T18:25:03.418077912Z [err]  2026-01-10 18:25:03,163 - server - INFO -    Voice ID: J5iaaqzR5zn6HFG4jV3b
2026-01-10T18:25:03.418126891Z [err]  2026-01-10 18:25:03,163 - server - INFO -    URL: https://api.elevenlabs.io/v1/text-to-speech/J5iaaqzR5zn6HFG4jV3b/stream
2026-01-10T18:25:03.418135282Z [err]  2026-01-10 18:25:03,163 - server - INFO -    Full data: {'text': 'Are you still there?', 'model_id': 'eleven_turbo_v2_5', 'voice_settings': {'stability': 0.6, 'similarity_boost': 0.65, 'use_speaker_boost': True, 'speed': 1.1, 'style': 0.2}, 'apply_text_normalization': 'on', 'enable_ssml_parsing': True, 'optimize_streaming_latency': 4}
2026-01-10T18:25:03.418143671Z [err]  2026-01-10 18:25:03,163 - server - INFO - üîå Attempting ElevenLabs connection (attempt 1/2)
2026-01-10T18:25:03.418150500Z [err]  2026-01-10 18:25:03,163 - server - INFO -    Timeout: 10.0s
2026-01-10T18:25:03.418171130Z [err]  2026-01-10 18:25:03,177 - server - INFO -    ‚úì HTTP client created (0.013s)
2026-01-10T18:25:03.418178205Z [err]  2026-01-10 18:25:03,177 - server - INFO -    ‚Üí Sending POST request to ElevenLabs (optimize_latency=0)...
2026-01-10T18:25:03.418185899Z [err]  2026-01-10 18:25:03,372 - server - INFO - üé§ Soniox receiver alive - 12 messages received in last 10s
2026-01-10T18:25:04.279960937Z [err]  2026-01-10 18:25:03,497 - httpx - INFO - HTTP Request: POST https://api.elevenlabs.io/v1/text-to-speech/J5iaaqzR5zn6HFG4jV3b/stream "HTTP/1.1 200 OK"
2026-01-10T18:25:04.279980688Z [err]  2026-01-10 18:25:03,497 - server - INFO -    ‚úì Connection established (0.333s) [TARGET: <200ms]
2026-01-10T18:25:04.279989038Z [err]  2026-01-10 18:25:03,497 - server - INFO -    ‚úì Response status: 200
2026-01-10T18:25:04.279996153Z [err]  2026-01-10 18:25:03,497 - server - INFO -    ‚Üí Streaming audio chunks...
2026-01-10T18:25:04.280004237Z [err]  2026-01-10 18:25:03,511 - server - INFO -    ‚úì FIRST CHUNK received (0.348s, 1014 bytes) [TARGET: <300ms]
2026-01-10T18:25:04.280012535Z [err]  2026-01-10 18:25:03,517 - server - INFO -    ‚úì ALL CHUNKS received: 75 chunks (0.353s)
2026-01-10T18:25:04.280020005Z [err]  2026-01-10 18:25:03,517 - server - INFO -    ‚úì Total audio size: 17599 bytes
2026-01-10T18:25:04.280026063Z [err]  2026-01-10 18:25:03,517 - server - INFO -    üìä TTS API TIMING BREAKDOWN:
2026-01-10T18:25:04.280036831Z [err]  2026-01-10 18:25:03,517 - server - INFO -       - Connection: 333ms
2026-01-10T18:25:04.280043718Z [err]  2026-01-10 18:25:03,517 - server - INFO -       - First chunk: 348ms
2026-01-10T18:25:04.280050266Z [err]  2026-01-10 18:25:03,517 - server - INFO -       - All chunks: 353ms
2026-01-10T18:25:04.280057532Z [err]  2026-01-10 18:25:03,517 - server - INFO -       - Audio generation only: 14ms
2026-01-10T18:25:04.280065679Z [err]  2026-01-10 18:25:03,517 - server - INFO - ‚è±Ô∏è [18:25:03.517] üîä TTS COMPLETE: 437ms, audio_size=17599 bytes
2026-01-10T18:25:04.280072788Z [err]  2026-01-10 18:25:03,517 - server - INFO - üíæ TTS CACHED: elevenlabs:Are you still there?... (17599 bytes)
2026-01-10T18:25:04.280079923Z [err]  2026-01-10 18:25:03,517 - telnyx_service - INFO - ‚è±Ô∏è  TTS generation time: 0.44s
2026-01-10T18:25:04.280088528Z [err]  2026-01-10 18:25:03,518 - telnyx_service - INFO - ‚úÖ Generated 17599 bytes, saved to /tmp/tts_elevenlabs_01b2ec34551c0c3ab527c8199487051c.mp3
2026-01-10T18:25:04.282500976Z [err]  2026-01-10 18:25:03,518 - telnyx_service - INFO - üîó Using audio URL: api.li-ai.org/api/tts-audio/tts_elevenlabs_01b2ec34551c0c3ab527c8199487051c.mp3
2026-01-10T18:25:04.282505256Z [err]  2026-01-10 18:25:03,736 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw/actions/playback_start "HTTP/1.1 200 OK"
2026-01-10T18:25:04.282510242Z [err]  2026-01-10 18:25:03,737 - telnyx_service - INFO - ‚è±Ô∏è  Playback API call time: 0.22s
2026-01-10T18:25:04.282515176Z [err]  2026-01-10 18:25:03,737 - telnyx_service - INFO - ‚è±Ô∏è  Total TTS latency: 0.66s
2026-01-10T18:25:04.282520512Z [err]  2026-01-10 18:25:03,737 - telnyx_service - INFO - ‚úÖ Playing elevenlabs audio via Telnyx playback
2026-01-10T18:25:04.282525273Z [err]  2026-01-10 18:25:03,737 - telnyx_service - INFO - üé¨ Playback ID: l3nKep-tCg
2026-01-10T18:25:04.282529305Z [err]  2026-01-10 18:25:03,740 - redis_service - INFO - ‚ûï Added playback l3nKep-tCg to Redis for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:04.283431205Z [err]  2026-01-10 18:25:03,740 - server - INFO - üé¨ Check-in playback ID: l3nKep-tCg (expected duration: 2.6s)
2026-01-10T18:25:04.283440474Z [err]  2026-01-10 18:25:03,740 - dead_air_monitor - INFO - ‚úÖ Check-in message sent
2026-01-10T18:25:04.283449485Z [inf]  100.64.0.10:58272 - "GET /api/tts-audio/tts_elevenlabs_01b2ec34551c0c3ab527c8199487051c.mp3 HTTP/1.1" 200
2026-01-10T18:25:04.419494638Z [err]  2026-01-10 18:25:04,414 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2026-01-10T18:25:04.419533250Z [err]  2026-01-10 18:25:04,414 - server - INFO - üì® Full payload: {'data': {'event_type': 'call.playback.started', 'id': '1a8c93bf-cfa0-445f-a5e4-050d79087de6', 'occurred_at': '2026-01-10T18:25:04.287679Z', 'payload': {'call_control_id': 'v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw', 'call_leg_id': 'a42f2994-ee51-11f0-816e-02420aef971f', 'call_session_id': 'a42c958a-ee51-11f0-8e69-02420aef971f', 'client_state': None, 'connection_id': '2777245537294877821', 'media_name': None, 'media_url': 'api.li-ai.org/api/tts-audio/tts_elevenlabs_01b2ec34551c0c3ab527c8199487051c.mp3', 'overlay': False, 'playback_id': 'l3nKep-tCg'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2026-01-10T18:25:04.419540511Z [err]  2026-01-10 18:25:04,414 - server - INFO - üéØ Event type: call.playback.started, Call ID: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:04.419547395Z [err]  2026-01-10 18:25:04,414 - server - INFO - üì® ================================================
2026-01-10T18:25:04.419555023Z [inf]  100.64.0.12:11106 - "POST /api/telnyx/webhook HTTP/1.1" 200
2026-01-10T18:25:05.356117716Z [err]  2026-01-10 18:25:05,250 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (1.1s left)
2026-01-10T18:25:06.378784915Z [err]  2026-01-10 18:25:05,754 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (0.6s left)
2026-01-10T18:25:06.378792093Z [err]  2026-01-10 18:25:05,822 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2026-01-10T18:25:06.378874096Z [err]  2026-01-10 18:25:05,822 - server - INFO - üì® Full payload: {'data': {'event_type': 'call.playback.ended', 'id': '11ae608e-5153-4e15-a106-77bfd383cad1', 'occurred_at': '2026-01-10T18:25:05.367773Z', 'payload': {'call_control_id': 'v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw', 'call_leg_id': 'a42f2994-ee51-11f0-816e-02420aef971f', 'call_session_id': 'a42c958a-ee51-11f0-8e69-02420aef971f', 'client_state': None, 'connection_id': '2777245537294877821', 'media_name': None, 'media_url': 'api.li-ai.org/api/tts-audio/tts_elevenlabs_01b2ec34551c0c3ab527c8199487051c.mp3', 'overlay': False, 'playback_id': 'l3nKep-tCg', 'status': 'completed', 'status_detail': ''}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2026-01-10T18:25:06.378886812Z [err]  2026-01-10 18:25:05,822 - server - INFO - üéØ Event type: call.playback.ended, Call ID: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:06.378895420Z [err]  2026-01-10 18:25:05,822 - server - INFO - üì® ================================================
2026-01-10T18:25:06.378904372Z [err]  2026-01-10 18:25:05,825 - redis_service - INFO - ‚ûñ Removed playback l3nKep-tCg, 0 remaining for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:06.378911789Z [err]  2026-01-10 18:25:05,826 - server - INFO - üîä Redis: Removed playback l3nKep-tCg, 0 remaining
2026-01-10T18:25:06.378934069Z [err]  2026-01-10 18:25:05,826 - server - INFO - üîä ALL PLAYBACKS FINISHED (via Redis) - attempting to start silence timer
2026-01-10T18:25:06.378941981Z [err]  2026-01-10 18:25:05,827 - server - INFO - ‚úÖ Set 'agent_done_speaking' flag in Redis for worker with session to detect
2026-01-10T18:25:06.384084354Z [err]  2026-01-10 18:25:05,827 - server - WARNING - ‚ö†Ô∏è Could not find session to start silence timer for v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:06.384093373Z [inf]  100.64.0.7:58250 - "POST /api/telnyx/webhook HTTP/1.1" 200
2026-01-10T18:25:06.384101052Z [err]  2026-01-10 18:25:06,256 - dead_air_monitor - INFO - üö© Detected 'agent_done_speaking' flag from webhook - marking agent as done
2026-01-10T18:25:06.384108728Z [err]  2026-01-10 18:25:06,256 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1768069506.2562296 for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:06.384120440Z [err]  2026-01-10 18:25:06,256 - core_calling_service - INFO - ü§ñ Agent stopped speaking for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:08.356848081Z [err]  2026-01-10 18:25:07,559 - server - INFO - üì§ Audio flowing: 798 packets sent to Soniox (5s update)
2026-01-10T18:25:09.233708940Z [err]  2026-01-10 18:25:09,127 - server - INFO - üî§ RAW TOKENS: [" Ye"?]
2026-01-10T18:25:09.233713623Z [err]  2026-01-10 18:25:09,128 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER RESET (user started speaking) for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:09.233718099Z [err]  2026-01-10 18:25:09,128 - core_calling_service - INFO - üîä Silence timer reset for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw (user started speaking)
2026-01-10T18:25:09.233725311Z [err]  2026-01-10 18:25:09,128 - core_calling_service - INFO - üë§ User started speaking for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:09.233731490Z [err]  2026-01-10 18:25:09,128 - persistent_tts_service - INFO - ‚ö° [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] CLEAR_AUDIO called - pending_sentences=0, audio_queue=0
2026-01-10T18:25:09.233740875Z [err]  2026-01-10 18:25:09,128 - persistent_tts_service - INFO - üõë [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] INTERRUPT - Floor Released (is_holding_floor=False)
2026-01-10T18:25:09.233746678Z [err]  2026-01-10 18:25:09,158 - persistent_tts_service - INFO - üõë [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] Sent clear event to Telnyx WebSocket (3x)
2026-01-10T18:25:09.233753260Z [err]  2026-01-10 18:25:09,159 - persistent_tts_service - INFO - ‚è±Ô∏è [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] Reset playback_expected_end_time to NOW
2026-01-10T18:25:09.233761539Z [err]  2026-01-10 18:25:09,159 - server - INFO - üìä [REAL TIMING] AUDIO QUEUE CLEARED (user started speaking) for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:09.233773665Z [err]  2026-01-10 18:25:09,160 - redis_service - INFO - üì• Retrieved call data from Redis: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:09.233782150Z [err]  2026-01-10 18:25:09,160 - redis_service - INFO - üì¶ Stored call data in Redis: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw (TTL: 3600s)
2026-01-10T18:25:09.237515921Z [err]  2026-01-10 18:25:09,161 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Ye' | Generating: False
2026-01-10T18:25:09.269583039Z [err]  2026-01-10 18:25:09,263 - server - INFO - üî§ RAW TOKENS: [" Ye"‚úì, "ah."‚úì, "<end>"‚úì]
2026-01-10T18:25:09.269591619Z [err]  2026-01-10 18:25:09,263 - server - INFO - üéØ Endpoint detected: <end> token received
2026-01-10T18:25:09.269596913Z [err]  2026-01-10 18:25:09,263 - server - INFO - üßπ Cleaned transcript: ' Ye ah.' -> 'Yeah.'
2026-01-10T18:25:09.269601661Z [err]  2026-01-10 18:25:09,263 - server - INFO - üì• FINAL TOKENS: 'Yeah.' (2 tokens)
2026-01-10T18:25:09.269608350Z [err]  2026-01-10 18:25:09,263 - server - INFO - üé§ Soniox final transcript: 'Yeah.'
2026-01-10T18:25:09.269613299Z [err]  2026-01-10 18:25:09,264 - server - INFO - üîç FILTER CHECK: words=1, is_filler=True, is_garbled=False, tts_speaking=False, time_until_done=-0.1s, generating=False, playbacks=1, is_active=False
2026-01-10T18:25:09.269617893Z [err]  2026-01-10 18:25:09,264 - server - INFO - üöÄ Spawned tracked background task for endpoint processing
2026-01-10T18:25:09.269622056Z [err]  2026-01-10 18:25:09,264 - server - INFO - ‚è±Ô∏è [18:25:09.264] üìù FINAL TRANSCRIPT RECEIVED: 'Yeah.'
2026-01-10T18:25:09.269626450Z [err]  2026-01-10 18:25:09,264 - server - INFO - ‚è±Ô∏è [18:25:09.264] STT endpoint detection latency: 24ms
2026-01-10T18:25:09.269632127Z [err]  2026-01-10 18:25:09,264 - server - INFO - ‚è±Ô∏è [18:25:09.264] üé§ USER STOPPED SPEAKING - Beginning processing pipeline
2026-01-10T18:25:09.269638656Z [err]  2026-01-10 18:25:09,264 - server - INFO - ‚è±Ô∏è User spoke at 1768069509.264297
2026-01-10T18:25:09.269645031Z [err]  2026-01-10 18:25:09,265 - redis_service - INFO - üì¶ Stored call data in Redis: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw (TTL: 3600s)
2026-01-10T18:25:09.269650031Z [err]  2026-01-10 18:25:09,265 - server - INFO - üë§ User has spoken - aiSpeaksAfterSilence timer cancelled if pending
2026-01-10T18:25:09.269655471Z [err]  2026-01-10 18:25:09,265 - server - INFO - ‚ö†Ô∏è Agent marked as speaking but audio done and not generating - treating as SILENT
2026-01-10T18:25:09.274474218Z [err]  2026-01-10 18:25:09,265 - server - INFO - ‚úÖ Agent SILENT - User said 1 word(s): 'Yeah.' - Processing...
2026-01-10T18:25:09.279373981Z [err]  2026-01-10 18:25:09,275 - server - INFO - üìä [REAL TIMING] STT: User audio end ‚Üí Transcript received: -2ms
2026-01-10T18:25:09.279383480Z [err]  2026-01-10 18:25:09,275 - server - INFO - üé§ Endpoint detected by Soniox - processing transcript: Yeah.
2026-01-10T18:25:09.279389332Z [err]  2026-01-10 18:25:09,276 - core_calling_service - INFO - üë§ User stopped speaking for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:09.288914605Z [err]  2026-01-10 18:25:09,278 - server - INFO - ‚úÖ User starting new turn - resetting agent speaking flag
2026-01-10T18:25:09.288933274Z [err]  2026-01-10 18:25:09,278 - server - INFO - ‚è±Ô∏è [TIMING] STT_START: User last audio packet received
2026-01-10T18:25:09.288947828Z [err]  2026-01-10 18:25:09,278 - server - INFO - ‚è±Ô∏è [TIMING] STT_END: Endpoint detected at T+10ms
2026-01-10T18:25:09.288956601Z [err]  2026-01-10 18:25:09,278 - server - INFO - ‚è±Ô∏è [TIMING] STT_LATENCY: 10ms (Soniox model: stt-rt-v3)
2026-01-10T18:25:09.288964828Z [err]  2026-01-10 18:25:09,278 - server - INFO - ‚è±Ô∏è  USER STOPPED SPEAKING at T=0ms
2026-01-10T18:25:09.288974880Z [err]  2026-01-10 18:25:09,278 - server - INFO - üìä [REAL TIMING] Processing start: 38ms after user audio end
2026-01-10T18:25:09.288982926Z [err]  2026-01-10 18:25:09,278 - server - INFO - üéôÔ∏è Agent generating response - interruption detection active
2026-01-10T18:25:09.288993032Z [err]  2026-01-10 18:25:09,278 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:09.380039062Z [err]  2026-01-10 18:25:09,369 - server - INFO - üìù Saved user transcript to database
2026-01-10T18:25:09.380049537Z [err]  2026-01-10 18:25:09,369 - persistent_tts_service - INFO - üîÑ [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] Interrupt flag reset - ready for new audio
2026-01-10T18:25:09.380056795Z [err]  2026-01-10 18:25:09,369 - server - INFO - üîÑ Reset TTS interrupt flag before new response
2026-01-10T18:25:09.380063361Z [err]  2026-01-10 18:25:09,369 - core_calling_service - INFO - ‚è±Ô∏è [18:25:09.369] üì• process_user_input() ENTRY - text: 'Yeah....'
2026-01-10T18:25:09.380069231Z [err]  2026-01-10 18:25:09,369 - redis_service - INFO - üì• Retrieved call data from Redis: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:09.380074569Z [err]  2026-01-10 18:25:09,370 - core_calling_service - WARNING - üö® BARGE-IN DETECTED for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw: User spoke while Silence Greeting was triggering
2026-01-10T18:25:09.410167270Z [err]  2026-01-10 18:25:09,407 - telnyx_service - INFO - Telnyx service initialized with connection: 2777245537294877821
2026-01-10T18:25:09.410181740Z [err]  2026-01-10 18:25:09,407 - telnyx_service - INFO - üõë Stopping audio playback on call: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:10.240265531Z [err]  2026-01-10 18:25:09,676 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw/actions/playback_stop "HTTP/1.1 200 OK"
2026-01-10T18:25:10.240286003Z [err]  2026-01-10 18:25:09,676 - telnyx_service - INFO - ‚úÖ Successfully stopped audio playback
2026-01-10T18:25:10.240297951Z [err]  2026-01-10 18:25:09,678 - core_calling_service - INFO - ‚è±Ô∏è [18:25:09.678] ‚è© About to call _process_call_flow_streaming()
2026-01-10T18:25:10.240304564Z [err]  2026-01-10 18:25:09,678 - core_calling_service - INFO - ‚è±Ô∏è [18:25:09.678] üîÄ Agent type: call_flow, calling flow processor...
2026-01-10T18:25:10.240311994Z [err]  2026-01-10 18:25:09,679 - core_calling_service - INFO - ‚è±Ô∏è [18:25:09.679] üîÄ _process_call_flow_streaming() ENTRY
2026-01-10T18:25:10.240321912Z [err]  2026-01-10 18:25:09,679 - core_calling_service - INFO - Flow processing - History length: 3, Is first: False
2026-01-10T18:25:10.240330907Z [err]  2026-01-10 18:25:09,677 - core_calling_service - INFO - ‚úÖ BARGE-IN: Audio playback STOPPED
2026-01-10T18:25:10.240334387Z [err]  2026-01-10 18:25:09,679 - core_calling_service - INFO - üîç Using explicitly set current_node_id: 2
2026-01-10T18:25:10.240344958Z [err]  2026-01-10 18:25:09,679 - core_calling_service - INFO - ‚è±Ô∏è [18:25:09.679] üöÄ Checking special cases before merged transition+response...
2026-01-10T18:25:10.240350046Z [err]  2026-01-10 18:25:09,677 - core_calling_service - INFO - ‚úÖ BARGE-IN: Preserving silence greeting in history to maintain context
2026-01-10T18:25:10.240528818Z [err]  2026-01-10 18:25:09,678 - redis_service - INFO - üì• Retrieved call data from Redis: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:10.240543200Z [err]  2026-01-10 18:25:09,678 - redis_service - INFO - üì¶ Stored call data in Redis: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw (TTL: 3600s)
2026-01-10T18:25:10.240553104Z [err]  2026-01-10 18:25:09,678 - core_calling_service - INFO - ‚úÖ BARGE-IN: Reset silence_greeting_triggered flag
2026-01-10T18:25:10.246652460Z [err]  2026-01-10 18:25:09,679 - core_calling_service - INFO - üîç Checking 'Hello=Yes' override for msg='yeah' on node='Greeting'
2026-01-10T18:25:10.246665460Z [err]  2026-01-10 18:25:09,679 - core_calling_service - INFO - ‚ö° OVERRIDE TRIGGERED: 'Yeah.' on Greeting node -> Forcing Transition 0
2026-01-10T18:25:10.246699787Z [err]  2026-01-10 18:25:09,679 - core_calling_service - INFO - ‚è±Ô∏è [18:25:09.679] ‚úÖ Node selected, about to process content...
2026-01-10T18:25:10.246708069Z [err]  2026-01-10 18:25:09,679 - core_calling_service - INFO - üîß Replaced {{now}} with Saturday, January 10, 2026 at 1:25 PM EST in content
2026-01-10T18:25:10.246715251Z [err]  2026-01-10 18:25:09,679 - core_calling_service - INFO - üîß Replaced {{customer_name}} with Kendrick in content
2026-01-10T18:25:10.246723321Z [err]  2026-01-10 18:25:09,679 - core_calling_service - INFO - üîß Replaced {{callerName}} with  in content
2026-01-10T18:25:10.246729033Z [err]  2026-01-10 18:25:09,679 - core_calling_service - INFO - üîß Replaced {{lead_id}} with None in content
2026-01-10T18:25:10.246736789Z [err]  2026-01-10 18:25:09,679 - core_calling_service - INFO - üîß Replaced {{qc_tracking_enabled}} with False in content
2026-01-10T18:25:10.246745170Z [err]  2026-01-10 18:25:09,679 - core_calling_service - INFO - üîß Replaced {{track_keywords}} with  in content
2026-01-10T18:25:10.246752894Z [err]  2026-01-10 18:25:09,679 - core_calling_service - INFO - üîß Replaced {{expected_commitment}} with not_specified in content
2026-01-10T18:25:10.246759834Z [err]  2026-01-10 18:25:09,679 - core_calling_service - INFO - üîß Replaced {{to_number}} with +17708336397 in content
2026-01-10T18:25:10.246766311Z [err]  2026-01-10 18:25:09,679 - core_calling_service - INFO - üîß Replaced {{phone_number}} with +17708336397 in content
2026-01-10T18:25:10.246776408Z [err]  2026-01-10 18:25:09,679 - core_calling_service - INFO - üîß Replaced {{email}} with None in content
2026-01-10T18:25:10.252780875Z [err]  2026-01-10 18:25:09,679 - core_calling_service - INFO - ‚úÖ Using explicit SCRIPT mode (length: 89 chars) - will return text instantly
2026-01-10T18:25:10.252786605Z [err]  2026-01-10 18:25:09,679 - core_calling_service - INFO - Using flow node: Node Prompt: N001B_IntroAndHelpRequest_Only (V3 - Follows Name Confirmation) (type: conversation, mode: script)
2026-01-10T18:25:10.252792960Z [err]  2026-01-10 18:25:09,679 - core_calling_service - INFO - ‚è±Ô∏è [18:25:09.679] üìÑ About to process content (mode=script, length=89)
2026-01-10T18:25:10.252798159Z [err]  2026-01-10 18:25:09,679 - core_calling_service - INFO - üì§ Streaming script as 2 sentence(s)
2026-01-10T18:25:10.252803070Z [err]  2026-01-10 18:25:09,679 - server - INFO - üì§ Sentence arrived from LLM: This is Jake......
2026-01-10T18:25:10.252807896Z [err]  2026-01-10 18:25:09,679 - server - INFO - ‚è±Ô∏è [TIMING] TTFS (Time To First Sentence): 401ms
2026-01-10T18:25:10.252812448Z [err]  2026-01-10 18:25:09,679 - server - INFO - ‚ö° Starting REAL-TIME TTS for first sentence
2026-01-10T18:25:10.252817171Z [err]  2026-01-10 18:25:09,679 - server - INFO - üîç Persistent TTS lookup: call_id=v3:FRYJscPFj3xR6SIkG..., session=FOUND
2026-01-10T18:25:10.252821885Z [err]  2026-01-10 18:25:09,679 - server - INFO - üöÄ Streaming sentence #1 via persistent WebSocket
2026-01-10T18:25:10.252828074Z [err]  2026-01-10 18:25:09,679 - server - INFO - üéµ TTS task #1 started at +0ms
2026-01-10T18:25:10.252833458Z [err]  2026-01-10 18:25:09,679 - server - INFO - ‚è±Ô∏è [TIMING] TTFT_TTS (First TTS Task Started): 401ms
2026-01-10T18:25:10.252839639Z [err]  2026-01-10 18:25:09,679 - core_calling_service - INFO - üì§ Streamed script sentence 1/2: This is Jake......
2026-01-10T18:25:10.252844403Z [err]  2026-01-10 18:25:09,679 - server - INFO - üì§ Sentence arrived from LLM: I was just, um, wondering if you could possibly he...
2026-01-10T18:25:10.252849857Z [err]  2026-01-10 18:25:09,679 - server - INFO - üîç Persistent TTS lookup: call_id=v3:FRYJscPFj3xR6SIkG..., session=FOUND
2026-01-10T18:25:10.258537129Z [err]  2026-01-10 18:25:09,679 - server - INFO - üöÄ Streaming sentence #2 via persistent WebSocket
2026-01-10T18:25:10.258548598Z [err]  2026-01-10 18:25:09,679 - server - INFO - üéµ TTS task #2 started at +0ms
2026-01-10T18:25:10.258555934Z [err]  2026-01-10 18:25:09,679 - core_calling_service - INFO - üì§ Streamed script sentence 2/2: I was just, um, wondering if you could possibly he...
2026-01-10T18:25:10.258562605Z [err]  2026-01-10 18:25:09,680 - core_calling_service - INFO - üîä Silence tracking reset for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw (user responded)
2026-01-10T18:25:10.258569013Z [err]  2026-01-10 18:25:09,680 - core_calling_service - INFO - ‚úÖ User gave meaningful response to check-in, resetting counter
2026-01-10T18:25:10.258593014Z [err]  2026-01-10 18:25:09,680 - core_calling_service - INFO - üíæ Storing node ID 1763159750250 in conversation history
2026-01-10T18:25:10.258602968Z [err]  2026-01-10 18:25:09,680 - core_calling_service - INFO - LLM response (0.31s): This is Jake... I was just, um, wondering if you could possibly help me out for a moment?
2026-01-10T18:25:10.258607014Z [err]  2026-01-10 18:25:09,682 - server - INFO -    2 sentences queued and playing seamlessly
2026-01-10T18:25:10.258611618Z [err]  2026-01-10 18:25:09,680 - core_calling_service - INFO - Total latency: 0.31s
2026-01-10T18:25:10.258619456Z [err]  2026-01-10 18:25:09,682 - persistent_tts_service - INFO - üé§ [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] Streaming sentence #2: This is Jake......
2026-01-10T18:25:10.258619521Z [err]  2026-01-10 18:25:09,681 - server - INFO - ‚úÖ LLM finished in 403ms, TTS tasks already running in background
2026-01-10T18:25:10.258627211Z [err]  2026-01-10 18:25:09,682 - server - INFO - üéµ Streaming 2 TTS chunks as they complete...
2026-01-10T18:25:10.258634060Z [err]  2026-01-10 18:25:09,682 - server - INFO - üöÄ Persistent TTS: Audio already streaming in background!
2026-01-10T18:25:10.264111193Z [err]  2026-01-10 18:25:09,682 - persistent_tts_service - INFO - üöÄ [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] Sent sentence #2 to ElevenLabs in 0ms (non-blocking)
2026-01-10T18:25:10.264125095Z [err]  2026-01-10 18:25:09,682 - persistent_tts_service - INFO - üìä [REAL TIMING] TEXT SENT TO ELEVENLABS: 'This is Jake......'
2026-01-10T18:25:10.264135176Z [err]  2026-01-10 18:25:09,682 - persistent_tts_service - INFO - üé§ [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] Streaming sentence #3: I was just, um, wondering if you could possibly he...
2026-01-10T18:25:10.264147418Z [err]  2026-01-10 18:25:09,682 - persistent_tts_service - INFO - üöÄ [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] Sent sentence #3 to ElevenLabs in 0ms (non-blocking)
2026-01-10T18:25:10.264154402Z [err]  2026-01-10 18:25:09,682 - persistent_tts_service - INFO - üìä [REAL TIMING] TEXT SENT TO ELEVENLABS: 'I was just, um, wondering if you could possibly he...'
2026-01-10T18:25:10.264161945Z [err]  2026-01-10 18:25:09,682 - server - INFO - ‚úÖ All 2 persistent TTS streams completed
2026-01-10T18:25:10.264170973Z [err]  2026-01-10 18:25:09,682 - server - INFO - ‚úÖ Agent generation complete (persistent TTS) - response window closed
2026-01-10T18:25:10.264177432Z [err]  2026-01-10 18:25:09,682 - server - INFO - ‚è±Ô∏è  FIRST AUDIO STARTED: 404ms from user stop üöÄ
2026-01-10T18:25:10.264184022Z [err]  2026-01-10 18:25:09,683 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:10.264191197Z [err]  2026-01-10 18:25:09,683 - server - INFO - ‚úÖ Agent generation complete - response window closed
2026-01-10T18:25:10.264197593Z [err]  2026-01-10 18:25:09,683 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2026-01-10T18:25:10.269294183Z [err]  2026-01-10 18:25:09,683 - server - INFO - ‚è±Ô∏è  [TIMING] ==== E2E LATENCY SUMMARY ====
2026-01-10T18:25:10.269309031Z [err]  2026-01-10 18:25:09,683 - server - INFO - ‚è±Ô∏è  [TIMING] STT: 10ms (provider: soniox, model: stt-rt-v3)
2026-01-10T18:25:10.269317386Z [err]  2026-01-10 18:25:09,683 - server - INFO - ‚è±Ô∏è  [TIMING] LLM_TOTAL: 403ms (provider: grok, model: grok-4-1-fast-non-reasoning)
2026-01-10T18:25:10.269325166Z [err]  2026-01-10 18:25:09,683 - server - INFO - ‚è±Ô∏è  [TIMING] TTS_TOTAL: 3ms (provider: elevenlabs, websocket: False)
2026-01-10T18:25:10.269333422Z [err]  2026-01-10 18:25:09,683 - server - INFO - ‚è±Ô∏è  [TIMING] E2E_TOTAL: 404ms (user stopped ‚Üí play_audio_url called)
2026-01-10T18:25:10.269351588Z [err]  2026-01-10 18:25:09,683 - server - INFO - ‚è±Ô∏è  [TIMING] ‚ö†Ô∏è NOTE: E2E_TOTAL does not include:
2026-01-10T18:25:10.269358943Z [err]  2026-01-10 18:25:09,683 - server - INFO - ‚è±Ô∏è  [TIMING]   - Telnyx processing time (~50-200ms)
2026-01-10T18:25:10.269366593Z [err]  2026-01-10 18:25:09,683 - server - INFO - ‚è±Ô∏è  [TIMING]   - Network latency to user's phone (~50-150ms)
2026-01-10T18:25:10.269374597Z [err]  2026-01-10 18:25:09,683 - server - INFO - ‚è±Ô∏è  [TIMING]   - Phone audio buffering (~50-200ms)
2026-01-10T18:25:10.269383324Z [err]  2026-01-10 18:25:09,683 - server - INFO - ‚è±Ô∏è  [TIMING]   - TOTAL MISSING: ~150-550ms typically
2026-01-10T18:25:10.269392674Z [err]  2026-01-10 18:25:09,683 - server - INFO - ‚è±Ô∏è  [TIMING]   - REAL USER LATENCY: 704ms estimated
2026-01-10T18:25:10.269404892Z [err]  2026-01-10 18:25:09,683 - server - INFO - ‚è±Ô∏è  [TIMING] RESPONSE_TEXT: 89 chars, 2 sentences
2026-01-10T18:25:10.269412507Z [err]  2026-01-10 18:25:09,683 - server - INFO - ‚è±Ô∏è  [TIMING] USER_INPUT: 'Yeah....'
2026-01-10T18:25:10.269420276Z [err]  2026-01-10 18:25:09,683 - server - INFO - ‚è±Ô∏è  [TIMING] AI_RESPONSE: 'This is Jake... I was just, um, wondering if you could possi...'
2026-01-10T18:25:10.273103384Z [err]  2026-01-10 18:25:09,683 - server - INFO - ‚è±Ô∏è  [TIMING] ==========================
2026-01-10T18:25:10.273109704Z [err]  2026-01-10 18:25:09,683 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2026-01-10T18:25:10.273114347Z [err]  2026-01-10 18:25:09,769 - dead_air_monitor - INFO - ‚è±Ô∏è Playback expected end time passed (0.6s ago), marking agent as done speaking
2026-01-10T18:25:10.273118709Z [err]  2026-01-10 18:25:09,770 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1768069509.77002 for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:10.273125423Z [err]  2026-01-10 18:25:09,770 - core_calling_service - INFO - ü§ñ Agent stopped speaking for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:10.273131278Z [err]  2026-01-10 18:25:09,861 - server - INFO - üìù Saved assistant transcript and latency to database (Node: Node Prompt: N001B_IntroAndHelpRequest_Only (V3 - Follows Name Confirmation), Dead Air: 416ms)
2026-01-10T18:25:10.273136197Z [err]  2026-01-10 18:25:09,861 - server - INFO - üîä Agent finished generating, 0 playbacks active - waiting for webhooks to close window and start silence tracking
2026-01-10T18:25:10.273141783Z [err]  2026-01-10 18:25:09,861 - server - INFO - üîç END CALL CHECK: should_end_call=False, max_checkins=False, max_duration=False
2026-01-10T18:25:10.273146426Z [err]  2026-01-10 18:25:09,911 - persistent_tts_service - INFO - üì§ Sending 8173 bytes of audio (52 chunks, 1.0s duration) via WebSocket
2026-01-10T18:25:10.273151654Z [err]  2026-01-10 18:25:09,911 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:25:10.273156038Z [err]  2026-01-10 18:25:09,911 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.0s (total: 1.0s from now)
2026-01-10T18:25:10.277431248Z [err]  2026-01-10 18:25:09,911 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768069509.912 (chunk 1/52, 160 bytes)
2026-01-10T18:25:10.277450031Z [err]  2026-01-10 18:25:10,270 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (0.7s left)
2026-01-10T18:25:11.241907918Z [err]  2026-01-10 18:25:10,696 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 52 CHUNKS SENT TO TELNYX in 785ms (audio duration: 1.0s, paced after 10 chunks)
2026-01-10T18:25:11.241914879Z [err]  2026-01-10 18:25:10,697 - persistent_tts_service - INFO - ‚úÖ Sent 52 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:25:11.241921627Z [err]  2026-01-10 18:25:10,697 - persistent_tts_service - INFO - üì§ Sending 13793 bytes of audio (87 chunks, 1.7s duration) via WebSocket
2026-01-10T18:25:11.241928715Z [err]  2026-01-10 18:25:10,697 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:25:11.241934966Z [err]  2026-01-10 18:25:10,697 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.7s (total: 2.0s from now)
2026-01-10T18:25:11.241942022Z [err]  2026-01-10 18:25:10,697 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768069510.697 (chunk 1/87, 160 bytes)
2026-01-10T18:25:11.241948995Z [err]  2026-01-10 18:25:10,771 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (1.9s left)
2026-01-10T18:25:12.349771301Z [err]  2026-01-10 18:25:12,144 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768069512.145 (chunk 1/119, 160 bytes)
2026-01-10T18:25:12.350242998Z [err]  2026-01-10 18:25:12,144 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 87 CHUNKS SENT TO TELNYX in 1446ms (audio duration: 1.7s, paced after 10 chunks)
2026-01-10T18:25:12.350248524Z [err]  2026-01-10 18:25:12,144 - persistent_tts_service - INFO - ‚úÖ Sent 87 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:25:12.350254459Z [err]  2026-01-10 18:25:12,144 - persistent_tts_service - INFO - üì§ Sending 697 bytes of audio (5 chunks, 0.1s duration) via WebSocket
2026-01-10T18:25:12.350259367Z [err]  2026-01-10 18:25:12,144 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:25:12.350264835Z [err]  2026-01-10 18:25:12,144 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +0.1s (total: 0.6s from now)
2026-01-10T18:25:12.350270266Z [err]  2026-01-10 18:25:12,144 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768069512.144 (chunk 1/5, 160 bytes)
2026-01-10T18:25:12.350275846Z [err]  2026-01-10 18:25:12,144 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 5 CHUNKS SENT TO TELNYX in 0ms (audio duration: 0.1s, paced after 10 chunks)
2026-01-10T18:25:12.350282518Z [err]  2026-01-10 18:25:12,144 - persistent_tts_service - INFO - ‚úÖ Sent 5 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:25:12.350288796Z [err]  2026-01-10 18:25:12,144 - persistent_tts_service - INFO - üì§ Sending 18947 bytes of audio (119 chunks, 2.4s duration) via WebSocket
2026-01-10T18:25:12.350293629Z [err]  2026-01-10 18:25:12,144 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:25:12.350299870Z [err]  2026-01-10 18:25:12,144 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +2.4s (total: 3.0s from now)
2026-01-10T18:25:13.792732152Z [err]  2026-01-10 18:25:12,564 - server - INFO - üì§ Audio flowing: 1047 packets sent to Soniox (5s update)
2026-01-10T18:25:13.792746681Z [err]  2026-01-10 18:25:13,539 - server - INFO - üé§ Soniox receiver alive - 11 messages received in last 10s
2026-01-10T18:25:14.948211077Z [err]  2026-01-10 18:25:14,187 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 119 CHUNKS SENT TO TELNYX in 2042ms (audio duration: 2.4s, paced after 10 chunks)
2026-01-10T18:25:14.948220659Z [err]  2026-01-10 18:25:14,187 - persistent_tts_service - INFO - ‚úÖ Sent 119 audio chunks via WebSocket (paced sending enabled)
2026-01-10T18:25:16.110451197Z [err]  2026-01-10 18:25:15,199 - persistent_tts_service - INFO - üîá [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] FLOOR RELEASED (is_holding_floor=False)
2026-01-10T18:25:17.063448009Z [err]  2026-01-10 18:25:17,027 - telnyx_service - INFO - ‚è±Ô∏è  Total TTS latency: 0.23s
2026-01-10T18:25:17.063463552Z [err]  2026-01-10 18:25:17,027 - telnyx_service - INFO - ‚úÖ Playing elevenlabs audio via Telnyx playback
2026-01-10T18:25:17.063473704Z [err]  2026-01-10 18:25:17,027 - telnyx_service - INFO - üé¨ Playback ID: VrcUs-AFPw
2026-01-10T18:25:17.063481312Z [err]  2026-01-10 18:25:17,030 - redis_service - INFO - ‚ûï Added playback VrcUs-AFPw to Redis for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:17.063487862Z [err]  2026-01-10 18:25:17,030 - server - INFO - üé¨ Check-in playback ID: VrcUs-AFPw (expected duration: 2.6s)
2026-01-10T18:25:17.063494602Z [err]  2026-01-10 18:25:17,030 - dead_air_monitor - INFO - ‚úÖ Check-in message sent
2026-01-10T18:25:17.063743580Z [err]  2026-01-10 18:25:17,027 - telnyx_service - INFO - ‚è±Ô∏è  Playback API call time: 0.23s
2026-01-10T18:25:17.064063649Z [err]  2026-01-10 18:25:16,793 - core_calling_service - INFO - ‚è∞ Check-in triggered after 7.0s silence (threshold: 7s)
2026-01-10T18:25:17.064075554Z [err]  2026-01-10 18:25:16,794 - core_calling_service - INFO - üí¨ Sending check-in #1/2: Are you still there?
2026-01-10T18:25:17.064083303Z [err]  2026-01-10 18:25:16,796 - dead_air_monitor - INFO - üí¨ Sending check-in after 7.0s silence: Are you still there?
2026-01-10T18:25:17.064091238Z [err]  2026-01-10 18:25:16,796 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:17.064098962Z [err]  2026-01-10 18:25:16,796 - telnyx_service - INFO - üîä Speaking text on call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw: Are you still there?...
2026-01-10T18:25:17.064105979Z [err]  2026-01-10 18:25:16,796 - telnyx_service - INFO - üîç Agent config provided: True
2026-01-10T18:25:17.064114148Z [err]  2026-01-10 18:25:16,796 - telnyx_service - INFO - üîç TTS provider from settings: elevenlabs
2026-01-10T18:25:17.064124362Z [err]  2026-01-10 18:25:16,796 - telnyx_service - INFO - üîç WebSocket TTS: False
2026-01-10T18:25:17.064132016Z [err]  2026-01-10 18:25:16,796 - telnyx_service - INFO - üéôÔ∏è Attempting elevenlabs TTS (REST)
2026-01-10T18:25:17.064139565Z [err]  2026-01-10 18:25:16,796 - server - INFO - üíæ TTS CACHE HIT: Returning cached audio (17599 bytes)
2026-01-10T18:25:17.064149050Z [err]  2026-01-10 18:25:16,796 - telnyx_service - INFO - ‚è±Ô∏è  TTS generation time: 0.00s
2026-01-10T18:25:17.064156799Z [err]  2026-01-10 18:25:16,797 - telnyx_service - INFO - ‚úÖ Generated 17599 bytes, saved to /tmp/tts_elevenlabs_01b2ec34551c0c3ab527c8199487051c.mp3
2026-01-10T18:25:17.064166318Z [err]  2026-01-10 18:25:16,797 - telnyx_service - INFO - üîó Using audio URL: api.li-ai.org/api/tts-audio/tts_elevenlabs_01b2ec34551c0c3ab527c8199487051c.mp3
2026-01-10T18:25:17.064174009Z [err]  2026-01-10 18:25:17,026 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw/actions/playback_start "HTTP/1.1 200 OK"
2026-01-10T18:25:17.985434433Z [err]  2026-01-10 18:25:17,231 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2026-01-10T18:25:17.985450671Z [err]  2026-01-10 18:25:17,231 - server - INFO - üì® Full payload: {'data': {'event_type': 'call.playback.started', 'id': 'c5f64f34-a110-4f30-b71a-6b711dcfe8ca', 'occurred_at': '2026-01-10T18:25:17.087676Z', 'payload': {'call_control_id': 'v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw', 'call_leg_id': 'a42f2994-ee51-11f0-816e-02420aef971f', 'call_session_id': 'a42c958a-ee51-11f0-8e69-02420aef971f', 'client_state': None, 'connection_id': '2777245537294877821', 'media_name': None, 'media_url': 'api.li-ai.org/api/tts-audio/tts_elevenlabs_01b2ec34551c0c3ab527c8199487051c.mp3', 'overlay': False, 'playback_id': 'VrcUs-AFPw'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2026-01-10T18:25:17.985460326Z [err]  2026-01-10 18:25:17,231 - server - INFO - üéØ Event type: call.playback.started, Call ID: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:17.985470546Z [err]  2026-01-10 18:25:17,231 - server - INFO - üì® ================================================
2026-01-10T18:25:17.985486151Z [inf]  100.64.0.12:11106 - "POST /api/telnyx/webhook HTTP/1.1" 200
2026-01-10T18:25:17.985495779Z [err]  2026-01-10 18:25:17,579 - server - INFO - üì§ Audio flowing: 1297 packets sent to Soniox (5s update)
2026-01-10T18:25:18.916243572Z [err]  2026-01-10 18:25:18,475 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2026-01-10T18:25:18.916254729Z [err]  2026-01-10 18:25:18,475 - server - INFO - üì® Full payload: {'data': {'event_type': 'call.playback.ended', 'id': '2aa89154-b159-45bb-9f34-05f41593e5f6', 'occurred_at': '2026-01-10T18:25:18.187678Z', 'payload': {'call_control_id': 'v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw', 'call_leg_id': 'a42f2994-ee51-11f0-816e-02420aef971f', 'call_session_id': 'a42c958a-ee51-11f0-8e69-02420aef971f', 'client_state': None, 'connection_id': '2777245537294877821', 'media_name': None, 'media_url': 'api.li-ai.org/api/tts-audio/tts_elevenlabs_01b2ec34551c0c3ab527c8199487051c.mp3', 'overlay': False, 'playback_id': 'VrcUs-AFPw', 'status': 'completed', 'status_detail': ''}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2026-01-10T18:25:18.916266863Z [err]  2026-01-10 18:25:18,475 - server - INFO - üéØ Event type: call.playback.ended, Call ID: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:18.916274569Z [err]  2026-01-10 18:25:18,475 - server - INFO - üì® ================================================
2026-01-10T18:25:18.916287663Z [err]  2026-01-10 18:25:18,485 - redis_service - INFO - ‚ûñ Removed playback VrcUs-AFPw, 0 remaining for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:18.916302184Z [err]  2026-01-10 18:25:18,485 - server - INFO - üîä Redis: Removed playback VrcUs-AFPw, 0 remaining
2026-01-10T18:25:18.916312032Z [err]  2026-01-10 18:25:18,485 - server - INFO - üîä ALL PLAYBACKS FINISHED (via Redis) - attempting to start silence timer
2026-01-10T18:25:18.916321458Z [err]  2026-01-10 18:25:18,486 - server - INFO - ‚úÖ Set 'agent_done_speaking' flag in Redis for worker with session to detect
2026-01-10T18:25:18.916330835Z [err]  2026-01-10 18:25:18,486 - server - WARNING - ‚ö†Ô∏è Could not find session to start silence timer for v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:18.925758023Z [inf]  100.64.0.9:15152 - "POST /api/telnyx/webhook HTTP/1.1" 200
2026-01-10T18:25:18.925764350Z [err]  2026-01-10 18:25:18,537 - dead_air_monitor - INFO - üö© Detected 'agent_done_speaking' flag from webhook - marking agent as done
2026-01-10T18:25:18.925774238Z [err]  2026-01-10 18:25:18,537 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1768069518.5379748 for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:18.925794103Z [err]  2026-01-10 18:25:18,538 - core_calling_service - INFO - ü§ñ Agent stopped speaking for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:18.969062668Z [err]  2026-01-10 18:25:18,963 - server - INFO - üî§ RAW TOKENS: [" S"?]
2026-01-10T18:25:18.969071720Z [err]  2026-01-10 18:25:18,963 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER RESET (user started speaking) for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:18.969080119Z [err]  2026-01-10 18:25:18,963 - core_calling_service - INFO - üîä Silence timer reset for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw (user started speaking)
2026-01-10T18:25:18.969087604Z [err]  2026-01-10 18:25:18,963 - core_calling_service - INFO - üë§ User started speaking for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:18.969094948Z [err]  2026-01-10 18:25:18,964 - persistent_tts_service - INFO - ‚ö° [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] CLEAR_AUDIO called - pending_sentences=0, audio_queue=0
2026-01-10T18:25:18.969102460Z [err]  2026-01-10 18:25:18,964 - persistent_tts_service - INFO - üõë [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] INTERRUPT - Floor Released (is_holding_floor=False)
2026-01-10T18:25:19.002645823Z [err]  2026-01-10 18:25:18,995 - persistent_tts_service - INFO - üõë [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] Sent clear event to Telnyx WebSocket (3x)
2026-01-10T18:25:19.002664427Z [err]  2026-01-10 18:25:18,995 - persistent_tts_service - INFO - ‚è±Ô∏è [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] Reset playback_expected_end_time to NOW
2026-01-10T18:25:19.002675705Z [err]  2026-01-10 18:25:18,995 - server - INFO - üìä [REAL TIMING] AUDIO QUEUE CLEARED (user started speaking) for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:19.002684671Z [err]  2026-01-10 18:25:18,996 - redis_service - INFO - üì• Retrieved call data from Redis: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:19.002694019Z [err]  2026-01-10 18:25:18,997 - redis_service - INFO - üì¶ Stored call data in Redis: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw (TTL: 3600s)
2026-01-10T18:25:19.002704042Z [err]  2026-01-10 18:25:18,997 - server - INFO - üîç PARTIAL TRANSCRIPT: 'S' | Generating: False
2026-01-10T18:25:19.033006037Z [err]  2026-01-10 18:25:19,029 - server - INFO - üî§ RAW TOKENS: [" S"?, "ure"?]
2026-01-10T18:25:19.033015995Z [err]  2026-01-10 18:25:19,030 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Sure' | Generating: False
2026-01-10T18:25:19.831777217Z [err]  2026-01-10 18:25:19,154 - server - INFO - üî§ RAW TOKENS: [" S"‚úì, "ure"‚úì, "."‚úì, "<end>"‚úì]
2026-01-10T18:25:19.831783333Z [err]  2026-01-10 18:25:19,154 - server - INFO - üéØ Endpoint detected: <end> token received
2026-01-10T18:25:19.831790413Z [err]  2026-01-10 18:25:19,155 - server - INFO - üßπ Cleaned transcript: ' S ure .' -> 'Sure.'
2026-01-10T18:25:19.831797270Z [err]  2026-01-10 18:25:19,155 - server - INFO - üì• FINAL TOKENS: 'Sure.' (3 tokens)
2026-01-10T18:25:19.831804061Z [err]  2026-01-10 18:25:19,155 - server - INFO - üé§ Soniox final transcript: 'Sure.'
2026-01-10T18:25:19.831810703Z [err]  2026-01-10 18:25:19,155 - server - INFO - üîç FILTER CHECK: words=1, is_filler=True, is_garbled=False, tts_speaking=False, time_until_done=-0.2s, generating=False, playbacks=1, is_active=False
2026-01-10T18:25:19.831817486Z [err]  2026-01-10 18:25:19,155 - server - INFO - üöÄ Spawned tracked background task for endpoint processing
2026-01-10T18:25:19.831824249Z [err]  2026-01-10 18:25:19,155 - server - INFO - ‚è±Ô∏è [18:25:19.155] üìù FINAL TRANSCRIPT RECEIVED: 'Sure.'
2026-01-10T18:25:19.831830922Z [err]  2026-01-10 18:25:19,155 - server - INFO - ‚è±Ô∏è [18:25:19.155] STT endpoint detection latency: 14ms
2026-01-10T18:25:19.831836573Z [err]  2026-01-10 18:25:19,155 - server - INFO - ‚è±Ô∏è [18:25:19.155] üé§ USER STOPPED SPEAKING - Beginning processing pipeline
2026-01-10T18:25:19.831842187Z [err]  2026-01-10 18:25:19,155 - server - INFO - ‚è±Ô∏è User spoke at 1768069519.1556213
2026-01-10T18:25:19.831848276Z [err]  2026-01-10 18:25:19,156 - redis_service - INFO - üì¶ Stored call data in Redis: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw (TTL: 3600s)
2026-01-10T18:25:19.831856033Z [err]  2026-01-10 18:25:19,156 - server - INFO - üë§ User has spoken - aiSpeaksAfterSilence timer cancelled if pending
2026-01-10T18:25:19.831862666Z [err]  2026-01-10 18:25:19,156 - server - INFO - ‚ö†Ô∏è Agent marked as speaking but audio done and not generating - treating as SILENT
2026-01-10T18:25:19.833371462Z [err]  2026-01-10 18:25:19,156 - server - INFO - ‚úÖ Agent SILENT - User said 1 word(s): 'Sure.' - Processing...
2026-01-10T18:25:19.833378091Z [err]  2026-01-10 18:25:19,167 - server - INFO - üìä [REAL TIMING] STT: User audio end ‚Üí Transcript received: -3ms
2026-01-10T18:25:19.833384680Z [err]  2026-01-10 18:25:19,167 - server - INFO - üé§ Endpoint detected by Soniox - processing transcript: Sure.
2026-01-10T18:25:19.833391727Z [err]  2026-01-10 18:25:19,167 - core_calling_service - INFO - üë§ User stopped speaking for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:19.833398769Z [err]  2026-01-10 18:25:19,168 - server - INFO - ‚úÖ User starting new turn - resetting agent speaking flag
2026-01-10T18:25:19.833405577Z [err]  2026-01-10 18:25:19,168 - server - INFO - ‚è±Ô∏è [TIMING] STT_START: User last audio packet received
2026-01-10T18:25:19.833415921Z [err]  2026-01-10 18:25:19,168 - server - INFO - ‚è±Ô∏è [TIMING] STT_END: Endpoint detected at T+8ms
2026-01-10T18:25:19.833422864Z [err]  2026-01-10 18:25:19,168 - server - INFO - ‚è±Ô∏è [TIMING] STT_LATENCY: 8ms (Soniox model: stt-rt-v3)
2026-01-10T18:25:19.833430385Z [err]  2026-01-10 18:25:19,168 - server - INFO - ‚è±Ô∏è  USER STOPPED SPEAKING at T=0ms
2026-01-10T18:25:19.833437327Z [err]  2026-01-10 18:25:19,168 - server - INFO - üìä [REAL TIMING] Processing start: 26ms after user audio end
2026-01-10T18:25:19.833443445Z [err]  2026-01-10 18:25:19,168 - server - INFO - üéôÔ∏è Agent generating response - interruption detection active
2026-01-10T18:25:19.833449859Z [err]  2026-01-10 18:25:19,168 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:19.833457778Z [err]  2026-01-10 18:25:19,257 - server - INFO - üìù Saved user transcript to database
2026-01-10T18:25:19.833465614Z [err]  2026-01-10 18:25:19,257 - persistent_tts_service - INFO - üîÑ [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] Interrupt flag reset - ready for new audio
2026-01-10T18:25:19.836618177Z [err]  2026-01-10 18:25:19,257 - server - INFO - üîÑ Reset TTS interrupt flag before new response
2026-01-10T18:25:19.836628610Z [err]  2026-01-10 18:25:19,257 - core_calling_service - INFO - ‚è±Ô∏è [18:25:19.257] üì• process_user_input() ENTRY - text: 'Sure....'
2026-01-10T18:25:19.836636638Z [err]  2026-01-10 18:25:19,258 - redis_service - INFO - üì• Retrieved call data from Redis: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:19.836643529Z [err]  2026-01-10 18:25:19,259 - core_calling_service - WARNING - üö® BARGE-IN DETECTED for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw: User spoke while Silence Greeting was triggering
2026-01-10T18:25:19.836649784Z [err]  2026-01-10 18:25:19,306 - telnyx_service - INFO - Telnyx service initialized with connection: 2777245537294877821
2026-01-10T18:25:19.836656718Z [err]  2026-01-10 18:25:19,306 - telnyx_service - INFO - üõë Stopping audio playback on call: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:19.836663514Z [err]  2026-01-10 18:25:19,563 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw/actions/playback_stop "HTTP/1.1 200 OK"
2026-01-10T18:25:19.836670132Z [err]  2026-01-10 18:25:19,564 - telnyx_service - INFO - ‚úÖ Successfully stopped audio playback
2026-01-10T18:25:19.836677090Z [err]  2026-01-10 18:25:19,564 - core_calling_service - INFO - ‚úÖ BARGE-IN: Audio playback STOPPED
2026-01-10T18:25:19.836684441Z [err]  2026-01-10 18:25:19,564 - core_calling_service - INFO - ‚úÖ BARGE-IN: Preserving silence greeting in history to maintain context
2026-01-10T18:25:19.836690481Z [err]  2026-01-10 18:25:19,565 - redis_service - INFO - üì• Retrieved call data from Redis: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:19.836697101Z [err]  2026-01-10 18:25:19,566 - redis_service - INFO - üì¶ Stored call data in Redis: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw (TTL: 3600s)
2026-01-10T18:25:19.839980365Z [err]  2026-01-10 18:25:19,566 - core_calling_service - INFO - ‚úÖ BARGE-IN: Reset silence_greeting_triggered flag
2026-01-10T18:25:19.839994021Z [err]  2026-01-10 18:25:19,566 - core_calling_service - INFO - ‚è±Ô∏è [18:25:19.566] ‚è© About to call _process_call_flow_streaming()
2026-01-10T18:25:19.840001153Z [err]  2026-01-10 18:25:19,566 - core_calling_service - INFO - ‚è±Ô∏è [18:25:19.566] üîÄ Agent type: call_flow, calling flow processor...
2026-01-10T18:25:19.840007662Z [err]  2026-01-10 18:25:19,566 - core_calling_service - INFO - ‚è±Ô∏è [18:25:19.566] üîÄ _process_call_flow_streaming() ENTRY
2026-01-10T18:25:19.840014561Z [err]  2026-01-10 18:25:19,566 - core_calling_service - INFO - Flow processing - History length: 5, Is first: False
2026-01-10T18:25:19.840021449Z [err]  2026-01-10 18:25:19,567 - core_calling_service - INFO - üîç Using explicitly set current_node_id: 1763159750250
2026-01-10T18:25:19.840030149Z [err]  2026-01-10 18:25:19,567 - core_calling_service - INFO - ‚è±Ô∏è [18:25:19.567] üöÄ Checking special cases before merged transition+response...
2026-01-10T18:25:19.840037051Z [err]  2026-01-10 18:25:19,567 - core_calling_service - INFO - üé§ AUTO-TRANSITION AFTER RESPONSE - user spoke, transitioning to: 1763161849799
2026-01-10T18:25:19.840043969Z [err]  2026-01-10 18:25:19,567 - core_calling_service - INFO - ‚úÖ Auto-transitioned (after response) to: Node ID: N_Opener_StackingIncomeHook_V3_CreativeTactic
2026-01-10T18:25:19.840050073Z [err]  2026-01-10 18:25:19,567 - core_calling_service - INFO - ‚è±Ô∏è [18:25:19.567] ‚úÖ Node selected, about to process content...
2026-01-10T18:25:19.840058741Z [err]  2026-01-10 18:25:19,567 - core_calling_service - INFO - üîß Replaced {{now}} with Saturday, January 10, 2026 at 1:25 PM EST in content
2026-01-10T18:25:19.840065277Z [err]  2026-01-10 18:25:19,567 - core_calling_service - INFO - üîß Replaced {{customer_name}} with Kendrick in content
2026-01-10T18:25:19.840071595Z [err]  2026-01-10 18:25:19,567 - core_calling_service - INFO - üîß Replaced {{callerName}} with  in content
2026-01-10T18:25:19.842847227Z [err]  2026-01-10 18:25:19,567 - core_calling_service - INFO - üîß Replaced {{lead_id}} with None in content
2026-01-10T18:25:19.842856175Z [err]  2026-01-10 18:25:19,567 - core_calling_service - INFO - üîß Replaced {{qc_tracking_enabled}} with False in content
2026-01-10T18:25:19.842886973Z [err]  2026-01-10 18:25:19,567 - core_calling_service - INFO - üîß Replaced {{track_keywords}} with  in content
2026-01-10T18:25:19.842895458Z [err]  2026-01-10 18:25:19,567 - core_calling_service - INFO - üîß Replaced {{expected_commitment}} with not_specified in content
2026-01-10T18:25:19.842901669Z [err]  2026-01-10 18:25:19,567 - core_calling_service - INFO - üîß Replaced {{to_number}} with +17708336397 in content
2026-01-10T18:25:19.842907095Z [err]  2026-01-10 18:25:19,567 - core_calling_service - INFO - üîß Replaced {{phone_number}} with +17708336397 in content
2026-01-10T18:25:19.842915638Z [err]  2026-01-10 18:25:19,567 - core_calling_service - INFO - üîß Replaced {{email}} with None in content
2026-01-10T18:25:19.842921489Z [err]  2026-01-10 18:25:19,567 - core_calling_service - INFO - ‚úÖ Using explicit SCRIPT mode (length: 260 chars) - will return text instantly
2026-01-10T18:25:19.842927555Z [err]  2026-01-10 18:25:19,567 - core_calling_service - INFO - Using flow node: Node ID: N_Opener_StackingIncomeHook_V3_CreativeTactic (type: conversation, mode: script)
2026-01-10T18:25:19.842933039Z [err]  2026-01-10 18:25:19,567 - core_calling_service - INFO - ‚è±Ô∏è [18:25:19.567] üìÑ About to process content (mode=script, length=260)
2026-01-10T18:25:19.842938713Z [err]  2026-01-10 18:25:19,567 - core_calling_service - INFO - üì§ Streaming script as 2 sentence(s)
2026-01-10T18:25:19.842945783Z [err]  2026-01-10 18:25:19,567 - server - INFO - üì§ Sentence arrived from LLM: Well, uh, I don't know if you could yet, but, I'm ...
2026-01-10T18:25:19.842951158Z [err]  2026-01-10 18:25:19,567 - server - INFO - ‚è±Ô∏è [TIMING] TTFS (Time To First Sentence): 399ms
2026-01-10T18:25:19.846209658Z [err]  2026-01-10 18:25:19,567 - server - INFO - ‚ö° Starting REAL-TIME TTS for first sentence
2026-01-10T18:25:19.846228532Z [err]  2026-01-10 18:25:19,567 - server - INFO - üîç Persistent TTS lookup: call_id=v3:FRYJscPFj3xR6SIkG..., session=FOUND
2026-01-10T18:25:19.846237506Z [err]  2026-01-10 18:25:19,567 - server - INFO - üöÄ Streaming sentence #1 via persistent WebSocket
2026-01-10T18:25:19.846247946Z [err]  2026-01-10 18:25:19,568 - server - INFO - üéµ TTS task #1 started at +0ms
2026-01-10T18:25:19.846257162Z [err]  2026-01-10 18:25:19,568 - server - INFO - ‚è±Ô∏è [TIMING] TTFT_TTS (First TTS Task Started): 399ms
2026-01-10T18:25:19.846268804Z [err]  2026-01-10 18:25:19,568 - core_calling_service - INFO - üì§ Streamed script sentence 1/2: Well, uh, I don't know if you could yet, but, I'm ...
2026-01-10T18:25:19.846276333Z [err]  2026-01-10 18:25:19,568 - server - INFO - üì§ Sentence arrived from LLM: I know this call is out of the blue, but do you ha...
2026-01-10T18:25:19.846284749Z [err]  2026-01-10 18:25:19,568 - server - INFO - üîç Persistent TTS lookup: call_id=v3:FRYJscPFj3xR6SIkG..., session=FOUND
2026-01-10T18:25:19.846292423Z [err]  2026-01-10 18:25:19,568 - server - INFO - üöÄ Streaming sentence #2 via persistent WebSocket
2026-01-10T18:25:19.846301804Z [err]  2026-01-10 18:25:19,568 - server - INFO - üéµ TTS task #2 started at +0ms
2026-01-10T18:25:19.846309507Z [err]  2026-01-10 18:25:19,568 - core_calling_service - INFO - üì§ Streamed script sentence 2/2: I know this call is out of the blue, but do you ha...
2026-01-10T18:25:19.846317791Z [err]  2026-01-10 18:25:19,568 - core_calling_service - INFO - üîä Silence tracking reset for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw (user responded)
2026-01-10T18:25:19.846326468Z [err]  2026-01-10 18:25:19,568 - core_calling_service - INFO - ‚úÖ User gave meaningful response to check-in, resetting counter
2026-01-10T18:25:19.846337892Z [err]  2026-01-10 18:25:19,568 - core_calling_service - INFO - üíæ Storing node ID 1763161849799 in conversation history
2026-01-10T18:25:19.850303954Z [err]  2026-01-10 18:25:19,568 - core_calling_service - INFO - LLM response (0.31s): Well, uh, I don't know if you could yet, but, I'm calling because you filled out an ad about stacking income without stacking hours. I know this call is out of the blue, but do you have just 25 seconds for me to explain why I'm reaching out today specifically?
2026-01-10T18:25:19.850314590Z [err]  2026-01-10 18:25:19,568 - core_calling_service - INFO - Total latency: 0.31s
2026-01-10T18:25:19.850321189Z [err]  2026-01-10 18:25:19,569 - server - INFO - ‚úÖ LLM finished in 401ms, TTS tasks already running in background
2026-01-10T18:25:19.850327163Z [err]  2026-01-10 18:25:19,570 - server - INFO - üéµ Streaming 2 TTS chunks as they complete...
2026-01-10T18:25:19.850337515Z [err]  2026-01-10 18:25:19,570 - server - INFO - üöÄ Persistent TTS: Audio already streaming in background!
2026-01-10T18:25:19.850347328Z [err]  2026-01-10 18:25:19,570 - server - INFO -    2 sentences queued and playing seamlessly
2026-01-10T18:25:19.850354632Z [err]  2026-01-10 18:25:19,570 - persistent_tts_service - INFO - üé§ [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] Streaming sentence #4: Well, uh, I don't know if you could yet, but, I'm ...
2026-01-10T18:25:19.850361629Z [err]  2026-01-10 18:25:19,571 - persistent_tts_service - INFO - üöÄ [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] Sent sentence #4 to ElevenLabs in 0ms (non-blocking)
2026-01-10T18:25:19.850368475Z [err]  2026-01-10 18:25:19,571 - persistent_tts_service - INFO - üìä [REAL TIMING] TEXT SENT TO ELEVENLABS: 'Well, uh, I don't know if you could yet, but, I'm ...'
2026-01-10T18:25:19.850374308Z [err]  2026-01-10 18:25:19,571 - persistent_tts_service - INFO - üé§ [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] Streaming sentence #5: I know this call is out of the blue, but do you ha...
2026-01-10T18:25:19.850381500Z [err]  2026-01-10 18:25:19,571 - persistent_tts_service - INFO - üöÄ [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] Sent sentence #5 to ElevenLabs in 0ms (non-blocking)
2026-01-10T18:25:19.853901336Z [err]  2026-01-10 18:25:19,571 - persistent_tts_service - INFO - üìä [REAL TIMING] TEXT SENT TO ELEVENLABS: 'I know this call is out of the blue, but do you ha...'
2026-01-10T18:25:19.853910665Z [err]  2026-01-10 18:25:19,571 - server - INFO - ‚úÖ All 2 persistent TTS streams completed
2026-01-10T18:25:19.853920740Z [err]  2026-01-10 18:25:19,571 - server - INFO - ‚úÖ Agent generation complete (persistent TTS) - response window closed
2026-01-10T18:25:19.853927673Z [err]  2026-01-10 18:25:19,571 - server - INFO - ‚è±Ô∏è  FIRST AUDIO STARTED: 403ms from user stop üöÄ
2026-01-10T18:25:19.853935316Z [err]  2026-01-10 18:25:19,571 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:19.853941489Z [err]  2026-01-10 18:25:19,571 - server - INFO - ‚úÖ Agent generation complete - response window closed
2026-01-10T18:25:19.853947397Z [err]  2026-01-10 18:25:19,571 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2026-01-10T18:25:19.853953188Z [err]  2026-01-10 18:25:19,571 - server - INFO - ‚è±Ô∏è  [TIMING] ==== E2E LATENCY SUMMARY ====
2026-01-10T18:25:19.853961985Z [err]  2026-01-10 18:25:19,571 - server - INFO - ‚è±Ô∏è  [TIMING] STT: 8ms (provider: soniox, model: stt-rt-v3)
2026-01-10T18:25:19.853968873Z [err]  2026-01-10 18:25:19,571 - server - INFO - ‚è±Ô∏è  [TIMING] LLM_TOTAL: 401ms (provider: grok, model: grok-4-1-fast-non-reasoning)
2026-01-10T18:25:19.853974907Z [err]  2026-01-10 18:25:19,571 - server - INFO - ‚è±Ô∏è  [TIMING] TTS_TOTAL: 3ms (provider: elevenlabs, websocket: False)
2026-01-10T18:25:19.853981245Z [err]  2026-01-10 18:25:19,571 - server - INFO - ‚è±Ô∏è  [TIMING] E2E_TOTAL: 403ms (user stopped ‚Üí play_audio_url called)
2026-01-10T18:25:19.853986427Z [err]  2026-01-10 18:25:19,572 - server - INFO - ‚è±Ô∏è  [TIMING] ‚ö†Ô∏è NOTE: E2E_TOTAL does not include:
2026-01-10T18:25:19.858531161Z [err]  2026-01-10 18:25:19,572 - server - INFO - ‚è±Ô∏è  [TIMING]   - Telnyx processing time (~50-200ms)
2026-01-10T18:25:19.858540526Z [err]  2026-01-10 18:25:19,572 - server - INFO - ‚è±Ô∏è  [TIMING]   - Network latency to user's phone (~50-150ms)
2026-01-10T18:25:19.858546913Z [err]  2026-01-10 18:25:19,572 - server - INFO - ‚è±Ô∏è  [TIMING]   - Phone audio buffering (~50-200ms)
2026-01-10T18:25:19.858553860Z [err]  2026-01-10 18:25:19,572 - server - INFO - ‚è±Ô∏è  [TIMING]   - TOTAL MISSING: ~150-550ms typically
2026-01-10T18:25:19.858560772Z [err]  2026-01-10 18:25:19,572 - server - INFO - ‚è±Ô∏è  [TIMING]   - REAL USER LATENCY: 703ms estimated
2026-01-10T18:25:19.858567719Z [err]  2026-01-10 18:25:19,572 - server - INFO - ‚è±Ô∏è  [TIMING] RESPONSE_TEXT: 260 chars, 2 sentences
2026-01-10T18:25:19.858685661Z [err]  2026-01-10 18:25:19,572 - server - INFO - ‚è±Ô∏è  [TIMING] USER_INPUT: 'Sure....'
2026-01-10T18:25:19.858694256Z [err]  2026-01-10 18:25:19,572 - server - INFO - ‚è±Ô∏è  [TIMING] AI_RESPONSE: 'Well, uh, I don't know if you could yet, but, I'm calling be...'
2026-01-10T18:25:19.858700978Z [err]  2026-01-10 18:25:19,572 - server - INFO - ‚è±Ô∏è  [TIMING] ==========================
2026-01-10T18:25:19.858708229Z [err]  2026-01-10 18:25:19,572 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2026-01-10T18:25:19.858714586Z [err]  2026-01-10 18:25:19,749 - server - INFO - üìù Saved assistant transcript and latency to database (Node: Node ID: N_Opener_StackingIncomeHook_V3_CreativeTactic, Dead Air: 412ms)
2026-01-10T18:25:19.858723848Z [err]  2026-01-10 18:25:19,750 - server - INFO - üîä Agent finished generating, 0 playbacks active - waiting for webhooks to close window and start silence tracking
2026-01-10T18:25:19.858730524Z [err]  2026-01-10 18:25:19,750 - server - INFO - üîç END CALL CHECK: should_end_call=False, max_checkins=False, max_duration=False
2026-01-10T18:25:19.904392079Z [err]  2026-01-10 18:25:19,900 - persistent_tts_service - INFO - üì§ Sending 13375 bytes of audio (84 chunks, 1.7s duration) via WebSocket
2026-01-10T18:25:19.904408142Z [err]  2026-01-10 18:25:19,900 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:25:19.904417318Z [err]  2026-01-10 18:25:19,900 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.7s (total: 1.7s from now)
2026-01-10T18:25:19.904425475Z [err]  2026-01-10 18:25:19,900 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768069519.901 (chunk 1/84, 160 bytes)
2026-01-10T18:25:20.053632478Z [err]  2026-01-10 18:25:20,050 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (1.5s left)
2026-01-10T18:25:20.874336604Z [err]  2026-01-10 18:25:20,554 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (1.0s left)
2026-01-10T18:25:20.874344699Z [err]  2026-01-10 18:25:20,775 - server - INFO - üìû Telnyx WebSocket disconnected. Sent 1446 total packets
2026-01-10T18:25:20.874380369Z [err]  2026-01-10 18:25:20,793 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.7s (total: 2.5s from now)
2026-01-10T18:25:20.874383525Z [err]  2026-01-10 18:25:20,793 - persistent_tts_service - ERROR - ‚ùå Error sending audio via WebSocket: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2026-01-10T18:25:20.874392242Z [err]  2026-01-10 18:25:20,793 - persistent_tts_service - ERROR - ‚ùå Error sending audio via WebSocket: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2026-01-10T18:25:20.874399197Z [err]  2026-01-10 18:25:20,793 - persistent_tts_service - INFO - üì§ Sending 4041 bytes of audio (26 chunks, 0.5s duration) via WebSocket
2026-01-10T18:25:20.874407388Z [err]  2026-01-10 18:25:20,793 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:25:20.874417810Z [err]  2026-01-10 18:25:20,793 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +0.5s (total: 3.0s from now)
2026-01-10T18:25:20.874440002Z [err]  [2026-01-10 18:25:20 +0000] [6] [INFO] connection closed
2026-01-10T18:25:20.874450713Z [err]  2026-01-10 18:25:20,793 - persistent_tts_service - ERROR - ‚ùå Error sending audio via WebSocket: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2026-01-10T18:25:20.874464431Z [err]  2026-01-10 18:25:20,793 - persistent_tts_service - INFO - üì§ Sending 13792 bytes of audio (87 chunks, 1.7s duration) via WebSocket
2026-01-10T18:25:20.874473319Z [err]  2026-01-10 18:25:20,793 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:25:20.882159595Z [err]  2026-01-10 18:25:20,794 - persistent_tts_service - ERROR - ‚ùå Error sending audio via WebSocket: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2026-01-10T18:25:20.882172230Z [err]  2026-01-10 18:25:20,794 - persistent_tts_service - INFO - üì§ Sending 13003 bytes of audio (82 chunks, 1.6s duration) via WebSocket
2026-01-10T18:25:20.882174294Z [err]  2026-01-10 18:25:20,868 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2026-01-10T18:25:20.882188230Z [err]  2026-01-10 18:25:20,794 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:25:20.882188595Z [err]  2026-01-10 18:25:20,868 - server - INFO - üì® Full payload: {'data': {'event_type': 'call.hangup', 'id': 'e0bc252d-5191-4339-aeb2-7a31fd6b606c', 'occurred_at': '2026-01-10T18:25:20.567675Z', 'payload': {'call_control_id': 'v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw', 'call_leg_id': 'a42f2994-ee51-11f0-816e-02420aef971f', 'call_quality_stats': {'inbound': {'jitter_max_variance': '19.02', 'jitter_packet_count': '0', 'mos': '4.50', 'packet_count': '1476', 'skip_packet_count': '25'}, 'outbound': {'packet_count': '1446', 'skip_packet_count': '0'}}, 'call_session_id': 'a42c958a-ee51-11f0-8e69-02420aef971f', 'client_state': None, 'connection_id': '2777245537294877821', 'end_time': '2026-01-10T18:25:20.567675Z', 'from': '+14048000152', 'hangup_cause': 'normal_clearing', 'hangup_source': 'callee', 'sip_hangup_cause': '200', 'start_time': '2026-01-10T18:24:46.487680Z', 'to': '+17708336397'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2026-01-10T18:25:20.882201337Z [err]  2026-01-10 18:25:20,794 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.6s (total: 8.6s from now)
2026-01-10T18:25:20.882218469Z [err]  2026-01-10 18:25:20,794 - persistent_tts_service - ERROR - ‚ùå Error sending audio via WebSocket: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2026-01-10T18:25:20.882798891Z [err]  2026-01-10 18:25:20,793 - persistent_tts_service - INFO - üì§ Sending 13792 bytes of audio (87 chunks, 1.7s duration) via WebSocket
2026-01-10T18:25:20.882806218Z [err]  2026-01-10 18:25:20,793 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:25:20.882813198Z [err]  2026-01-10 18:25:20,793 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.7s (total: 4.7s from now)
2026-01-10T18:25:20.882820085Z [err]  2026-01-10 18:25:20,793 - persistent_tts_service - ERROR - ‚ùå Error sending audio via WebSocket: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2026-01-10T18:25:20.882837245Z [err]  2026-01-10 18:25:20,793 - persistent_tts_service - INFO - üì§ Sending 1811 bytes of audio (12 chunks, 0.2s duration) via WebSocket
2026-01-10T18:25:20.882845155Z [err]  2026-01-10 18:25:20,793 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:25:20.882853199Z [err]  2026-01-10 18:25:20,793 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +0.2s (total: 5.0s from now)
2026-01-10T18:25:20.882867918Z [err]  2026-01-10 18:25:20,794 - persistent_tts_service - ERROR - ‚ùå Error sending audio via WebSocket: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2026-01-10T18:25:20.882877709Z [err]  2026-01-10 18:25:20,794 - persistent_tts_service - INFO - üì§ Sending 16347 bytes of audio (103 chunks, 2.0s duration) via WebSocket
2026-01-10T18:25:20.882886010Z [err]  2026-01-10 18:25:20,794 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:25:20.882892853Z [err]  2026-01-10 18:25:20,794 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +2.0s (total: 7.0s from now)
2026-01-10T18:25:20.886845504Z [err]  2026-01-10 18:25:20,868 - server - INFO - üéØ Event type: call.hangup, Call ID: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:20.886851867Z [err]  2026-01-10 18:25:20,868 - server - INFO - üì® ================================================
2026-01-10T18:25:20.886859127Z [err]  2026-01-10 18:25:20,868 - server - INFO - üìû Call ended: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:20.886864047Z [err]  2026-01-10 18:25:20,868 - server - INFO - üìû Hangup cause: normal_clearing
2026-01-10T18:25:20.886869714Z [err]  2026-01-10 18:25:20,875 - persistent_tts_service - INFO - üì§ Sending 13793 bytes of audio (87 chunks, 1.7s duration) via WebSocket
2026-01-10T18:25:20.886876002Z [err]  2026-01-10 18:25:20,875 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:25:20.886881376Z [err]  2026-01-10 18:25:20,875 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.7s (total: 10.3s from now)
2026-01-10T18:25:20.886886655Z [err]  2026-01-10 18:25:20,875 - persistent_tts_service - ERROR - ‚ùå Error sending audio via WebSocket: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2026-01-10T18:25:20.889454304Z [err]  2026-01-10 18:25:20,885 - persistent_tts_service - INFO - üì§ Sending 2183 bytes of audio (14 chunks, 0.3s duration) via WebSocket
2026-01-10T18:25:20.889460176Z [err]  2026-01-10 18:25:20,886 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:25:20.889467712Z [err]  2026-01-10 18:25:20,886 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +0.3s (total: 10.5s from now)
2026-01-10T18:25:20.889491869Z [err]  2026-01-10 18:25:20,886 - persistent_tts_service - ERROR - ‚ùå Error sending audio via WebSocket: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2026-01-10T18:25:20.933111202Z [err]  2026-01-10 18:25:20,928 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2026-01-10T18:25:20.933122621Z [err]  2026-01-10 18:25:20,929 - server - INFO - üì® Full payload: {'data': {'event_type': 'call.playback.ended', 'id': 'f5d69076-6ad4-4429-8fe7-20bc5c2ea60f', 'occurred_at': '2026-01-10T18:25:20.647675Z', 'payload': {'call_control_id': 'v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw', 'call_leg_id': 'a42f2994-ee51-11f0-816e-02420aef971f', 'call_session_id': 'a42c958a-ee51-11f0-8e69-02420aef971f', 'client_state': None, 'connection_id': '2777245537294877821', 'end_time': '2026-01-10T18:25:20.647675Z', 'media_name': None, 'media_url': 'api.li-ai.org/api/tts-audio/comfort_noise_continuous.mp3', 'overlay': True, 'playback_id': '4C4IBTx72w', 'status': 'call_hangup', 'status_detail': ''}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2026-01-10T18:25:20.933137525Z [err]  2026-01-10 18:25:20,929 - server - INFO - üéØ Event type: call.playback.ended, Call ID: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:20.933144589Z [err]  2026-01-10 18:25:20,929 - server - INFO - üì® ================================================
2026-01-10T18:25:20.937238004Z [err]  2026-01-10 18:25:20,931 - redis_service - INFO - ‚ûñ Removed playback 4C4IBTx72w, 0 remaining for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:20.937248588Z [err]  2026-01-10 18:25:20,931 - server - INFO - üîä Redis: Removed playback 4C4IBTx72w, 0 remaining
2026-01-10T18:25:20.937255548Z [err]  2026-01-10 18:25:20,931 - server - INFO - üîä ALL PLAYBACKS FINISHED (via Redis) - attempting to start silence timer
2026-01-10T18:25:20.937268924Z [err]  2026-01-10 18:25:20,932 - server - INFO - ‚úÖ Set 'agent_done_speaking' flag in Redis for worker with session to detect
2026-01-10T18:25:20.937278563Z [err]  2026-01-10 18:25:20,932 - server - INFO - ‚úÖ Found session in active_telnyx_calls: agent_speaking=False, user_speaking=False
2026-01-10T18:25:20.937285515Z [err]  2026-01-10 18:25:20,932 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1768069520.932184 for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:20.937291460Z [err]  2026-01-10 18:25:20,932 - server - INFO - ‚è±Ô∏è Silence timer STARTED (memory fallback, agent wasn't marked as speaking)
2026-01-10T18:25:20.937300589Z [inf]  100.64.0.12:11106 - "POST /api/telnyx/webhook HTTP/1.1" 200
2026-01-10T18:25:21.056283820Z [err]  2026-01-10 18:25:21,051 - server - INFO - üìù Updated call log: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:21.059784030Z [err]  2026-01-10 18:25:21,055 - dead_air_monitor - INFO - üö© Detected 'agent_done_speaking' flag from webhook - marking agent as done
2026-01-10T18:25:21.059791014Z [err]  2026-01-10 18:25:21,055 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1768069521.0557513 for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:21.059797010Z [err]  2026-01-10 18:25:21,055 - core_calling_service - INFO - ü§ñ Agent stopped speaking for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:21.852472567Z [err]  2026-01-10 18:25:21,144 - server - INFO - ‚úÖ Finalized call log: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw (duration=29s, status=completed)
2026-01-10T18:25:21.852479884Z [err]  2026-01-10 18:25:21,176 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2026-01-10T18:25:21.852487603Z [err]  2026-01-10 18:25:21,177 - server - INFO - üì® Full payload: {'data': {'event_type': 'streaming.stopped', 'id': 'af8d6181-5403-4ad6-9afb-11d9edcbc5fb', 'occurred_at': '2026-01-10T18:25:20.706348Z', 'payload': {'call_control_id': 'v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw', 'call_leg_id': 'a42f2994-ee51-11f0-816e-02420aef971f', 'call_session_id': 'a42c958a-ee51-11f0-8e69-02420aef971f', 'client_state': None, 'connection_id': '2777245537294877821', 'stream_id': '091be7b2-5120-4a6d-91b8-5c22515075fa', 'stream_params': {'stream_track': 'inbound', 'stream_url': 'wss://api.li-ai.org/api/telnyx/audio-stream'}, 'stream_type': 'websocket'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2026-01-10T18:25:21.852495136Z [err]  2026-01-10 18:25:21,177 - server - INFO - üéØ Event type: streaming.stopped, Call ID: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:21.852502270Z [err]  2026-01-10 18:25:21,177 - server - INFO - üì® ================================================
2026-01-10T18:25:21.852509018Z [inf]  100.64.0.6:21802 - "POST /api/telnyx/webhook HTTP/1.1" 200
2026-01-10T18:25:21.852515709Z [err]  2026-01-10 18:25:21,195 - persistent_tts_service - INFO - üì§ Sending 26749 bytes of audio (168 chunks, 3.3s duration) via WebSocket
2026-01-10T18:25:21.852522943Z [err]  2026-01-10 18:25:21,195 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T18:25:21.852529574Z [err]  2026-01-10 18:25:21,195 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +3.3s (total: 13.6s from now)
2026-01-10T18:25:21.858652486Z [err]  2026-01-10 18:25:21,195 - persistent_tts_service - ERROR - ‚ùå Error sending audio via WebSocket: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2026-01-10T18:25:21.858663466Z [err]  2026-01-10 18:25:21,236 - server - INFO - üì¶ Saved 11 session variables to call_log: ['now', 'customer_name', 'callerName', 'lead_id', 'qc_tracking_enabled', 'track_keywords', 'expected_commitment', 'to_number', 'phone_number', 'email', 'from_number']
2026-01-10T18:25:21.933995938Z [err]  2026-01-10 18:25:21,923 - server - INFO - üìä Auto-added call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw to campaign b7bd9ce7-2722-4c61-a2fc-ca1fb127d7b8
2026-01-10T18:25:22.000165992Z [err]  2026-01-10 18:25:21,995 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2026-01-10T18:25:22.000174584Z [err]  2026-01-10 18:25:21,995 - server - INFO - üì® Full payload: {'data': {'event_type': 'call.recording.saved', 'id': '159b05a9-56c7-46e7-9176-09eb670cd183', 'occurred_at': '2026-01-10T18:25:21.671459Z', 'payload': {'call_control_id': 'v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw', 'call_leg_id': 'a42f2994-ee51-11f0-816e-02420aef971f', 'call_session_id': 'a42c958a-ee51-11f0-8e69-02420aef971f', 'channels': 'dual', 'client_state': None, 'connection_id': '2777245537294877821', 'end_time': '2026-01-10T18:25:20.661458Z', 'format': 'mp3', 'public_recording_urls': {}, 'recording_ended_at': '2026-01-10T18:25:20.661458Z', 'recording_id': '7929b366-7eb6-44b6-8b3b-23d6a283e1ea', 'recording_started_at': '2026-01-10T18:24:52.335300Z', 'recording_urls': {'mp3': 'https://s3.amazonaws.com/telephony-recorder-prod/227803fb-1717-407d-9bd5-fd04aa27c656/2026-01-10/a42f2994-ee51-11f0-816e-02420aef971f-1768069492270300.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIASDC5E2MJDPKMH7UW%2F20260110%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20260110T182521Z&X-Amz-Expires=600&X-Amz-SignedHeaders=host&X-Amz-Signature=ed5422f2a1c59fda1ea8305cd978c0a3fd117366e93154a517b0c1c4e7333a2c'}, 'start_time': '2026-01-10T18:24:52.335300Z'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2026-01-10T18:25:22.000179352Z [err]  2026-01-10 18:25:21,995 - server - INFO - üéØ Event type: call.recording.saved, Call ID: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:22.000184513Z [err]  2026-01-10 18:25:21,995 - server - INFO - üì® ================================================
2026-01-10T18:25:22.000196017Z [err]  2026-01-10 18:25:21,995 - server - INFO - üéôÔ∏è Recording saved for call: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:22.000201563Z [err]  2026-01-10 18:25:21,996 - redis_service - INFO - üì• Retrieved call data from Redis: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:22.007629190Z [err]  2026-01-10 18:25:21,996 - server - INFO - üîç Recording check: download_url=True, channels=dual, recording_id=7929b366-7eb6-44b6-8b3b-23d6a283e1ea, call_data=True
2026-01-10T18:25:22.976434174Z [err]  2026-01-10 18:25:22,102 - server - INFO - üì§ Sending post-call webhook to: https://n8n.outlier-agency.com/webhook/2adb150a-9e08-4053-9fa4-e47df18bf39b
2026-01-10T18:25:22.976443811Z [err]  2026-01-10 18:25:22,104 - redis_service - INFO - üì• Retrieved call data from Redis: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:22.976452560Z [err]  2026-01-10 18:25:22,104 - server - INFO - üìá [HANGUP] Data source: redis=Yes, memory=Yes
2026-01-10T18:25:22.976460704Z [err]  2026-01-10 18:25:22,104 - server - INFO - üìá [HANGUP] Missing data from cache, checking MongoDB call_logs...
2026-01-10T18:25:22.976468825Z [err]  2026-01-10 18:25:22,142 - httpx - INFO - HTTP Request: POST https://n8n.outlier-agency.com/webhook/2adb150a-9e08-4053-9fa4-e47df18bf39b "HTTP/1.1 530 <none>"
2026-01-10T18:25:22.976475233Z [err]  2026-01-10 18:25:22,144 - server - WARNING - ‚ö†Ô∏è Post-call webhook returned status 530: <!doctype html>
2026-01-10T18:25:22.976481686Z [err]  <!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en-US"> <![endif]-->
2026-01-10T18:25:22.976489730Z [err]  <!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en-US"> <![endif]-->
2026-01-10T18:25:22.976500758Z [err]  <!--[if IE 8]>    <html class="no-
2026-01-10T18:25:22.976508919Z [err]  2026-01-10 18:25:22,202 - server - INFO - üìá [HANGUP] Found call_log in MongoDB, extracting missing data...
2026-01-10T18:25:22.976517166Z [err]  2026-01-10 18:25:22,288 - server - INFO - üìá [HANGUP] After MongoDB fallback: user_id=dcafa642-6136-4096-b77d-a4cb99a62651, agent_id=bbeda238-e8d9-4d8c-b93b-1b7694581adb, to_number=+17708336397
2026-01-10T18:25:22.976528344Z [err]  2026-01-10 18:25:22,288 - server - INFO - üìá [HANGUP] Final extracted data: user_id=dcafa642-6136-4096-b77d-a4cb99a62651, agent_id=bbeda238-e8d9-4d8c-b93b-1b7694581adb, to_number=+17708336397, lead_id=None, agent_name=JK First Caller-optimizer3
2026-01-10T18:25:22.976537250Z [err]  2026-01-10 18:25:22,288 - server - INFO - üìá [HANGUP] Agent info keys: None
2026-01-10T18:25:22.981433834Z [err]  2026-01-10 18:25:22,288 - server - INFO - üöÄ Triggered QC analysis for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:22.981440532Z [err]  2026-01-10 18:25:22,288 - server - INFO - üìä Triggered Campaign QC for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:22.981446469Z [err]  2026-01-10 18:25:22,288 - server - INFO - üìá Triggered CRM update for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:22.981452625Z [err]  2026-01-10 18:25:22,288 - server - INFO - ‚úÖ Closed persistent TTS session for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:22.981459768Z [err]  2026-01-10 18:25:22,288 - core_calling_service - INFO - Call session v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw closed
2026-01-10T18:25:22.981465975Z [err]  2026-01-10 18:25:22,288 - server - INFO - ‚úÖ Closed CallSession for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:22.981472397Z [err]  2026-01-10 18:25:22,289 - redis_service - INFO - üßπ Deleted call data from Redis: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:22.981504180Z [err]  2026-01-10 18:25:22,289 - server - INFO - üßπ Cleaned up call session from Redis and memory: v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:22.981510367Z [inf]  100.64.0.10:58272 - "POST /api/telnyx/webhook HTTP/1.1" 200
2026-01-10T18:25:22.981516693Z [err]  2026-01-10 18:25:22,290 - server - INFO - üîç Starting QC analysis for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:22.981522155Z [err]  2026-01-10 18:25:22,290 - server - INFO - üîç [AUTO-QC] Starting campaign QC check for call=v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw, user=dcafa642-6136-4096-b77d-a4cb99a62651, agent=bbeda238-e8d9-4d8c-b93b-1b7694581adb
2026-01-10T18:25:22.981527968Z [err]  2026-01-10 18:25:22,292 - server - INFO - üìá CRM update starting for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw: to_number=+17708336397, user_id=dcafa642-6136-4096-b77d-a4cb99a62651
2026-01-10T18:25:22.983716074Z [err]  2026-01-10 18:25:22,292 - server - INFO - üìá Normalized phone: +17708336397
2026-01-10T18:25:22.983726175Z [err]  2026-01-10 18:25:22,381 - server - INFO - üìù Converted transcript from 6 messages to 430 characters
2026-01-10T18:25:22.983732618Z [err]  2026-01-10 18:25:22,470 - server - INFO - üìá CRM: Got 11 extracted variables
2026-01-10T18:25:22.983741200Z [err]  2026-01-10 18:25:22,470 - server - INFO - üìá CRM: Total variables collected: ['now', 'customer_name', 'callerName', 'lead_id', 'qc_tracking_enabled', 'track_keywords', 'expected_commitment', 'to_number', 'phone_number', 'email', 'from_number']
2026-01-10T18:25:22.983747775Z [err]  2026-01-10 18:25:22,550 - server - INFO - üíæ Saved recording URL and ID to database: 7929b366-7eb6-44b6-8b3b-23d6a283e1ea
2026-01-10T18:25:22.983755682Z [err]  2026-01-10 18:25:22,550 - server - INFO - ‚úÖ Entering dual-channel processing
2026-01-10T18:25:22.983761467Z [err]  2026-01-10 18:25:22,551 - server - INFO - üì• Downloading DUAL-CHANNEL recording...
2026-01-10T18:25:22.983768728Z [err]  2026-01-10 18:25:22,651 - server - INFO - üìá CRM: Updated lead 288a0e8e-ff8b-4249-b2ea-b84e5cb9929e (+17708336397) - fields: ['updated_at', 'last_contact', 'last_agent_id', 'last_agent_name', 'custom_fields']
2026-01-10T18:25:22.983775703Z [err]  2026-01-10 18:25:22,882 - httpx - INFO - HTTP Request: GET https://s3.amazonaws.com/telephony-recorder-prod/227803fb-1717-407d-9bd5-fd04aa27c656/2026-01-10/a42f2994-ee51-11f0-816e-02420aef971f-1768069492270300.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIASDC5E2MJDPKMH7UW%2F20260110%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20260110T182521Z&X-Amz-Expires=600&X-Amz-SignedHeaders=host&X-Amz-Signature=ed5422f2a1c59fda1ea8305cd978c0a3fd117366e93154a517b0c1c4e7333a2c "HTTP/1.1 200 OK"
2026-01-10T18:25:22.983785145Z [err]  2026-01-10 18:25:22,885 - server - INFO - üîç [AUTO-QC] Call log found: transcript_turns=6, logs_count=8, status=completed
2026-01-10T18:25:23.031818799Z [err]  2026-01-10 18:25:23,023 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2026-01-10T18:25:23.984355747Z [err]  2026-01-10 18:25:23,386 - server - WARNING - ‚ö†Ô∏è No speech in any channel
2026-01-10T18:25:23.984369847Z [inf]  100.64.0.13:60556 - "POST /api/telnyx/webhook HTTP/1.1" 200
2026-01-10T18:25:23.984378023Z [err]  2026-01-10 18:25:23,387 - qc_agents.orchestrator - INFO - Using QC model: gpt-4o
2026-01-10T18:25:23.984386298Z [err]  2026-01-10 18:25:23,387 - qc_agents.orchestrator - INFO - ‚úÖ Initialized 3 QC agents for user dcafa642-6136-4096-b77d-a4cb99a62651
2026-01-10T18:25:23.984394144Z [err]  2026-01-10 18:25:23,387 - qc_agents.orchestrator - INFO - üîç Running Commitment Detector on call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:23.984403331Z [err]  2026-01-10 18:25:23,399 - server - INFO - üîç [AUTO-QC] Agent found: name=JK First Caller-optimizer3, has_auto_qc_settings=True
2026-01-10T18:25:23.984933385Z [err]  2026-01-10 18:25:23,112 - qc_agents.orchestrator - INFO - No QC agent configs found, using defaults with API key
2026-01-10T18:25:23.984948166Z [err]  2026-01-10 18:25:23,156 - server - INFO - ‚úÖ Downloaded 113727 bytes
2026-01-10T18:25:23.984955490Z [err]  2026-01-10 18:25:23,385 - server - INFO - ‚úÖ Split into 2 channels
2026-01-10T18:25:23.984960815Z [err]  2026-01-10 18:25:23,385 - server - INFO - üé§ Using STT provider: soniox for interruption detection
2026-01-10T18:25:23.984966584Z [err]  2026-01-10 18:25:23,385 - server - INFO - üìä Channel 0: 622218 bytes
2026-01-10T18:25:23.984972254Z [err]  2026-01-10 18:25:23,385 - server - ERROR - ‚ùå No Soniox API key available
2026-01-10T18:25:23.984977105Z [err]  2026-01-10 18:25:23,385 - server - INFO - ‚ùå Channel 0: No speech
2026-01-10T18:25:23.984982921Z [err]  2026-01-10 18:25:23,386 - server - INFO - üìä Channel 1: 622218 bytes
2026-01-10T18:25:23.984988223Z [err]  2026-01-10 18:25:23,386 - server - ERROR - ‚ùå No Soniox API key available
2026-01-10T18:25:23.984994137Z [err]  2026-01-10 18:25:23,386 - server - INFO - ‚ùå Channel 1: No speech
2026-01-10T18:25:23.989243266Z [err]  2026-01-10 18:25:23,493 - server - INFO - üìä [AUTO-QC] Running full QC analysis: call=v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw ‚Üí campaign=b7bd9ce7-2722-4c61-a2fc-ca1fb127d7b8 (tech=True, script=True, tonality=True)
2026-01-10T18:25:23.989269713Z [err]  2026-01-10 18:25:23,493 - server - INFO - üìä [AUTO-QC] LLM settings: provider=grok, model=grok-3
2026-01-10T18:25:23.989279115Z [err]  2026-01-10 18:25:23,493 - server - ERROR - ‚ùå [AUTO-QC] Error in campaign QC for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw: run_full_qc_analysis() got an unexpected keyword argument 'llm_provider'
2026-01-10T18:25:23.989288065Z [err]  2026-01-10 18:25:23,493 - server - ERROR - ‚ùå [AUTO-QC] Traceback: Traceback (most recent call last):
2026-01-10T18:25:23.989296147Z [err]    File "/app/backend/server.py", line 10079, in trigger_campaign_qc_for_call
2026-01-10T18:25:23.989304450Z [err]      await run_full_qc_analysis(
2026-01-10T18:25:23.989312233Z [err]            ^^^^^^^^^^^^^^^^^^^^^
2026-01-10T18:25:23.989319806Z [err]  TypeError: run_full_qc_analysis() got an unexpected keyword argument 'llm_provider'
2026-01-10T18:25:23.989327160Z [err]  
2026-01-10T18:25:23.989334553Z [err]  2026-01-10 18:25:23,590 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 429 Too Many Requests"
2026-01-10T18:25:23.989341735Z [err]  2026-01-10 18:25:23,591 - qc_agents.base_agent - ERROR - Error calling LLM (openai): Client error '429 Too Many Requests' for url 'https://api.openai.com/v1/chat/completions'
2026-01-10T18:25:23.989349758Z [err]  For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429
2026-01-10T18:25:23.989356371Z [err]  2026-01-10 18:25:23,591 - qc_agents.commitment_detector - ERROR - Error in CommitmentDetector LLM analysis: Client error '429 Too Many Requests' for url 'https://api.openai.com/v1/chat/completions'
2026-01-10T18:25:23.989713003Z [err]  For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429, falling back to patterns
2026-01-10T18:25:23.989920145Z [err]  2026-01-10 18:25:23,594 - qc_agents.orchestrator - INFO - üó∫Ô∏è  Running Conversion Pathfinder on call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:24.939401363Z [err]  2026-01-10 18:25:24,292 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 429 Too Many Requests"
2026-01-10T18:25:24.939410059Z [err]  2026-01-10 18:25:24,293 - qc_agents.base_agent - ERROR - Error calling LLM (openai): Client error '429 Too Many Requests' for url 'https://api.openai.com/v1/chat/completions'
2026-01-10T18:25:24.939418939Z [err]  For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429
2026-01-10T18:25:24.939427598Z [err]  2026-01-10 18:25:24,293 - qc_agents.conversion_pathfinder - ERROR - Error in ConversionPathfinder LLM analysis: Client error '429 Too Many Requests' for url 'https://api.openai.com/v1/chat/completions'
2026-01-10T18:25:24.939434245Z [err]  For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429, falling back to patterns
2026-01-10T18:25:24.939441480Z [err]  2026-01-10 18:25:24,294 - qc_agents.orchestrator - INFO - ‚≠ê Running Excellence Replicator on call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:24.939448565Z [err]  2026-01-10 18:25:24,497 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 429 Too Many Requests"
2026-01-10T18:25:24.939455352Z [err]  2026-01-10 18:25:24,498 - qc_agents.base_agent - ERROR - Error calling LLM (openai): Client error '429 Too Many Requests' for url 'https://api.openai.com/v1/chat/completions'
2026-01-10T18:25:24.939462518Z [err]  For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429
2026-01-10T18:25:24.939469154Z [err]  2026-01-10 18:25:24,498 - qc_agents.excellence_replicator - ERROR - Error in ExcellenceReplicator analysis: Client error '429 Too Many Requests' for url 'https://api.openai.com/v1/chat/completions'
2026-01-10T18:25:24.939476918Z [err]  For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429
2026-01-10T18:25:24.939484002Z [err]  2026-01-10 18:25:24,594 - qc_agents.orchestrator - INFO - ‚úÖ QC analysis stored for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:24.941856082Z [err]  2026-01-10 18:25:24,594 - server - INFO - ‚úÖ QC analysis completed for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:24.941862372Z [err]  2026-01-10 18:25:24,594 - server - INFO - üìä Scores: Commitment=50, Conversion=40, Excellence=50
2026-01-10T18:25:24.941869842Z [err]  2026-01-10 18:25:24,791 - server - INFO - üìä Updated campaign_calls with QC scores for v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:24.985017872Z [err]  2026-01-10 18:25:24,979 - server - INFO - üìà Synced QC scores to lead 288a0e8e-ff8b-4249-b2ea-b84e5cb9929e via phone match
2026-01-10T18:25:25.075529110Z [err]  2026-01-10 18:25:25,071 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (9.7s left)
2026-01-10T18:25:25.075540322Z [err]  2026-01-10 18:25:25,072 - server - INFO - üè∑Ô∏è Updated lead status to 'needs_followup' based on risk level 'high'
2026-01-10T18:25:25.075547665Z [err]  2026-01-10 18:25:25,073 - server - ERROR - ‚ùå Error in auto appointment detection for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw: 'str' object has no attribute 'get'
2026-01-10T18:25:25.897378522Z [err]  2026-01-10 18:25:25,572 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (9.2s left)
2026-01-10T18:25:30.092444419Z [err]  2026-01-10 18:25:30,085 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (4.7s left)
2026-01-10T18:25:30.983129585Z [err]  2026-01-10 18:25:30,586 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (4.2s left)
2026-01-10T18:25:34.975536944Z [err]  2026-01-10 18:25:34,600 - core_calling_service - INFO - ‚è∞ Check-in triggered after 13.5s silence (threshold: 7s)
2026-01-10T18:25:34.975544616Z [err]  2026-01-10 18:25:34,602 - core_calling_service - INFO - üí¨ Sending check-in #1/2: Are you still there?
2026-01-10T18:25:34.975552430Z [err]  2026-01-10 18:25:34,603 - dead_air_monitor - INFO - üí¨ Sending check-in after 13.5s silence: Are you still there?
2026-01-10T18:25:34.975559318Z [err]  2026-01-10 18:25:34,603 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:34.975566547Z [err]  2026-01-10 18:25:34,603 - telnyx_service - INFO - üîä Speaking text on call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw: Are you still there?...
2026-01-10T18:25:34.975573347Z [err]  2026-01-10 18:25:34,603 - telnyx_service - INFO - üîç Agent config provided: True
2026-01-10T18:25:34.975581515Z [err]  2026-01-10 18:25:34,603 - telnyx_service - INFO - üîç TTS provider from settings: elevenlabs
2026-01-10T18:25:34.975588838Z [err]  2026-01-10 18:25:34,603 - telnyx_service - INFO - üîç WebSocket TTS: False
2026-01-10T18:25:34.975598372Z [err]  2026-01-10 18:25:34,603 - telnyx_service - INFO - üéôÔ∏è Attempting elevenlabs TTS (REST)
2026-01-10T18:25:34.975605400Z [err]  2026-01-10 18:25:34,603 - server - INFO - üíæ TTS CACHE HIT: Returning cached audio (17599 bytes)
2026-01-10T18:25:34.975614474Z [err]  2026-01-10 18:25:34,603 - telnyx_service - INFO - ‚è±Ô∏è  TTS generation time: 0.00s
2026-01-10T18:25:34.975623625Z [err]  2026-01-10 18:25:34,604 - telnyx_service - INFO - ‚úÖ Generated 17599 bytes, saved to /tmp/tts_elevenlabs_01b2ec34551c0c3ab527c8199487051c.mp3
2026-01-10T18:25:34.975633128Z [err]  2026-01-10 18:25:34,604 - telnyx_service - INFO - üîó Using audio URL: api.li-ai.org/api/tts-audio/tts_elevenlabs_01b2ec34551c0c3ab527c8199487051c.mp3
2026-01-10T18:25:34.975642259Z [err]  2026-01-10 18:25:34,879 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw/actions/playback_start "HTTP/1.1 422 Unprocessable Entity"
2026-01-10T18:25:34.978042975Z [err]  2026-01-10 18:25:34,880 - telnyx_service - INFO - ‚è±Ô∏è  Playback API call time: 0.28s
2026-01-10T18:25:34.978048904Z [err]  2026-01-10 18:25:34,880 - telnyx_service - ERROR - ‚ùå Telnyx playback failed: 422 - {
2026-01-10T18:25:34.978053954Z [err]    "errors": [
2026-01-10T18:25:34.978059840Z [err]      {
2026-01-10T18:25:34.978066015Z [err]        "code": "90018",
2026-01-10T18:25:34.978075402Z [err]        "title": "Call has already ended",
2026-01-10T18:25:34.978080177Z [err]        "detail": "This call is no longer active and can't receive commands."
2026-01-10T18:25:34.978085556Z [err]      }
2026-01-10T18:25:34.978090563Z [err]    ]
2026-01-10T18:25:34.978096210Z [err]  }
2026-01-10T18:25:34.978101191Z [err]  2026-01-10 18:25:34,881 - telnyx_service - INFO - üì¢ Using Telnyx built-in TTS
2026-01-10T18:25:35.136937379Z [err]  2026-01-10 18:25:35,131 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw/actions/speak "HTTP/1.1 422 Unprocessable Entity"
2026-01-10T18:25:35.136960520Z [err]  2026-01-10 18:25:35,132 - telnyx_service - ERROR - ‚ùå Error speaking text: Error code: 422 - {'errors': [{'code': '90018', 'title': 'Call has already ended', 'detail': "This call is no longer active and can't receive commands."}]}
2026-01-10T18:25:35.136973448Z [err]  2026-01-10 18:25:35,132 - dead_air_monitor - INFO - ‚úÖ Check-in message sent
2026-01-10T18:25:35.876113400Z [err]  2026-01-10 18:25:35,634 - dead_air_monitor - INFO - ‚è±Ô∏è Playback expected end time passed (0.9s ago), marking agent as done speaking
2026-01-10T18:25:35.876119044Z [err]  2026-01-10 18:25:35,634 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1768069535.6346664 for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:35.876123700Z [err]  2026-01-10 18:25:35,634 - core_calling_service - INFO - ü§ñ Agent stopped speaking for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:41.034228673Z [err]  2026-01-10 18:25:40,150 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=False, user_speaking=False, silence=4.5s, checkin_count=1/2
2026-01-10T18:25:41.034235457Z [err]  2026-01-10 18:25:40,651 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=False, user_speaking=False, silence=5.0s, checkin_count=1/2
2026-01-10T18:25:41.034245703Z [err]  2026-01-10 18:25:40,817 - server - INFO - üé§ Soniox receiver alive - 10 messages received in last 10s
2026-01-10T18:25:41.034257682Z [err]  2026-01-10 18:25:40,818 - server - ERROR - ‚ùå Soniox error: {'tokens': [], 'final_audio_proc_ms': 27120, 'total_audio_proc_ms': 28200, 'error_code': 408, 'error_message': 'Request timeout.'}
2026-01-10T18:25:41.034270930Z [err]  2026-01-10 18:25:40,818 - server - INFO - ‚úÖ Soniox receive loop ended normally
2026-01-10T18:25:41.034279338Z [err]  2026-01-10 18:25:40,818 - dead_air_monitor - INFO - üîá Dead air monitoring cancelled for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:41.034287789Z [err]  2026-01-10 18:25:40,818 - dead_air_monitor - INFO - üîá Dead air monitoring stopped for call v3:FRYJscPFj3xR6SIkG0dhlnE10NlqUbjCVpm0LjyySBjfITQGr5lvCw
2026-01-10T18:25:41.034295391Z [err]  2026-01-10 18:25:40,818 - server - INFO - üîá Dead air monitoring task cancelled
2026-01-10T18:25:43.174665025Z [err]  2026-01-10 18:25:42,821 - soniox_service - ERROR - ‚ùå Error closing Soniox session: received 1000 (OK); then sent 1000 (OK)
2026-01-10T18:25:43.174671940Z [err]  2026-01-10 18:25:42,821 - server - INFO - üîå Telnyx WebSocket disconnected