2026-01-10T09:32:53.000000000Z [inf]  Starting Container
2026-01-10T09:32:55.419203319Z [inf]  =========================================
2026-01-10T09:32:55.419213919Z [inf]  üöÄ START.SH SCRIPT IS EXECUTING
2026-01-10T09:32:55.419225603Z [inf]  =========================================
2026-01-10T09:32:55.419234144Z [inf]  üìç Working directory: /app/backend
2026-01-10T09:32:55.419244188Z [inf]  üîç Python path: /app/backend
2026-01-10T09:32:55.419254904Z [inf]  üåê Starting Gunicorn on 0.0.0.0:8080...
2026-01-10T09:32:55.419263744Z [inf]  =========================================
2026-01-10T09:32:55.419270769Z [err]  [2026-01-10 09:32:55 +0000] [1] [INFO] Starting gunicorn 22.0.0
2026-01-10T09:32:55.419278478Z [err]  [2026-01-10 09:32:55 +0000] [1] [INFO] Listening at: http://0.0.0.0:8080 (1)
2026-01-10T09:32:55.419287497Z [err]  [2026-01-10 09:32:55 +0000] [1] [INFO] Using worker: uvicorn.workers.UvicornWorker
2026-01-10T09:32:55.419295405Z [err]  [2026-01-10 09:32:55 +0000] [3] [INFO] Booting worker with pid: 3
2026-01-10T09:32:55.419303375Z [err]  [2026-01-10 09:32:55 +0000] [4] [INFO] Booting worker with pid: 4
2026-01-10T09:32:55.419313883Z [err]  [2026-01-10 09:32:55 +0000] [5] [INFO] Booting worker with pid: 5
2026-01-10T09:32:55.419321497Z [err]  [2026-01-10 09:32:55 +0000] [6] [INFO] Booting worker with pid: 6
2026-01-10T09:33:15.494287262Z [err]  2026-01-10 09:33:11,245 - server - INFO - ‚úÖ Connection libraries pre-warmed (websockets, httpx, ElevenLabs, Soniox)
2026-01-10T09:33:15.494303815Z [err]  2026-01-10 09:33:11,278 - server - INFO - ‚úÖ CORS configured for origins: ['https://app.li-ai.org', 'https://li-ai.org']
2026-01-10T09:33:15.494314388Z [err]  2026-01-10 09:33:11,293 - server - INFO - ‚úÖ CORS configured for origins: ['https://app.li-ai.org', 'https://li-ai.org']
2026-01-10T09:33:15.494403531Z [err]  2026-01-10 09:33:11,131 - server - INFO - ‚ÑπÔ∏è  RAG service disabled (set ENABLE_RAG=true to enable semantic search)
2026-01-10T09:33:15.494410035Z [err]  2026-01-10 09:33:11,131 - server - INFO - üî• Pre-warming connection libraries...
2026-01-10T09:33:15.494415805Z [err]  2026-01-10 09:33:11,132 - server - INFO - ‚ÑπÔ∏è  RAG service disabled (set ENABLE_RAG=true to enable semantic search)
2026-01-10T09:33:15.494421040Z [err]  2026-01-10 09:33:11,132 - server - INFO - üî• Pre-warming connection libraries...
2026-01-10T09:33:15.494427352Z [err]  2026-01-10 09:33:11,132 - server - INFO - ‚ÑπÔ∏è  RAG service disabled (set ENABLE_RAG=true to enable semantic search)
2026-01-10T09:33:15.494432490Z [err]  2026-01-10 09:33:11,133 - server - INFO - üî• Pre-warming connection libraries...
2026-01-10T09:33:15.494437278Z [err]  2026-01-10 09:33:11,144 - server - INFO - ‚úÖ Connection libraries pre-warmed (websockets, httpx, ElevenLabs, Soniox)
2026-01-10T09:33:15.494443467Z [err]  2026-01-10 09:33:11,145 - server - INFO - ‚úÖ Connection libraries pre-warmed (websockets, httpx, ElevenLabs, Soniox)
2026-01-10T09:33:15.494448699Z [err]  2026-01-10 09:33:11,146 - server - INFO - ‚úÖ Connection libraries pre-warmed (websockets, httpx, ElevenLabs, Soniox)
2026-01-10T09:33:15.494453850Z [err]  2026-01-10 09:33:11,232 - server - INFO - ‚ÑπÔ∏è  RAG service disabled (set ENABLE_RAG=true to enable semantic search)
2026-01-10T09:33:15.494458856Z [err]  2026-01-10 09:33:11,232 - server - INFO - üî• Pre-warming connection libraries...
2026-01-10T09:33:15.583096472Z [err]  2026-01-10 09:33:11,703 - server - INFO - üéµ Pre-generating comfort noise file on startup (5 minutes for seamless loops)...
2026-01-10T09:33:15.583112776Z [err]  [2026-01-10 09:33:11 +0000] [3] [INFO] Started server process [3]
2026-01-10T09:33:15.583116926Z [err]  2026-01-10 09:33:11,703 - server - INFO - üéµ Pre-generating comfort noise file on startup (5 minutes for seamless loops)...
2026-01-10T09:33:15.583124570Z [err]  2026-01-10 09:33:11,796 - server - INFO - ‚úÖ Agent test router loaded
2026-01-10T09:33:15.583128710Z [err]  [2026-01-10 09:33:11 +0000] [3] [INFO] Waiting for application startup.
2026-01-10T09:33:15.583132169Z [err]  2026-01-10 09:33:11,703 - server - INFO - üéµ Pre-generating comfort noise file on startup (5 minutes for seamless loops)...
2026-01-10T09:33:15.583144808Z [err]  2026-01-10 09:33:11,775 - server - INFO - ‚úÖ CRM router loaded
2026-01-10T09:33:15.583146580Z [err]  2026-01-10 09:33:11,805 - server - INFO - ‚úÖ Director Studio router loaded
2026-01-10T09:33:15.583147496Z [err]  [2026-01-10 09:33:11 +0000] [4] [INFO] Started server process [4]
2026-01-10T09:33:15.583159949Z [err]  2026-01-10 09:33:11,780 - server - INFO - ‚úÖ QC test router loaded
2026-01-10T09:33:15.583163073Z [err]  2026-01-10 09:33:11,805 - server - INFO - ‚úÖ QC agents orchestrator loaded
2026-01-10T09:33:15.583166704Z [err]  [2026-01-10 09:33:11 +0000] [4] [INFO] Waiting for application startup.
2026-01-10T09:33:15.583174324Z [err]  [2026-01-10 09:33:11 +0000] [5] [INFO] Started server process [5]
2026-01-10T09:33:15.583181957Z [err]  [2026-01-10 09:33:11 +0000] [5] [INFO] Waiting for application startup.
2026-01-10T09:33:15.583189595Z [err]  2026-01-10 09:33:11,831 - server - INFO - üéµ Pre-generating comfort noise file on startup (5 minutes for seamless loops)...
2026-01-10T09:33:15.583304906Z [err]  2026-01-10 09:33:11,310 - server - INFO - ‚úÖ CORS configured for origins: ['https://app.li-ai.org', 'https://li-ai.org']
2026-01-10T09:33:15.583312010Z [err]  2026-01-10 09:33:11,410 - server - INFO - ‚úÖ QC enhanced router loaded
2026-01-10T09:33:15.583318989Z [err]  2026-01-10 09:33:11,415 - server - INFO - ‚úÖ QC enhanced router loaded
2026-01-10T09:33:15.583325299Z [err]  2026-01-10 09:33:11,444 - server - INFO - ‚úÖ CORS configured for origins: ['https://app.li-ai.org', 'https://li-ai.org']
2026-01-10T09:33:15.583333663Z [err]  2026-01-10 09:33:11,451 - server - INFO - ‚úÖ QC enhanced router loaded
2026-01-10T09:33:15.583341237Z [err]  2026-01-10 09:33:11,459 - server - INFO - ‚úÖ QC agent router loaded
2026-01-10T09:33:15.583347825Z [err]  2026-01-10 09:33:11,460 - server - INFO - ‚úÖ QC agent router loaded
2026-01-10T09:33:15.583354721Z [err]  2026-01-10 09:33:11,485 - server - INFO - ‚úÖ QC learning router loaded
2026-01-10T09:33:15.583361585Z [err]  2026-01-10 09:33:11,486 - server - INFO - ‚úÖ QC learning router loaded
2026-01-10T09:33:15.583369745Z [err]  2026-01-10 09:33:11,488 - server - INFO - ‚úÖ Voice library router loaded
2026-01-10T09:33:15.583377049Z [err]  2026-01-10 09:33:11,489 - server - INFO - ‚úÖ Voice library router loaded
2026-01-10T09:33:15.583383046Z [err]  2026-01-10 09:33:11,500 - server - INFO - ‚úÖ QC agent router loaded
2026-01-10T09:33:15.583389549Z [err]  2026-01-10 09:33:11,524 - server - INFO - ‚úÖ QC learning router loaded
2026-01-10T09:33:15.583394638Z [err]  2026-01-10 09:33:11,528 - server - INFO - ‚úÖ Voice library router loaded
2026-01-10T09:33:15.583401697Z [err]  2026-01-10 09:33:11,536 - server - INFO - ‚úÖ QC enhanced router loaded
2026-01-10T09:33:15.583406661Z [err]  2026-01-10 09:33:11,603 - server - INFO - ‚úÖ QC agent router loaded
2026-01-10T09:33:15.583412049Z [err]  2026-01-10 09:33:11,619 - server - INFO - ‚úÖ CRM router loaded
2026-01-10T09:33:15.583537896Z [err]  2026-01-10 09:33:11,628 - server - INFO - ‚úÖ CRM router loaded
2026-01-10T09:33:15.583543203Z [err]  2026-01-10 09:33:11,630 - server - INFO - ‚úÖ QC learning router loaded
2026-01-10T09:33:15.583549005Z [err]  2026-01-10 09:33:11,634 - server - INFO - ‚úÖ Voice library router loaded
2026-01-10T09:33:15.583554692Z [err]  2026-01-10 09:33:11,636 - server - INFO - ‚úÖ QC test router loaded
2026-01-10T09:33:15.583559280Z [err]  2026-01-10 09:33:11,637 - server - INFO - ‚úÖ QC test router loaded
2026-01-10T09:33:15.583564394Z [err]  2026-01-10 09:33:11,652 - server - INFO - ‚úÖ CRM router loaded
2026-01-10T09:33:15.583568692Z [err]  2026-01-10 09:33:11,657 - server - INFO - ‚úÖ QC test router loaded
2026-01-10T09:33:15.583573558Z [err]  2026-01-10 09:33:11,659 - server - INFO - ‚úÖ Agent test router loaded
2026-01-10T09:33:15.583578318Z [err]  2026-01-10 09:33:11,662 - server - INFO - ‚úÖ Agent test router loaded
2026-01-10T09:33:15.583584682Z [err]  2026-01-10 09:33:11,671 - server - INFO - ‚úÖ Director Studio router loaded
2026-01-10T09:33:15.583590774Z [err]  2026-01-10 09:33:11,671 - server - INFO - ‚úÖ Agent test router loaded
2026-01-10T09:33:15.583595665Z [err]  2026-01-10 09:33:11,671 - server - INFO - ‚úÖ QC agents orchestrator loaded
2026-01-10T09:33:15.583599677Z [err]  2026-01-10 09:33:11,674 - server - INFO - ‚úÖ Director Studio router loaded
2026-01-10T09:33:15.583604373Z [err]  2026-01-10 09:33:11,674 - server - INFO - ‚úÖ QC agents orchestrator loaded
2026-01-10T09:33:15.583609112Z [err]  2026-01-10 09:33:11,679 - server - INFO - ‚úÖ Director Studio router loaded
2026-01-10T09:33:15.583613956Z [err]  2026-01-10 09:33:11,680 - server - INFO - ‚úÖ QC agents orchestrator loaded
2026-01-10T09:33:15.583618769Z [err]  [2026-01-10 09:33:11 +0000] [6] [INFO] Started server process [6]
2026-01-10T09:33:15.583624456Z [err]  [2026-01-10 09:33:11 +0000] [6] [INFO] Waiting for application startup.
2026-01-10T09:33:20.446223464Z [err]  2026-01-10 09:33:20,108 - comfort_noise - INFO - Generated continuous comfort noise: /tmp/comfort_noise_continuous.mp3 (300s, white=-83dB, hum=-93dB)
2026-01-10T09:33:20.446237012Z [err]  2026-01-10 09:33:20,117 - server - INFO - ‚úÖ Comfort noise MP3 ready for immediate use
2026-01-10T09:33:20.446244094Z [err]  2026-01-10 09:33:20,117 - server - INFO - üéµ Pre-warming mulaw comfort noise for WebSocket streaming...
2026-01-10T09:33:20.446250977Z [err]  2026-01-10 09:33:20,117 - comfort_noise - INFO - üéµ Loading mulaw comfort noise for WebSocket mixing...
2026-01-10T09:33:20.446257573Z [err]  2026-01-10 09:33:20,142 - comfort_noise - INFO - Generated continuous comfort noise: /tmp/comfort_noise_continuous.mp3 (300s, white=-83dB, hum=-93dB)
2026-01-10T09:33:20.446274871Z [err]  2026-01-10 09:33:19,970 - server - INFO - ‚úÖ Comfort noise MP3 ready for immediate use
2026-01-10T09:33:20.446283530Z [err]  2026-01-10 09:33:19,970 - server - INFO - üéµ Pre-warming mulaw comfort noise for WebSocket streaming...
2026-01-10T09:33:20.446290263Z [err]  2026-01-10 09:33:19,970 - comfort_noise - INFO - üéµ Loading mulaw comfort noise for WebSocket mixing...
2026-01-10T09:33:20.446296497Z [err]  2026-01-10 09:33:19,981 - comfort_noise - INFO - Generated continuous comfort noise: /tmp/comfort_noise_continuous.mp3 (300s, white=-83dB, hum=-93dB)
2026-01-10T09:33:20.446303024Z [err]  2026-01-10 09:33:19,993 - server - INFO - ‚úÖ Comfort noise MP3 ready for immediate use
2026-01-10T09:33:20.446309372Z [err]  2026-01-10 09:33:19,994 - server - INFO - üéµ Pre-warming mulaw comfort noise for WebSocket streaming...
2026-01-10T09:33:20.446315860Z [err]  2026-01-10 09:33:19,994 - comfort_noise - INFO - üéµ Loading mulaw comfort noise for WebSocket mixing...
2026-01-10T09:33:20.446342809Z [err]  2026-01-10 09:33:19,958 - comfort_noise - INFO - Generated continuous comfort noise: /tmp/comfort_noise_continuous.mp3 (300s, white=-83dB, hum=-93dB)
2026-01-10T09:33:20.451279609Z [err]  2026-01-10 09:33:20,142 - server - INFO - ‚úÖ Comfort noise MP3 ready for immediate use
2026-01-10T09:33:20.451290337Z [err]  2026-01-10 09:33:20,142 - server - INFO - üéµ Pre-warming mulaw comfort noise for WebSocket streaming...
2026-01-10T09:33:20.451304586Z [err]  2026-01-10 09:33:20,142 - comfort_noise - INFO - üéµ Loading mulaw comfort noise for WebSocket mixing...
2026-01-10T09:33:20.669689562Z [err]  2026-01-10 09:33:20,663 - comfort_noise - INFO - ‚úÖ Generated comfort noise sample: 30s (white=-83dB, hum=-93dB)
2026-01-10T09:33:20.698831901Z [err]  2026-01-10 09:33:20,691 - comfort_noise - INFO - ‚úÖ Generated comfort noise sample: 30s (white=-83dB, hum=-93dB)
2026-01-10T09:33:20.791806562Z [err]  2026-01-10 09:33:20,774 - comfort_noise - INFO - ‚úÖ Generated mulaw comfort noise: 240000 bytes
2026-01-10T09:33:20.791811580Z [err]  2026-01-10 09:33:20,775 - server - INFO - ‚úÖ Mulaw comfort noise ready (240000 bytes)
2026-01-10T09:33:20.791816992Z [err]  [2026-01-10 09:33:20 +0000] [6] [INFO] Application startup complete.
2026-01-10T09:33:20.822672605Z [err]  2026-01-10 09:33:20,810 - comfort_noise - INFO - ‚úÖ Generated mulaw comfort noise: 240000 bytes
2026-01-10T09:33:20.822690163Z [err]  2026-01-10 09:33:20,812 - server - INFO - ‚úÖ Mulaw comfort noise ready (240000 bytes)
2026-01-10T09:33:20.822696877Z [err]  [2026-01-10 09:33:20 +0000] [3] [INFO] Application startup complete.
2026-01-10T09:33:20.826091186Z [err]  2026-01-10 09:33:20,825 - comfort_noise - INFO - ‚úÖ Generated comfort noise sample: 30s (white=-83dB, hum=-93dB)
2026-01-10T09:33:21.520691602Z [err]  2026-01-10 09:33:21,251 - server - INFO - ‚úÖ Mulaw comfort noise ready (240000 bytes)
2026-01-10T09:33:21.520704722Z [err]  [2026-01-10 09:33:21 +0000] [5] [INFO] Application startup complete.
2026-01-10T09:33:21.520818378Z [err]  2026-01-10 09:33:20,930 - comfort_noise - INFO - ‚úÖ Generated mulaw comfort noise: 240000 bytes
2026-01-10T09:33:21.520823339Z [err]  2026-01-10 09:33:20,953 - server - INFO - ‚úÖ Mulaw comfort noise ready (240000 bytes)
2026-01-10T09:33:21.520829450Z [err]  [2026-01-10 09:33:20 +0000] [4] [INFO] Application startup complete.
2026-01-10T09:33:21.520835861Z [err]  2026-01-10 09:33:20,999 - comfort_noise - INFO - ‚úÖ Generated comfort noise sample: 30s (white=-83dB, hum=-93dB)
2026-01-10T09:33:21.520841762Z [err]  2026-01-10 09:33:21,134 - comfort_noise - INFO - ‚úÖ Generated mulaw comfort noise: 240000 bytes
2026-01-10T12:44:49.385250947Z [inf]  100.64.0.2:37312 - "GET /api/auth/me HTTP/1.1" 401
2026-01-10T12:44:49.385256106Z [inf]  100.64.0.3:43180 - "OPTIONS /api/auth/login HTTP/1.1" 200
2026-01-10T12:44:49.385261136Z [inf]  100.64.0.2:37312 - "POST /api/auth/login HTTP/1.1" 200
2026-01-10T12:44:49.385266648Z [inf]  100.64.0.2:37312 - "GET /api/agents HTTP/1.1" 200
2026-01-10T12:44:49.560710365Z [inf]  100.64.0.2:37312 - "GET /api/agents HTTP/1.1" 200
2026-01-10T12:45:09.062461837Z [err]  2026-01-10 12:45:02,477 - telnyx_service - INFO - Telnyx service initialized with connection: 2777245537294877821
2026-01-10T12:45:09.062474170Z [err]  2026-01-10 12:45:02,477 - telnyx_service - INFO - üìû Initiating outbound call from +14048000152 to +17708336397
2026-01-10T12:45:09.062480040Z [err]  2026-01-10 12:45:02,477 - telnyx_service - INFO - ü§ñ Enabling AMD (premium mode)
2026-01-10T12:45:09.062486268Z [err]  2026-01-10 12:45:02,477 - telnyx_service - INFO - üåê Adding streaming parameters: wss://api.li-ai.org/api/telnyx/audio-stream
2026-01-10T12:45:09.062492568Z [err]  2026-01-10 12:45:03,238 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls "HTTP/1.1 200 OK"
2026-01-10T12:45:09.062499533Z [err]  2026-01-10 12:45:03,243 - telnyx_service - INFO - ‚úÖ Call initiated: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:09.062505678Z [err]  2026-01-10 12:45:03,346 - server - INFO - üìù Created call log: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:09.062510835Z [err]  2026-01-10 12:45:03,347 - server - INFO - üîç DEBUG Call Initiated Webhook (UI Trigger): url='https://n8n.outlier-agency.com/webhook/2adb150a-9e08-4053-9fa4-e47df18bf39b', active=True, should_fire=True
2026-01-10T12:45:09.062516607Z [err]  2026-01-10 12:45:03,347 - server - INFO - üîç DEBUG Agent Settings Webhook Context: {'temperature': 0.2, 'max_tokens': 500, 'tts_speed': 1, 'llm_provider': 'grok', 'tts_provider': 'elevenlabs', 'stt_provider': 'soniox', 'enable_comfort_noise': True, 'dead_air_settings': {'silence_timeout_normal': 7, 'silence_timeout_hold_on': 25, 'max_checkins_before_disconnect': 2, 'max_call_duration': 1500, 'checkin_message': 'Are you still there?'}, 'voicemail_detection': {'enabled': True, 'use_telnyx_amd': True, 'telnyx_amd_mode': 'premium', 'use_llm_detection': True, 'disconnect_on_detection': True}, 'deepgram_settings': {'endpointing': 500, 'vad_turnoff': 250, 'utterance_end_ms': 1000, 'interim_results': True, 'smart_format': True}, 'elevenlabs_settings': {'voice_id': 'J5iaaqzR5zn6HFG4jV3b', 'model': 'eleven_turbo_v2_5', 'stability': 0.6, 'similarity_boost': 0.65, 'style': 0.2, 'speed': 1.1, 'use_speaker_boost': True, 'enable_normalization': True, 'enable_ssml_parsing': True}, 'hume_settings': {'voice_name': 'e7af7ed6-3381-48aa-ab97-49485007470b', 'description': 'warm and friendly', 'speed': 1}, 'sesame_settings': {'speaker_id': 0, 'output_format': 'wav'}, 'melo_settings': {'voice': 'EN-US', 'speed': 1.2, 'clone_wav': None}, 'dia_settings': {'voice': 'S1', 'speed': 1, 'response_format': 'wav'}, 'kokoro_settings': {'voice': 'af_bella', 'speed': 1, 'response_format': 'mp3'}, 'chattts_settings': {'voice': 'female_1', 'speed': 1, 'temperature': 0.3, 'response_format': 'wav'}, 'assemblyai_settings': {'sample_rate': 8000, 'word_boost': [], 'enable_extra_session_information': True, 'disable_partial_transcripts': False, 'threshold': 0, 'end_of_turn_confidence_threshold': 0.8, 'min_end_of_turn_silence_when_confident': 500, 'max_turn_silence': 2000}, 'soniox_settings': {'model': 'stt-rt-v3', 'sample_rate': 8000, 'audio_format': 'mulaw', 'num_channels': 1, 'enable_endpoint_detection': True, 'enable_speaker_diarization': False, 'language_hints': ['en'], 'context': ''}, 'barge_in_settings': {'enable_verbose_barge_in': True, 'word_count_threshold': 10, 'interruption_prompt': 'The user is speaking for a long time. Interrupt them politely but firmly to acknowledge what they said and guide the conversation back to the goal. start by saying an elongated why whhhhyyyy...'}, 'post_call_webhook_url': 'https://n8n.outlier-agency.com/webhook/2adb150a-9e08-4053-9fa4-e47df18bf39b', 'post_call_webhook_active': True, 'call_started_webhook_url': 'https://n8n.outlier-agency.com/webhook/2adb150a-9e08-4053-9fa4-e47df18bf39b', 'call_started_webhook_active': True}
2026-01-10T12:45:09.062599213Z [inf]  100.64.0.3:43180 - "OPTIONS /api/telnyx/call/outbound HTTP/1.1" 200
2026-01-10T12:45:09.062604641Z [err]  2026-01-10 12:45:02,259 - server - INFO - üåê Created WebSocket stream URL: wss://api.li-ai.org/api/telnyx/audio-stream
2026-01-10T12:45:09.062609632Z [err]  2026-01-10 12:45:02,362 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2026-01-10T12:45:09.062616032Z [err]  2026-01-10 12:45:02,448 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2026-01-10T12:45:09.065140277Z [err]  2026-01-10 12:45:03,449 - server - WARNING - ‚ö†Ô∏è Call-initiated webhook returned status 530: <!doctype html>
2026-01-10T12:45:09.065158220Z [err]  <!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en-US"> <![endif]-->
2026-01-10T12:45:09.065168058Z [err]  <!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en-US"> <![endif]-->
2026-01-10T12:45:09.065183736Z [err]  <!--[if IE 8]>    <html class="no-
2026-01-10T12:45:09.065198700Z [err]  2026-01-10 12:45:03,555 - server - INFO - üîåüîåüîå WEBSOCKET CONNECTION ATTEMPT
2026-01-10T12:45:09.065210691Z [err]  2026-01-10 12:45:03,556 - server - INFO -    Client: Address(host='100.64.0.4', port=21316)
2026-01-10T12:45:09.065219070Z [err]  2026-01-10 12:45:03,556 - server - INFO -    Headers: {'host': 'api.li-ai.org', 'user-agent': 'telnyx-websocket', 'connection': 'Upgrade', 'sec-websocket-key': 'cesOk6Xx5u+8BZzf2+5SWw==', 'sec-websocket-version': '13', 'upgrade': 'websocket', 'x-forwarded-for': '192.76.120.151', 'x-forwarded-host': 'api.li-ai.org', 'x-forwarded-proto': 'https', 'x-railway-edge': 'railway/us-west2', 'x-railway-request-id': 'odWeUYbKTDerXuWx0_TJvA', 'x-real-ip': '192.76.120.151', 'x-request-start': '1768049103330', 'accept-encoding': 'gzip'}
2026-01-10T12:45:09.065227100Z [err]  2026-01-10 12:45:03,347 - server - INFO - üîç DEBUG Call Initiated Webhook: url='https://n8n.outlier-agency.com/webhook/2adb150a-9e08-4053-9fa4-e47df18bf39b', active=True, should_fire=True
2026-01-10T12:45:09.065232335Z [err]  2026-01-10 12:45:03,347 - server - INFO - üì§ Sending call-initiated webhook to: https://n8n.outlier-agency.com/webhook/2adb150a-9e08-4053-9fa4-e47df18bf39b
2026-01-10T12:45:09.065237796Z [err]  2026-01-10 12:45:03,355 - redis_service - INFO - üì¶ Stored call data in Redis: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q (TTL: 3600s)
2026-01-10T12:45:09.065243421Z [err]  2026-01-10 12:45:03,355 - server - INFO - üì¶ Call data stored in Redis and memory
2026-01-10T12:45:09.065251824Z [err]  2026-01-10 12:45:03,355 - server - INFO - üìû Outbound call initiated: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:09.065256715Z [inf]  100.64.0.2:37312 - "POST /api/telnyx/call/outbound HTTP/1.1" 200
2026-01-10T12:45:09.065262275Z [err]  2026-01-10 12:45:03,445 - httpx - INFO - HTTP Request: POST https://n8n.outlier-agency.com/webhook/2adb150a-9e08-4053-9fa4-e47df18bf39b "HTTP/1.1 530 <none>"
2026-01-10T12:45:09.067506526Z [err]  2026-01-10 12:45:03,556 - server - INFO -    Path: /api/telnyx/audio-stream
2026-01-10T12:45:09.067510902Z [err]  2026-01-10 12:45:03,556 - server - INFO - üîå Incoming Telnyx WebSocket connection
2026-01-10T12:45:09.067516571Z [err]  [2026-01-10 12:45:03 +0000] [5] [INFO] ('100.64.0.4', 21316) - "WebSocket /api/telnyx/audio-stream" [accepted]
2026-01-10T12:45:09.067545551Z [err]  2026-01-10 12:45:03,556 - server - INFO - ‚úÖ WebSocket accepted, waiting for Telnyx events
2026-01-10T12:45:09.067553040Z [err]  [2026-01-10 12:45:03 +0000] [5] [INFO] connection open
2026-01-10T12:45:09.067558377Z [err]  2026-01-10 12:45:03,708 - server - INFO - üì¨ Received Telnyx event: connected
2026-01-10T12:45:09.067562511Z [err]  2026-01-10 12:45:03,708 - server - INFO - üìû Telnyx connected event received, waiting for 'start'...
2026-01-10T12:45:09.067566860Z [err]  2026-01-10 12:45:03,768 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2026-01-10T12:45:09.067572337Z [err]  2026-01-10 12:45:03,769 - server - INFO - üì® Full payload: {'data': {'event_type': 'call.initiated', 'id': 'c84effbb-97de-45d4-a38c-62924bae00dc', 'occurred_at': '2026-01-10T12:45:03.118827Z', 'payload': {'call_control_id': 'v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q', 'call_leg_id': '2eb07eb8-ee22-11f0-aa9c-02420aef93a0', 'call_session_id': '2ead92b6-ee22-11f0-9231-02420aef93a0', 'client_state': None, 'connection_id': '2777245537294877821', 'direction': 'outgoing', 'from': '+14048000152', 'state': 'bridging', 'to': '+17708336397'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2026-01-10T12:45:09.067577629Z [err]  2026-01-10 12:45:03,769 - server - INFO - üéØ Event type: call.initiated, Call ID: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:09.067582545Z [err]  2026-01-10 12:45:03,769 - server - INFO - üì® ================================================
2026-01-10T12:45:09.068958770Z [err]  2026-01-10 12:45:03,769 - server - INFO - üìû Call initiated - Direction: outgoing, From: +14048000152, To: +17708336397
2026-01-10T12:45:09.068963480Z [err]  2026-01-10 12:45:08,111 - server - INFO - üì® Full payload: {'data': {'event_type': 'call.answered', 'id': '87cc0fae-5f5e-48f4-8e0f-fda2adc0df14', 'occurred_at': '2026-01-10T12:45:07.658821Z', 'payload': {'call_control_id': 'v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q', 'call_leg_id': '2eb07eb8-ee22-11f0-aa9c-02420aef93a0', 'call_session_id': '2ead92b6-ee22-11f0-9231-02420aef93a0', 'client_state': None, 'codec': 'PCMU', 'connection_id': '2777245537294877821', 'from': '+14048000152', 'sampling_rate': 8000, 'start_time': '2026-01-10T12:45:03.118827Z', 'to': '+17708336397'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2026-01-10T12:45:09.068966017Z [inf]  100.64.0.5:39000 - "POST /api/telnyx/webhook HTTP/1.1" 200
2026-01-10T12:45:09.068972319Z [err]  2026-01-10 12:45:07,779 - server - INFO - üì¨ Received Telnyx event: start
2026-01-10T12:45:09.068972624Z [err]  2026-01-10 12:45:08,111 - server - INFO - üéØ Event type: call.answered, Call ID: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:09.068978520Z [err]  2026-01-10 12:45:07,779 - server - INFO - üé¨ Stream started for call: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:09.068984094Z [err]  2026-01-10 12:45:07,786 - redis_service - INFO - üì• Retrieved call data from Redis: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:09.068989318Z [err]  2026-01-10 12:45:07,787 - server - INFO - ‚úÖ Call data found after 0s wait
2026-01-10T12:45:09.068994762Z [err]  2026-01-10 12:45:07,787 - server - INFO - ‚è≥ Session not found locally, waiting briefly for webhook...
2026-01-10T12:45:09.068999718Z [err]  2026-01-10 12:45:08,111 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2026-01-10T12:45:09.071477515Z [err]  2026-01-10 12:45:08,259 - httpx - INFO - HTTP Request: POST https://n8n.outlier-agency.com/webhook/2adb150a-9e08-4053-9fa4-e47df18bf39b "HTTP/1.1 530 <none>"
2026-01-10T12:45:09.071487979Z [err]  2026-01-10 12:45:08,260 - server - WARNING - ‚ö†Ô∏è Call-started webhook returned status 530: <!doctype html>
2026-01-10T12:45:09.071494152Z [err]  <!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en-US"> <![endif]-->
2026-01-10T12:45:09.071499629Z [err]  <!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en-US"> <![endif]-->
2026-01-10T12:45:09.071508753Z [err]  2026-01-10 12:45:08,111 - server - INFO - üì® ================================================
2026-01-10T12:45:09.071518168Z [err]  2026-01-10 12:45:08,111 - server - INFO - ‚úÖ Call answered: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:09.071550898Z [err]  2026-01-10 12:45:08,118 - redis_service - INFO - üì• Retrieved call data from Redis: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:09.071558531Z [err]  2026-01-10 12:45:08,119 - server - INFO - ‚úÖ Found call in Redis (multi-worker state sharing working)
2026-01-10T12:45:09.071564338Z [err]  2026-01-10 12:45:08,119 - server - INFO - üìû Phone numbers added to session: from=+14048000152, to=+17708336397
2026-01-10T12:45:09.071572339Z [err]  2026-01-10 12:45:08,226 - server - INFO - ‚úÖ Call log updated
2026-01-10T12:45:09.071579598Z [err]  2026-01-10 12:45:08,226 - server - INFO - üîç DEBUG Webhook: url='https://n8n.outlier-agency.com/webhook/2adb150a-9e08-4053-9fa4-e47df18bf39b', active=True, should_fire=True
2026-01-10T12:45:09.071585889Z [err]  2026-01-10 12:45:08,226 - server - INFO - üì§ Sending call-started webhook to: https://n8n.outlier-agency.com/webhook/2adb150a-9e08-4053-9fa4-e47df18bf39b
2026-01-10T12:45:09.071591673Z [err]  2026-01-10 12:45:08,226 - server - INFO - üîß Getting Telnyx API keys for user: dcafa642-6136-4096-b77d-a4cb99a62651
2026-01-10T12:45:09.074123515Z [err]  <!--[if IE 8]>    <html class="no-
2026-01-10T12:45:09.074136952Z [err]  2026-01-10 12:45:08,288 - server - INFO - ‚ö†Ô∏è Session still not found after wait, will create in worker
2026-01-10T12:45:09.074146811Z [err]  2026-01-10 12:45:08,289 - server - WARNING - ‚ö†Ô∏è Session not found after waiting, creating in WebSocket worker...
2026-01-10T12:45:09.074154161Z [err]  2026-01-10 12:45:08,293 - redis_service - INFO - üì• Retrieved call data from Redis: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:09.074160320Z [err]  2026-01-10 12:45:08,294 - server - INFO - üìù Creating session with agent_id=bbeda238-e8d9-4d8c-b93b-1b7694581adb, user_id=dcafa642-6136-4096-b77d-a4cb99a62651
2026-01-10T12:45:09.074165685Z [err]  2026-01-10 12:45:08,295 - core_calling_service - INFO - üîç Checking KB for agent bbeda238-e8d9-4d8c-b93b-1b7694581adb...
2026-01-10T12:45:09.074171593Z [err]  2026-01-10 12:45:08,312 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2026-01-10T12:45:09.074179490Z [err]  2026-01-10 12:45:08,398 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2026-01-10T12:45:09.074188290Z [err]  2026-01-10 12:45:08,398 - server - INFO - üîß Creating Telnyx service with user's keys...
2026-01-10T12:45:09.074194188Z [err]  2026-01-10 12:45:08,400 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2026-01-10T12:45:09.074198991Z [err]  2026-01-10 12:45:08,400 - server - INFO - üì® Full payload: {'data': {'event_type': 'streaming.started', 'id': '7c5c37ba-1c04-4567-bfcd-552913d45959', 'occurred_at': '2026-01-10T12:45:07.938808Z', 'payload': {'call_control_id': 'v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q', 'call_leg_id': '2eb07eb8-ee22-11f0-aa9c-02420aef93a0', 'call_session_id': '2ead92b6-ee22-11f0-9231-02420aef93a0', 'client_state': None, 'connection_id': '2777245537294877821', 'stream_id': '6e511547-293c-4d03-8cd6-f78a07aa76d2', 'stream_params': {'stream_track': 'inbound', 'stream_url': 'wss://api.li-ai.org/api/telnyx/audio-stream'}, 'stream_type': 'websocket'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2026-01-10T12:45:09.076578628Z [err]  2026-01-10 12:45:08,717 - server - WARNING - ‚ö†Ô∏è Failed to start comfort noise: 'v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q'
2026-01-10T12:45:09.076586938Z [err]  2026-01-10 12:45:08,717 - telnyx_service - INFO - üéôÔ∏è Starting recording: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:09.076592643Z [inf]  100.64.0.5:39000 - "GET /api/tts-audio/comfort_noise_continuous.mp3 HTTP/1.1" 200
2026-01-10T12:45:09.076603326Z [err]  2026-01-10 12:45:08,400 - server - INFO - üéØ Event type: streaming.started, Call ID: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:09.076609018Z [err]  2026-01-10 12:45:08,400 - server - INFO - üì® ================================================
2026-01-10T12:45:09.076614214Z [inf]  100.64.0.7:24790 - "POST /api/telnyx/webhook HTTP/1.1" 200
2026-01-10T12:45:09.076619758Z [err]  2026-01-10 12:45:08,438 - telnyx_service - INFO - Telnyx service initialized with connection: 2777245537294877821
2026-01-10T12:45:09.076624526Z [err]  2026-01-10 12:45:08,716 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q/actions/playback_start "HTTP/1.1 200 OK"
2026-01-10T12:45:09.076629933Z [err]  2026-01-10 12:45:08,717 - telnyx_service - INFO - ‚úÖ Playing audio from URL, playback_id: LV2J4-vlOw (loop=True, overlay=True)
2026-01-10T12:45:09.170450244Z [err]  2026-01-10 12:45:09,160 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q/actions/record_start "HTTP/1.1 200 OK"
2026-01-10T12:45:09.170455293Z [err]  2026-01-10 12:45:09,162 - server - INFO - üéôÔ∏è Call recording started for v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:09.170462718Z [err]  2026-01-10 12:45:09,162 - server - INFO - üîß Creating call session for v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q...
2026-01-10T12:45:09.170468848Z [err]  2026-01-10 12:45:09,162 - server - INFO - üîç Agent ID: bbeda238-e8d9-4d8c-b93b-1b7694581adb, User ID: dcafa642-6136-4096-b77d-a4cb99a62651
2026-01-10T12:45:09.170474147Z [err]  2026-01-10 12:45:09,162 - server - INFO - üîß Calling create_call_session() - START
2026-01-10T12:45:09.170478546Z [err]  2026-01-10 12:45:09,163 - core_calling_service - INFO - üîç Checking KB for agent bbeda238-e8d9-4d8c-b93b-1b7694581adb...
2026-01-10T12:45:09.173706444Z [err]  2026-01-10 12:45:09,171 - core_calling_service - INFO - üîç KB count query completed: 4 items
2026-01-10T12:45:09.173717671Z [err]  2026-01-10 12:45:09,171 - core_calling_service - INFO - üìö Agent bbeda238-e8d9-4d8c-b93b-1b7694581adb has 4 KB items - Smart routing enabled (RAG on demand)
2026-01-10T12:45:09.201641617Z [err]  2026-01-10 12:45:09,197 - core_calling_service - INFO - üìã Built cached system prompt: 5065 chars (global) + 1402 chars (technical)
2026-01-10T12:45:09.201648778Z [err]  2026-01-10 12:45:09,197 - core_calling_service - INFO - üìö KB available - will use smart routing (simple chat: NO KB, factual: WITH KB)
2026-01-10T12:45:09.201655034Z [err]  2026-01-10 12:45:09,199 - core_calling_service - INFO - üî• Pre-warming LLM client (grok)...
2026-01-10T12:45:09.287930308Z [err]  2026-01-10 12:45:09,253 - core_calling_service - INFO - üîç KB count query completed: 4 items
2026-01-10T12:45:09.287944394Z [err]  2026-01-10 12:45:09,254 - core_calling_service - INFO - üìö Agent bbeda238-e8d9-4d8c-b93b-1b7694581adb has 4 KB items - Smart routing enabled (RAG on demand)
2026-01-10T12:45:09.287953246Z [err]  2026-01-10 12:45:09,270 - core_calling_service - INFO - üìã Built cached system prompt: 5065 chars (global) + 1402 chars (technical)
2026-01-10T12:45:09.287966122Z [err]  2026-01-10 12:45:09,270 - core_calling_service - INFO - üìö KB available - will use smart routing (simple chat: NO KB, factual: WITH KB)
2026-01-10T12:45:09.287973361Z [err]  2026-01-10 12:45:09,271 - core_calling_service - INFO - üî• Pre-warming LLM client (grok)...
2026-01-10T12:45:09.290766117Z [err]  2026-01-10 12:45:09,288 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2026-01-10T12:45:09.299793518Z [err]  2026-01-10 12:45:09,296 - core_calling_service - INFO - üöÄ Created global HTTP/2 client for LLM calls
2026-01-10T12:45:09.299798071Z [err]  2026-01-10 12:45:09,296 - core_calling_service - INFO - üöÄ Created cached Grok client with HTTP/2
2026-01-10T12:45:09.299803202Z [err]  2026-01-10 12:45:09,297 - core_calling_service - INFO - ‚úÖ LLM client pre-warmed in 97ms
2026-01-10T12:45:09.299807749Z [err]  2026-01-10 12:45:09,297 - server - INFO - ‚úÖ Session created in WebSocket worker
2026-01-10T12:45:09.299811810Z [err]  2026-01-10 12:45:09,297 - server - INFO - ‚è±Ô∏è [WebSocket Worker] Scheduling silence timeout: 2000ms
2026-01-10T12:45:09.299816233Z [err]  2026-01-10 12:45:09,297 - server - INFO - ‚è±Ô∏è [WebSocket Worker] Silence timeout task scheduled!
2026-01-10T12:45:09.299820428Z [err]  2026-01-10 12:45:09,297 - server - INFO - üìû Call data loaded, starting SONIOX connection...
2026-01-10T12:45:09.301995502Z [err]  2026-01-10 12:45:09,299 - server - INFO - ‚úÖ Initialized call_states for v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q with session reference
2026-01-10T12:45:09.302018582Z [err]  2026-01-10 12:45:09,300 - server - INFO - ‚è±Ô∏è [WebSocket Worker] Silence timeout task started, waiting 2000ms...
2026-01-10T12:45:09.776136970Z [err]  2026-01-10 12:45:09,357 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2026-01-10T12:45:09.776142747Z [err]  2026-01-10 12:45:09,369 - core_calling_service - INFO - üöÄ Created global HTTP/2 client for LLM calls
2026-01-10T12:45:09.776147432Z [err]  2026-01-10 12:45:09,370 - core_calling_service - INFO - üöÄ Created cached Grok client with HTTP/2
2026-01-10T12:45:09.776152146Z [err]  2026-01-10 12:45:09,370 - core_calling_service - INFO - ‚úÖ LLM client pre-warmed in 99ms
2026-01-10T12:45:09.776157323Z [err]  2026-01-10 12:45:09,370 - server - INFO - üîß Calling create_call_session() - COMPLETE
2026-01-10T12:45:09.776163908Z [err]  2026-01-10 12:45:09,370 - server - INFO - ‚úÖ Session object created: CallSession
2026-01-10T12:45:09.776168334Z [err]  2026-01-10 12:45:09,377 - redis_service - INFO - üì¶ Stored call data in Redis: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q (TTL: 3600s)
2026-01-10T12:45:09.776173045Z [err]  2026-01-10 12:45:09,377 - server - INFO - ‚úÖ Serializable call_data synced to Redis (agent_id, user_id)
2026-01-10T12:45:09.776177609Z [err]  2026-01-10 12:45:09,378 - server - INFO - ‚úÖ Session stored in worker memory (not Redis)
2026-01-10T12:45:09.776181531Z [err]  2026-01-10 12:45:09,379 - redis_service - INFO - ‚úÖ Marked session ready in Redis: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:09.776187040Z [err]  2026-01-10 12:45:09,379 - server - INFO - ü§ñ AI session created for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:09.776191340Z [err]  2026-01-10 12:45:09,379 - server - INFO - üì¶ Custom variables injected: {'lead_id': None, 'qc_tracking_enabled': False, 'track_keywords': '', 'expected_commitment': 'not_specified', 'to_number': '+17708336397', 'phone_number': '+17708336397', 'email': None, 'from_number': '+14048000152'}
2026-01-10T12:45:09.776195723Z [err]  2026-01-10 12:45:09,379 - server - INFO - ‚è≠Ô∏è Skipping persistent TTS creation in webhook - will create on-demand with telnyx_ws
2026-01-10T12:45:09.777318216Z [err]  2026-01-10 12:45:09,395 - server - INFO - üîë Using user's Soniox API key (first 10 chars): b999f22d7b...
2026-01-10T12:45:09.777332801Z [err]  2026-01-10 12:45:09,379 - server - INFO - üë§ Who speaks first: user, aiSpeaksAfterSilence: True, timeout: 2000ms
2026-01-10T12:45:09.777339647Z [err]  2026-01-10 12:45:09,379 - server - INFO - üëÇ User speaks first - waiting for user input...
2026-01-10T12:45:09.777345770Z [err]  2026-01-10 12:45:09,379 - server - INFO - üõ°Ô∏è Voicemail timeout protection started (15000ms)
2026-01-10T12:45:09.777350928Z [err]  2026-01-10 12:45:09,379 - server - INFO - ‚è±Ô∏è AI will speak after 2000ms of silence (scheduled in WebSocket worker)
2026-01-10T12:45:09.777355873Z [err]  2026-01-10 12:45:09,379 - server - INFO - üé§ Voice flow - streaming started via dial command
2026-01-10T12:45:09.777361739Z [err]  2026-01-10 12:45:09,385 - redis_service - INFO - üì• Retrieved call data from Redis: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:09.777366272Z [err]  2026-01-10 12:45:09,386 - server - INFO - ü§ê No greeting - waiting for user to speak first
2026-01-10T12:45:09.777374206Z [err]  2026-01-10 12:45:09,386 - server - INFO - üé§ Voice flow - WebSocket streaming already initiated
2026-01-10T12:45:09.777378596Z [inf]  100.64.0.6:12936 - "POST /api/telnyx/webhook HTTP/1.1" 200
2026-01-10T12:45:09.911236516Z [err]  2026-01-10 12:45:09,901 - soniox_service - INFO - ‚úÖ Connected to Soniox Real-Time STT
2026-01-10T12:45:09.911256606Z [err]  2026-01-10 12:45:09,901 - soniox_service - INFO - ‚öôÔ∏è  Config: model=stt-rt-v3, format=mulaw, rate=8000Hz, channels=1
2026-01-10T12:45:09.911266821Z [err]  2026-01-10 12:45:09,901 - soniox_service - INFO - ‚öôÔ∏è  Endpoint detection: True, Speaker diarization: False
2026-01-10T12:45:09.932345679Z [err]  2026-01-10 12:45:09,924 - telnyx_service - INFO - Telnyx service initialized with connection: 2777245537294877821
2026-01-10T12:45:09.932356377Z [err]  2026-01-10 12:45:09,924 - dead_air_monitor - INFO - üîá Dead air monitoring started for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:09.932363565Z [err]  2026-01-10 12:45:09,925 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:HAthGByfra9BUS24U... (active sessions: [])
2026-01-10T12:45:09.932501788Z [err]  2026-01-10 12:45:09,926 - server - INFO - ‚úÖ Started forwarding audio (8kHz mulaw ‚Üí Soniox, NO BUFFERING)
2026-01-10T12:45:10.946817189Z [err]  2026-01-10 12:45:10,632 - server - INFO - üî§ RAW TOKENS: ["Hell"?]
2026-01-10T12:45:10.946826043Z [err]  2026-01-10 12:45:10,637 - core_calling_service - INFO - üîä Silence timer reset for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q (user started speaking)
2026-01-10T12:45:10.946870362Z [err]  2026-01-10 12:45:10,381 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2026-01-10T12:45:10.946879246Z [err]  2026-01-10 12:45:10,381 - server - INFO - üì® Full payload: {'data': {'event_type': 'call.playback.started', 'id': '9f1ca3f6-2f5b-4272-865a-d0fc8182eda9', 'occurred_at': '2026-01-10T12:45:09.938805Z', 'payload': {'call_control_id': 'v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q', 'call_leg_id': '2eb07eb8-ee22-11f0-aa9c-02420aef93a0', 'call_session_id': '2ead92b6-ee22-11f0-9231-02420aef93a0', 'client_state': None, 'connection_id': '2777245537294877821', 'media_name': None, 'media_url': 'api.li-ai.org/api/tts-audio/comfort_noise_continuous.mp3', 'overlay': True, 'playback_id': 'LV2J4-vlOw', 'start_time': '2026-01-10T12:45:09.938805Z'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2026-01-10T12:45:10.946887466Z [err]  2026-01-10 12:45:10,381 - server - INFO - üéØ Event type: call.playback.started, Call ID: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:10.946896227Z [err]  2026-01-10 12:45:10,381 - server - INFO - üì® ================================================
2026-01-10T12:45:10.946904323Z [inf]  100.64.0.8:43908 - "POST /api/telnyx/webhook HTTP/1.1" 200
2026-01-10T12:45:10.946911549Z [err]  2026-01-10 12:45:10,428 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:HAthGByfra9BUS24U... (active sessions: [])
2026-01-10T12:45:10.946925274Z [err]  2026-01-10 12:45:10,428 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=False, user_speaking=False, silence=0.0s, checkin_count=0/2
2026-01-10T12:45:10.950168078Z [err]  2026-01-10 12:45:10,637 - core_calling_service - INFO - üë§ User started speaking for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:10.950177014Z [err]  2026-01-10 12:45:10,637 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:HAthGByfra9BUS24U... (active sessions: [])
2026-01-10T12:45:10.950183795Z [err]  2026-01-10 12:45:10,637 - server - WARNING - ‚ö†Ô∏è [REAL TIMING] No TTS session found to clear for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:10.950190427Z [err]  2026-01-10 12:45:10,643 - redis_service - INFO - üì• Retrieved call data from Redis: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:10.950196718Z [err]  2026-01-10 12:45:10,651 - redis_service - INFO - üì¶ Stored call data in Redis: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q (TTL: 3600s)
2026-01-10T12:45:10.950203002Z [err]  2026-01-10 12:45:10,651 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Hell' | Generating: False
2026-01-10T12:45:10.950209732Z [err]  2026-01-10 12:45:10,740 - server - INFO - üî§ RAW TOKENS: ["Hell"‚úì, "o."‚úì, "<end>"‚úì]
2026-01-10T12:45:10.950216809Z [err]  2026-01-10 12:45:10,740 - server - INFO - üéØ Endpoint detected: <end> token received
2026-01-10T12:45:10.950223185Z [err]  2026-01-10 12:45:10,740 - server - INFO - üì• FINAL TOKENS: 'Hell o.' (2 tokens)
2026-01-10T12:45:10.950229517Z [err]  2026-01-10 12:45:10,740 - server - INFO - üé§ Soniox final transcript: 'Hell o.'
2026-01-10T12:45:10.950235371Z [err]  2026-01-10 12:45:10,741 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:HAthGByfra9BUS24U... (active sessions: [])
2026-01-10T12:45:10.950240242Z [err]  2026-01-10 12:45:10,741 - server - INFO - üîç FILTER CHECK: words=2, is_filler=False, is_garbled=False, tts_speaking=False, time_until_done=0.0s, generating=False, playbacks=0, is_active=False
2026-01-10T12:45:10.951033479Z [err]  2026-01-10 12:45:10,741 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:HAthGByfra9BUS24U... (active sessions: [])
2026-01-10T12:45:10.951041079Z [err]  2026-01-10 12:45:10,741 - server - INFO - üöÄ Spawned tracked background task for endpoint processing
2026-01-10T12:45:10.951047198Z [err]  2026-01-10 12:45:10,741 - server - INFO - ‚è±Ô∏è [12:45:10.741] üìù FINAL TRANSCRIPT RECEIVED: 'Hell o.'
2026-01-10T12:45:10.951053231Z [err]  2026-01-10 12:45:10,741 - server - INFO - ‚è±Ô∏è [12:45:10.741] STT endpoint detection latency: 14ms
2026-01-10T12:45:10.951059015Z [err]  2026-01-10 12:45:10,741 - server - INFO - ‚è±Ô∏è [12:45:10.741] üé§ USER STOPPED SPEAKING - Beginning processing pipeline
2026-01-10T12:45:10.951065735Z [err]  2026-01-10 12:45:10,741 - server - INFO - ‚è±Ô∏è User spoke at 1768049110.7418613
2026-01-10T12:45:10.951072147Z [err]  2026-01-10 12:45:10,743 - redis_service - INFO - üì¶ Stored call data in Redis: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q (TTL: 3600s)
2026-01-10T12:45:10.951078006Z [err]  2026-01-10 12:45:10,743 - server - INFO - üë§ User has spoken - aiSpeaksAfterSilence timer cancelled if pending
2026-01-10T12:45:10.951085542Z [err]  2026-01-10 12:45:10,743 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:HAthGByfra9BUS24U... (active sessions: [])
2026-01-10T12:45:10.951091970Z [err]  2026-01-10 12:45:10,743 - server - INFO - ‚úÖ Agent SILENT - User said 2 word(s): 'Hell o.' - Processing...
2026-01-10T12:45:10.951097808Z [err]  2026-01-10 12:45:10,753 - server - INFO - üìä [REAL TIMING] STT: User audio end ‚Üí Transcript received: -4ms
2026-01-10T12:45:10.951104410Z [err]  2026-01-10 12:45:10,753 - server - INFO - üé§ Endpoint detected by Soniox - processing transcript: Hell o.
2026-01-10T12:45:10.951110869Z [err]  2026-01-10 12:45:10,753 - core_calling_service - INFO - üë§ User stopped speaking for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:10.954229439Z [err]  2026-01-10 12:45:10,849 - redis_service - INFO - üì• Retrieved call data from Redis: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:10.954239905Z [err]  2026-01-10 12:45:10,850 - core_calling_service - WARNING - üö® BARGE-IN DETECTED for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q: User spoke while Silence Greeting was triggering
2026-01-10T12:45:10.954251375Z [err]  2026-01-10 12:45:10,873 - telnyx_service - INFO - Telnyx service initialized with connection: 2777245537294877821
2026-01-10T12:45:10.954278767Z [err]  2026-01-10 12:45:10,753 - server - INFO - ‚è±Ô∏è [TIMING] STT_START: User last audio packet received
2026-01-10T12:45:10.954296982Z [err]  2026-01-10 12:45:10,753 - server - INFO - ‚è±Ô∏è [TIMING] STT_END: Endpoint detected at T+6ms
2026-01-10T12:45:10.954309288Z [err]  2026-01-10 12:45:10,753 - server - INFO - ‚è±Ô∏è [TIMING] STT_LATENCY: 6ms (Soniox model: stt-rt-v3)
2026-01-10T12:45:10.954321920Z [err]  2026-01-10 12:45:10,753 - server - INFO - ‚è±Ô∏è  USER STOPPED SPEAKING at T=0ms
2026-01-10T12:45:10.954333143Z [err]  2026-01-10 12:45:10,753 - server - INFO - üìä [REAL TIMING] Processing start: 26ms after user audio end
2026-01-10T12:45:10.954343820Z [err]  2026-01-10 12:45:10,753 - server - INFO - üéôÔ∏è Agent generating response - interruption detection active
2026-01-10T12:45:10.954352283Z [err]  2026-01-10 12:45:10,753 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:10.954360714Z [err]  2026-01-10 12:45:10,848 - server - INFO - üìù Saved user transcript to database
2026-01-10T12:45:10.954370397Z [err]  2026-01-10 12:45:10,848 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:HAthGByfra9BUS24U... (active sessions: [])
2026-01-10T12:45:10.954379118Z [err]  2026-01-10 12:45:10,848 - core_calling_service - INFO - ‚è±Ô∏è [12:45:10.848] üì• process_user_input() ENTRY - text: 'Hell o....'
2026-01-10T12:45:10.957034299Z [err]  2026-01-10 12:45:10,874 - telnyx_service - INFO - üõë Stopping audio playback on call: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:10.957047183Z [err]  2026-01-10 12:45:10,930 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:HAthGByfra9BUS24U... (active sessions: [])
2026-01-10T12:45:10.957058647Z [err]  2026-01-10 12:45:10,930 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:HAthGByfra9BUS24U... (active sessions: [])
2026-01-10T12:45:10.957066436Z [err]  2026-01-10 12:45:10,930 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=True, user_speaking=False, silence=0.0s, checkin_count=0/2
2026-01-10T12:45:11.193799247Z [err]  2026-01-10 12:45:11,189 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q/actions/playback_stop "HTTP/1.1 200 OK"
2026-01-10T12:45:11.193813315Z [err]  2026-01-10 12:45:11,190 - telnyx_service - INFO - ‚úÖ Successfully stopped audio playback
2026-01-10T12:45:11.193824814Z [err]  2026-01-10 12:45:11,190 - core_calling_service - INFO - ‚úÖ BARGE-IN: Audio playback STOPPED
2026-01-10T12:45:11.193831152Z [err]  2026-01-10 12:45:11,190 - core_calling_service - INFO - ‚úÖ BARGE-IN: Preserving silence greeting in history to maintain context
2026-01-10T12:45:11.193835986Z [err]  2026-01-10 12:45:11,191 - redis_service - INFO - üì• Retrieved call data from Redis: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:11.197944132Z [err]  2026-01-10 12:45:11,193 - redis_service - INFO - üì¶ Stored call data in Redis: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q (TTL: 3600s)
2026-01-10T12:45:11.197955086Z [err]  2026-01-10 12:45:11,193 - core_calling_service - INFO - ‚úÖ BARGE-IN: Reset silence_greeting_triggered flag
2026-01-10T12:45:11.197962965Z [err]  2026-01-10 12:45:11,193 - core_calling_service - INFO - ‚è±Ô∏è [12:45:11.193] ‚è© About to call _process_call_flow_streaming()
2026-01-10T12:45:11.197970222Z [err]  2026-01-10 12:45:11,193 - core_calling_service - INFO - ‚è±Ô∏è [12:45:11.193] üîÄ Agent type: call_flow, calling flow processor...
2026-01-10T12:45:11.197976913Z [err]  2026-01-10 12:45:11,193 - core_calling_service - INFO - ‚è±Ô∏è [12:45:11.193] üîÄ _process_call_flow_streaming() ENTRY
2026-01-10T12:45:11.197983737Z [err]  2026-01-10 12:45:11,193 - core_calling_service - INFO - Flow processing - History length: 1, Is first: True
2026-01-10T12:45:11.197990699Z [err]  2026-01-10 12:45:11,193 - core_calling_service - INFO - ‚è±Ô∏è [12:45:11.193] ‚úÖ Node selected, about to process content...
2026-01-10T12:45:11.197997136Z [err]  2026-01-10 12:45:11,193 - core_calling_service - INFO - üîß Replaced {{now}} with Saturday, January 10, 2026 at 7:45 AM EST in content
2026-01-10T12:45:11.198003708Z [err]  2026-01-10 12:45:11,193 - core_calling_service - INFO - üîß Replaced {{customer_name}} with  in content
2026-01-10T12:45:11.198010545Z [err]  2026-01-10 12:45:11,193 - core_calling_service - INFO - üîß Replaced {{callerName}} with  in content
2026-01-10T12:45:11.198016616Z [err]  2026-01-10 12:45:11,193 - core_calling_service - INFO - üîß Replaced {{lead_id}} with None in content
2026-01-10T12:45:11.198022596Z [err]  2026-01-10 12:45:11,193 - core_calling_service - INFO - üîß Replaced {{qc_tracking_enabled}} with False in content
2026-01-10T12:45:11.198027971Z [err]  2026-01-10 12:45:11,193 - core_calling_service - INFO - üîß Replaced {{track_keywords}} with  in content
2026-01-10T12:45:11.202045069Z [err]  2026-01-10 12:45:11,193 - core_calling_service - INFO - üîß Replaced {{expected_commitment}} with not_specified in content
2026-01-10T12:45:11.202052966Z [err]  2026-01-10 12:45:11,194 - core_calling_service - INFO - ‚è±Ô∏è [12:45:11.194] üìÑ About to process content (mode=script, length=1)
2026-01-10T12:45:11.202067718Z [err]  2026-01-10 12:45:11,194 - core_calling_service - INFO - üì§ Streaming script as 1 sentence(s)
2026-01-10T12:45:11.202070811Z [err]  2026-01-10 12:45:11,193 - core_calling_service - INFO - üîß Replaced {{to_number}} with +17708336397 in content
2026-01-10T12:45:11.202077407Z [err]  2026-01-10 12:45:11,194 - server - INFO - üì§ Sentence arrived from LLM: ?...
2026-01-10T12:45:11.202080409Z [err]  2026-01-10 12:45:11,193 - core_calling_service - INFO - üîß Replaced {{phone_number}} with +17708336397 in content
2026-01-10T12:45:11.202087057Z [err]  2026-01-10 12:45:11,194 - server - INFO - ‚è±Ô∏è [TIMING] TTFS (Time To First Sentence): 440ms
2026-01-10T12:45:11.202092423Z [err]  2026-01-10 12:45:11,193 - core_calling_service - INFO - üîß Replaced {{email}} with None in content
2026-01-10T12:45:11.202096656Z [err]  2026-01-10 12:45:11,194 - server - INFO - ‚ö° Starting REAL-TIME TTS for first sentence
2026-01-10T12:45:11.202100891Z [err]  2026-01-10 12:45:11,193 - core_calling_service - INFO - ‚úÖ Using explicit SCRIPT mode (length: 1 chars) - will return text instantly
2026-01-10T12:45:11.202107346Z [err]  2026-01-10 12:45:11,194 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:HAthGByfra9BUS24U... (active sessions: [])
2026-01-10T12:45:11.202111183Z [err]  2026-01-10 12:45:11,193 - core_calling_service - INFO - Using flow node: Greeting (type: conversation, mode: script)
2026-01-10T12:45:11.202117613Z [err]  2026-01-10 12:45:11,194 - core_calling_service - INFO - üìö skip_mandatory_precheck=true - skipping pre-response mandatory check, will check on transition
2026-01-10T12:45:11.204927388Z [err]  2026-01-10 12:45:11,194 - server - INFO - ‚ö° ON-DEMAND: Creating persistent TTS session (multi-worker mode)
2026-01-10T12:45:11.291594572Z [err]  2026-01-10 12:45:11,282 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2026-01-10T12:45:11.303448405Z [err]  2026-01-10 12:45:11,301 - redis_service - INFO - üì• Retrieved call data from Redis: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:11.303456644Z [err]  2026-01-10 12:45:11,301 - server - INFO - ‚è±Ô∏è [WebSocket Worker] Silence timeout: User already spoke, skipping greeting
2026-01-10T12:45:11.935602309Z [err]  2026-01-10 12:45:11,370 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2026-01-10T12:45:11.935608408Z [err]  2026-01-10 12:45:11,434 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:HAthGByfra9BUS24U... (active sessions: [])
2026-01-10T12:45:11.935621919Z [err]  2026-01-10 12:45:11,435 - persistent_tts_service - WARNING - ‚ö†Ô∏è  No persistent TTS session found for call v3:HAthGByfra9BUS24U... (active sessions: [])
2026-01-10T12:45:11.935629878Z [err]  2026-01-10 12:45:11,439 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2026-01-10T12:45:11.935636911Z [err]  2026-01-10 12:45:11,439 - server - INFO - üì® Full payload: {'data': {'event_type': 'call.machine.premium.detection.ended', 'id': '6c430ef3-c545-4a77-ac9c-171f45460612', 'occurred_at': '2026-01-10T12:45:10.998812Z', 'payload': {'call_control_id': 'v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q', 'call_leg_id': '2eb07eb8-ee22-11f0-aa9c-02420aef93a0', 'call_session_id': '2ead92b6-ee22-11f0-9231-02420aef93a0', 'client_state': None, 'connection_id': '2777245537294877821', 'from': '+14048000152', 'result': 'human_residence', 'to': '+17708336397'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2026-01-10T12:45:11.935643409Z [err]  2026-01-10 12:45:11,439 - server - INFO - üéØ Event type: call.machine.premium.detection.ended, Call ID: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:11.935649829Z [err]  2026-01-10 12:45:11,439 - server - INFO - üì® ================================================
2026-01-10T12:45:11.935656569Z [inf]  100.64.0.4:21320 - "POST /api/telnyx/webhook HTTP/1.1" 200
2026-01-10T12:45:11.935663552Z [err]  2026-01-10 12:45:11,457 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2026-01-10T12:45:11.935673857Z [err]  2026-01-10 12:45:11,486 - telnyx_service - INFO - Telnyx service initialized with connection: 2777245537294877821
2026-01-10T12:45:11.939600441Z [err]  2026-01-10 12:45:11,486 - server - INFO - ‚úÖ ON-DEMAND: Using Telnyx WebSocket from closure for streaming audio
2026-01-10T12:45:11.939610819Z [err]  2026-01-10 12:45:11,486 - persistent_tts_service - INFO - üéôÔ∏è Extracted voice_settings from agent config: {'stability': 0.6, 'similarity_boost': 0.65, 'style': 0.2, 'use_speaker_boost': True}
2026-01-10T12:45:11.939617910Z [err]  2026-01-10 12:45:11,486 - persistent_tts_service - INFO - üîå [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] Establishing persistent TTS WebSocket...
2026-01-10T12:45:11.939625561Z [err]  2026-01-10 12:45:11,486 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] Voice settings: {'stability': 0.6, 'similarity_boost': 0.65, 'style': 0.2, 'use_speaker_boost': True}
2026-01-10T12:45:11.939632635Z [err]  2026-01-10 12:45:11,486 - elevenlabs_ws_service - INFO - üîå Connecting to ElevenLabs WebSocket: voice=J5iaaqzR5zn6HFG4jV3b, model=eleven_turbo_v2_5
2026-01-10T12:45:11.939640020Z [err]  2026-01-10 12:45:11,486 - elevenlabs_ws_service - INFO - üéôÔ∏è Voice settings: stability=0.6, similarity=0.65, style=0.2
2026-01-10T12:45:11.939652177Z [err]  2026-01-10 12:45:11,628 - elevenlabs_ws_service - INFO - ‚úÖ Connected to ElevenLabs WebSocket
2026-01-10T12:45:11.939660844Z [err]  2026-01-10 12:45:11,629 - elevenlabs_ws_service - INFO - üì§ Sent BOS message with voice settings
2026-01-10T12:45:11.939669267Z [err]  2026-01-10 12:45:11,629 - persistent_tts_service - INFO - ‚úÖ [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] Persistent TTS WebSocket established
2026-01-10T12:45:11.939677276Z [err]  2026-01-10 12:45:11,629 - persistent_tts_service - INFO - üéß [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] Continuous audio receiver started
2026-01-10T12:45:11.939686135Z [err]  2026-01-10 12:45:11,629 - persistent_tts_service - INFO - üîä [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] Comfort noise loop started
2026-01-10T12:45:11.940326555Z [err]  2026-01-10 12:45:11,629 - persistent_tts_service - INFO - ‚úÖ Created persistent TTS session for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:11.940338371Z [err]  2026-01-10 12:45:11,629 - server - INFO - ‚úÖ ON-DEMAND: Persistent TTS session created successfully!
2026-01-10T12:45:11.940348800Z [err]  2026-01-10 12:45:11,629 - server - INFO - üîç Persistent TTS lookup: call_id=v3:HAthGByfra9BUS24U..., session=FOUND
2026-01-10T12:45:11.940356747Z [err]  2026-01-10 12:45:11,629 - server - INFO - üöÄ Streaming sentence #1 via persistent WebSocket
2026-01-10T12:45:11.940362359Z [err]  2026-01-10 12:45:11,629 - server - INFO - üéµ TTS task #1 started at +434ms
2026-01-10T12:45:11.940368621Z [err]  2026-01-10 12:45:11,629 - server - INFO - ‚è±Ô∏è [TIMING] TTFT_TTS (First TTS Task Started): 875ms
2026-01-10T12:45:11.940374678Z [err]  2026-01-10 12:45:11,629 - core_calling_service - INFO - üì§ Streamed script sentence 1/1: ?...
2026-01-10T12:45:11.940381299Z [err]  2026-01-10 12:45:11,629 - core_calling_service - INFO - üîä Silence tracking reset for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q (user responded)
2026-01-10T12:45:11.940388279Z [err]  2026-01-10 12:45:11,629 - core_calling_service - INFO - ‚úÖ User responded to regular message, resetting counter
2026-01-10T12:45:11.940394671Z [err]  2026-01-10 12:45:11,629 - core_calling_service - INFO - üíæ Storing node ID 2 in conversation history
2026-01-10T12:45:11.940402641Z [err]  2026-01-10 12:45:11,629 - core_calling_service - INFO - LLM response (0.78s): ?
2026-01-10T12:45:11.940409879Z [err]  2026-01-10 12:45:11,629 - core_calling_service - INFO - Total latency: 0.78s
2026-01-10T12:45:11.940417492Z [err]  2026-01-10 12:45:11,631 - server - INFO - ‚úÖ LLM finished in 877ms, TTS tasks already running in background
2026-01-10T12:45:11.940429949Z [err]  2026-01-10 12:45:11,631 - server - INFO - üéµ Streaming 1 TTS chunks as they complete...
2026-01-10T12:45:11.943055660Z [err]  2026-01-10 12:45:11,631 - server - INFO - üöÄ Persistent TTS: Audio already streaming in background!
2026-01-10T12:45:11.943062806Z [err]  2026-01-10 12:45:11,631 - server - INFO -    1 sentences queued and playing seamlessly
2026-01-10T12:45:11.943067878Z [err]  2026-01-10 12:45:11,632 - persistent_tts_service - INFO - üéµ [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] Playback consumer started
2026-01-10T12:45:11.943072572Z [err]  2026-01-10 12:45:11,632 - persistent_tts_service - INFO - üéß [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] Continuous Audio Receiver STARTED
2026-01-10T12:45:11.943077750Z [err]  2026-01-10 12:45:11,632 - persistent_tts_service - INFO - üíì [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] Starting TTS keep-alive loop (every 15s)
2026-01-10T12:45:11.943082751Z [err]  2026-01-10 12:45:11,632 - persistent_tts_service - INFO - üîä [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] Starting comfort noise loop
2026-01-10T12:45:11.943087836Z [err]  2026-01-10 12:45:11,632 - persistent_tts_service - INFO - üé§ [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] Streaming sentence #1: ?...
2026-01-10T12:45:11.943092254Z [err]  2026-01-10 12:45:11,632 - persistent_tts_service - INFO - üöÄ [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] Sent sentence #1 to ElevenLabs in 0ms (non-blocking)
2026-01-10T12:45:11.943097068Z [err]  2026-01-10 12:45:11,632 - persistent_tts_service - INFO - üìä [REAL TIMING] TEXT SENT TO ELEVENLABS: '?...'
2026-01-10T12:45:11.943101849Z [err]  2026-01-10 12:45:11,632 - server - INFO - ‚úÖ All 1 persistent TTS streams completed
2026-01-10T12:45:11.943105839Z [err]  2026-01-10 12:45:11,633 - server - INFO - ‚úÖ Agent generation complete (persistent TTS) - response window closed
2026-01-10T12:45:11.943113758Z [err]  2026-01-10 12:45:11,633 - server - INFO - ‚è±Ô∏è  FIRST AUDIO STARTED: 879ms from user stop üöÄ
2026-01-10T12:45:11.946509424Z [err]  2026-01-10 12:45:11,633 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:11.946520157Z [err]  2026-01-10 12:45:11,633 - server - INFO - ‚úÖ Agent generation complete - response window closed
2026-01-10T12:45:11.946527678Z [err]  2026-01-10 12:45:11,633 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2026-01-10T12:45:11.946533242Z [err]  2026-01-10 12:45:11,633 - server - INFO - ‚è±Ô∏è  [TIMING] ==== E2E LATENCY SUMMARY ====
2026-01-10T12:45:11.946538411Z [err]  2026-01-10 12:45:11,633 - server - INFO - ‚è±Ô∏è  [TIMING] STT: 6ms (provider: soniox, model: stt-rt-v3)
2026-01-10T12:45:11.946545167Z [err]  2026-01-10 12:45:11,633 - server - INFO - ‚è±Ô∏è  [TIMING] LLM_TOTAL: 877ms (provider: grok, model: grok-4-1-fast-non-reasoning)
2026-01-10T12:45:11.946551869Z [err]  2026-01-10 12:45:11,633 - server - INFO - ‚è±Ô∏è  [TIMING] TTS_TOTAL: 438ms (provider: elevenlabs, websocket: False)
2026-01-10T12:45:11.946558380Z [err]  2026-01-10 12:45:11,633 - server - INFO - ‚è±Ô∏è  [TIMING] E2E_TOTAL: 879ms (user stopped ‚Üí play_audio_url called)
2026-01-10T12:45:11.946564067Z [err]  2026-01-10 12:45:11,633 - server - INFO - ‚è±Ô∏è  [TIMING] ‚ö†Ô∏è NOTE: E2E_TOTAL does not include:
2026-01-10T12:45:11.946570186Z [err]  2026-01-10 12:45:11,633 - server - INFO - ‚è±Ô∏è  [TIMING]   - Telnyx processing time (~50-200ms)
2026-01-10T12:45:11.946574778Z [err]  2026-01-10 12:45:11,633 - server - INFO - ‚è±Ô∏è  [TIMING]   - Network latency to user's phone (~50-150ms)
2026-01-10T12:45:11.946579796Z [err]  2026-01-10 12:45:11,633 - server - INFO - ‚è±Ô∏è  [TIMING]   - Phone audio buffering (~50-200ms)
2026-01-10T12:45:11.946586450Z [err]  2026-01-10 12:45:11,633 - server - INFO - ‚è±Ô∏è  [TIMING]   - TOTAL MISSING: ~150-550ms typically
2026-01-10T12:45:11.949205625Z [err]  2026-01-10 12:45:11,633 - server - INFO - ‚è±Ô∏è  [TIMING]   - REAL USER LATENCY: 1179ms estimated
2026-01-10T12:45:11.949215111Z [err]  2026-01-10 12:45:11,633 - server - INFO - ‚è±Ô∏è  [TIMING] RESPONSE_TEXT: 1 chars, 1 sentences
2026-01-10T12:45:11.949222301Z [err]  2026-01-10 12:45:11,633 - server - INFO - ‚è±Ô∏è  [TIMING] USER_INPUT: 'Hell o....'
2026-01-10T12:45:11.949227940Z [err]  2026-01-10 12:45:11,633 - server - INFO - ‚è±Ô∏è  [TIMING] AI_RESPONSE: '?...'
2026-01-10T12:45:11.949233783Z [err]  2026-01-10 12:45:11,633 - server - INFO - ‚è±Ô∏è  [TIMING] ==========================
2026-01-10T12:45:11.949240935Z [err]  2026-01-10 12:45:11,633 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2026-01-10T12:45:11.949246612Z [err]  2026-01-10 12:45:11,821 - server - INFO - üìù Saved assistant transcript and latency to database (Node: Greeting, Dead Air: 1321ms)
2026-01-10T12:45:11.949252189Z [err]  2026-01-10 12:45:11,821 - server - INFO - üîä Agent finished generating, 0 playbacks active - waiting for webhooks to close window and start silence tracking
2026-01-10T12:45:11.949258546Z [err]  2026-01-10 12:45:11,822 - server - INFO - üîç END CALL CHECK: should_end_call=False, max_checkins=False, max_duration=False
2026-01-10T12:45:11.949264791Z [err]  2026-01-10 12:45:11,835 - persistent_tts_service - INFO - üìä [REAL TIMING] ElevenLabs FIRST AUDIO CHUNK received (chunk #1, 3328 bytes)
2026-01-10T12:45:11.949270550Z [err]  2026-01-10 12:45:11,835 - persistent_tts_service - INFO - üìä [REAL TIMING] PLAYBACK CONSUMER: First chunk arrived, queue latency: 0ms
2026-01-10T12:45:11.949276335Z [err]  2026-01-10 12:45:11,836 - persistent_tts_service - INFO - ‚è±Ô∏è [TIMING] TTFA (Time To First Audio Playback): 203ms
2026-01-10T12:45:11.949281672Z [err]  2026-01-10 12:45:11,836 - persistent_tts_service - INFO - üì§ Sending 3328 bytes of audio (21 chunks, 0.4s duration) via WebSocket
2026-01-10T12:45:11.951710318Z [err]  2026-01-10 12:45:11,836 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T12:45:11.951719814Z [err]  2026-01-10 12:45:11,836 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +0.4s (total: 0.4s from now)
2026-01-10T12:45:11.951727501Z [err]  2026-01-10 12:45:11,836 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768049111.836 (chunk 1/21, 160 bytes)
2026-01-10T12:45:12.044769203Z [err]  2026-01-10 12:45:12,041 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 21 CHUNKS SENT TO TELNYX in 205ms (audio duration: 0.4s, paced after 10 chunks)
2026-01-10T12:45:12.044780834Z [err]  2026-01-10 12:45:12,042 - persistent_tts_service - INFO - ‚úÖ Sent 21 audio chunks via WebSocket (paced sending enabled)
2026-01-10T12:45:12.930789466Z [err]  2026-01-10 12:45:12,439 - dead_air_monitor - INFO - ‚è±Ô∏è Playback expected end time passed (0.2s ago), marking agent as done speaking
2026-01-10T12:45:12.930795806Z [err]  2026-01-10 12:45:12,439 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1768049112.4398928 for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:12.930802701Z [err]  2026-01-10 12:45:12,439 - core_calling_service - INFO - ü§ñ Agent stopped speaking for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:12.930808611Z [err]  2026-01-10 12:45:12,542 - persistent_tts_service - INFO - üîá [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] FLOOR RELEASED (is_holding_floor=False)
2026-01-10T12:45:15.085746266Z [err]  2026-01-10 12:45:14,930 - server - INFO - üì§ Audio flowing: 341 packets sent to Soniox (5s update)
2026-01-10T12:45:16.133292367Z [err]  2026-01-10 12:45:15,995 - server - INFO - üî§ RAW TOKENS: [" Ye"?]
2026-01-10T12:45:16.133308701Z [err]  2026-01-10 12:45:15,995 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER RESET (user started speaking) for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:16.133324586Z [err]  2026-01-10 12:45:15,996 - core_calling_service - INFO - üîä Silence timer reset for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q (user started speaking)
2026-01-10T12:45:16.133333950Z [err]  2026-01-10 12:45:15,996 - core_calling_service - INFO - üë§ User started speaking for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:16.133347828Z [err]  2026-01-10 12:45:15,996 - persistent_tts_service - INFO - ‚ö° [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] CLEAR_AUDIO called - pending_sentences=0, audio_queue=0
2026-01-10T12:45:16.133356137Z [err]  2026-01-10 12:45:15,996 - persistent_tts_service - INFO - üõë [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] INTERRUPT - Floor Released (is_holding_floor=False)
2026-01-10T12:45:16.133363360Z [err]  2026-01-10 12:45:16,026 - persistent_tts_service - INFO - üõë [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] Sent clear event to Telnyx WebSocket (3x)
2026-01-10T12:45:16.133372216Z [err]  2026-01-10 12:45:16,027 - persistent_tts_service - INFO - ‚è±Ô∏è [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] Reset playback_expected_end_time to NOW
2026-01-10T12:45:16.133390816Z [err]  2026-01-10 12:45:16,027 - server - INFO - üìä [REAL TIMING] AUDIO QUEUE CLEARED (user started speaking) for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:16.133399037Z [err]  2026-01-10 12:45:16,029 - redis_service - INFO - üì• Retrieved call data from Redis: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:16.133408201Z [err]  2026-01-10 12:45:16,030 - redis_service - INFO - üì¶ Stored call data in Redis: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q (TTL: 3600s)
2026-01-10T12:45:16.133561700Z [err]  2026-01-10 12:45:16,031 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Ye' | Generating: False
2026-01-10T12:45:16.146483504Z [err]  2026-01-10 12:45:16,141 - server - INFO - üî§ RAW TOKENS: [" Ye"‚úì, "ah."‚úì, "<end>"‚úì]
2026-01-10T12:45:16.146499247Z [err]  2026-01-10 12:45:16,142 - server - INFO - üéØ Endpoint detected: <end> token received
2026-01-10T12:45:16.146507722Z [err]  2026-01-10 12:45:16,142 - server - INFO - üßπ Cleaned transcript: ' Ye ah.' -> 'Yeah.'
2026-01-10T12:45:16.146515221Z [err]  2026-01-10 12:45:16,142 - server - INFO - üì• FINAL TOKENS: 'Yeah.' (2 tokens)
2026-01-10T12:45:16.146525836Z [err]  2026-01-10 12:45:16,142 - server - INFO - üé§ Soniox final transcript: 'Yeah.'
2026-01-10T12:45:16.146533773Z [err]  2026-01-10 12:45:16,142 - server - INFO - üîç FILTER CHECK: words=1, is_filler=True, is_garbled=False, tts_speaking=False, time_until_done=-0.1s, generating=False, playbacks=0, is_active=False
2026-01-10T12:45:16.146540591Z [err]  2026-01-10 12:45:16,142 - server - INFO - üöÄ Spawned tracked background task for endpoint processing
2026-01-10T12:45:16.146547808Z [err]  2026-01-10 12:45:16,142 - server - INFO - ‚è±Ô∏è [12:45:16.142] üìù FINAL TRANSCRIPT RECEIVED: 'Yeah.'
2026-01-10T12:45:16.146553552Z [err]  2026-01-10 12:45:16,142 - server - INFO - ‚è±Ô∏è [12:45:16.142] STT endpoint detection latency: 15ms
2026-01-10T12:45:16.146560228Z [err]  2026-01-10 12:45:16,142 - server - INFO - ‚è±Ô∏è [12:45:16.142] üé§ USER STOPPED SPEAKING - Beginning processing pipeline
2026-01-10T12:45:16.146566043Z [err]  2026-01-10 12:45:16,142 - server - INFO - ‚è±Ô∏è User spoke at 1768049116.1429563
2026-01-10T12:45:16.146570782Z [err]  2026-01-10 12:45:16,144 - redis_service - INFO - üì¶ Stored call data in Redis: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q (TTL: 3600s)
2026-01-10T12:45:16.146575477Z [err]  2026-01-10 12:45:16,144 - server - INFO - üë§ User has spoken - aiSpeaksAfterSilence timer cancelled if pending
2026-01-10T12:45:16.146581648Z [err]  2026-01-10 12:45:16,144 - server - INFO - ‚úÖ Agent SILENT - User said 1 word(s): 'Yeah.' - Processing...
2026-01-10T12:45:16.155920444Z [err]  2026-01-10 12:45:16,154 - server - INFO - üìä [REAL TIMING] STT: User audio end ‚Üí Transcript received: -3ms
2026-01-10T12:45:16.155932025Z [err]  2026-01-10 12:45:16,154 - server - INFO - üé§ Endpoint detected by Soniox - processing transcript: Yeah.
2026-01-10T12:45:16.155938099Z [err]  2026-01-10 12:45:16,154 - core_calling_service - INFO - üë§ User stopped speaking for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:16.164729314Z [err]  2026-01-10 12:45:16,157 - server - INFO - ‚úÖ User starting new turn - resetting agent speaking flag
2026-01-10T12:45:16.164736798Z [err]  2026-01-10 12:45:16,157 - server - INFO - ‚è±Ô∏è [TIMING] STT_START: User last audio packet received
2026-01-10T12:45:16.164742577Z [err]  2026-01-10 12:45:16,157 - server - INFO - ‚è±Ô∏è [TIMING] STT_END: Endpoint detected at T+10ms
2026-01-10T12:45:16.164749434Z [err]  2026-01-10 12:45:16,157 - server - INFO - ‚è±Ô∏è [TIMING] STT_LATENCY: 10ms (Soniox model: stt-rt-v3)
2026-01-10T12:45:16.164755727Z [err]  2026-01-10 12:45:16,157 - server - INFO - ‚è±Ô∏è  USER STOPPED SPEAKING at T=0ms
2026-01-10T12:45:16.164763089Z [err]  2026-01-10 12:45:16,157 - server - INFO - üìä [REAL TIMING] Processing start: 30ms after user audio end
2026-01-10T12:45:16.164769900Z [err]  2026-01-10 12:45:16,157 - server - INFO - üéôÔ∏è Agent generating response - interruption detection active
2026-01-10T12:45:16.164779063Z [err]  2026-01-10 12:45:16,158 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:16.258111904Z [err]  2026-01-10 12:45:16,251 - server - INFO - üìù Saved user transcript to database
2026-01-10T12:45:16.258121671Z [err]  2026-01-10 12:45:16,251 - persistent_tts_service - INFO - üîÑ [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] Interrupt flag reset - ready for new audio
2026-01-10T12:45:16.258129595Z [err]  2026-01-10 12:45:16,252 - server - INFO - üîÑ Reset TTS interrupt flag before new response
2026-01-10T12:45:16.258136570Z [err]  2026-01-10 12:45:16,252 - core_calling_service - INFO - ‚è±Ô∏è [12:45:16.252] üì• process_user_input() ENTRY - text: 'Yeah....'
2026-01-10T12:45:16.258144835Z [err]  2026-01-10 12:45:16,253 - redis_service - INFO - üì• Retrieved call data from Redis: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:16.258151648Z [err]  2026-01-10 12:45:16,253 - core_calling_service - WARNING - üö® BARGE-IN DETECTED for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q: User spoke while Silence Greeting was triggering
2026-01-10T12:45:16.292753120Z [err]  2026-01-10 12:45:16,278 - telnyx_service - INFO - Telnyx service initialized with connection: 2777245537294877821
2026-01-10T12:45:16.292762121Z [err]  2026-01-10 12:45:16,278 - telnyx_service - INFO - üõë Stopping audio playback on call: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:17.085108925Z [err]  2026-01-10 12:45:16,632 - core_calling_service - INFO - ‚úÖ BARGE-IN: Preserving silence greeting in history to maintain context
2026-01-10T12:45:17.085109097Z [err]  2026-01-10 12:45:16,635 - core_calling_service - INFO - ‚è±Ô∏è [12:45:16.635] ‚úÖ Node selected, about to process content...
2026-01-10T12:45:17.085111412Z [err]  2026-01-10 12:45:16,635 - core_calling_service - INFO - Flow processing - History length: 3, Is first: False
2026-01-10T12:45:17.085121430Z [err]  2026-01-10 12:45:16,635 - core_calling_service - INFO - üîç Using explicitly set current_node_id: 2
2026-01-10T12:45:17.085126463Z [err]  2026-01-10 12:45:16,636 - core_calling_service - INFO - üîß Replaced {{now}} with Saturday, January 10, 2026 at 7:45 AM EST in content
2026-01-10T12:45:17.085129241Z [err]  2026-01-10 12:45:16,634 - redis_service - INFO - üì• Retrieved call data from Redis: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:17.085130200Z [err]  2026-01-10 12:45:16,635 - core_calling_service - INFO - ‚è±Ô∏è [12:45:16.635] üöÄ Checking special cases before merged transition+response...
2026-01-10T12:45:17.085158104Z [err]  2026-01-10 12:45:16,635 - redis_service - INFO - üì¶ Stored call data in Redis: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q (TTL: 3600s)
2026-01-10T12:45:17.085160132Z [err]  2026-01-10 12:45:16,636 - core_calling_service - INFO - üîß Replaced {{customer_name}} with  in content
2026-01-10T12:45:17.085166153Z [err]  2026-01-10 12:45:16,636 - core_calling_service - INFO - üîß Replaced {{callerName}} with  in content
2026-01-10T12:45:17.085169332Z [err]  2026-01-10 12:45:16,635 - core_calling_service - INFO - ‚úÖ BARGE-IN: Reset silence_greeting_triggered flag
2026-01-10T12:45:17.085173512Z [err]  2026-01-10 12:45:16,636 - core_calling_service - INFO - üîß Replaced {{lead_id}} with None in content
2026-01-10T12:45:17.085182971Z [err]  2026-01-10 12:45:16,635 - core_calling_service - INFO - üîç Checking 'Hello=Yes' override for msg='yeah' on node='Greeting'
2026-01-10T12:45:17.085183671Z [err]  2026-01-10 12:45:16,636 - core_calling_service - INFO - üîß Replaced {{qc_tracking_enabled}} with False in content
2026-01-10T12:45:17.085193340Z [err]  2026-01-10 12:45:16,635 - core_calling_service - INFO - ‚è±Ô∏è [12:45:16.635] ‚è© About to call _process_call_flow_streaming()
2026-01-10T12:45:17.085197735Z [err]  2026-01-10 12:45:16,635 - core_calling_service - INFO - ‚ö° OVERRIDE TRIGGERED: 'Yeah.' on Greeting node -> Forcing Transition 0
2026-01-10T12:45:17.085209093Z [err]  2026-01-10 12:45:16,636 - core_calling_service - INFO - üîß Replaced {{track_keywords}} with  in content
2026-01-10T12:45:17.085210853Z [err]  2026-01-10 12:45:16,635 - core_calling_service - INFO - ‚è±Ô∏è [12:45:16.635] üîÄ Agent type: call_flow, calling flow processor...
2026-01-10T12:45:17.085224045Z [err]  2026-01-10 12:45:16,636 - core_calling_service - INFO - üîß Replaced {{expected_commitment}} with not_specified in content
2026-01-10T12:45:17.085225798Z [err]  2026-01-10 12:45:16,636 - core_calling_service - INFO - üîß Replaced {{phone_number}} with +17708336397 in content
2026-01-10T12:45:17.085233473Z [err]  2026-01-10 12:45:16,635 - core_calling_service - INFO - ‚è±Ô∏è [12:45:16.635] üîÄ _process_call_flow_streaming() ENTRY
2026-01-10T12:45:17.085235706Z [err]  2026-01-10 12:45:16,636 - core_calling_service - INFO - üîß Replaced {{to_number}} with +17708336397 in content
2026-01-10T12:45:17.085239656Z [err]  2026-01-10 12:45:16,636 - core_calling_service - INFO - üîß Replaced {{email}} with None in content
2026-01-10T12:45:17.085247459Z [err]  2026-01-10 12:45:16,630 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q/actions/playback_stop "HTTP/1.1 200 OK"
2026-01-10T12:45:17.085253727Z [err]  2026-01-10 12:45:16,631 - telnyx_service - INFO - ‚úÖ Successfully stopped audio playback
2026-01-10T12:45:17.085259086Z [err]  2026-01-10 12:45:16,632 - core_calling_service - INFO - ‚úÖ BARGE-IN: Audio playback STOPPED
2026-01-10T12:45:17.087405615Z [err]  2026-01-10 12:45:16,636 - core_calling_service - INFO - ‚úÖ Using explicit SCRIPT mode (length: 89 chars) - will return text instantly
2026-01-10T12:45:17.087413919Z [err]  2026-01-10 12:45:16,636 - core_calling_service - INFO - Using flow node: Node Prompt: N001B_IntroAndHelpRequest_Only (V3 - Follows Name Confirmation) (type: conversation, mode: script)
2026-01-10T12:45:17.087419467Z [err]  2026-01-10 12:45:16,636 - core_calling_service - INFO - ‚è±Ô∏è [12:45:16.636] üìÑ About to process content (mode=script, length=89)
2026-01-10T12:45:17.087424686Z [err]  2026-01-10 12:45:16,636 - core_calling_service - INFO - üì§ Streaming script as 2 sentence(s)
2026-01-10T12:45:17.087431777Z [err]  2026-01-10 12:45:16,636 - server - INFO - üì§ Sentence arrived from LLM: This is Jake......
2026-01-10T12:45:17.087440830Z [err]  2026-01-10 12:45:16,636 - server - INFO - ‚è±Ô∏è [TIMING] TTFS (Time To First Sentence): 478ms
2026-01-10T12:45:17.087446896Z [err]  2026-01-10 12:45:16,636 - server - INFO - ‚ö° Starting REAL-TIME TTS for first sentence
2026-01-10T12:45:17.087453495Z [err]  2026-01-10 12:45:16,636 - server - INFO - üîç Persistent TTS lookup: call_id=v3:HAthGByfra9BUS24U..., session=FOUND
2026-01-10T12:45:17.087461826Z [err]  2026-01-10 12:45:16,636 - server - INFO - üöÄ Streaming sentence #1 via persistent WebSocket
2026-01-10T12:45:17.087467463Z [err]  2026-01-10 12:45:16,636 - server - INFO - üéµ TTS task #1 started at +0ms
2026-01-10T12:45:17.087472693Z [err]  2026-01-10 12:45:16,636 - server - INFO - ‚è±Ô∏è [TIMING] TTFT_TTS (First TTS Task Started): 478ms
2026-01-10T12:45:17.087477804Z [err]  2026-01-10 12:45:16,636 - core_calling_service - INFO - üì§ Streamed script sentence 1/2: This is Jake......
2026-01-10T12:45:17.087487229Z [err]  2026-01-10 12:45:16,636 - server - INFO - üì§ Sentence arrived from LLM: I was just, um, wondering if you could possibly he...
2026-01-10T12:45:17.087492826Z [err]  2026-01-10 12:45:16,636 - server - INFO - üîç Persistent TTS lookup: call_id=v3:HAthGByfra9BUS24U..., session=FOUND
2026-01-10T12:45:17.088960492Z [err]  2026-01-10 12:45:16,636 - server - INFO - üöÄ Streaming sentence #2 via persistent WebSocket
2026-01-10T12:45:17.088971089Z [err]  2026-01-10 12:45:16,636 - server - INFO - üéµ TTS task #2 started at +0ms
2026-01-10T12:45:17.088977180Z [err]  2026-01-10 12:45:16,636 - core_calling_service - INFO - üì§ Streamed script sentence 2/2: I was just, um, wondering if you could possibly he...
2026-01-10T12:45:17.088983805Z [err]  2026-01-10 12:45:16,636 - core_calling_service - INFO - üîä Silence tracking reset for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q (user responded)
2026-01-10T12:45:17.088990447Z [err]  2026-01-10 12:45:16,636 - core_calling_service - INFO - ‚úÖ User responded to regular message, resetting counter
2026-01-10T12:45:17.088996571Z [err]  2026-01-10 12:45:16,636 - core_calling_service - INFO - üíæ Storing node ID 1763159750250 in conversation history
2026-01-10T12:45:17.089003850Z [err]  2026-01-10 12:45:16,637 - core_calling_service - INFO - LLM response (0.38s): This is Jake... I was just, um, wondering if you could possibly help me out for a moment?
2026-01-10T12:45:17.089009717Z [err]  2026-01-10 12:45:16,637 - core_calling_service - INFO - Total latency: 0.38s
2026-01-10T12:45:17.089017852Z [err]  2026-01-10 12:45:16,638 - server - INFO - ‚úÖ LLM finished in 480ms, TTS tasks already running in background
2026-01-10T12:45:17.089028466Z [err]  2026-01-10 12:45:16,639 - server - INFO - üéµ Streaming 2 TTS chunks as they complete...
2026-01-10T12:45:17.089038962Z [err]  2026-01-10 12:45:16,639 - server - INFO - üöÄ Persistent TTS: Audio already streaming in background!
2026-01-10T12:45:17.089044974Z [err]  2026-01-10 12:45:16,639 - server - INFO -    2 sentences queued and playing seamlessly
2026-01-10T12:45:17.089052623Z [err]  2026-01-10 12:45:16,639 - persistent_tts_service - INFO - üé§ [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] Streaming sentence #2: This is Jake......
2026-01-10T12:45:17.090837371Z [err]  2026-01-10 12:45:16,639 - persistent_tts_service - INFO - üöÄ [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] Sent sentence #2 to ElevenLabs in 0ms (non-blocking)
2026-01-10T12:45:17.090847558Z [err]  2026-01-10 12:45:16,639 - persistent_tts_service - INFO - üìä [REAL TIMING] TEXT SENT TO ELEVENLABS: 'This is Jake......'
2026-01-10T12:45:17.090855559Z [err]  2026-01-10 12:45:16,639 - persistent_tts_service - INFO - üé§ [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] Streaming sentence #3: I was just, um, wondering if you could possibly he...
2026-01-10T12:45:17.090864608Z [err]  2026-01-10 12:45:16,639 - persistent_tts_service - INFO - üöÄ [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] Sent sentence #3 to ElevenLabs in 0ms (non-blocking)
2026-01-10T12:45:17.090872580Z [err]  2026-01-10 12:45:16,639 - persistent_tts_service - INFO - üìä [REAL TIMING] TEXT SENT TO ELEVENLABS: 'I was just, um, wondering if you could possibly he...'
2026-01-10T12:45:17.090880351Z [err]  2026-01-10 12:45:16,640 - server - INFO - ‚úÖ All 2 persistent TTS streams completed
2026-01-10T12:45:17.090887286Z [err]  2026-01-10 12:45:16,640 - server - INFO - ‚úÖ Agent generation complete (persistent TTS) - response window closed
2026-01-10T12:45:17.090894793Z [err]  2026-01-10 12:45:16,640 - server - INFO - ‚è±Ô∏è  FIRST AUDIO STARTED: 482ms from user stop üöÄ
2026-01-10T12:45:17.090901722Z [err]  2026-01-10 12:45:16,640 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:17.090909965Z [err]  2026-01-10 12:45:16,640 - server - INFO - ‚úÖ Agent generation complete - response window closed
2026-01-10T12:45:17.090917122Z [err]  2026-01-10 12:45:16,640 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2026-01-10T12:45:17.094047502Z [err]  2026-01-10 12:45:16,640 - server - INFO - ‚è±Ô∏è  [TIMING] ==== E2E LATENCY SUMMARY ====
2026-01-10T12:45:17.094064031Z [err]  2026-01-10 12:45:16,640 - server - INFO - ‚è±Ô∏è  [TIMING] STT: 10ms (provider: soniox, model: stt-rt-v3)
2026-01-10T12:45:17.094075974Z [err]  2026-01-10 12:45:16,640 - server - INFO - ‚è±Ô∏è  [TIMING] LLM_TOTAL: 480ms (provider: grok, model: grok-4-1-fast-non-reasoning)
2026-01-10T12:45:17.094095091Z [err]  2026-01-10 12:45:16,640 - server - INFO - ‚è±Ô∏è  [TIMING] TTS_TOTAL: 3ms (provider: elevenlabs, websocket: False)
2026-01-10T12:45:17.094104559Z [err]  2026-01-10 12:45:16,640 - server - INFO - ‚è±Ô∏è  [TIMING] E2E_TOTAL: 482ms (user stopped ‚Üí play_audio_url called)
2026-01-10T12:45:17.094113302Z [err]  2026-01-10 12:45:16,640 - server - INFO - ‚è±Ô∏è  [TIMING] ‚ö†Ô∏è NOTE: E2E_TOTAL does not include:
2026-01-10T12:45:17.094120338Z [err]  2026-01-10 12:45:16,640 - server - INFO - ‚è±Ô∏è  [TIMING]   - Telnyx processing time (~50-200ms)
2026-01-10T12:45:17.094128899Z [err]  2026-01-10 12:45:16,640 - server - INFO - ‚è±Ô∏è  [TIMING]   - Network latency to user's phone (~50-150ms)
2026-01-10T12:45:17.094136453Z [err]  2026-01-10 12:45:16,640 - server - INFO - ‚è±Ô∏è  [TIMING]   - Phone audio buffering (~50-200ms)
2026-01-10T12:45:17.094146708Z [err]  2026-01-10 12:45:16,640 - server - INFO - ‚è±Ô∏è  [TIMING]   - TOTAL MISSING: ~150-550ms typically
2026-01-10T12:45:17.094155456Z [err]  2026-01-10 12:45:16,640 - server - INFO - ‚è±Ô∏è  [TIMING]   - REAL USER LATENCY: 782ms estimated
2026-01-10T12:45:17.094163191Z [err]  2026-01-10 12:45:16,640 - server - INFO - ‚è±Ô∏è  [TIMING] RESPONSE_TEXT: 89 chars, 2 sentences
2026-01-10T12:45:17.094173794Z [err]  2026-01-10 12:45:16,640 - server - INFO - ‚è±Ô∏è  [TIMING] USER_INPUT: 'Yeah....'
2026-01-10T12:45:17.094182164Z [err]  2026-01-10 12:45:16,640 - server - INFO - ‚è±Ô∏è  [TIMING] AI_RESPONSE: 'This is Jake... I was just, um, wondering if you could possi...'
2026-01-10T12:45:17.096864158Z [err]  2026-01-10 12:45:16,640 - server - INFO - ‚è±Ô∏è  [TIMING] ==========================
2026-01-10T12:45:17.096874804Z [err]  2026-01-10 12:45:16,640 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2026-01-10T12:45:17.096882973Z [err]  2026-01-10 12:45:16,830 - server - INFO - üìù Saved assistant transcript and latency to database (Node: Node Prompt: N001B_IntroAndHelpRequest_Only (V3 - Follows Name Confirmation), Dead Air: 493ms)
2026-01-10T12:45:17.096890807Z [err]  2026-01-10 12:45:16,831 - server - INFO - üîä Agent finished generating, 0 playbacks active - waiting for webhooks to close window and start silence tracking
2026-01-10T12:45:17.096897029Z [err]  2026-01-10 12:45:16,831 - server - INFO - üîç END CALL CHECK: should_end_call=False, max_checkins=False, max_duration=False
2026-01-10T12:45:17.096903893Z [err]  2026-01-10 12:45:16,857 - persistent_tts_service - INFO - üì§ Sending 8916 bytes of audio (56 chunks, 1.1s duration) via WebSocket
2026-01-10T12:45:17.096912898Z [err]  2026-01-10 12:45:16,857 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T12:45:17.096919259Z [err]  2026-01-10 12:45:16,857 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.1s (total: 1.1s from now)
2026-01-10T12:45:17.096925452Z [err]  2026-01-10 12:45:16,858 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768049116.858 (chunk 1/56, 160 bytes)
2026-01-10T12:45:18.057668010Z [err]  2026-01-10 12:45:17,712 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 56 CHUNKS SENT TO TELNYX in 854ms (audio duration: 1.1s, paced after 10 chunks)
2026-01-10T12:45:18.057674740Z [err]  2026-01-10 12:45:17,712 - persistent_tts_service - INFO - ‚úÖ Sent 56 audio chunks via WebSocket (paced sending enabled)
2026-01-10T12:45:18.057682522Z [err]  2026-01-10 12:45:17,712 - persistent_tts_service - INFO - üì§ Sending 13793 bytes of audio (87 chunks, 1.7s duration) via WebSocket
2026-01-10T12:45:18.057691975Z [err]  2026-01-10 12:45:17,712 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T12:45:18.057700174Z [err]  2026-01-10 12:45:17,712 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.7s (total: 2.0s from now)
2026-01-10T12:45:18.057707782Z [err]  2026-01-10 12:45:17,712 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768049117.713 (chunk 1/87, 160 bytes)
2026-01-10T12:45:19.143778902Z [err]  2026-01-10 12:45:19,139 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 87 CHUNKS SENT TO TELNYX in 1426ms (audio duration: 1.7s, paced after 10 chunks)
2026-01-10T12:45:19.143793619Z [err]  2026-01-10 12:45:19,139 - persistent_tts_service - INFO - ‚úÖ Sent 87 audio chunks via WebSocket (paced sending enabled)
2026-01-10T12:45:19.143810330Z [err]  2026-01-10 12:45:19,139 - persistent_tts_service - INFO - üì§ Sending 1439 bytes of audio (9 chunks, 0.2s duration) via WebSocket
2026-01-10T12:45:19.143818994Z [err]  2026-01-10 12:45:19,139 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T12:45:19.143836060Z [err]  2026-01-10 12:45:19,139 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +0.2s (total: 0.7s from now)
2026-01-10T12:45:19.143844454Z [err]  2026-01-10 12:45:19,139 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768049119.140 (chunk 1/9, 160 bytes)
2026-01-10T12:45:19.143852659Z [err]  2026-01-10 12:45:19,139 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 9 CHUNKS SENT TO TELNYX in 0ms (audio duration: 0.2s, paced after 10 chunks)
2026-01-10T12:45:19.143859806Z [err]  2026-01-10 12:45:19,139 - persistent_tts_service - INFO - ‚úÖ Sent 9 audio chunks via WebSocket (paced sending enabled)
2026-01-10T12:45:19.143867568Z [err]  2026-01-10 12:45:19,139 - persistent_tts_service - INFO - üì§ Sending 18576 bytes of audio (117 chunks, 2.3s duration) via WebSocket
2026-01-10T12:45:19.143875605Z [err]  2026-01-10 12:45:19,139 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T12:45:19.143883561Z [err]  2026-01-10 12:45:19,139 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +2.3s (total: 3.1s from now)
2026-01-10T12:45:19.145241466Z [err]  2026-01-10 12:45:19,140 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768049119.140 (chunk 1/117, 160 bytes)
2026-01-10T12:45:19.960612740Z [err]  2026-01-10 12:45:19,947 - server - INFO - üì§ Audio flowing: 591 packets sent to Soniox (5s update)
2026-01-10T12:45:20.955784559Z [err]  2026-01-10 12:45:20,406 - server - INFO - üé§ Soniox receiver alive - 13 messages received in last 10s
2026-01-10T12:45:20.955790705Z [err]  2026-01-10 12:45:20,486 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (1.7s left)
2026-01-10T12:45:20.992826977Z [err]  2026-01-10 12:45:20,990 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (1.2s left)
2026-01-10T12:45:21.123285621Z [err]  2026-01-10 12:45:21,121 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 117 CHUNKS SENT TO TELNYX in 1981ms (audio duration: 2.3s, paced after 10 chunks)
2026-01-10T12:45:21.123296466Z [err]  2026-01-10 12:45:21,122 - persistent_tts_service - INFO - ‚úÖ Sent 117 audio chunks via WebSocket (paced sending enabled)
2026-01-10T12:45:22.222361418Z [err]  2026-01-10 12:45:22,217 - persistent_tts_service - INFO - üîá [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] FLOOR RELEASED (is_holding_floor=False)
2026-01-10T12:45:23.029695652Z [err]  2026-01-10 12:45:22,500 - dead_air_monitor - INFO - ‚è±Ô∏è Playback expected end time passed (0.3s ago), marking agent as done speaking
2026-01-10T12:45:23.029703809Z [err]  2026-01-10 12:45:22,500 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1768049122.5002356 for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:23.029714552Z [err]  2026-01-10 12:45:22,500 - core_calling_service - INFO - ü§ñ Agent stopped speaking for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:24.390766552Z [err]  2026-01-10 12:45:24,378 - server - INFO - üî§ RAW TOKENS: [" S"?]
2026-01-10T12:45:24.390779810Z [err]  2026-01-10 12:45:24,378 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER RESET (user started speaking) for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:24.390790720Z [err]  2026-01-10 12:45:24,378 - core_calling_service - INFO - üîä Silence timer reset for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q (user started speaking)
2026-01-10T12:45:24.390798845Z [err]  2026-01-10 12:45:24,378 - core_calling_service - INFO - üë§ User started speaking for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:24.390807031Z [err]  2026-01-10 12:45:24,378 - persistent_tts_service - INFO - ‚ö° [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] CLEAR_AUDIO called - pending_sentences=0, audio_queue=0
2026-01-10T12:45:24.390815249Z [err]  2026-01-10 12:45:24,378 - persistent_tts_service - INFO - üõë [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] INTERRUPT - Floor Released (is_holding_floor=False)
2026-01-10T12:45:24.421884297Z [err]  2026-01-10 12:45:24,411 - persistent_tts_service - INFO - üõë [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] Sent clear event to Telnyx WebSocket (3x)
2026-01-10T12:45:24.421891891Z [err]  2026-01-10 12:45:24,411 - persistent_tts_service - INFO - ‚è±Ô∏è [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] Reset playback_expected_end_time to NOW
2026-01-10T12:45:24.421898338Z [err]  2026-01-10 12:45:24,412 - server - INFO - üìä [REAL TIMING] AUDIO QUEUE CLEARED (user started speaking) for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:24.421904183Z [err]  2026-01-10 12:45:24,412 - redis_service - INFO - üì• Retrieved call data from Redis: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:24.421910546Z [err]  2026-01-10 12:45:24,413 - redis_service - INFO - üì¶ Stored call data in Redis: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q (TTL: 3600s)
2026-01-10T12:45:24.421917742Z [err]  2026-01-10 12:45:24,413 - server - INFO - üîç PARTIAL TRANSCRIPT: 'S' | Generating: False
2026-01-10T12:45:25.048085191Z [err]  2026-01-10 12:45:24,634 - redis_service - INFO - üì¶ Stored call data in Redis: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q (TTL: 3600s)
2026-01-10T12:45:25.048102150Z [err]  2026-01-10 12:45:24,633 - server - INFO - üßπ Cleaned transcript: ' S ure .' -> 'Sure.'
2026-01-10T12:45:25.048118023Z [err]  2026-01-10 12:45:24,633 - server - INFO - üì• FINAL TOKENS: 'Sure.' (3 tokens)
2026-01-10T12:45:25.048129285Z [err]  2026-01-10 12:45:24,633 - server - INFO - üé§ Soniox final transcript: 'Sure.'
2026-01-10T12:45:25.048140167Z [err]  2026-01-10 12:45:24,633 - server - INFO - üöÄ Spawned tracked background task for endpoint processing
2026-01-10T12:45:25.048140858Z [err]  2026-01-10 12:45:24,633 - server - INFO - üîç FILTER CHECK: words=1, is_filler=True, is_garbled=False, tts_speaking=False, time_until_done=-0.2s, generating=False, playbacks=0, is_active=False
2026-01-10T12:45:25.048158018Z [err]  2026-01-10 12:45:24,633 - server - INFO - ‚è±Ô∏è [12:45:24.633] üìù FINAL TRANSCRIPT RECEIVED: 'Sure.'
2026-01-10T12:45:25.048169497Z [err]  2026-01-10 12:45:24,633 - server - INFO - ‚è±Ô∏è [12:45:24.633] STT endpoint detection latency: 5ms
2026-01-10T12:45:25.048178674Z [err]  2026-01-10 12:45:24,516 - server - INFO - üî§ RAW TOKENS: [" S"?, "ure"?]
2026-01-10T12:45:25.048179605Z [err]  2026-01-10 12:45:24,633 - server - INFO - ‚è±Ô∏è [12:45:24.633] üé§ USER STOPPED SPEAKING - Beginning processing pipeline
2026-01-10T12:45:25.048194202Z [err]  2026-01-10 12:45:24,633 - server - INFO - ‚è±Ô∏è User spoke at 1768049124.6338685
2026-01-10T12:45:25.048281579Z [err]  2026-01-10 12:45:24,516 - server - INFO - üîç PARTIAL TRANSCRIPT: 'Sure' | Generating: False
2026-01-10T12:45:25.048297209Z [err]  2026-01-10 12:45:24,633 - server - INFO - üî§ RAW TOKENS: [" S"‚úì, "ure"‚úì, "."‚úì, "<end>"‚úì]
2026-01-10T12:45:25.048305343Z [err]  2026-01-10 12:45:24,633 - server - INFO - üéØ Endpoint detected: <end> token received
2026-01-10T12:45:25.058702322Z [err]  2026-01-10 12:45:24,634 - server - INFO - üë§ User has spoken - aiSpeaksAfterSilence timer cancelled if pending
2026-01-10T12:45:25.058712394Z [err]  2026-01-10 12:45:24,634 - server - INFO - ‚úÖ Agent SILENT - User said 1 word(s): 'Sure.' - Processing...
2026-01-10T12:45:25.058724056Z [err]  2026-01-10 12:45:24,645 - server - INFO - üìä [REAL TIMING] STT: User audio end ‚Üí Transcript received: 7ms
2026-01-10T12:45:25.058733144Z [err]  2026-01-10 12:45:24,645 - server - INFO - üé§ Endpoint detected by Soniox - processing transcript: Sure.
2026-01-10T12:45:25.058742045Z [err]  2026-01-10 12:45:24,645 - core_calling_service - INFO - üë§ User stopped speaking for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:25.058753210Z [err]  2026-01-10 12:45:24,645 - server - INFO - ‚úÖ User starting new turn - resetting agent speaking flag
2026-01-10T12:45:25.058764052Z [err]  2026-01-10 12:45:24,645 - server - INFO - ‚è±Ô∏è [TIMING] STT_START: User last audio packet received
2026-01-10T12:45:25.058772687Z [err]  2026-01-10 12:45:24,645 - server - INFO - ‚è±Ô∏è [TIMING] STT_END: Endpoint detected at T+17ms
2026-01-10T12:45:25.058780685Z [err]  2026-01-10 12:45:24,645 - server - INFO - ‚è±Ô∏è [TIMING] STT_LATENCY: 17ms (Soniox model: stt-rt-v3)
2026-01-10T12:45:25.058789184Z [err]  2026-01-10 12:45:24,645 - server - INFO - ‚è±Ô∏è  USER STOPPED SPEAKING at T=0ms
2026-01-10T12:45:25.058797292Z [err]  2026-01-10 12:45:24,645 - server - INFO - üìä [REAL TIMING] Processing start: 17ms after user audio end
2026-01-10T12:45:25.058807186Z [err]  2026-01-10 12:45:24,645 - server - INFO - üéôÔ∏è Agent generating response - interruption detection active
2026-01-10T12:45:25.058815038Z [err]  2026-01-10 12:45:24,645 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:25.058824813Z [err]  2026-01-10 12:45:24,740 - server - INFO - üìù Saved user transcript to database
2026-01-10T12:45:25.072147835Z [err]  2026-01-10 12:45:24,740 - persistent_tts_service - INFO - üîÑ [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] Interrupt flag reset - ready for new audio
2026-01-10T12:45:25.072165534Z [err]  2026-01-10 12:45:24,740 - server - INFO - üîÑ Reset TTS interrupt flag before new response
2026-01-10T12:45:25.072176112Z [err]  2026-01-10 12:45:24,740 - core_calling_service - INFO - ‚è±Ô∏è [12:45:24.740] üì• process_user_input() ENTRY - text: 'Sure....'
2026-01-10T12:45:25.072189174Z [err]  2026-01-10 12:45:24,741 - redis_service - INFO - üì• Retrieved call data from Redis: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:25.072198119Z [err]  2026-01-10 12:45:24,741 - core_calling_service - WARNING - üö® BARGE-IN DETECTED for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q: User spoke while Silence Greeting was triggering
2026-01-10T12:45:25.072208296Z [err]  2026-01-10 12:45:24,773 - telnyx_service - INFO - Telnyx service initialized with connection: 2777245537294877821
2026-01-10T12:45:25.072215838Z [err]  2026-01-10 12:45:24,773 - telnyx_service - INFO - üõë Stopping audio playback on call: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:25.072224706Z [err]  2026-01-10 12:45:24,948 - server - INFO - üì§ Audio flowing: 841 packets sent to Soniox (5s update)
2026-01-10T12:45:25.072233789Z [err]  2026-01-10 12:45:25,010 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - response generation still in progress
2026-01-10T12:45:25.107671227Z [err]  2026-01-10 12:45:25,105 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q/actions/playback_stop "HTTP/1.1 200 OK"
2026-01-10T12:45:25.107679678Z [err]  2026-01-10 12:45:25,105 - telnyx_service - INFO - ‚úÖ Successfully stopped audio playback
2026-01-10T12:45:25.107686518Z [err]  2026-01-10 12:45:25,106 - core_calling_service - INFO - ‚úÖ BARGE-IN: Audio playback STOPPED
2026-01-10T12:45:25.107691599Z [err]  2026-01-10 12:45:25,106 - core_calling_service - INFO - ‚úÖ BARGE-IN: Preserving silence greeting in history to maintain context
2026-01-10T12:45:25.111248531Z [err]  2026-01-10 12:45:25,107 - redis_service - INFO - üì• Retrieved call data from Redis: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:25.111264639Z [err]  2026-01-10 12:45:25,108 - redis_service - INFO - üì¶ Stored call data in Redis: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q (TTL: 3600s)
2026-01-10T12:45:25.111277556Z [err]  2026-01-10 12:45:25,108 - core_calling_service - INFO - ‚úÖ BARGE-IN: Reset silence_greeting_triggered flag
2026-01-10T12:45:25.111283715Z [err]  2026-01-10 12:45:25,108 - core_calling_service - INFO - ‚è±Ô∏è [12:45:25.108] ‚è© About to call _process_call_flow_streaming()
2026-01-10T12:45:25.111291539Z [err]  2026-01-10 12:45:25,108 - core_calling_service - INFO - ‚è±Ô∏è [12:45:25.108] üîÄ Agent type: call_flow, calling flow processor...
2026-01-10T12:45:25.111306447Z [err]  2026-01-10 12:45:25,108 - core_calling_service - INFO - ‚è±Ô∏è [12:45:25.108] üîÄ _process_call_flow_streaming() ENTRY
2026-01-10T12:45:25.111315695Z [err]  2026-01-10 12:45:25,108 - core_calling_service - INFO - Flow processing - History length: 5, Is first: False
2026-01-10T12:45:25.111323499Z [err]  2026-01-10 12:45:25,108 - core_calling_service - INFO - üîç Using explicitly set current_node_id: 1763159750250
2026-01-10T12:45:25.111331989Z [err]  2026-01-10 12:45:25,108 - core_calling_service - INFO - ‚è±Ô∏è [12:45:25.108] üöÄ Checking special cases before merged transition+response...
2026-01-10T12:45:25.111341810Z [err]  2026-01-10 12:45:25,109 - core_calling_service - INFO - üé§ AUTO-TRANSITION AFTER RESPONSE - user spoke, transitioning to: 1763161849799
2026-01-10T12:45:25.111348661Z [err]  2026-01-10 12:45:25,109 - core_calling_service - INFO - ‚úÖ Auto-transitioned (after response) to: Node ID: N_Opener_StackingIncomeHook_V3_CreativeTactic
2026-01-10T12:45:25.111355374Z [err]  2026-01-10 12:45:25,109 - core_calling_service - INFO - ‚è±Ô∏è [12:45:25.109] ‚úÖ Node selected, about to process content...
2026-01-10T12:45:25.114902933Z [err]  2026-01-10 12:45:25,109 - core_calling_service - INFO - üîß Replaced {{now}} with Saturday, January 10, 2026 at 7:45 AM EST in content
2026-01-10T12:45:25.114915169Z [err]  2026-01-10 12:45:25,109 - core_calling_service - INFO - üîß Replaced {{customer_name}} with  in content
2026-01-10T12:45:25.114924280Z [err]  2026-01-10 12:45:25,109 - core_calling_service - INFO - üîß Replaced {{callerName}} with  in content
2026-01-10T12:45:25.114932276Z [err]  2026-01-10 12:45:25,109 - core_calling_service - INFO - üîß Replaced {{lead_id}} with None in content
2026-01-10T12:45:25.114938774Z [err]  2026-01-10 12:45:25,109 - core_calling_service - INFO - üîß Replaced {{qc_tracking_enabled}} with False in content
2026-01-10T12:45:25.114948006Z [err]  2026-01-10 12:45:25,109 - core_calling_service - INFO - üîß Replaced {{track_keywords}} with  in content
2026-01-10T12:45:25.114953557Z [err]  2026-01-10 12:45:25,109 - core_calling_service - INFO - üîß Replaced {{expected_commitment}} with not_specified in content
2026-01-10T12:45:25.114959239Z [err]  2026-01-10 12:45:25,109 - core_calling_service - INFO - üîß Replaced {{to_number}} with +17708336397 in content
2026-01-10T12:45:25.114965476Z [err]  2026-01-10 12:45:25,109 - core_calling_service - INFO - üîß Replaced {{phone_number}} with +17708336397 in content
2026-01-10T12:45:25.114971234Z [err]  2026-01-10 12:45:25,109 - core_calling_service - INFO - üîß Replaced {{email}} with None in content
2026-01-10T12:45:25.114977246Z [err]  2026-01-10 12:45:25,109 - core_calling_service - INFO - ‚úÖ Using explicit SCRIPT mode (length: 260 chars) - will return text instantly
2026-01-10T12:45:25.114985109Z [err]  2026-01-10 12:45:25,109 - core_calling_service - INFO - Using flow node: Node ID: N_Opener_StackingIncomeHook_V3_CreativeTactic (type: conversation, mode: script)
2026-01-10T12:45:25.114990562Z [err]  2026-01-10 12:45:25,109 - core_calling_service - INFO - ‚è±Ô∏è [12:45:25.109] üìÑ About to process content (mode=script, length=260)
2026-01-10T12:45:25.118714506Z [err]  2026-01-10 12:45:25,109 - core_calling_service - INFO - üì§ Streaming script as 2 sentence(s)
2026-01-10T12:45:25.118722835Z [err]  2026-01-10 12:45:25,109 - server - INFO - üì§ Sentence arrived from LLM: Well, uh, I don't know if you could yet, but, I'm ...
2026-01-10T12:45:25.118729882Z [err]  2026-01-10 12:45:25,109 - server - INFO - ‚è±Ô∏è [TIMING] TTFS (Time To First Sentence): 464ms
2026-01-10T12:45:25.118736785Z [err]  2026-01-10 12:45:25,109 - server - INFO - ‚ö° Starting REAL-TIME TTS for first sentence
2026-01-10T12:45:25.118743514Z [err]  2026-01-10 12:45:25,109 - server - INFO - üîç Persistent TTS lookup: call_id=v3:HAthGByfra9BUS24U..., session=FOUND
2026-01-10T12:45:25.118750600Z [err]  2026-01-10 12:45:25,109 - server - INFO - üöÄ Streaming sentence #1 via persistent WebSocket
2026-01-10T12:45:25.118757558Z [err]  2026-01-10 12:45:25,109 - server - INFO - üéµ TTS task #1 started at +0ms
2026-01-10T12:45:25.118762658Z [err]  2026-01-10 12:45:25,109 - server - INFO - ‚è±Ô∏è [TIMING] TTFT_TTS (First TTS Task Started): 464ms
2026-01-10T12:45:25.118768945Z [err]  2026-01-10 12:45:25,110 - core_calling_service - INFO - üì§ Streamed script sentence 1/2: Well, uh, I don't know if you could yet, but, I'm ...
2026-01-10T12:45:25.118775908Z [err]  2026-01-10 12:45:25,110 - server - INFO - üì§ Sentence arrived from LLM: I know this call is out of the blue, but do you ha...
2026-01-10T12:45:25.118782000Z [err]  2026-01-10 12:45:25,110 - server - INFO - üîç Persistent TTS lookup: call_id=v3:HAthGByfra9BUS24U..., session=FOUND
2026-01-10T12:45:25.118787350Z [err]  2026-01-10 12:45:25,110 - server - INFO - üöÄ Streaming sentence #2 via persistent WebSocket
2026-01-10T12:45:25.118793643Z [err]  2026-01-10 12:45:25,110 - server - INFO - üéµ TTS task #2 started at +0ms
2026-01-10T12:45:25.118800008Z [err]  2026-01-10 12:45:25,110 - core_calling_service - INFO - üì§ Streamed script sentence 2/2: I know this call is out of the blue, but do you ha...
2026-01-10T12:45:25.121787562Z [err]  2026-01-10 12:45:25,110 - core_calling_service - INFO - üîä Silence tracking reset for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q (user responded)
2026-01-10T12:45:25.121799960Z [err]  2026-01-10 12:45:25,110 - core_calling_service - INFO - ‚úÖ User responded to regular message, resetting counter
2026-01-10T12:45:25.121807555Z [err]  2026-01-10 12:45:25,110 - core_calling_service - INFO - üíæ Storing node ID 1763161849799 in conversation history
2026-01-10T12:45:25.121815059Z [err]  2026-01-10 12:45:25,110 - core_calling_service - INFO - LLM response (0.37s): Well, uh, I don't know if you could yet, but, I'm calling because you filled out an ad about stacking income without stacking hours. I know this call is out of the blue, but do you have just 25 seconds for me to explain why I'm reaching out today specifically?
2026-01-10T12:45:25.121821306Z [err]  2026-01-10 12:45:25,110 - core_calling_service - INFO - Total latency: 0.37s
2026-01-10T12:45:25.121829108Z [err]  2026-01-10 12:45:25,112 - server - INFO - ‚úÖ LLM finished in 466ms, TTS tasks already running in background
2026-01-10T12:45:25.121836372Z [err]  2026-01-10 12:45:25,113 - server - INFO - üéµ Streaming 2 TTS chunks as they complete...
2026-01-10T12:45:25.121845443Z [err]  2026-01-10 12:45:25,113 - server - INFO - üöÄ Persistent TTS: Audio already streaming in background!
2026-01-10T12:45:25.121855021Z [err]  2026-01-10 12:45:25,113 - server - INFO -    2 sentences queued and playing seamlessly
2026-01-10T12:45:25.121868331Z [err]  2026-01-10 12:45:25,113 - persistent_tts_service - INFO - üé§ [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] Streaming sentence #4: Well, uh, I don't know if you could yet, but, I'm ...
2026-01-10T12:45:25.121876401Z [err]  2026-01-10 12:45:25,113 - persistent_tts_service - INFO - üöÄ [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] Sent sentence #4 to ElevenLabs in 0ms (non-blocking)
2026-01-10T12:45:25.125595116Z [err]  2026-01-10 12:45:25,113 - persistent_tts_service - INFO - üìä [REAL TIMING] TEXT SENT TO ELEVENLABS: 'Well, uh, I don't know if you could yet, but, I'm ...'
2026-01-10T12:45:25.125608322Z [err]  2026-01-10 12:45:25,113 - persistent_tts_service - INFO - üé§ [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] Streaming sentence #5: I know this call is out of the blue, but do you ha...
2026-01-10T12:45:25.125615419Z [err]  2026-01-10 12:45:25,113 - persistent_tts_service - INFO - üöÄ [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] Sent sentence #5 to ElevenLabs in 0ms (non-blocking)
2026-01-10T12:45:25.125621616Z [err]  2026-01-10 12:45:25,113 - persistent_tts_service - INFO - üìä [REAL TIMING] TEXT SENT TO ELEVENLABS: 'I know this call is out of the blue, but do you ha...'
2026-01-10T12:45:25.125627456Z [err]  2026-01-10 12:45:25,114 - server - INFO - ‚úÖ All 2 persistent TTS streams completed
2026-01-10T12:45:25.125635708Z [err]  2026-01-10 12:45:25,114 - server - INFO - ‚úÖ Agent generation complete (persistent TTS) - response window closed
2026-01-10T12:45:25.125644099Z [err]  2026-01-10 12:45:25,114 - server - INFO - ‚è±Ô∏è  FIRST AUDIO STARTED: 468ms from user stop üöÄ
2026-01-10T12:45:25.125650442Z [err]  2026-01-10 12:45:25,114 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:25.125655665Z [err]  2026-01-10 12:45:25,114 - server - INFO - ‚úÖ Agent generation complete - response window closed
2026-01-10T12:45:25.125661963Z [err]  2026-01-10 12:45:25,114 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2026-01-10T12:45:25.125669279Z [err]  2026-01-10 12:45:25,114 - server - INFO - ‚è±Ô∏è  [TIMING] ==== E2E LATENCY SUMMARY ====
2026-01-10T12:45:25.125675067Z [err]  2026-01-10 12:45:25,114 - server - INFO - ‚è±Ô∏è  [TIMING] STT: 17ms (provider: soniox, model: stt-rt-v3)
2026-01-10T12:45:25.128681963Z [err]  2026-01-10 12:45:25,114 - server - INFO - ‚è±Ô∏è  [TIMING] LLM_TOTAL: 466ms (provider: grok, model: grok-4-1-fast-non-reasoning)
2026-01-10T12:45:25.128709264Z [err]  2026-01-10 12:45:25,114 - server - INFO - ‚è±Ô∏è  [TIMING] TTS_TOTAL: 4ms (provider: elevenlabs, websocket: False)
2026-01-10T12:45:25.128719369Z [err]  2026-01-10 12:45:25,114 - server - INFO - ‚è±Ô∏è  [TIMING] E2E_TOTAL: 468ms (user stopped ‚Üí play_audio_url called)
2026-01-10T12:45:25.128727190Z [err]  2026-01-10 12:45:25,114 - server - INFO - ‚è±Ô∏è  [TIMING] ‚ö†Ô∏è NOTE: E2E_TOTAL does not include:
2026-01-10T12:45:25.128734805Z [err]  2026-01-10 12:45:25,114 - server - INFO - ‚è±Ô∏è  [TIMING]   - Telnyx processing time (~50-200ms)
2026-01-10T12:45:25.128742434Z [err]  2026-01-10 12:45:25,114 - server - INFO - ‚è±Ô∏è  [TIMING]   - Network latency to user's phone (~50-150ms)
2026-01-10T12:45:25.128752779Z [err]  2026-01-10 12:45:25,114 - server - INFO - ‚è±Ô∏è  [TIMING]   - Phone audio buffering (~50-200ms)
2026-01-10T12:45:25.128761553Z [err]  2026-01-10 12:45:25,114 - server - INFO - ‚è±Ô∏è  [TIMING]   - TOTAL MISSING: ~150-550ms typically
2026-01-10T12:45:25.128771513Z [err]  2026-01-10 12:45:25,114 - server - INFO - ‚è±Ô∏è  [TIMING]   - REAL USER LATENCY: 768ms estimated
2026-01-10T12:45:25.128781645Z [err]  2026-01-10 12:45:25,114 - server - INFO - ‚è±Ô∏è  [TIMING] RESPONSE_TEXT: 260 chars, 2 sentences
2026-01-10T12:45:25.128789355Z [err]  2026-01-10 12:45:25,114 - server - INFO - ‚è±Ô∏è  [TIMING] USER_INPUT: 'Sure....'
2026-01-10T12:45:25.128796881Z [err]  2026-01-10 12:45:25,114 - server - INFO - ‚è±Ô∏è  [TIMING] AI_RESPONSE: 'Well, uh, I don't know if you could yet, but, I'm calling be...'
2026-01-10T12:45:25.128805722Z [err]  2026-01-10 12:45:25,114 - server - INFO - ‚è±Ô∏è  [TIMING] ==========================
2026-01-10T12:45:25.128815571Z [err]  2026-01-10 12:45:25,114 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2026-01-10T12:45:25.340472602Z [err]  2026-01-10 12:45:25,302 - server - INFO - üìù Saved assistant transcript and latency to database (Node: Node ID: N_Opener_StackingIncomeHook_V3_CreativeTactic, Dead Air: 487ms)
2026-01-10T12:45:25.340504901Z [err]  2026-01-10 12:45:25,302 - server - INFO - üîä Agent finished generating, 0 playbacks active - waiting for webhooks to close window and start silence tracking
2026-01-10T12:45:25.340515271Z [err]  2026-01-10 12:45:25,302 - server - INFO - üîç END CALL CHECK: should_end_call=False, max_checkins=False, max_duration=False
2026-01-10T12:45:25.420958047Z [err]  2026-01-10 12:45:25,411 - persistent_tts_service - INFO - üì§ Sending 13793 bytes of audio (87 chunks, 1.7s duration) via WebSocket
2026-01-10T12:45:25.420969110Z [err]  2026-01-10 12:45:25,412 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T12:45:25.420976010Z [err]  2026-01-10 12:45:25,412 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.7s (total: 1.7s from now)
2026-01-10T12:45:25.420984357Z [err]  2026-01-10 12:45:25,412 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768049125.412 (chunk 1/87, 160 bytes)
2026-01-10T12:45:26.083188530Z [err]  2026-01-10 12:45:25,515 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (1.6s left)
2026-01-10T12:45:27.017902908Z [err]  2026-01-10 12:45:26,852 - persistent_tts_service - INFO - ‚úÖ Sent 87 audio chunks via WebSocket (paced sending enabled)
2026-01-10T12:45:27.017914392Z [err]  2026-01-10 12:45:26,852 - persistent_tts_service - INFO - üì§ Sending 1440 bytes of audio (9 chunks, 0.2s duration) via WebSocket
2026-01-10T12:45:27.017920917Z [err]  2026-01-10 12:45:26,852 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T12:45:27.017928066Z [err]  2026-01-10 12:45:26,853 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +0.2s (total: 0.5s from now)
2026-01-10T12:45:27.017934511Z [err]  2026-01-10 12:45:26,853 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768049126.853 (chunk 1/9, 160 bytes)
2026-01-10T12:45:27.017940233Z [err]  2026-01-10 12:45:26,853 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 9 CHUNKS SENT TO TELNYX in 0ms (audio duration: 0.2s, paced after 10 chunks)
2026-01-10T12:45:27.017948368Z [err]  2026-01-10 12:45:26,853 - persistent_tts_service - INFO - ‚úÖ Sent 9 audio chunks via WebSocket (paced sending enabled)
2026-01-10T12:45:27.017954801Z [err]  2026-01-10 12:45:26,853 - persistent_tts_service - INFO - üì§ Sending 13792 bytes of audio (87 chunks, 1.7s duration) via WebSocket
2026-01-10T12:45:27.017961784Z [err]  2026-01-10 12:45:26,853 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T12:45:27.017968618Z [err]  2026-01-10 12:45:26,853 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.7s (total: 2.2s from now)
2026-01-10T12:45:27.018105286Z [err]  2026-01-10 12:45:26,852 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 87 CHUNKS SENT TO TELNYX in 1440ms (audio duration: 1.7s, paced after 10 chunks)
2026-01-10T12:45:27.022795850Z [err]  2026-01-10 12:45:26,853 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768049126.853 (chunk 1/87, 160 bytes)
2026-01-10T12:45:28.302707216Z [err]  2026-01-10 12:45:28,298 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 87 CHUNKS SENT TO TELNYX in 1445ms (audio duration: 1.7s, paced after 10 chunks)
2026-01-10T12:45:28.302718066Z [err]  2026-01-10 12:45:28,298 - persistent_tts_service - INFO - ‚úÖ Sent 87 audio chunks via WebSocket (paced sending enabled)
2026-01-10T12:45:28.302724246Z [err]  2026-01-10 12:45:28,298 - persistent_tts_service - INFO - üì§ Sending 325 bytes of audio (3 chunks, 0.0s duration) via WebSocket
2026-01-10T12:45:28.302730443Z [err]  2026-01-10 12:45:28,298 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T12:45:28.302737464Z [err]  2026-01-10 12:45:28,298 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +0.0s (total: 0.8s from now)
2026-01-10T12:45:28.302743741Z [err]  2026-01-10 12:45:28,299 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768049128.299 (chunk 1/3, 160 bytes)
2026-01-10T12:45:28.302752238Z [err]  2026-01-10 12:45:28,299 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 3 CHUNKS SENT TO TELNYX in 0ms (audio duration: 0.0s, paced after 10 chunks)
2026-01-10T12:45:28.302760337Z [err]  2026-01-10 12:45:28,299 - persistent_tts_service - INFO - ‚úÖ Sent 3 audio chunks via WebSocket (paced sending enabled)
2026-01-10T12:45:28.302766552Z [err]  2026-01-10 12:45:28,299 - persistent_tts_service - INFO - üì§ Sending 13793 bytes of audio (87 chunks, 1.7s duration) via WebSocket
2026-01-10T12:45:28.302772806Z [err]  2026-01-10 12:45:28,299 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T12:45:28.302778628Z [err]  2026-01-10 12:45:28,299 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.7s (total: 2.5s from now)
2026-01-10T12:45:28.306948303Z [err]  2026-01-10 12:45:28,299 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768049128.299 (chunk 1/87, 160 bytes)
2026-01-10T12:45:30.242655246Z [err]  2026-01-10 12:45:29,740 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 87 CHUNKS SENT TO TELNYX in 1441ms (audio duration: 1.7s, paced after 10 chunks)
2026-01-10T12:45:30.242665147Z [err]  2026-01-10 12:45:29,740 - persistent_tts_service - INFO - ‚úÖ Sent 87 audio chunks via WebSocket (paced sending enabled)
2026-01-10T12:45:30.242672422Z [err]  2026-01-10 12:45:29,740 - persistent_tts_service - INFO - üì§ Sending 2183 bytes of audio (14 chunks, 0.3s duration) via WebSocket
2026-01-10T12:45:30.242680585Z [err]  2026-01-10 12:45:29,740 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T12:45:30.242687756Z [err]  2026-01-10 12:45:29,740 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +0.3s (total: 1.3s from now)
2026-01-10T12:45:30.242694597Z [err]  2026-01-10 12:45:29,741 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768049129.741 (chunk 1/14, 160 bytes)
2026-01-10T12:45:30.242709610Z [err]  2026-01-10 12:45:29,816 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 14 CHUNKS SENT TO TELNYX in 75ms (audio duration: 0.3s, paced after 10 chunks)
2026-01-10T12:45:30.242718116Z [err]  2026-01-10 12:45:29,816 - persistent_tts_service - INFO - ‚úÖ Sent 14 audio chunks via WebSocket (paced sending enabled)
2026-01-10T12:45:30.242725910Z [err]  2026-01-10 12:45:29,816 - persistent_tts_service - INFO - üì§ Sending 16347 bytes of audio (103 chunks, 2.0s duration) via WebSocket
2026-01-10T12:45:30.242733943Z [err]  2026-01-10 12:45:29,816 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T12:45:30.242745965Z [err]  2026-01-10 12:45:29,816 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +2.0s (total: 3.3s from now)
2026-01-10T12:45:30.246452477Z [err]  2026-01-10 12:45:29,817 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768049129.817 (chunk 1/103, 160 bytes)
2026-01-10T12:45:30.246462755Z [err]  2026-01-10 12:45:29,968 - server - INFO - üì§ Audio flowing: 1092 packets sent to Soniox (5s update)
2026-01-10T12:45:30.246475893Z [err]  2026-01-10 12:45:30,052 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (3.1s left)
2026-01-10T12:45:31.251837454Z [err]  2026-01-10 12:45:30,555 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (2.6s left)
2026-01-10T12:45:31.251845116Z [err]  2026-01-10 12:45:31,111 - server - INFO - üé§ Soniox receiver alive - 12 messages received in last 10s
2026-01-10T12:45:32.209850239Z [err]  2026-01-10 12:45:31,555 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 103 CHUNKS SENT TO TELNYX in 1738ms (audio duration: 2.0s, paced after 10 chunks)
2026-01-10T12:45:32.209857842Z [err]  2026-01-10 12:45:31,556 - persistent_tts_service - INFO - ‚úÖ Sent 103 audio chunks via WebSocket (paced sending enabled)
2026-01-10T12:45:32.209864838Z [err]  2026-01-10 12:45:31,556 - persistent_tts_service - INFO - üì§ Sending 11145 bytes of audio (70 chunks, 1.4s duration) via WebSocket
2026-01-10T12:45:32.209873105Z [err]  2026-01-10 12:45:31,556 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T12:45:32.209881225Z [err]  2026-01-10 12:45:31,556 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.4s (total: 3.0s from now)
2026-01-10T12:45:32.209889228Z [err]  2026-01-10 12:45:31,556 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768049131.556 (chunk 1/70, 160 bytes)
2026-01-10T12:45:33.243483792Z [err]  2026-01-10 12:45:32,688 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 70 CHUNKS SENT TO TELNYX in 1131ms (audio duration: 1.4s, paced after 10 chunks)
2026-01-10T12:45:33.243491363Z [err]  2026-01-10 12:45:32,688 - persistent_tts_service - INFO - ‚úÖ Sent 70 audio chunks via WebSocket (paced sending enabled)
2026-01-10T12:45:33.243498328Z [err]  2026-01-10 12:45:32,688 - persistent_tts_service - INFO - üì§ Sending 13793 bytes of audio (87 chunks, 1.7s duration) via WebSocket
2026-01-10T12:45:33.243505236Z [err]  2026-01-10 12:45:32,688 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T12:45:33.243512023Z [err]  2026-01-10 12:45:32,689 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.7s (total: 3.5s from now)
2026-01-10T12:45:33.243521156Z [err]  2026-01-10 12:45:32,689 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768049132.689 (chunk 1/87, 160 bytes)
2026-01-10T12:45:34.188577511Z [err]  2026-01-10 12:45:34,125 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 87 CHUNKS SENT TO TELNYX in 1436ms (audio duration: 1.7s, paced after 10 chunks)
2026-01-10T12:45:34.188586646Z [err]  2026-01-10 12:45:34,125 - persistent_tts_service - INFO - ‚úÖ Sent 87 audio chunks via WebSocket (paced sending enabled)
2026-01-10T12:45:34.188595895Z [err]  2026-01-10 12:45:34,125 - persistent_tts_service - INFO - üì§ Sending 325 bytes of audio (3 chunks, 0.0s duration) via WebSocket
2026-01-10T12:45:34.188603773Z [err]  2026-01-10 12:45:34,125 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T12:45:34.188610298Z [err]  2026-01-10 12:45:34,125 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +0.0s (total: 2.2s from now)
2026-01-10T12:45:34.188617273Z [err]  2026-01-10 12:45:34,126 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768049134.126 (chunk 1/3, 160 bytes)
2026-01-10T12:45:34.188623335Z [err]  2026-01-10 12:45:34,126 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 3 CHUNKS SENT TO TELNYX in 0ms (audio duration: 0.0s, paced after 10 chunks)
2026-01-10T12:45:34.188629414Z [err]  2026-01-10 12:45:34,126 - persistent_tts_service - INFO - ‚úÖ Sent 3 audio chunks via WebSocket (paced sending enabled)
2026-01-10T12:45:34.188636391Z [err]  2026-01-10 12:45:34,126 - persistent_tts_service - INFO - üì§ Sending 27492 bytes of audio (172 chunks, 3.4s duration) via WebSocket
2026-01-10T12:45:34.188645268Z [err]  2026-01-10 12:45:34,126 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T12:45:34.188655018Z [err]  2026-01-10 12:45:34,126 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +3.4s (total: 5.6s from now)
2026-01-10T12:45:34.221675411Z [err]  2026-01-10 12:45:34,126 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768049134.126 (chunk 1/172, 160 bytes)
2026-01-10T12:45:35.197048140Z [err]  2026-01-10 12:45:34,989 - server - INFO - üì§ Audio flowing: 1343 packets sent to Soniox (5s update)
2026-01-10T12:45:35.197089744Z [err]  2026-01-10 12:45:35,087 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (4.6s left)
2026-01-10T12:45:36.158338276Z [err]  2026-01-10 12:45:35,589 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (4.1s left)
2026-01-10T12:45:37.155414238Z [err]  2026-01-10 12:45:37,136 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 172 CHUNKS SENT TO TELNYX in 3010ms (audio duration: 3.4s, paced after 10 chunks)
2026-01-10T12:45:37.155421260Z [err]  2026-01-10 12:45:37,136 - persistent_tts_service - INFO - ‚úÖ Sent 172 audio chunks via WebSocket (paced sending enabled)
2026-01-10T12:45:40.065235166Z [err]  2026-01-10 12:45:39,865 - persistent_tts_service - INFO - üîá [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] FLOOR RELEASED (is_holding_floor=False)
2026-01-10T12:45:40.065241612Z [err]  2026-01-10 12:45:40,007 - server - INFO - üì§ Audio flowing: 1594 packets sent to Soniox (5s update)
2026-01-10T12:45:40.113657400Z [err]  2026-01-10 12:45:40,107 - dead_air_monitor - INFO - ‚è±Ô∏è Playback expected end time passed (0.4s ago), marking agent as done speaking
2026-01-10T12:45:40.113664472Z [err]  2026-01-10 12:45:40,107 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1768049140.1077776 for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:40.113669609Z [err]  2026-01-10 12:45:40,107 - core_calling_service - INFO - ü§ñ Agent stopped speaking for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:40.113674301Z [err]  2026-01-10 12:45:40,107 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=False, user_speaking=False, silence=0.0s, checkin_count=0/2
2026-01-10T12:45:41.078226618Z [err]  2026-01-10 12:45:40,608 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=False, user_speaking=False, silence=0.5s, checkin_count=0/2
2026-01-10T12:45:42.213286848Z [err]  2026-01-10 12:45:41,907 - server - INFO - üé§ Soniox receiver alive - 10 messages received in last 10s
2026-01-10T12:45:42.512907414Z [err]  2026-01-10 12:45:42,507 - server - INFO - üî§ RAW TOKENS: [" I"?]
2026-01-10T12:45:42.512915697Z [err]  2026-01-10 12:45:42,508 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER RESET (user started speaking) for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:42.512922408Z [err]  2026-01-10 12:45:42,508 - core_calling_service - INFO - üîä Silence timer reset for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q (user started speaking)
2026-01-10T12:45:42.512929115Z [err]  2026-01-10 12:45:42,508 - core_calling_service - INFO - üë§ User started speaking for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:42.512935189Z [err]  2026-01-10 12:45:42,508 - persistent_tts_service - INFO - ‚ö° [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] CLEAR_AUDIO called - pending_sentences=0, audio_queue=0
2026-01-10T12:45:42.512942037Z [err]  2026-01-10 12:45:42,508 - persistent_tts_service - INFO - üõë [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] INTERRUPT - Floor Released (is_holding_floor=False)
2026-01-10T12:45:42.541730194Z [err]  2026-01-10 12:45:42,539 - persistent_tts_service - INFO - üõë [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] Sent clear event to Telnyx WebSocket (3x)
2026-01-10T12:45:42.541740780Z [err]  2026-01-10 12:45:42,540 - persistent_tts_service - INFO - ‚è±Ô∏è [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] Reset playback_expected_end_time to NOW
2026-01-10T12:45:42.544164509Z [err]  2026-01-10 12:45:42,540 - server - INFO - üìä [REAL TIMING] AUDIO QUEUE CLEARED (user started speaking) for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:42.544174214Z [err]  2026-01-10 12:45:42,541 - redis_service - INFO - üì• Retrieved call data from Redis: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:42.544180766Z [err]  2026-01-10 12:45:42,542 - redis_service - INFO - üì¶ Stored call data in Redis: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q (TTL: 3600s)
2026-01-10T12:45:42.544186471Z [err]  2026-01-10 12:45:42,542 - server - INFO - üîç PARTIAL TRANSCRIPT: 'I' | Generating: False
2026-01-10T12:45:43.139197170Z [err]  2026-01-10 12:45:42,617 - server - INFO - üî§ RAW TOKENS: [" I"?, " don"?]
2026-01-10T12:45:43.139202194Z [err]  2026-01-10 12:45:42,617 - server - INFO - üîç PARTIAL TRANSCRIPT: 'I don' | Generating: False
2026-01-10T12:45:43.139206783Z [err]  2026-01-10 12:45:42,750 - server - INFO - üî§ RAW TOKENS: [" I"?, " don"?, "'t"?]
2026-01-10T12:45:43.139211276Z [err]  2026-01-10 12:45:42,751 - server - INFO - üîç PARTIAL TRANSCRIPT: 'I don't' | Generating: False
2026-01-10T12:45:43.139216922Z [err]  2026-01-10 12:45:42,888 - server - INFO - üî§ RAW TOKENS: [" I"?, " don"?, "'t"?, " l"?]
2026-01-10T12:45:43.139221135Z [err]  2026-01-10 12:45:42,889 - server - INFO - üîç PARTIAL TRANSCRIPT: 'I don't l' | Generating: False
2026-01-10T12:45:43.139226229Z [err]  2026-01-10 12:45:43,014 - server - INFO - üî§ RAW TOKENS: [" I"?, " don"?, "'t"?, " l"?, "ike"?]
2026-01-10T12:45:43.139231994Z [err]  2026-01-10 12:45:43,015 - server - INFO - üîç PARTIAL TRANSCRIPT: 'I don't like' | Generating: False
2026-01-10T12:45:43.139236506Z [err]  2026-01-10 12:45:43,082 - server - INFO - üî§ RAW TOKENS: [" I"?, " don"?, "'t"?, " l"?, "ike"?, " sc"?]
2026-01-10T12:45:43.139242730Z [err]  2026-01-10 12:45:43,083 - server - INFO - üîç PARTIAL TRANSCRIPT: 'I don't like sc' | Generating: False
2026-01-10T12:45:43.345785606Z [err]  2026-01-10 12:45:43,343 - server - INFO - üî§ RAW TOKENS: [" I"?, " don"?, "'t"?, " l"?, "ike"?, " sc"?, "am"?]
2026-01-10T12:45:43.345794307Z [err]  2026-01-10 12:45:43,343 - server - INFO - üîç PARTIAL TRANSCRIPT: 'I don't like scam' | Generating: False
2026-01-10T12:45:43.465777983Z [err]  2026-01-10 12:45:43,457 - server - INFO - üî§ RAW TOKENS: [" I"‚úì, " don"‚úì, "'t"‚úì, " l"‚úì, "ike"‚úì, " sc"‚úì, "am"‚úì, "s."‚úì, "<end>"‚úì]
2026-01-10T12:45:43.465785527Z [err]  2026-01-10 12:45:43,457 - server - INFO - üéØ Endpoint detected: <end> token received
2026-01-10T12:45:43.465790387Z [err]  2026-01-10 12:45:43,457 - server - INFO - üßπ Cleaned transcript: ' I  don 't  l ike  sc am s.' -> 'I don't like scam s.'
2026-01-10T12:45:43.465796424Z [err]  2026-01-10 12:45:43,458 - server - INFO - üì• FINAL TOKENS: 'I don't like scam s.' (8 tokens)
2026-01-10T12:45:43.465801860Z [err]  2026-01-10 12:45:43,458 - server - INFO - üé§ Soniox final transcript: 'I don't like scam s.'
2026-01-10T12:45:43.465808048Z [err]  2026-01-10 12:45:43,458 - server - INFO - üîç FILTER CHECK: words=5, is_filler=False, is_garbled=False, tts_speaking=False, time_until_done=-0.9s, generating=False, playbacks=0, is_active=False
2026-01-10T12:45:43.465813065Z [err]  2026-01-10 12:45:43,458 - server - INFO - üöÄ Spawned tracked background task for endpoint processing
2026-01-10T12:45:43.465818325Z [err]  2026-01-10 12:45:43,458 - server - INFO - ‚è±Ô∏è [12:45:43.458] üìù FINAL TRANSCRIPT RECEIVED: 'I don't like scam s.'
2026-01-10T12:45:43.465822877Z [err]  2026-01-10 12:45:43,458 - server - INFO - ‚è±Ô∏è [12:45:43.458] STT endpoint detection latency: 7ms
2026-01-10T12:45:43.465828226Z [err]  2026-01-10 12:45:43,458 - server - INFO - ‚è±Ô∏è [12:45:43.458] üé§ USER STOPPED SPEAKING - Beginning processing pipeline
2026-01-10T12:45:43.465832146Z [err]  2026-01-10 12:45:43,458 - server - INFO - ‚è±Ô∏è User spoke at 1768049143.458318
2026-01-10T12:45:43.465835897Z [err]  2026-01-10 12:45:43,459 - redis_service - INFO - üì¶ Stored call data in Redis: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q (TTL: 3600s)
2026-01-10T12:45:43.465840319Z [err]  2026-01-10 12:45:43,459 - server - INFO - üë§ User has spoken - aiSpeaksAfterSilence timer cancelled if pending
2026-01-10T12:45:43.467335624Z [err]  2026-01-10 12:45:43,459 - server - INFO - ‚úÖ Agent SILENT - User said 5 word(s): 'I don't like scam s.' - Processing...
2026-01-10T12:45:43.471059952Z [err]  2026-01-10 12:45:43,469 - server - INFO - üìä [REAL TIMING] STT: User audio end ‚Üí Transcript received: -8ms
2026-01-10T12:45:43.471066157Z [err]  2026-01-10 12:45:43,469 - server - INFO - üé§ Endpoint detected by Soniox - processing transcript: I don't like scam s.
2026-01-10T12:45:43.471074802Z [err]  2026-01-10 12:45:43,469 - core_calling_service - INFO - üë§ User stopped speaking for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:43.474899255Z [err]  2026-01-10 12:45:43,470 - server - INFO - ‚úÖ User starting new turn - resetting agent speaking flag
2026-01-10T12:45:43.474906425Z [err]  2026-01-10 12:45:43,470 - server - INFO - ‚è±Ô∏è [TIMING] STT_START: User last audio packet received
2026-01-10T12:45:43.474911575Z [err]  2026-01-10 12:45:43,470 - server - INFO - ‚è±Ô∏è [TIMING] STT_END: Endpoint detected at T+2ms
2026-01-10T12:45:43.474915622Z [err]  2026-01-10 12:45:43,470 - server - INFO - ‚è±Ô∏è [TIMING] STT_LATENCY: 2ms (Soniox model: stt-rt-v3)
2026-01-10T12:45:43.474920387Z [err]  2026-01-10 12:45:43,470 - server - INFO - ‚è±Ô∏è  USER STOPPED SPEAKING at T=0ms
2026-01-10T12:45:43.474924921Z [err]  2026-01-10 12:45:43,470 - server - INFO - üìä [REAL TIMING] Processing start: 20ms after user audio end
2026-01-10T12:45:43.474929052Z [err]  2026-01-10 12:45:43,470 - server - INFO - üéôÔ∏è Agent generating response - interruption detection active
2026-01-10T12:45:43.474933788Z [err]  2026-01-10 12:45:43,470 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:44.178186570Z [err]  2026-01-10 12:45:43,945 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q/actions/playback_stop "HTTP/1.1 200 OK"
2026-01-10T12:45:44.178192363Z [err]  2026-01-10 12:45:43,947 - telnyx_service - INFO - ‚úÖ Successfully stopped audio playback
2026-01-10T12:45:44.178197102Z [err]  2026-01-10 12:45:43,947 - core_calling_service - INFO - ‚úÖ BARGE-IN: Audio playback STOPPED
2026-01-10T12:45:44.178202080Z [err]  2026-01-10 12:45:43,947 - core_calling_service - INFO - ‚úÖ BARGE-IN: Preserving silence greeting in history to maintain context
2026-01-10T12:45:44.178204846Z [err]  2026-01-10 12:45:43,564 - server - INFO - üìù Saved user transcript to database
2026-01-10T12:45:44.178210951Z [err]  2026-01-10 12:45:43,565 - persistent_tts_service - INFO - üîÑ [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] Interrupt flag reset - ready for new audio
2026-01-10T12:45:44.178216565Z [err]  2026-01-10 12:45:43,565 - server - INFO - üîÑ Reset TTS interrupt flag before new response
2026-01-10T12:45:44.178223130Z [err]  2026-01-10 12:45:43,565 - core_calling_service - INFO - ‚è±Ô∏è [12:45:43.565] üì• process_user_input() ENTRY - text: 'I don't like scam s....'
2026-01-10T12:45:44.178230153Z [err]  2026-01-10 12:45:43,566 - redis_service - INFO - üì• Retrieved call data from Redis: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:44.178235019Z [err]  2026-01-10 12:45:43,566 - core_calling_service - WARNING - üö® BARGE-IN DETECTED for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q: User spoke while Silence Greeting was triggering
2026-01-10T12:45:44.178243693Z [err]  2026-01-10 12:45:43,592 - telnyx_service - INFO - Telnyx service initialized with connection: 2777245537294877821
2026-01-10T12:45:44.178250203Z [err]  2026-01-10 12:45:43,592 - telnyx_service - INFO - üõë Stopping audio playback on call: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:44.184205144Z [err]  2026-01-10 12:45:43,948 - redis_service - INFO - üì• Retrieved call data from Redis: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:44.184211700Z [err]  2026-01-10 12:45:43,949 - redis_service - INFO - üì¶ Stored call data in Redis: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q (TTL: 3600s)
2026-01-10T12:45:44.184217306Z [err]  2026-01-10 12:45:43,949 - core_calling_service - INFO - ‚úÖ BARGE-IN: Reset silence_greeting_triggered flag
2026-01-10T12:45:44.184223946Z [err]  2026-01-10 12:45:43,949 - core_calling_service - INFO - ‚è±Ô∏è [12:45:43.949] ‚è© About to call _process_call_flow_streaming()
2026-01-10T12:45:44.184231850Z [err]  2026-01-10 12:45:43,949 - core_calling_service - INFO - ‚è±Ô∏è [12:45:43.949] üîÄ Agent type: call_flow, calling flow processor...
2026-01-10T12:45:44.184238501Z [err]  2026-01-10 12:45:43,950 - core_calling_service - INFO - ‚è±Ô∏è [12:45:43.950] üîÄ _process_call_flow_streaming() ENTRY
2026-01-10T12:45:44.184245350Z [err]  2026-01-10 12:45:43,950 - core_calling_service - INFO - Flow processing - History length: 7, Is first: False
2026-01-10T12:45:44.184254065Z [err]  2026-01-10 12:45:43,950 - core_calling_service - INFO - üîç Using explicitly set current_node_id: 1763161849799
2026-01-10T12:45:44.184261465Z [err]  2026-01-10 12:45:43,950 - core_calling_service - INFO - ‚è±Ô∏è [12:45:43.950] üöÄ Checking special cases before merged transition+response...
2026-01-10T12:45:44.184269965Z [err]  2026-01-10 12:45:43,950 - core_calling_service - INFO - ‚è±Ô∏è Using MERGED transition+response for: I don't like scam s....
2026-01-10T12:45:44.184277290Z [err]  2026-01-10 12:45:43,950 - core_calling_service - INFO - Evaluating transitions from Node ID: N_Opener_StackingIncomeHook_V3_CreativeTactic for message: I don't like scam s.
2026-01-10T12:45:44.184283602Z [err]  2026-01-10 12:45:43,950 - core_calling_service - INFO - ‚è±Ô∏è [12:45:43.950] üöÄ MERGED TRANSITION+RESPONSE START - 4 options
2026-01-10T12:45:45.120357600Z [err]  2026-01-10 12:45:44,887 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/2 200 OK"
2026-01-10T12:45:45.120363901Z [err]  2026-01-10 12:45:45,008 - server - INFO - üì§ Audio flowing: 1844 packets sent to Soniox (5s update)
2026-01-10T12:45:45.285790352Z [err]  2026-01-10 12:45:45,283 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - response generation still in progress
2026-01-10T12:45:46.153959124Z [err]  2026-01-10 12:45:45,784 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - response generation still in progress
2026-01-10T12:45:46.316936641Z [err]  2026-01-10 12:45:46,310 - core_calling_service - INFO - ‚ö° MERGED TTFT: 2360ms
2026-01-10T12:45:46.316943937Z [err]  2026-01-10 12:45:46,311 - core_calling_service - INFO - ‚ö° MERGED: Transition marker [T:1] detected
2026-01-10T12:45:46.362204493Z [err]  2026-01-10 12:45:46,354 - server - INFO - üì§ Sentence arrived from LLM: [S] I get why you might think that....
2026-01-10T12:45:46.362209553Z [err]  2026-01-10 12:45:46,354 - server - INFO - ‚è±Ô∏è [TIMING] TTFS (Time To First Sentence): 2884ms
2026-01-10T12:45:46.362214843Z [err]  2026-01-10 12:45:46,354 - server - INFO - ‚ö° Starting REAL-TIME TTS for first sentence
2026-01-10T12:45:46.362219769Z [err]  2026-01-10 12:45:46,355 - server - INFO - üîç Persistent TTS lookup: call_id=v3:HAthGByfra9BUS24U..., session=FOUND
2026-01-10T12:45:46.362225050Z [err]  2026-01-10 12:45:46,355 - server - INFO - üöÄ Streaming sentence #1 via persistent WebSocket
2026-01-10T12:45:46.362229949Z [err]  2026-01-10 12:45:46,355 - server - INFO - üéµ TTS task #1 started at +0ms
2026-01-10T12:45:46.362234766Z [err]  2026-01-10 12:45:46,355 - server - INFO - ‚è±Ô∏è [TIMING] TTFT_TTS (First TTS Task Started): 2884ms
2026-01-10T12:45:46.362239585Z [err]  2026-01-10 12:45:46,355 - core_calling_service - INFO - üì§ Streamed: [S] I get why you might think that....
2026-01-10T12:45:46.362244961Z [err]  2026-01-10 12:45:46,355 - persistent_tts_service - INFO - üé§ [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] Streaming sentence #6: [S] I get why you might think that....
2026-01-10T12:45:46.362250691Z [err]  2026-01-10 12:45:46,355 - persistent_tts_service - INFO - üöÄ [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] Sent sentence #6 to ElevenLabs in 0ms (non-blocking)
2026-01-10T12:45:46.362255787Z [err]  2026-01-10 12:45:46,355 - persistent_tts_service - INFO - üìä [REAL TIMING] TEXT SENT TO ELEVENLABS: '[S] I get why you might think that....'
2026-01-10T12:45:46.507424848Z [err]  2026-01-10 12:45:46,505 - server - INFO - üì§ Sentence arrived from LLM: We've helped over 7,500 students build passive inc...
2026-01-10T12:45:46.507430632Z [err]  2026-01-10 12:45:46,506 - server - INFO - üîç Persistent TTS lookup: call_id=v3:HAthGByfra9BUS24U..., session=FOUND
2026-01-10T12:45:46.507436476Z [err]  2026-01-10 12:45:46,506 - server - INFO - üöÄ Streaming sentence #2 via persistent WebSocket
2026-01-10T12:45:46.507442142Z [err]  2026-01-10 12:45:46,506 - server - INFO - üéµ TTS task #2 started at +151ms
2026-01-10T12:45:46.507449697Z [err]  2026-01-10 12:45:46,506 - core_calling_service - INFO - üì§ Streamed: We've helped over 7,500 students build passive inc...
2026-01-10T12:45:46.509804728Z [err]  2026-01-10 12:45:46,506 - persistent_tts_service - INFO - üé§ [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] Streaming sentence #7: We've helped over 7,500 students build passive inc...
2026-01-10T12:45:46.509818928Z [err]  2026-01-10 12:45:46,506 - persistent_tts_service - INFO - üöÄ [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] Sent sentence #7 to ElevenLabs in 0ms (non-blocking)
2026-01-10T12:45:46.509831519Z [err]  2026-01-10 12:45:46,506 - persistent_tts_service - INFO - üìä [REAL TIMING] TEXT SENT TO ELEVENLABS: 'We've helped over 7,500 students build passive inc...'
2026-01-10T12:45:46.537535524Z [err]  2026-01-10 12:45:46,535 - server - INFO - üì§ Sentence arrived from LLM: What specific part concerns you?...
2026-01-10T12:45:46.537542861Z [err]  2026-01-10 12:45:46,535 - server - INFO - üîç Persistent TTS lookup: call_id=v3:HAthGByfra9BUS24U..., session=FOUND
2026-01-10T12:45:46.537549698Z [err]  2026-01-10 12:45:46,535 - server - INFO - üöÄ Streaming sentence #3 via persistent WebSocket
2026-01-10T12:45:46.537555226Z [err]  2026-01-10 12:45:46,535 - server - INFO - üéµ TTS task #3 started at +180ms
2026-01-10T12:45:46.537561633Z [err]  2026-01-10 12:45:46,535 - core_calling_service - INFO - üì§ Streamed: What specific part concerns you?...
2026-01-10T12:45:46.537567357Z [err]  2026-01-10 12:45:46,535 - persistent_tts_service - INFO - üé§ [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] Streaming sentence #8: What specific part concerns you?...
2026-01-10T12:45:46.537572283Z [err]  2026-01-10 12:45:46,535 - persistent_tts_service - INFO - üöÄ [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] Sent sentence #8 to ElevenLabs in 0ms (non-blocking)
2026-01-10T12:45:46.537577600Z [err]  2026-01-10 12:45:46,535 - persistent_tts_service - INFO - üìä [REAL TIMING] TEXT SENT TO ELEVENLABS: 'What specific part concerns you?...'
2026-01-10T12:45:46.574336734Z [err]  2026-01-10 12:45:46,569 - core_calling_service - INFO - ‚è±Ô∏è MERGED TRANSITION+RESPONSE COMPLETE - took 2619ms
2026-01-10T12:45:46.574342494Z [err]  2026-01-10 12:45:46,570 - core_calling_service - INFO - ‚úÖ MERGED: Transitioning to Node ID: N003B_DeframeInitialObjection_V7_GoalOriented
2026-01-10T12:45:46.574349541Z [err]  2026-01-10 12:45:46,570 - core_calling_service - INFO - ‚è±Ô∏è [TIMING] MERGED_TRANSITION_RESPONSE: 2619ms
2026-01-10T12:45:46.574355501Z [err]  2026-01-10 12:45:46,570 - core_calling_service - INFO - üîä Silence tracking reset for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q (user responded)
2026-01-10T12:45:46.574364316Z [err]  2026-01-10 12:45:46,570 - core_calling_service - INFO - ‚úÖ User responded to regular message, resetting counter
2026-01-10T12:45:46.574370584Z [err]  2026-01-10 12:45:46,570 - core_calling_service - INFO - üíæ Storing node ID 1763161961589 in conversation history
2026-01-10T12:45:46.574378714Z [err]  2026-01-10 12:45:46,570 - core_calling_service - INFO - LLM response (3.01s): [S] I get why you might think that. We've helped over 7,500 students build passive income sites just like this. What specific part concerns you?
2026-01-10T12:45:46.574383168Z [err]  2026-01-10 12:45:46,570 - core_calling_service - INFO - Total latency: 3.01s
2026-01-10T12:45:46.574387330Z [err]  2026-01-10 12:45:46,571 - server - INFO - ‚úÖ LLM finished in 3100ms, TTS tasks already running in background
2026-01-10T12:45:46.574392085Z [err]  2026-01-10 12:45:46,571 - server - INFO - üéµ Streaming 3 TTS chunks as they complete...
2026-01-10T12:45:46.574397108Z [err]  2026-01-10 12:45:46,571 - server - INFO - üöÄ Persistent TTS: Audio already streaming in background!
2026-01-10T12:45:46.574401910Z [err]  2026-01-10 12:45:46,571 - server - INFO -    3 sentences queued and playing seamlessly
2026-01-10T12:45:46.574406015Z [err]  2026-01-10 12:45:46,572 - server - INFO - ‚úÖ All 3 persistent TTS streams completed
2026-01-10T12:45:46.577186992Z [err]  2026-01-10 12:45:46,572 - server - INFO - ‚úÖ Agent generation complete (persistent TTS) - response window closed
2026-01-10T12:45:46.577194406Z [err]  2026-01-10 12:45:46,572 - server - INFO - ‚è±Ô∏è  FIRST AUDIO STARTED: 3101ms from user stop üöÄ
2026-01-10T12:45:46.577202612Z [err]  2026-01-10 12:45:46,572 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:46.577208872Z [err]  2026-01-10 12:45:46,572 - server - INFO - ‚úÖ Agent generation complete - response window closed
2026-01-10T12:45:46.577215967Z [err]  2026-01-10 12:45:46,572 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2026-01-10T12:45:46.577221739Z [err]  2026-01-10 12:45:46,572 - server - INFO - ‚è±Ô∏è  [TIMING] ==== E2E LATENCY SUMMARY ====
2026-01-10T12:45:46.577227306Z [err]  2026-01-10 12:45:46,572 - server - INFO - ‚è±Ô∏è  [TIMING] STT: 2ms (provider: soniox, model: stt-rt-v3)
2026-01-10T12:45:46.577232779Z [err]  2026-01-10 12:45:46,572 - server - INFO - ‚è±Ô∏è  [TIMING] LLM_TOTAL: 3100ms (provider: grok, model: grok-4-1-fast-non-reasoning)
2026-01-10T12:45:46.577238219Z [err]  2026-01-10 12:45:46,572 - server - INFO - ‚è±Ô∏è  [TIMING] TTS_TOTAL: 217ms (provider: elevenlabs, websocket: False)
2026-01-10T12:45:46.577244795Z [err]  2026-01-10 12:45:46,572 - server - INFO - ‚è±Ô∏è  [TIMING] E2E_TOTAL: 3101ms (user stopped ‚Üí play_audio_url called)
2026-01-10T12:45:46.577250744Z [err]  2026-01-10 12:45:46,572 - server - INFO - ‚è±Ô∏è  [TIMING] ‚ö†Ô∏è NOTE: E2E_TOTAL does not include:
2026-01-10T12:45:46.577254990Z [err]  2026-01-10 12:45:46,572 - server - INFO - ‚è±Ô∏è  [TIMING]   - Telnyx processing time (~50-200ms)
2026-01-10T12:45:46.577260697Z [err]  2026-01-10 12:45:46,572 - server - INFO - ‚è±Ô∏è  [TIMING]   - Network latency to user's phone (~50-150ms)
2026-01-10T12:45:46.579194701Z [err]  2026-01-10 12:45:46,572 - server - INFO - ‚è±Ô∏è  [TIMING]   - Phone audio buffering (~50-200ms)
2026-01-10T12:45:46.579209036Z [err]  2026-01-10 12:45:46,572 - server - INFO - ‚è±Ô∏è  [TIMING]   - TOTAL MISSING: ~150-550ms typically
2026-01-10T12:45:46.579218287Z [err]  2026-01-10 12:45:46,572 - server - INFO - ‚è±Ô∏è  [TIMING]   - REAL USER LATENCY: 3401ms estimated
2026-01-10T12:45:46.579225014Z [err]  2026-01-10 12:45:46,572 - server - INFO - ‚è±Ô∏è  [TIMING] RESPONSE_TEXT: 144 chars, 3 sentences
2026-01-10T12:45:46.579232145Z [err]  2026-01-10 12:45:46,572 - server - INFO - ‚è±Ô∏è  [TIMING] USER_INPUT: 'I don't like scam s....'
2026-01-10T12:45:46.579239338Z [err]  2026-01-10 12:45:46,572 - server - INFO - ‚è±Ô∏è  [TIMING] AI_RESPONSE: '[S] I get why you might think that. We've helped over 7,500 ...'
2026-01-10T12:45:46.579247175Z [err]  2026-01-10 12:45:46,572 - server - INFO - ‚è±Ô∏è  [TIMING] ==========================
2026-01-10T12:45:46.579253721Z [err]  2026-01-10 12:45:46,572 - server - INFO - ‚è±Ô∏è  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2026-01-10T12:45:47.194369468Z [err]  2026-01-10 12:45:46,681 - persistent_tts_service - INFO - üì§ Sending 36781 bytes of audio (230 chunks, 4.6s duration) via WebSocket
2026-01-10T12:45:47.194374800Z [err]  2026-01-10 12:45:46,681 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T12:45:47.194381242Z [err]  2026-01-10 12:45:46,682 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +4.6s (total: 4.6s from now)
2026-01-10T12:45:47.194385421Z [err]  2026-01-10 12:45:46,682 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768049146.682 (chunk 1/230, 160 bytes)
2026-01-10T12:45:47.194389531Z [err]  2026-01-10 12:45:46,760 - server - INFO - üìù Saved assistant transcript and latency to database (Node: Node ID: N003B_DeframeInitialObjection_V7_GoalOriented, Dead Air: 3319ms)
2026-01-10T12:45:47.194394668Z [err]  2026-01-10 12:45:46,760 - server - INFO - üîä Agent finished generating, 0 playbacks active - waiting for webhooks to close window and start silence tracking
2026-01-10T12:45:47.194399570Z [err]  2026-01-10 12:45:46,761 - server - INFO - üîç END CALL CHECK: should_end_call=False, max_checkins=False, max_duration=False
2026-01-10T12:45:50.155249743Z [err]  2026-01-10 12:45:50,027 - server - INFO - üì§ Audio flowing: 2094 packets sent to Soniox (5s update)
2026-01-10T12:45:50.314958077Z [err]  2026-01-10 12:45:50,307 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (1.0s left)
2026-01-10T12:45:51.230462111Z [err]  2026-01-10 12:45:50,777 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 230 CHUNKS SENT TO TELNYX in 4095ms (audio duration: 4.6s, paced after 10 chunks)
2026-01-10T12:45:51.230472959Z [err]  2026-01-10 12:45:50,778 - persistent_tts_service - INFO - ‚úÖ Sent 230 audio chunks via WebSocket (paced sending enabled)
2026-01-10T12:45:51.230483137Z [err]  2026-01-10 12:45:50,778 - persistent_tts_service - INFO - üì§ Sending 13792 bytes of audio (87 chunks, 1.7s duration) via WebSocket
2026-01-10T12:45:51.230501394Z [err]  2026-01-10 12:45:50,778 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T12:45:51.230514306Z [err]  2026-01-10 12:45:50,778 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +1.7s (total: 2.2s from now)
2026-01-10T12:45:51.230529116Z [err]  2026-01-10 12:45:50,778 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768049150.778 (chunk 1/87, 160 bytes)
2026-01-10T12:45:51.230538601Z [err]  2026-01-10 12:45:50,810 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (2.2s left)
2026-01-10T12:45:52.201538215Z [err]  2026-01-10 12:45:52,106 - server - INFO - üé§ Soniox receiver alive - 16 messages received in last 10s
2026-01-10T12:45:52.218647282Z [err]  2026-01-10 12:45:52,213 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 87 CHUNKS SENT TO TELNYX in 1435ms (audio duration: 1.7s, paced after 10 chunks)
2026-01-10T12:45:52.218654678Z [err]  2026-01-10 12:45:52,213 - persistent_tts_service - INFO - ‚úÖ Sent 87 audio chunks via WebSocket (paced sending enabled)
2026-01-10T12:45:52.218661406Z [err]  2026-01-10 12:45:52,213 - persistent_tts_service - INFO - üì§ Sending 1068 bytes of audio (7 chunks, 0.1s duration) via WebSocket
2026-01-10T12:45:52.218667843Z [err]  2026-01-10 12:45:52,213 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T12:45:52.218675102Z [err]  2026-01-10 12:45:52,213 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +0.1s (total: 0.9s from now)
2026-01-10T12:45:52.218693970Z [err]  2026-01-10 12:45:52,213 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768049152.214 (chunk 1/7, 160 bytes)
2026-01-10T12:45:52.218700921Z [err]  2026-01-10 12:45:52,214 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 7 CHUNKS SENT TO TELNYX in 0ms (audio duration: 0.1s, paced after 10 chunks)
2026-01-10T12:45:52.218707079Z [err]  2026-01-10 12:45:52,214 - persistent_tts_service - INFO - ‚úÖ Sent 7 audio chunks via WebSocket (paced sending enabled)
2026-01-10T12:45:52.218713958Z [err]  2026-01-10 12:45:52,214 - persistent_tts_service - INFO - üì§ Sending 25635 bytes of audio (161 chunks, 3.2s duration) via WebSocket
2026-01-10T12:45:52.218719431Z [err]  2026-01-10 12:45:52,214 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T12:45:52.218724771Z [err]  2026-01-10 12:45:52,214 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +3.2s (total: 4.1s from now)
2026-01-10T12:45:52.220807029Z [err]  2026-01-10 12:45:52,214 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768049152.214 (chunk 1/161, 160 bytes)
2026-01-10T12:45:55.249644616Z [err]  2026-01-10 12:45:55,016 - persistent_tts_service - INFO - üéôÔ∏è [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] AGENT IS NOW SPEAKING (is_speaking=True)
2026-01-10T12:45:55.249663639Z [err]  2026-01-10 12:45:55,016 - persistent_tts_service - INFO - ‚è±Ô∏è EXTEND playback_expected_end_time: +2.0s (total: 3.3s from now)
2026-01-10T12:45:55.249671551Z [err]  2026-01-10 12:45:55,016 - persistent_tts_service - INFO - üìä [REAL TIMING] FIRST AUDIO CHUNK SENT TO TELNYX at 1768049155.016 (chunk 1/98, 160 bytes)
2026-01-10T12:45:55.249678088Z [err]  2026-01-10 12:45:55,027 - server - INFO - üì§ Audio flowing: 2344 packets sent to Soniox (5s update)
2026-01-10T12:45:55.249690921Z [err]  2026-01-10 12:45:55,015 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 161 CHUNKS SENT TO TELNYX in 2801ms (audio duration: 3.2s, paced after 10 chunks)
2026-01-10T12:45:55.249700024Z [err]  2026-01-10 12:45:55,016 - persistent_tts_service - INFO - ‚úÖ Sent 161 audio chunks via WebSocket (paced sending enabled)
2026-01-10T12:45:55.249709793Z [err]  2026-01-10 12:45:55,016 - persistent_tts_service - INFO - üì§ Sending 15604 bytes of audio (98 chunks, 2.0s duration) via WebSocket
2026-01-10T12:45:55.335908193Z [err]  2026-01-10 12:45:55,326 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (3.0s left)
2026-01-10T12:45:56.186803415Z [err]  2026-01-10 12:45:55,829 - dead_air_monitor - INFO - üîá MONITOR: Skipping silence check - audio playing (2.5s left)
2026-01-10T12:45:56.654958037Z [err]  2026-01-10 12:45:56,648 - persistent_tts_service - INFO - üìä [REAL TIMING] ALL 98 CHUNKS SENT TO TELNYX in 1632ms (audio duration: 2.0s, paced after 10 chunks)
2026-01-10T12:45:56.654981700Z [err]  2026-01-10 12:45:56,649 - persistent_tts_service - INFO - ‚úÖ Sent 98 audio chunks via WebSocket (paced sending enabled)
2026-01-10T12:45:58.351945094Z [err]  2026-01-10 12:45:58,342 - dead_air_monitor - INFO - ‚è±Ô∏è Playback expected end time passed (0.0s ago), marking agent as done speaking
2026-01-10T12:45:58.351955806Z [err]  2026-01-10 12:45:58,342 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1768049158.342565 for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:58.351970152Z [err]  2026-01-10 12:45:58,342 - core_calling_service - INFO - ü§ñ Agent stopped speaking for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:45:58.595364862Z [err]  2026-01-10 12:45:58,592 - persistent_tts_service - INFO - üîá [Call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q] FLOOR RELEASED (is_holding_floor=False)
2026-01-10T12:46:00.283525033Z [err]  2026-01-10 12:46:00,048 - server - INFO - üì§ Audio flowing: 2595 packets sent to Soniox (5s update)
2026-01-10T12:46:00.360149408Z [err]  2026-01-10 12:46:00,349 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=False, user_speaking=False, silence=2.0s, checkin_count=0/2
2026-01-10T12:46:01.368312387Z [err]  2026-01-10 12:46:00,850 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=False, user_speaking=False, silence=2.5s, checkin_count=0/2
2026-01-10T12:46:01.389891686Z [err]  2026-01-10 12:46:01,385 - server - INFO - üìû Telnyx WebSocket disconnected. Sent 2653 total packets
2026-01-10T12:46:01.389899467Z [err]  [2026-01-10 12:46:01 +0000] [5] [INFO] connection closed
2026-01-10T12:46:01.409727428Z [err]  2026-01-10 12:46:01,404 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2026-01-10T12:46:01.409735586Z [err]  2026-01-10 12:46:01,404 - server - INFO - üì® Full payload: {'data': {'event_type': 'call.playback.ended', 'id': '2768148e-3cd1-41f6-bdf8-85aa6de19c36', 'occurred_at': '2026-01-10T12:46:01.238815Z', 'payload': {'call_control_id': 'v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q', 'call_leg_id': '2eb07eb8-ee22-11f0-aa9c-02420aef93a0', 'call_session_id': '2ead92b6-ee22-11f0-9231-02420aef93a0', 'client_state': None, 'connection_id': '2777245537294877821', 'end_time': '2026-01-10T12:46:01.238815Z', 'media_name': None, 'media_url': 'api.li-ai.org/api/tts-audio/comfort_noise_continuous.mp3', 'overlay': True, 'playback_id': 'LV2J4-vlOw', 'status': 'call_hangup', 'status_detail': ''}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2026-01-10T12:46:01.409742436Z [err]  2026-01-10 12:46:01,404 - server - INFO - üéØ Event type: call.playback.ended, Call ID: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:46:01.409803381Z [err]  2026-01-10 12:46:01,405 - server - INFO - üì® ================================================
2026-01-10T12:46:01.413677852Z [err]  2026-01-10 12:46:01,410 - redis_service - INFO - ‚ûñ Removed playback LV2J4-vlOw, 0 remaining for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:46:01.413684678Z [err]  2026-01-10 12:46:01,410 - server - INFO - üîä Redis: Removed playback LV2J4-vlOw, 0 remaining
2026-01-10T12:46:01.413689381Z [err]  2026-01-10 12:46:01,410 - server - INFO - üîä ALL PLAYBACKS FINISHED (via Redis) - attempting to start silence timer
2026-01-10T12:46:01.413694926Z [err]  2026-01-10 12:46:01,412 - server - INFO - ‚úÖ Set 'agent_done_speaking' flag in Redis for worker with session to detect
2026-01-10T12:46:01.413699494Z [err]  2026-01-10 12:46:01,412 - server - INFO - ‚úÖ Found session in active_telnyx_calls: agent_speaking=False, user_speaking=False
2026-01-10T12:46:01.413704662Z [err]  2026-01-10 12:46:01,412 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1768049161.4121964 for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:46:01.413710536Z [err]  2026-01-10 12:46:01,412 - server - INFO - ‚è±Ô∏è Silence timer STARTED (memory fallback, agent wasn't marked as speaking)
2026-01-10T12:46:01.413715773Z [inf]  100.64.0.6:12936 - "POST /api/telnyx/webhook HTTP/1.1" 200
2026-01-10T12:46:01.682458745Z [err]  2026-01-10 12:46:01,672 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2026-01-10T12:46:01.682470122Z [err]  2026-01-10 12:46:01,672 - server - INFO - üì® Full payload: {'data': {'event_type': 'streaming.stopped', 'id': '5564ab7e-24d9-416f-aecc-ec3d46835ae8', 'occurred_at': '2026-01-10T12:46:01.327514Z', 'payload': {'call_control_id': 'v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q', 'call_leg_id': '2eb07eb8-ee22-11f0-aa9c-02420aef93a0', 'call_session_id': '2ead92b6-ee22-11f0-9231-02420aef93a0', 'client_state': None, 'connection_id': '2777245537294877821', 'stream_id': '6e511547-293c-4d03-8cd6-f78a07aa76d2', 'stream_params': {'stream_track': 'inbound', 'stream_url': 'wss://api.li-ai.org/api/telnyx/audio-stream'}, 'stream_type': 'websocket'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2026-01-10T12:46:01.682478859Z [err]  2026-01-10 12:46:01,672 - server - INFO - üéØ Event type: streaming.stopped, Call ID: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:46:01.682484839Z [err]  2026-01-10 12:46:01,672 - server - INFO - üì® ================================================
2026-01-10T12:46:01.682492170Z [inf]  100.64.0.7:24790 - "POST /api/telnyx/webhook HTTP/1.1" 200
2026-01-10T12:46:02.505487750Z [err]  2026-01-10 12:46:01,887 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2026-01-10T12:46:02.505495231Z [err]  2026-01-10 12:46:01,887 - server - INFO - üì® Full payload: {'data': {'event_type': 'call.hangup', 'id': 'ea662730-b6fc-47b2-9213-3a9a307a0378', 'occurred_at': '2026-01-10T12:46:01.158838Z', 'payload': {'call_control_id': 'v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q', 'call_leg_id': '2eb07eb8-ee22-11f0-aa9c-02420aef93a0', 'call_quality_stats': {'inbound': {'jitter_max_variance': '1.18', 'jitter_packet_count': '0', 'mos': '4.50', 'packet_count': '2710', 'skip_packet_count': '13'}, 'outbound': {'packet_count': '2656', 'skip_packet_count': '0'}}, 'call_session_id': '2ead92b6-ee22-11f0-9231-02420aef93a0', 'client_state': None, 'connection_id': '2777245537294877821', 'end_time': '2026-01-10T12:46:01.158838Z', 'from': '+14048000152', 'hangup_cause': 'normal_clearing', 'hangup_source': 'callee', 'sip_hangup_cause': '200', 'start_time': '2026-01-10T12:45:03.118827Z', 'to': '+17708336397'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2026-01-10T12:46:02.505505368Z [err]  2026-01-10 12:46:01,888 - server - INFO - üéØ Event type: call.hangup, Call ID: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:46:02.505513654Z [err]  2026-01-10 12:46:01,888 - server - INFO - üì® ================================================
2026-01-10T12:46:02.505521053Z [err]  2026-01-10 12:46:01,888 - server - INFO - üìû Call ended: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:46:02.505529712Z [err]  2026-01-10 12:46:01,888 - server - INFO - üìû Hangup cause: normal_clearing
2026-01-10T12:46:02.505537493Z [err]  2026-01-10 12:46:02,071 - server - INFO - üìù Updated call log: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:46:02.505545164Z [err]  2026-01-10 12:46:02,164 - server - INFO - ‚úÖ Finalized call log: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q (duration=53s, status=completed)
2026-01-10T12:46:02.517782412Z [err]  2026-01-10 12:46:02,257 - server - INFO - üì¶ Saved 11 session variables to call_log: ['now', 'customer_name', 'callerName', 'lead_id', 'qc_tracking_enabled', 'track_keywords', 'expected_commitment', 'to_number', 'phone_number', 'email', 'from_number']
2026-01-10T12:46:03.407078237Z [err]  2026-01-10 12:46:03,056 - redis_service - INFO - üì• Retrieved call data from Redis: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:46:03.407080749Z [err]  <!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en-US"> <![endif]-->
2026-01-10T12:46:03.407092746Z [err]  <!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en-US"> <![endif]-->
2026-01-10T12:46:03.407102058Z [err]  2026-01-10 12:46:03,056 - server - INFO - üìá [HANGUP] Data source: redis=Yes, memory=Yes
2026-01-10T12:46:03.407105208Z [err]  <!--[if IE 8]>    <html class="no-
2026-01-10T12:46:03.407118687Z [err]  2026-01-10 12:46:03,148 - server - INFO - üìá [HANGUP] Found call_log in MongoDB, extracting missing data...
2026-01-10T12:46:03.407129848Z [err]  2026-01-10 12:46:03,234 - server - INFO - üìá [HANGUP] After MongoDB fallback: user_id=dcafa642-6136-4096-b77d-a4cb99a62651, agent_id=bbeda238-e8d9-4d8c-b93b-1b7694581adb, to_number=+17708336397
2026-01-10T12:46:03.407133136Z [err]  2026-01-10 12:46:03,056 - server - INFO - üìá [HANGUP] Missing data from cache, checking MongoDB call_logs...
2026-01-10T12:46:03.407139837Z [err]  2026-01-10 12:46:03,235 - server - INFO - üìá [HANGUP] Final extracted data: user_id=dcafa642-6136-4096-b77d-a4cb99a62651, agent_id=bbeda238-e8d9-4d8c-b93b-1b7694581adb, to_number=+17708336397, lead_id=None, agent_name=JK First Caller-optimizer3
2026-01-10T12:46:03.407148162Z [err]  2026-01-10 12:46:03,097 - httpx - INFO - HTTP Request: POST https://n8n.outlier-agency.com/webhook/2adb150a-9e08-4053-9fa4-e47df18bf39b "HTTP/1.1 530 <none>"
2026-01-10T12:46:03.407160536Z [err]  2026-01-10 12:46:03,099 - server - WARNING - ‚ö†Ô∏è Post-call webhook returned status 530: <!doctype html>
2026-01-10T12:46:03.407206592Z [err]  2026-01-10 12:46:02,869 - server - INFO - üìä Auto-added call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q to campaign b7bd9ce7-2722-4c61-a2fc-ca1fb127d7b8
2026-01-10T12:46:03.407212814Z [err]  2026-01-10 12:46:03,053 - server - INFO - üì§ Sending post-call webhook to: https://n8n.outlier-agency.com/webhook/2adb150a-9e08-4053-9fa4-e47df18bf39b
2026-01-10T12:46:03.428288735Z [err]  2026-01-10 12:46:03,235 - server - INFO - üìá [HANGUP] Agent info keys: None
2026-01-10T12:46:03.428301389Z [err]  2026-01-10 12:46:03,235 - server - INFO - üöÄ Triggered QC analysis for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:46:03.428307738Z [err]  2026-01-10 12:46:03,235 - server - INFO - üìä Triggered Campaign QC for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:46:03.428317654Z [err]  2026-01-10 12:46:03,235 - server - INFO - üìá Triggered CRM update for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:46:03.428323128Z [err]  2026-01-10 12:46:03,235 - server - INFO - ‚úÖ Closed persistent TTS session for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:46:03.428329072Z [err]  2026-01-10 12:46:03,235 - core_calling_service - INFO - Call session v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q closed
2026-01-10T12:46:03.428334514Z [err]  2026-01-10 12:46:03,235 - server - INFO - ‚úÖ Closed CallSession for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:46:03.428339646Z [err]  2026-01-10 12:46:03,236 - redis_service - INFO - üßπ Deleted call data from Redis: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:46:03.428345022Z [err]  2026-01-10 12:46:03,236 - server - INFO - üßπ Cleaned up call session from Redis and memory: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:46:03.428350302Z [inf]  100.64.0.9:58390 - "POST /api/telnyx/webhook HTTP/1.1" 200
2026-01-10T12:46:03.428355152Z [err]  2026-01-10 12:46:03,237 - server - INFO - üîç Starting QC analysis for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:46:03.428360620Z [err]  2026-01-10 12:46:03,237 - server - INFO - üîç [AUTO-QC] Starting campaign QC check for call=v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q, user=dcafa642-6136-4096-b77d-a4cb99a62651, agent=bbeda238-e8d9-4d8c-b93b-1b7694581adb
2026-01-10T12:46:03.428385008Z [err]  2026-01-10 12:46:03,239 - server - INFO - üìá CRM update starting for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q: to_number=+17708336397, user_id=dcafa642-6136-4096-b77d-a4cb99a62651
2026-01-10T12:46:03.428390186Z [err]  2026-01-10 12:46:03,239 - server - INFO - üìá Normalized phone: +17708336397
2026-01-10T12:46:03.428410354Z [err]  2026-01-10 12:46:03,328 - server - INFO - üìù Converted transcript from 8 messages to 606 characters
2026-01-10T12:46:03.428429945Z [err]  2026-01-10 12:46:03,414 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2026-01-10T12:46:03.502786613Z [err]  2026-01-10 12:46:03,501 - qc_agents.orchestrator - INFO - No QC agent configs found, using defaults with API key
2026-01-10T12:46:03.605298573Z [err]  2026-01-10 12:46:03,590 - qc_agents.orchestrator - INFO - Using QC model: gpt-4o
2026-01-10T12:46:03.605313429Z [err]  2026-01-10 12:46:03,590 - qc_agents.orchestrator - INFO - ‚úÖ Initialized 3 QC agents for user dcafa642-6136-4096-b77d-a4cb99a62651
2026-01-10T12:46:03.605319975Z [err]  2026-01-10 12:46:03,591 - qc_agents.orchestrator - INFO - üîç Running Commitment Detector on call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:46:03.615886606Z [err]  2026-01-10 12:46:03,611 - server - INFO - üì® ========== TELNYX WEBHOOK RECEIVED ==========
2026-01-10T12:46:03.615892480Z [err]  2026-01-10 12:46:03,611 - server - INFO - üì® Full payload: {'data': {'event_type': 'call.recording.saved', 'id': '38d5400d-0609-40d1-b37b-8bef078bb5a1', 'occurred_at': '2026-01-10T12:46:03.260871Z', 'payload': {'call_control_id': 'v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q', 'call_leg_id': '2eb07eb8-ee22-11f0-aa9c-02420aef93a0', 'call_session_id': '2ead92b6-ee22-11f0-9231-02420aef93a0', 'channels': 'dual', 'client_state': None, 'connection_id': '2777245537294877821', 'end_time': '2026-01-10T12:46:01.251131Z', 'format': 'mp3', 'public_recording_urls': {}, 'recording_ended_at': '2026-01-10T12:46:01.251131Z', 'recording_id': 'fb0ccc9e-85b9-4b63-aee5-87a41ab41ec0', 'recording_started_at': '2026-01-10T12:45:09.054200Z', 'recording_urls': {'mp3': 'https://s3.amazonaws.com/telephony-recorder-prod/227803fb-1717-407d-9bd5-fd04aa27c656/2026-01-10/2eb07eb8-ee22-11f0-aa9c-02420aef93a0-1768049108948457.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIASDC5E2MJDPKMH7UW%2F20260110%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20260110T124603Z&X-Amz-Expires=600&X-Amz-SignedHeaders=host&X-Amz-Signature=47fc8547fb9e778f2ec288629d608a7fdf8ea808e436a0e4b1f764564487a37f'}, 'start_time': '2026-01-10T12:45:09.054200Z'}, 'record_type': 'event'}, 'meta': {'attempt': 1, 'delivered_to': 'https://api.li-ai.org/api/telnyx/webhook'}}
2026-01-10T12:46:03.615897462Z [err]  2026-01-10 12:46:03,611 - server - INFO - üéØ Event type: call.recording.saved, Call ID: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:46:03.615903211Z [err]  2026-01-10 12:46:03,611 - server - INFO - üì® ================================================
2026-01-10T12:46:03.615909218Z [err]  2026-01-10 12:46:03,611 - server - INFO - üéôÔ∏è Recording saved for call: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:46:03.619064847Z [err]  2026-01-10 12:46:03,617 - redis_service - WARNING - ‚ö†Ô∏è Call data not found in Redis: v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:46:03.619071071Z [err]  2026-01-10 12:46:03,617 - server - INFO - üîç Recording check: download_url=True, channels=dual, recording_id=fb0ccc9e-85b9-4b63-aee5-87a41ab41ec0, call_data=False
2026-01-10T12:46:03.712902946Z [err]  2026-01-10 12:46:03,710 - server - INFO - üíæ Saved recording URL and ID to database: fb0ccc9e-85b9-4b63-aee5-87a41ab41ec0
2026-01-10T12:46:03.712913465Z [err]  2026-01-10 12:46:03,710 - server - INFO - ‚úÖ Entering dual-channel processing
2026-01-10T12:46:03.712921398Z [err]  2026-01-10 12:46:03,710 - server - INFO - üì• Downloading DUAL-CHANNEL recording...
2026-01-10T12:46:04.453351437Z [err]  2026-01-10 12:46:03,826 - server - INFO - üîç [AUTO-QC] Call log found: transcript_turns=8, logs_count=10, status=completed
2026-01-10T12:46:04.453358833Z [err]  2026-01-10 12:46:03,839 - server - INFO - üìá CRM: Got 11 extracted variables
2026-01-10T12:46:04.453365713Z [err]  2026-01-10 12:46:03,839 - server - INFO - üìá CRM: Total variables collected: ['now', 'customer_name', 'callerName', 'lead_id', 'qc_tracking_enabled', 'track_keywords', 'expected_commitment', 'to_number', 'phone_number', 'email', 'from_number']
2026-01-10T12:46:04.453372754Z [err]  2026-01-10 12:46:04,021 - server - INFO - üìá CRM: Updated lead 288a0e8e-ff8b-4249-b2ea-b84e5cb9929e (+17708336397) - fields: ['updated_at', 'last_contact', 'last_agent_id', 'last_agent_name', 'custom_fields']
2026-01-10T12:46:04.453379545Z [err]  2026-01-10 12:46:04,108 - httpx - INFO - HTTP Request: GET https://s3.amazonaws.com/telephony-recorder-prod/227803fb-1717-407d-9bd5-fd04aa27c656/2026-01-10/2eb07eb8-ee22-11f0-aa9c-02420aef93a0-1768049108948457.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIASDC5E2MJDPKMH7UW%2F20260110%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20260110T124603Z&X-Amz-Expires=600&X-Amz-SignedHeaders=host&X-Amz-Signature=47fc8547fb9e778f2ec288629d608a7fdf8ea808e436a0e4b1f764564487a37f "HTTP/1.1 200 OK"
2026-01-10T12:46:04.453386775Z [err]  2026-01-10 12:46:04,176 - server - INFO - üîç [AUTO-QC] Agent found: name=JK First Caller-optimizer3, has_auto_qc_settings=True
2026-01-10T12:46:04.453394998Z [err]  2026-01-10 12:46:04,261 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 429 Too Many Requests"
2026-01-10T12:46:04.453401906Z [err]  2026-01-10 12:46:04,262 - qc_agents.base_agent - ERROR - Error calling LLM (openai): Client error '429 Too Many Requests' for url 'https://api.openai.com/v1/chat/completions'
2026-01-10T12:46:04.453409326Z [err]  For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429
2026-01-10T12:46:04.455449614Z [err]  2026-01-10 12:46:04,282 - server - INFO - üìä [AUTO-QC] LLM settings: provider=grok, model=grok-3
2026-01-10T12:46:04.455453183Z [err]  For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429, falling back to patterns
2026-01-10T12:46:04.455465773Z [err]  2026-01-10 12:46:04,265 - qc_agents.orchestrator - INFO - üó∫Ô∏è  Running Conversion Pathfinder on call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:46:04.455475465Z [err]  2026-01-10 12:46:04,282 - server - INFO - üìä [AUTO-QC] Running full QC analysis: call=v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q ‚Üí campaign=b7bd9ce7-2722-4c61-a2fc-ca1fb127d7b8 (tech=True, script=True, tonality=True)
2026-01-10T12:46:04.455496524Z [err]  2026-01-10 12:46:04,262 - qc_agents.commitment_detector - ERROR - Error in CommitmentDetector LLM analysis: Client error '429 Too Many Requests' for url 'https://api.openai.com/v1/chat/completions'
2026-01-10T12:46:04.456211902Z [err]  2026-01-10 12:46:04,282 - server - ERROR - ‚ùå [AUTO-QC] Error in campaign QC for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q: run_full_qc_analysis() got an unexpected keyword argument 'llm_provider'
2026-01-10T12:46:04.456221211Z [err]  2026-01-10 12:46:04,283 - server - ERROR - ‚ùå [AUTO-QC] Traceback: Traceback (most recent call last):
2026-01-10T12:46:04.456229037Z [err]    File "/app/backend/server.py", line 10079, in trigger_campaign_qc_for_call
2026-01-10T12:46:04.456235902Z [err]      await run_full_qc_analysis(
2026-01-10T12:46:04.456243077Z [err]            ^^^^^^^^^^^^^^^^^^^^^
2026-01-10T12:46:04.456252135Z [err]  TypeError: run_full_qc_analysis() got an unexpected keyword argument 'llm_provider'
2026-01-10T12:46:04.456259736Z [err]  
2026-01-10T12:46:04.456267793Z [err]  2026-01-10 12:46:04,364 - server - INFO - ‚úÖ Downloaded 209022 bytes
2026-01-10T12:46:05.528270279Z [err]  2026-01-10 12:46:04,984 - server - ERROR - ‚ùå No Soniox API key available
2026-01-10T12:46:05.528280207Z [err]  2026-01-10 12:46:04,984 - server - INFO - ‚ùå Channel 0: No speech
2026-01-10T12:46:05.528286130Z [err]  2026-01-10 12:46:04,984 - server - INFO - üìä Channel 1: 1148444 bytes
2026-01-10T12:46:05.528291401Z [err]  2026-01-10 12:46:04,984 - server - ERROR - ‚ùå No Soniox API key available
2026-01-10T12:46:05.528298281Z [err]  2026-01-10 12:46:04,984 - server - INFO - ‚ùå Channel 1: No speech
2026-01-10T12:46:05.528304206Z [err]  2026-01-10 12:46:04,984 - server - WARNING - ‚ö†Ô∏è No speech in any channel
2026-01-10T12:46:05.528311174Z [inf]  100.64.0.9:58390 - "POST /api/telnyx/webhook HTTP/1.1" 200
2026-01-10T12:46:05.528317504Z [err]  2026-01-10 12:46:04,985 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 429 Too Many Requests"
2026-01-10T12:46:05.528324849Z [err]  2026-01-10 12:46:04,986 - qc_agents.base_agent - ERROR - Error calling LLM (openai): Client error '429 Too Many Requests' for url 'https://api.openai.com/v1/chat/completions'
2026-01-10T12:46:05.528330133Z [err]  For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429
2026-01-10T12:46:05.528335365Z [err]  2026-01-10 12:46:04,986 - qc_agents.conversion_pathfinder - ERROR - Error in ConversionPathfinder LLM analysis: Client error '429 Too Many Requests' for url 'https://api.openai.com/v1/chat/completions'
2026-01-10T12:46:05.528340869Z [err]  For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429, falling back to patterns
2026-01-10T12:46:05.528547866Z [err]  2026-01-10 12:46:04,983 - server - INFO - ‚úÖ Split into 2 channels
2026-01-10T12:46:05.528554498Z [err]  2026-01-10 12:46:04,983 - server - INFO - üé§ Using STT provider: soniox for interruption detection
2026-01-10T12:46:05.528566631Z [err]  2026-01-10 12:46:04,984 - server - INFO - üìä Channel 0: 1148444 bytes
2026-01-10T12:46:05.531732988Z [err]  2026-01-10 12:46:04,987 - qc_agents.orchestrator - INFO - ‚≠ê Running Excellence Replicator on call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:46:05.531744135Z [err]  2026-01-10 12:46:05,363 - core_calling_service - INFO - ‚è∞ Check-in triggered after 7.0s silence (threshold: 7s)
2026-01-10T12:46:05.531751335Z [err]  2026-01-10 12:46:05,364 - core_calling_service - INFO - üí¨ Sending check-in #1/2: Are you still there?
2026-01-10T12:46:05.531757540Z [err]  2026-01-10 12:46:05,364 - dead_air_monitor - INFO - üí¨ Sending check-in after 7.0s silence: Are you still there?
2026-01-10T12:46:05.531763245Z [err]  2026-01-10 12:46:05,364 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:46:05.531769548Z [err]  2026-01-10 12:46:05,364 - telnyx_service - INFO - üîä Speaking text on call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q: Are you still there?...
2026-01-10T12:46:05.531775971Z [err]  2026-01-10 12:46:05,364 - telnyx_service - INFO - üîç Agent config provided: True
2026-01-10T12:46:05.531782251Z [err]  2026-01-10 12:46:05,364 - telnyx_service - INFO - üîç TTS provider from settings: elevenlabs
2026-01-10T12:46:05.531788539Z [err]  2026-01-10 12:46:05,364 - telnyx_service - INFO - üîç WebSocket TTS: False
2026-01-10T12:46:05.531804045Z [err]  2026-01-10 12:46:05,364 - telnyx_service - INFO - üéôÔ∏è Attempting elevenlabs TTS (REST)
2026-01-10T12:46:05.531810568Z [err]  2026-01-10 12:46:05,364 - server - INFO - ‚è±Ô∏è [12:46:05.364] üîä TTS REQUEST START: provider=elevenlabs, user=dcafa642, comfort_noise=True
2026-01-10T12:46:05.531819671Z [err]  2026-01-10 12:46:05,364 - server - INFO - ‚ö° Using Turbo v2.5 (high quality)
2026-01-10T12:46:05.531825375Z [err]  2026-01-10 12:46:05,364 - server - INFO - üéôÔ∏è ElevenLabs streaming TTS: voice=J5iaaqzR5zn6HFG4jV3b, model=eleven_turbo_v2_5, speed=1.1, normalization=on, ssml=True
2026-01-10T12:46:05.533946828Z [err]  2026-01-10 12:46:05,452 - key_encryption - WARNING - Failed to decrypt key, assuming unencrypted: 
2026-01-10T12:46:05.533954349Z [err]  2026-01-10 12:46:05,452 - server - INFO - üì¶ ElevenLabs Request Payload:
2026-01-10T12:46:05.533961999Z [err]  2026-01-10 12:46:05,452 - server - INFO -    Text length: 20 chars
2026-01-10T12:46:05.533967594Z [err]  2026-01-10 12:46:05,452 - server - INFO -    Text content: 'Are you still there?'
2026-01-10T12:46:05.533973875Z [err]  2026-01-10 12:46:05,452 - server - INFO -    Text bytes: b'Are you still there?'
2026-01-10T12:46:05.533983593Z [err]  2026-01-10 12:46:05,452 - server - INFO -    Model: eleven_turbo_v2_5
2026-01-10T12:46:05.533989150Z [err]  2026-01-10 12:46:05,452 - server - INFO -    Voice ID: J5iaaqzR5zn6HFG4jV3b
2026-01-10T12:46:05.533995124Z [err]  2026-01-10 12:46:05,452 - server - INFO -    URL: https://api.elevenlabs.io/v1/text-to-speech/J5iaaqzR5zn6HFG4jV3b/stream
2026-01-10T12:46:05.534000863Z [err]  2026-01-10 12:46:05,452 - server - INFO -    Full data: {'text': 'Are you still there?', 'model_id': 'eleven_turbo_v2_5', 'voice_settings': {'stability': 0.6, 'similarity_boost': 0.65, 'use_speaker_boost': True, 'speed': 1.1, 'style': 0.2}, 'apply_text_normalization': 'on', 'enable_ssml_parsing': True, 'optimize_streaming_latency': 4}
2026-01-10T12:46:05.534006946Z [err]  2026-01-10 12:46:05,452 - server - INFO - üîå Attempting ElevenLabs connection (attempt 1/2)
2026-01-10T12:46:05.534013052Z [err]  2026-01-10 12:46:05,452 - server - INFO -    Timeout: 10.0s
2026-01-10T12:46:05.534018691Z [err]  2026-01-10 12:46:05,461 - server - INFO -    ‚úì HTTP client created (0.009s)
2026-01-10T12:46:05.534024610Z [err]  2026-01-10 12:46:05,462 - server - INFO -    ‚Üí Sending POST request to ElevenLabs (optimize_latency=0)...
2026-01-10T12:46:05.647456142Z [err]  2026-01-10 12:46:05,634 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 429 Too Many Requests"
2026-01-10T12:46:05.647466378Z [err]  2026-01-10 12:46:05,635 - qc_agents.base_agent - ERROR - Error calling LLM (openai): Client error '429 Too Many Requests' for url 'https://api.openai.com/v1/chat/completions'
2026-01-10T12:46:05.647473251Z [err]  For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429
2026-01-10T12:46:05.647480287Z [err]  2026-01-10 12:46:05,635 - qc_agents.excellence_replicator - ERROR - Error in ExcellenceReplicator analysis: Client error '429 Too Many Requests' for url 'https://api.openai.com/v1/chat/completions'
2026-01-10T12:46:05.647489744Z [err]  For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429
2026-01-10T12:46:06.399159988Z [err]  2026-01-10 12:46:06,006 - server - INFO -       - First chunk: 551ms
2026-01-10T12:46:06.399172548Z [err]  2026-01-10 12:46:06,006 - server - INFO -       - All chunks: 554ms
2026-01-10T12:46:06.399228327Z [err]  2026-01-10 12:46:05,732 - qc_agents.orchestrator - INFO - ‚úÖ QC analysis stored for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:46:06.399228435Z [err]  2026-01-10 12:46:06,006 - server - INFO -    ‚úì ALL CHUNKS received: 63 chunks (0.554s)
2026-01-10T12:46:06.399243155Z [err]  2026-01-10 12:46:05,732 - server - INFO - ‚úÖ QC analysis completed for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:46:06.399248131Z [err]  2026-01-10 12:46:06,006 - server - INFO -    ‚úì Total audio size: 17599 bytes
2026-01-10T12:46:06.399259680Z [err]  2026-01-10 12:46:06,006 - server - INFO -    üìä TTS API TIMING BREAKDOWN:
2026-01-10T12:46:06.399264415Z [err]  2026-01-10 12:46:05,732 - server - INFO - üìä Scores: Commitment=50, Conversion=40, Excellence=50
2026-01-10T12:46:06.399274371Z [err]  2026-01-10 12:46:06,006 - server - INFO -       - Connection: 542ms
2026-01-10T12:46:06.399277370Z [err]  2026-01-10 12:46:05,922 - server - INFO - üìä Updated campaign_calls with QC scores for v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:46:06.399285979Z [err]  2026-01-10 12:46:05,993 - httpx - INFO - HTTP Request: POST https://api.elevenlabs.io/v1/text-to-speech/J5iaaqzR5zn6HFG4jV3b/stream "HTTP/1.1 200 OK"
2026-01-10T12:46:06.399294098Z [err]  2026-01-10 12:46:05,994 - server - INFO -    ‚úì Connection established (0.542s) [TARGET: <200ms]
2026-01-10T12:46:06.399301654Z [err]  2026-01-10 12:46:05,994 - server - INFO -    ‚úì Response status: 200
2026-01-10T12:46:06.399309002Z [err]  2026-01-10 12:46:05,994 - server - INFO -    ‚Üí Streaming audio chunks...
2026-01-10T12:46:06.399317404Z [err]  2026-01-10 12:46:06,004 - server - INFO -    ‚úì FIRST CHUNK received (0.551s, 1013 bytes) [TARGET: <300ms]
2026-01-10T12:46:06.402294503Z [err]  2026-01-10 12:46:06,320 - telnyx_service - ERROR - ‚ùå Telnyx playback failed: 422 - {
2026-01-10T12:46:06.402306289Z [err]    "errors": [
2026-01-10T12:46:06.402316382Z [err]  2026-01-10 12:46:06,190 - server - ERROR - ‚ùå Error in auto appointment detection for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q: 'str' object has no attribute 'get'
2026-01-10T12:46:06.402325366Z [err]  2026-01-10 12:46:06,007 - telnyx_service - INFO - ‚úÖ Generated 17599 bytes, saved to /tmp/tts_elevenlabs_01b2ec34551c0c3ab527c8199487051c.mp3
2026-01-10T12:46:06.402326289Z [err]  2026-01-10 12:46:06,007 - server - INFO -       - Audio generation only: 10ms
2026-01-10T12:46:06.402331708Z [err]  2026-01-10 12:46:06,007 - server - INFO - ‚è±Ô∏è [12:46:06.007] üîä TTS COMPLETE: 642ms, audio_size=17599 bytes
2026-01-10T12:46:06.402335068Z [err]  2026-01-10 12:46:06,318 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q/actions/playback_start "HTTP/1.1 422 Unprocessable Entity"
2026-01-10T12:46:06.402338011Z [err]  2026-01-10 12:46:06,007 - server - INFO - üíæ TTS CACHED: elevenlabs:Are you still there?... (17599 bytes)
2026-01-10T12:46:06.402344349Z [err]  2026-01-10 12:46:06,007 - telnyx_service - INFO - ‚è±Ô∏è  TTS generation time: 0.64s
2026-01-10T12:46:06.402350632Z [err]  2026-01-10 12:46:06,319 - telnyx_service - INFO - ‚è±Ô∏è  Playback API call time: 0.31s
2026-01-10T12:46:06.402383537Z [err]  2026-01-10 12:46:06,007 - telnyx_service - INFO - üîó Using audio URL: api.li-ai.org/api/tts-audio/tts_elevenlabs_01b2ec34551c0c3ab527c8199487051c.mp3
2026-01-10T12:46:06.402392954Z [err]  2026-01-10 12:46:06,102 - server - INFO - üìà Synced QC scores to lead 288a0e8e-ff8b-4249-b2ea-b84e5cb9929e via phone match
2026-01-10T12:46:06.402398041Z [err]  2026-01-10 12:46:06,190 - server - INFO - üè∑Ô∏è Updated lead status to 'needs_followup' based on risk level 'high'
2026-01-10T12:46:06.405892629Z [err]      {
2026-01-10T12:46:06.405901258Z [err]        "code": "90018",
2026-01-10T12:46:06.405906895Z [err]        "title": "Call has already ended",
2026-01-10T12:46:06.405913436Z [err]        "detail": "This call is no longer active and can't receive commands."
2026-01-10T12:46:06.405921762Z [err]      }
2026-01-10T12:46:06.405928575Z [err]    ]
2026-01-10T12:46:06.405935706Z [err]  }
2026-01-10T12:46:06.405942350Z [err]  2026-01-10 12:46:06,320 - telnyx_service - INFO - üì¢ Using Telnyx built-in TTS
2026-01-10T12:46:06.589399223Z [err]  2026-01-10 12:46:06,587 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q/actions/speak "HTTP/1.1 422 Unprocessable Entity"
2026-01-10T12:46:06.589408404Z [err]  2026-01-10 12:46:06,588 - telnyx_service - ERROR - ‚ùå Error speaking text: Error code: 422 - {'errors': [{'code': '90018', 'title': 'Call has already ended', 'detail': "This call is no longer active and can't receive commands."}]}
2026-01-10T12:46:06.589416175Z [err]  2026-01-10 12:46:06,588 - dead_air_monitor - INFO - ‚úÖ Check-in message sent
2026-01-10T12:46:07.402219819Z [err]  2026-01-10 12:46:07,088 - dead_air_monitor - INFO - üö© Detected 'agent_done_speaking' flag from webhook - marking agent as done
2026-01-10T12:46:07.402230863Z [err]  2026-01-10 12:46:07,088 - core_calling_service - INFO - ‚è±Ô∏è SILENCE TIMER STARTED at 1768049167.0888493 for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:46:07.402237337Z [err]  2026-01-10 12:46:07,088 - core_calling_service - INFO - ü§ñ Agent stopped speaking for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:46:10.424043816Z [err]  2026-01-10 12:46:10,097 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=False, user_speaking=False, silence=3.0s, checkin_count=1/2
2026-01-10T12:46:10.598774627Z [err]  2026-01-10 12:46:10,597 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=False, user_speaking=False, silence=3.5s, checkin_count=1/2
2026-01-10T12:46:14.479518178Z [err]  2026-01-10 12:46:14,106 - core_calling_service - INFO - ‚è∞ Check-in triggered after 7.0s silence (threshold: 7s)
2026-01-10T12:46:14.479526932Z [err]  2026-01-10 12:46:14,107 - core_calling_service - INFO - üí¨ Sending FINAL check-in #2/2: Are you still there?
2026-01-10T12:46:14.479564445Z [err]  2026-01-10 12:46:14,107 - core_calling_service - INFO - ‚ö†Ô∏è Will end call if no response after next silence timeout
2026-01-10T12:46:14.479578673Z [err]  2026-01-10 12:46:14,107 - dead_air_monitor - INFO - üí¨ Sending check-in after 7.0s silence: Are you still there?
2026-01-10T12:46:14.479587233Z [err]  2026-01-10 12:46:14,107 - core_calling_service - INFO - ü§ñ Agent started speaking for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:46:14.479595192Z [err]  2026-01-10 12:46:14,107 - telnyx_service - INFO - üîä Speaking text on call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q: Are you still there?...
2026-01-10T12:46:14.479603591Z [err]  2026-01-10 12:46:14,107 - telnyx_service - INFO - üîç Agent config provided: True
2026-01-10T12:46:14.479612826Z [err]  2026-01-10 12:46:14,107 - telnyx_service - INFO - üîç TTS provider from settings: elevenlabs
2026-01-10T12:46:14.479620817Z [err]  2026-01-10 12:46:14,107 - telnyx_service - INFO - üîç WebSocket TTS: False
2026-01-10T12:46:14.479629108Z [err]  2026-01-10 12:46:14,107 - telnyx_service - INFO - üéôÔ∏è Attempting elevenlabs TTS (REST)
2026-01-10T12:46:14.479637613Z [err]  2026-01-10 12:46:14,107 - server - INFO - üíæ TTS CACHE HIT: Returning cached audio (17599 bytes)
2026-01-10T12:46:14.479644776Z [err]  2026-01-10 12:46:14,107 - telnyx_service - INFO - ‚è±Ô∏è  TTS generation time: 0.00s
2026-01-10T12:46:14.479654165Z [err]  2026-01-10 12:46:14,109 - telnyx_service - INFO - ‚úÖ Generated 17599 bytes, saved to /tmp/tts_elevenlabs_01b2ec34551c0c3ab527c8199487051c.mp3
2026-01-10T12:46:14.479667580Z [err]  2026-01-10 12:46:14,110 - telnyx_service - INFO - üîó Using audio URL: api.li-ai.org/api/tts-audio/tts_elevenlabs_01b2ec34551c0c3ab527c8199487051c.mp3
2026-01-10T12:46:14.483122704Z [err]  2026-01-10 12:46:14,417 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q/actions/playback_start "HTTP/1.1 422 Unprocessable Entity"
2026-01-10T12:46:14.483128517Z [err]  2026-01-10 12:46:14,418 - telnyx_service - INFO - ‚è±Ô∏è  Playback API call time: 0.31s
2026-01-10T12:46:14.483133870Z [err]  2026-01-10 12:46:14,418 - telnyx_service - ERROR - ‚ùå Telnyx playback failed: 422 - {
2026-01-10T12:46:14.483140085Z [err]    "errors": [
2026-01-10T12:46:14.483146003Z [err]      {
2026-01-10T12:46:14.483152533Z [err]        "code": "90018",
2026-01-10T12:46:14.483158533Z [err]        "title": "Call has already ended",
2026-01-10T12:46:14.483164490Z [err]        "detail": "This call is no longer active and can't receive commands."
2026-01-10T12:46:14.483168685Z [err]      }
2026-01-10T12:46:14.483173392Z [err]    ]
2026-01-10T12:46:14.483177726Z [err]  }
2026-01-10T12:46:14.483181795Z [err]  2026-01-10 12:46:14,419 - telnyx_service - INFO - üì¢ Using Telnyx built-in TTS
2026-01-10T12:46:14.690025960Z [err]  2026-01-10 12:46:14,685 - httpx - INFO - HTTP Request: POST https://api.telnyx.com/v2/calls/v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q/actions/speak "HTTP/1.1 422 Unprocessable Entity"
2026-01-10T12:46:14.690040553Z [err]  2026-01-10 12:46:14,686 - telnyx_service - ERROR - ‚ùå Error speaking text: Error code: 422 - {'errors': [{'code': '90018', 'title': 'Call has already ended', 'detail': "This call is no longer active and can't receive commands."}]}
2026-01-10T12:46:14.690048773Z [err]  2026-01-10 12:46:14,686 - dead_air_monitor - INFO - ‚úÖ Check-in message sent
2026-01-10T12:46:20.439476257Z [err]  2026-01-10 12:46:20,205 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=True, user_speaking=False, silence=0.0s, checkin_count=2/2
2026-01-10T12:46:20.743359919Z [err]  2026-01-10 12:46:20,708 - dead_air_monitor - INFO - üîç MONITOR: agent_speaking=True, user_speaking=False, silence=0.0s, checkin_count=2/2
2026-01-10T12:46:21.516200971Z [err]  2026-01-10 12:46:21,423 - server - INFO - üé§ Soniox receiver alive - 9 messages received in last 10s
2026-01-10T12:46:21.516206655Z [err]  2026-01-10 12:46:21,423 - server - ERROR - ‚ùå Soniox error: {'tokens': [], 'final_audio_proc_ms': 47280, 'total_audio_proc_ms': 52320, 'error_code': 408, 'error_message': 'Request timeout.'}
2026-01-10T12:46:21.516211250Z [err]  2026-01-10 12:46:21,423 - server - INFO - ‚úÖ Soniox receive loop ended normally
2026-01-10T12:46:21.516220635Z [err]  2026-01-10 12:46:21,424 - dead_air_monitor - INFO - üîá Dead air monitoring cancelled for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:46:21.516225311Z [err]  2026-01-10 12:46:21,424 - dead_air_monitor - INFO - üîá Dead air monitoring stopped for call v3:HAthGByfra9BUS24UuhZYqxhT6hFtAIkfH6aHnXT1DMjlY8JN0j67Q
2026-01-10T12:46:21.516230110Z [err]  2026-01-10 12:46:21,424 - server - INFO - üîá Dead air monitoring task cancelled
2026-01-10T12:46:23.561141093Z [err]  2026-01-10 12:46:23,425 - soniox_service - ERROR - ‚ùå Error closing Soniox session: received 1000 (OK); then sent 1000 (OK)
2026-01-10T12:46:23.561145242Z [err]  2026-01-10 12:46:23,426 - server - INFO - üîå Telnyx WebSocket disconnected